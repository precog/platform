check process auth-v1 with pidfile /var/run/precog/auth-v1.pid/
  start program = "/usr/sbin/service auth-v1 start" with timeout 30 seconds
  stop program  = "/usr/sbin/service auth-v1 stop"
  if failed port 30102 protocol http and request '/blueeyes/services/auth/v1/health' with timeout 15 seconds for 3 cycles 
     then exec "/opt/precog/threaddump.sh auth-v1"
  if failed port 30102 protocol http and request '/blueeyes/services/auth/v1/health' with timeout 15 seconds for 8 cycles 
     then restart
  if 3 restarts within 10 cycles then timeout
  group auth-v1

# Watch server log for issues
check file auth-v1.server.log with path /var/log/precog/auth-v1.server.log
  if match "Exception" for 3 cycles then alert
  depends on auth-v1
  group auth-v1


#check file auth-v1-health.log with path /var/log/precog/auth-v1-health.log
#  start program  = "/usr/bin/touch -c /var/log/precog/auth-v1-health.log && /bin/chown precog:precog /var/log/precog/auth-v1-health.log"
#  stop program  = "/bin/rm /var/log/precog/auth-v1-health.log"
#  if timestamp > 20 minutes then alert
#  if match "ERROR" for 3 cycles then alert
#  depends on auth-v1
#  group auth-v1
