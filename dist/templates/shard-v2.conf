server {
  port = 30070
  sslPort = 30071
  sslEnable = false

  log {
    level = "info"
    console = true
    filename = "/var/log/precog/shard-v2.server.log"
    roll = "daily"
    use_parents = false
  }
}

services {
  analytics {
    v2 {
      requestLog {
        enabled = false
        file = "/var/log/precog/shard-v2.request.log"
        roll = "daily"
        fields = "date time c-ip cs-method cs-uri-stem cs-uri-query sc-status cs-content"
        formatter = "w3cs"
        excludePaths = ["/analytics/v2/health"]
      }

      queryExecutor {
        systemId = "dev"
        precog {
          storage {
            root = /opt/precog/shard/
          }
        }

        ingest {
          enabled = true
          buffer_size = 2000000
          max_parallel = 1
          failure_log_root = /opt/precog/shard/ingest_failures
        }

        kafka {
          batch {
            host = localhost
            port = 9092
            topic = precog_central_event_store
          }
        }

        zookeeper {
          hosts = localhost:2181
        }
      }

      security {
        service {
          protocol = "http"
          host = "localhost"
          port = 30062
          path = "/security/v1/"
        }
        cached = true
        rootKey = "CE1DE42A-D9EA-4494-8240-680230067C7C"
      }

      accounts {
        service {
          protocol = "http"
          host = "localhost"
          port = 30064
          path = "/accounts/v1/"
          user = "operations@precog.com"
          password = "1234"
        }
      }

      jobs {
        service {
          protocol = "http"
          host = "localhost"
          port = 30066
          path = "/jobs/v1/"
        }
      }
    }
  }
}
