define("app/util/traverse",[],function(){function e(e){return e.split(/\./g)}return{get:function(t,n){var r=e(n),i=t,s=r.shift();while(s&&i)i=i[s],s=r.shift();return"undefined"==typeof i?i:JSON.parse(JSON.stringify(i))},set:function(t,n,r){var i=e(n),s=t,o=i.shift();while(i.length>0)"undefined"==typeof s[o]&&(s[o]={}),s=s[o],o=i.shift();var u=JSON.stringify(r);return JSON.stringify(s[o])!==u?(s[o]=JSON.parse(u),!0):!1},remove:function(t,n){var r=e(n),i=t,s=r.shift(),o;while(r.length>0){o=r.shift(),i=i[s];if("undefined"==typeof i)return;s=o}delete i[s]}}}),function(e){function l(){var e=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),e=!0,window.localStorage.removeItem("_tmptest")}catch(t){}if(e)try{window.localStorage&&(n=window.localStorage,u="localStorage")}catch(i){}else if("globalStorage"in window)try{window.globalStorage&&(n=window.globalStorage[window.location.hostname],u="globalStorage")}catch(s){}else{r=document.createElement("link");if(!r.addBehavior){r=null;return}r.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(r),r.load("jStorage");var o="{}";try{o=r.getAttribute("jStorage")}catch(a){}n.jStorage=o,u="userDataBehavior"}c(),d()}function c(){if(n.jStorage)try{t=o(String(n.jStorage))}catch(e){n.jStorage="{}"}else n.jStorage="{}";i=n.jStorage?String(n.jStorage).length:0}function h(){try{n.jStorage=s(t),r&&(r.setAttribute("jStorage",n.jStorage),r.save("jStorage")),i=n.jStorage?String(n.jStorage).length:0}catch(e){}}function p(e){if(!e||typeof e!="string"&&typeof e!="number")throw new TypeError("Key name must be string or numeric");if(e=="__jstorage_meta")throw new TypeError("Reserved key name");return!0}function d(){var e,n,r,i=Infinity,s=!1;clearTimeout(a);if(!t.__jstorage_meta||typeof t.__jstorage_meta.TTL!="object")return;e=+(new Date),r=t.__jstorage_meta.TTL;for(n in r)r.hasOwnProperty(n)&&(r[n]<=e?(delete r[n],delete t[n],s=!0):r[n]<i&&(i=r[n]));i!=Infinity&&(a=setTimeout(d,i-e)),s&&h()}if(!e||!(e.toJSON||Object.toJSON||window.JSON))throw new Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");var t={},n={jStorage:"{}"},r=null,i=0,s=e.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),o=e.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(e){return String(e).evalJSON()},u=!1,a,f={isXML:function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1},encode:function(e){if(!this.isXML(e))return!1;try{return(new XMLSerializer).serializeToString(e)}catch(t){try{return e.xml}catch(n){}}return!1},decode:function(e){var t="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t},n;return t?(n=t.call("DOMParser"in window&&new DOMParser||window,e,"text/xml"),this.isXML(n)?n:!1):!1}};e.jStorage={version:"0.1.7.0",set:function(e,n,r){return p(e),r=r||{},f.isXML(n)?n={_is_xml:!0,xml:f.encode(n)}:typeof n=="function"?n=null:n&&typeof n=="object"&&(n=o(s(n))),t[e]=n,isNaN(r.TTL)?h():this.setTTL(e,r.TTL),n},get:function(e,n){return p(e),e in t?t[e]&&typeof t[e]=="object"&&t[e]._is_xml&&t[e]._is_xml?f.decode(t[e].xml):t[e]:typeof n=="undefined"?null:n},deleteKey:function(e){return p(e),e in t?(delete t[e],t.__jstorage_meta&&typeof t.__jstorage_meta.TTL=="object"&&e in t.__jstorage_meta.TTL&&delete t.__jstorage_meta.TTL[e],h(),!0):!1},setTTL:function(e,n){var r=+(new Date);return p(e),n=Number(n)||0,e in t?(t.__jstorage_meta||(t.__jstorage_meta={}),t.__jstorage_meta.TTL||(t.__jstorage_meta.TTL={}),n>0?t.__jstorage_meta.TTL[e]=r+n:delete t.__jstorage_meta.TTL[e],h(),d(),!0):!1},flush:function(){return t={},h(),!0},storageObj:function(){function e(){}return e.prototype=t,new e},index:function(){var e=[],n;for(n in t)t.hasOwnProperty(n)&&n!="__jstorage_meta"&&e.push(n);return e},storageSize:function(){return i},currentBackend:function(){return u},storageAvailable:function(){return!!u},reInit:function(){var e,t;if(r&&r.addBehavior){e=document.createElement("link"),r.parentNode.replaceChild(e,r),r=e,r.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(r),r.load("jStorage"),t="{}";try{t=r.getAttribute("jStorage")}catch(i){}n.jStorage=t,u="userDataBehavior"}c()}},l()}(window.$||window.jQuery),define("libs/jquery/jstorage/jstorage",function(){}),define("app/util/storage",["app/util/traverse","libs/jquery/jstorage/jstorage"],function(e){return function(t,n){function o(e,t){if(null==e||"object"!=typeof e)return e;if(e instanceof Date){var n=new Date;return n.setTime(e.getTime()),n}if(e instanceof Array){var n=[],r=e.length;r>t&&(r=t);for(var i=0;i<r;++i)n[i]=o(e[i],t);return n}if(e instanceof Object){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=o(e[s],t));return n}throw new Error("Unable to copy obj! Its type isn't supported.")}function u(){var e=o(s,r),n=$.jStorage.set(t,e);i=!1}function a(){l&&console.log("Load Storage Data"),$.jStorage.reInit();var e=$.jStorage.get(t);$.extend(s,e)}function c(e,t,n){if(!l)return;var r="undefined"!=typeof n&&JSON.stringify(n)||"",i=100,s="...";r.length>i-s.length&&(r=r.substr(0,i-s.length)+s),console.log((e&&e+" "||"")+t+(r&&": "+r||""))}var r=500,i=!1,s=$.extend({},n),f=function(){i=!0,clearInterval(this.killDelayedSave),this.killDelayedSave=setTimeout(function(){u()},100)};a();var l=!1,h={get:function(t,n){var r=e.get(s,t);return c("get",t,r),"undefined"==typeof r?n:r},set:function(t,n,r){e.set(s,t,n)&&(c("set",t,n),this.save(r))},remove:function(t,n){c("del",t),e.remove(s,t),this.save(n)},keys:function(t){var n=e.get(s,t);if(n&&"object"==typeof n){var r=[];for(var i in n)n.hasOwnProperty(i)&&r.push(i);return r}return[]},save:function(e){e?u():f()},load:function(){a()},clear:function(){$.jStorage.flush()},toString:function(){return JSON.stringify(s)},all:function(){return s},dirty:function(){return i}};return h}}),define("app/util/utils",[],function(){return{arrayDiff:function(e,t){return e.filter(function(e){return!(t.indexOf(e)>-1)})},guid:function(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},sortNodes:function(e,t){var n=$(e).map(function(){return this});n.sort(t);var r=n[0]&&n[0].parentNode;$(n).each(function(e){r.appendChild(n[e])})},truncate:function(e,t,n){return t=t||25,n=n||"...",e.length>=t&&(e=e.substr(0,t-n.length)+n),e},normalizeQueryName:function(e){return e=e.trim().toLowerCase(),e.substr(0,1)==="/"&&(e=e.substr(1)),e.replace(/[ \-.]+/g,"_"),e},arrayRemove:function(e,t){var n=e.indexOf(t);return n<0?e:(e.splice(n,1),e)},validateQueryName:function(e,t,n){return e.match(/^[a-z0-9][a-z0-9 ]*[a-z0-9]$/i)?n.queryExist(t)?"a query with this identifier already exists":null:"the name can only include alpha-numeric characters, white spaces (but not in the beginning and at the end) and must be at least 2 characters long."}}}),define("app/util/storagemonitor",["app/util/traverse","app/util/storage","app/util/utils"],function(e,t,n){function o(e,t){if(typeof e!=typeof t)return!1;if(e instanceof Array){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}if(e instanceof Object){var r=$.map(e,function(e,t){return t}),i=$.map(t,function(e,t){return t});if(!o(r,i))return!1;for(var n=0;n<r.length;n++)if(!o(e[r[n]],t[r[n]]))return!1;return!0}return e===t}function u(){var t=!1;for(var n=0;n<r.length;n++){s=r[n];if(s.monitor.paths.length==0||s.dirty())return;t||($.jStorage.reInit(),t=!0);var i=s.all(),u=s.monitor.paths.length,a=$.jStorage.get(s.monitor.key,{}),f,l;for(var c=0;c<u;c++){f=s.monitor.paths[c],l=e.get(a,f);if("undefined"==typeof s.monitor.last[f]){s.monitor.last[f]=l;continue}if(o(s.monitor.last[f],l))continue;if(o(l,e.get(i,f)))continue;s.monitor.last[f]=l,e.set(i,f,l),$(s).trigger(f,[l])}}}function a(e){return r.indexOf(e)>=0}function f(e){n.arrayRemove(r,e).push(e),r.length===1&&setInterval(u,5e3)}function l(e){n.arrayRemove(r,e),r.length===0&&clearInterval(i)}var r=[],i,s;return function(e,n){var r=t(e,n),i;return r.monitor=i=function(){var t={};return{paths:[],last:{},key:e,start:function(e){f(r)},end:function(){l()},monitoring:function(){return a(r)},bind:function(e,n){t[e]=t[e]&&++t[e]||1,t[e]===1&&r.monitor.paths.push(e),$(r).on(e,n)},unbind:function(e,n){if(!t[e])return;t[e]--,t[e]===0&&r.monitor.paths.splice(r.monitor.paths.indexOf(e),1),$(r).off(e,n)}}}(),r}}),define("app/util/config",["app/util/storagemonitor"],function(e){var t="pg-labcoat-config",n={theme:"gray",indentUsingSpaces:!1,tabSize:2,softTabs:!0,disableClientCache:!0,ioPanesVertical:!0,queryLimit:1e3};return e(t,n)}),define("rtext",["module"],function(e){var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,r=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i=typeof location!="undefined"&&location.href,s=i&&location.protocol&&location.protocol.replace(/\:/,""),o=i&&location.hostname,u=i&&(location.port||undefined),a=[],f=e.config&&e.config()||{},l,c;return l={version:"2.0.1",strip:function(e){if(e){e=e.replace(n,"");var t=e.match(r);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(n=0;n<3;n+=1){r=t[n];try{e=new ActiveXObject(r)}catch(i){}if(e){t=[r];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=l.xdRegExp.exec(e),s,o,u;return i?(s=i[2],o=i[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===t)&&(!o||o.toLowerCase()===n.toLowerCase())&&(!u&&!o||u===r)):!0},finishLoad:function(e,t,n,r){n=t?l.strip(n):n,f.isBuild&&(a[e]=n),r(n)},load:function(e,t,n,r){if(r.isBuild&&!r.inlineText){n();return}f.isBuild=r.isBuild;var a=l.parseName(e),c=a.moduleName+"."+a.ext,h=t.toUrl(c),p=f.useXhr||l.useXhr;!i||p(h,s,o,u)?l.get(h,function(t){l.finishLoad(e,a.strip,t,n)},function(e){n.error&&n.error(e)}):t([c],function(e){l.finishLoad(a.moduleName+"."+a.ext,a.strip,e,n)})},write:function(e,t,n,r){if(a.hasOwnProperty(t)){var i=l.jsEscape(a[t]);n.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,n,r,i){var s=l.parseName(t),o=s.moduleName+"."+s.ext,u=n.toUrl(s.moduleName+"."+s.ext)+".js";l.load(o,n,function(t){var n=function(e){return r(u,e)};n.asModule=function(e,t){return r.asModule(e,u,t)},l.write(e,o,n,i)},i)}},typeof process!="undefined"&&process.versions&&!!process.versions.node?(c=require.nodeRequire("fs"),l.get=function(e,t){var n=c.readFileSync(e,"utf8");n.indexOf("﻿")===0&&(n=n.substring(1)),t(n)}):l.createXhr()?l.get=function(e,t,n){var r=l.createXhr();r.open("GET",e,!0),f.onXhr&&f.onXhr(r,e),r.onreadystatechange=function(i){var s,o;r.readyState===4&&(s=r.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=r,n(o)):t(r.responseText))},r.send(null)}:typeof Packages!="undefined"&&(l.get=function(e,t){var n="utf-8",r=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),n)),o,u,a="";try{o=new java.lang.StringBuffer,u=s.readLine(),u&&u.length()&&u.charAt(0)===65279&&(u=u.substring(1)),o.append(u);while((u=s.readLine())!==null)o.append(i),o.append(u);a=String(o.toString())}finally{s.close()}t(a)}),l}),define("rtext!templates/layout.full.html",[],function(){return'<div class="pg-labcoat ui-layout-center">\n    <div class="pg-mainbar ui-layout-north pg-pane ui-widget-header"></div>\n    <div class="pg-system ui-layout-west pg-pane">\n        <div class="pg-folders ui-layout-center pg-pane">\n            <div class="pg-toolbar ui-layout-north pg-pane ui-widget-header"></div>\n            <div class="pg-tree ui-layout-center pg-pane"></div>\n        </div>\n        <div class="pg-queries ui-layout-south pg-pane">\n            <div class="pg-toolbar ui-layout-north pg-pane ui-widget-header"></div>\n            <div class="pg-queries ui-layout-center pg-pane"></div>\n        </div>\n    </div>\n    <div class="pg-main ui-layout-center pg-pane">\n        <div class="pg-editor-support ui-layout-center pg-pane">\n            <div class="pg-editor ui-layout-center pg-pane">\n                <div class="pg-io ui-layout-center pg-pane">\n                    <div class="pg-input ui-layout-center pg-pane">\n                        <div class="pg-toolbar ui-layout-north pg-pane ui-widget-header"></div>\n                        <div class="pg-code-editor ui-layout-center pg-pane"></div>\n                    </div>\n                    <div class="pg-output ui-layout-south pg-pane">\n                        <div class="pg-toolbar ui-layout-north pg-pane ui-widget-header"></div>\n                        <div class="pg-result ui-layout-center pg-pane"></div>\n                    </div>\n                </div>\n                <div class="pg-statusbar ui-layout-south pg-pane ui-widget-header"></div>\n            </div>\n            <div class="pg-support ui-layout-east pg-pane"></div>\n        </div>\n<!--\n        <div class="ui-layout-south pg-pane"></div>\n-->\n    </div>\n</div>'}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),define("libs/jquery/ui/jquery.ui.core",function(){}),function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?0:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?0:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)}(jQuery),define("libs/jquery/ui/jquery.ui.position",function(){}),function(e,t){var n=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n=0,i;(i=t[n])!=null;n++)try{e(i).triggerHandler("remove")}catch(s){}r(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(r){var i=n.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(r[u]=e.isPlainObject(a)?e.widget.extend({},r[u],a):a);return r},e.widget.bridge=function(r,i){var s=i.prototype.widgetFullName;e.fn[r]=function(o){var u=typeof o=="string",a=n.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var n,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+r+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+r+" widget instance");n=i[o].apply(i,a);if(n!==i&&n!==t)return f=n&&n.jquery?f.pushStack(n.get()):n,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(e,t){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetName,this),e.data(n,this.widgetFullName,this),this._bind({remove:"destroy"}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind("."+this.widgetName).removeData(this.widgetName).removeData(this.widgetFullName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind("."+this.widgetName),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_bind:function(t,n){n?(t=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element);var r=this;e.each(n,function(n,i){function s(){if(r.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof i=="string"?r[i]:i).apply(r,arguments)}typeof i!="string"&&(s.guid=i.guid=i.guid||s.guid||jQuery.guid++);var o=n.match(/^(\w+)\s*(.*)$/),u=o[1]+"."+r.widgetName,a=o[2];a?r.widget().delegate(a,u,s):t.bind(u,s)})},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._bind(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._bind(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),define("libs/jquery/ui/jquery.ui.widget",function(){}),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"@VERSION",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1
,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),define("libs/jquery/ui/jquery.ui.mouse",function(){}),function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()}).mouseleave(function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,n=this.options,r={},i=this,s=this.originalMousePosition,o=this.axis,u=e.pageX-s.left||0,a=e.pageY-s.top||0,f=this._change[o];if(!f)return!1;var l=f.apply(this,[e,u,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey)l=this._updateRatio(l,e);return l=this._respectSize(l,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}if(!(!e.browser.msie||!e(n).is(":hidden")&&!e(n).parents(":hidden").length))continue;i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.browser.msie&&e.browser.version<7,i=r?1:0,s=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),define("libs/jquery/ui/jquery.ui.resizable",function(){}),function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"@VERSION",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c="ui-state-hover"+(a?"":" ui-state-active"),h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter.button",function(){if(u.disabled)return;e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click.button",function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus.button",function(){t.buttonElement.addClass(h)}).bind("blur.button",function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change.button",function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown.button",function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup.button",function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(u.disabled||s)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup.button",function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",n))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"@VERSION",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),define("libs/jquery/ui/jquery.ui.button",function(){}),function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==r)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==r&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this
.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],r=[],i=this._connectWith();if(i&&t)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=r.length-1;s>=0;s--)r[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");for(var t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],i=this._connectWith();if(i&&this.ready)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&(r.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a))}}for(var s=r.length-1;s>=0;s--){var f=r[s][1],l=r[s][0];for(var u=0,c=l.length;u<c;u++){var h=e(l[u]);h.data(this.widgetName+"-item",f),n.push({item:h,instance:f,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(n.style.visibility="hidden"),n},update:function(e,i){if(r&&!n.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else if(this.currentContainer!=this.containers[r]){var s=1e4,o=null,u=this.positionAbs[this.containers[r].floating?"left":"top"];for(var a=this.items.length-1;a>=0;a--){if(!e.contains(this.containers[r].element[0],this.items[a].item[0]))continue;var f=this.containers[r].floating?this.items[a].item.offset().left:this.items[a].item.offset().top;Math.abs(f-u)<s&&(s=Math.abs(f-u),o=this.items[a],this.direction=f-u>0?"down":"up")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i==this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())});if(!e.contains(this.element[0],this.currentItem[0])){n||r.push(function(e){this._trigger("remove",e,this._uiHash())});for(var i=this.containers.length-1;i>=0;i--)e.contains(this.containers[i].element[0],this.currentItem[0])&&!n&&(r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[i])),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[i])))}for(var i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),define("libs/jquery/ui/jquery.ui.sortable",function(){}),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins
.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),define("libs/jquery/ui/jquery.ui.draggable",function(){}),function($){function isStr(e){return $.type(e)==="string"}function runPluginCallbacks(Instance,a_fn){if($.isArray(a_fn))for(var i=0,c=a_fn.length;i<c;i++){var fn=a_fn[i];try{isStr(fn)&&(fn=eval(fn)),$.isFunction(fn)&&fn(Instance)}catch(ex){}}}var min=Math.min,max=Math.max,round=Math.floor;$.layout={version:"1.3.rc30.51",revision:.033005,language:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpenTip:"Not enough room to show this pane.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size",pane:"pane",selector:"selector",errButton:"Error Adding Button \n\nInvalid ",errContainerMissing:"UI Layout Initialization Error\n\nThe specified layout-container does not exist.",errCenterPaneMissing:"UI Layout Initialization Error\n\nThe center-pane element does not exist.\n\nThe center-pane is a required element.",errContainerHeight:"UI Layout Initialization Warning\n\nThe layout-container \"CONTAINER\" has no height.\n\nTherefore the layout is 0-height and hence 'invisible'!"},browser:{mozilla:!!$.browser.mozilla,webkit:!!$.browser.webkit||!!$.browser.safari,msie:!!$.browser.msie,isIE6:!!$.browser.msie&&$.browser.version==6,version:$.browser.version},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"Top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"Bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"Right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"Left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(e){var t=$(e),n=t.data("layout")||t.data("parentLayout");if(n){var r=n.container;if(r.data("layoutPane"))return r;var i=r.closest("."+$.layout.defaults.panes.paneClass);if(i.data("layoutPane"))return i}return null},getParentPaneInstance:function(e){var t=$.layout.getParentPaneElem(e);return t?t.data("layoutPane"):null},getParentLayoutInstance:function(e){var t=$.layout.getParentPaneElem(e);return t?t.data("parentLayout"):null},getEventObject:function(e){return typeof e=="object"&&e.stopPropagation?e:null},parsePaneName:function(e){var t=$.layout.getEventObject(e);return t?(t.stopPropagation(),$(this).data("layoutEdge")):e},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&$.effects.slide}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height")},getScrollbarSize:function(e){var t=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),window.scrollbarWidth=n.width,window.scrollbarHeight=n.height,e.match(/^(width|height)$/)?n[e]:n},showInvisibly:function(e,t){if(!e)return{};e.jquery||(e=$(e));var n={display:e.css("display"),visibility:e.css("visibility")};return t||n.display==="none"?(e.css({display:"block",visibility:"hidden"}),n):{}},getElementDimensions:function(e){var t={},n=t.css={},r={},i,s,o=$.layout.cssNum,u=e.offset();return t.offsetLeft=u.left,t.offsetTop=u.top,$.each("Left,Right,Top,Bottom".split(","),function(o,u){i=n["border"+u]=$.layout.borderWidth(e,u),s=n["padding"+u]=$.layout.cssNum(e,"padding"+u),r[u]=i+s,t["inset"+u]=s}),t.offsetWidth=e.innerWidth(),t.offsetHeight=e.innerHeight(),t.outerWidth=e.outerWidth(),t.outerHeight=e.outerHeight(),t.innerWidth=max(0,t.outerWidth-r.Left-r.Right),t.innerHeight=max(0,t.outerHeight-r.Top-r.Bottom),n.width=e.width(),n.height=e.height(),n.top=o(e,"top",!0),n.bottom=o(e,"bottom",!0),n.left=o(e,"left",!0),n.right=o(e,"right",!0),t},getElementCSS:function(e,t){var n={},r=e[0].style,i=t.split(","),s="Top,Bottom,Left,Right".split(","),o="Color,Style,Width".split(","),u,a,f,l,c,h;for(l=0;l<i.length;l++){u=i[l];if(u.match(/(border|padding|margin)$/))for(c=0;c<4;c++){a=s[c];if(u==="border")for(h=0;h<3;h++)f=o[h],n[u+a+f]=r[u+a+f];else n[u+a]=r[u+a]}else n[u]=r[u]}return n},cssWidth:function(e,t){var n=$.layout.borderWidth,r=$.layout.cssNum;if(t<=0)return 0;if(!$.support.boxModel)return t;var i=t-n(e,"Left")-n(e,"Right")-r(e,"paddingLeft")-r(e,"paddingRight");return max(0,i)},cssHeight:function(e,t){var n=$.layout.borderWidth,r=$.layout.cssNum;if(t<=0)return 0;if(!$.support.boxModel)return t;var i=t-n(e,"Top")-n(e,"Bottom")-r(e,"paddingTop")-r(e,"paddingBottom");return max(0,i)},cssNum:function(e,t,n){e.jquery||(e=$(e));var r=$.layout.showInvisibly(e),i=$.curCSS(e[0],t,!0),s=n&&i=="auto"?i:parseInt(i,10)||0;return e.css(r),s},borderWidth:function(e,t){e.jquery&&(e=e[0]);var n="border"+t.substr(0,1).toUpperCase()+t.substr(1);return $.curCSS(e,n+"Style",!0)==="none"?0:parseInt($.curCSS(e,n+"Width",!0),10)||0},isMouseOverElem:function(e,t){var n=$(t||this),r=n.offset(),i=r.top,s=r.left,o=s+n.outerWidth(),u=i+n.outerHeight(),a=e.pageX,f=e.pageY;return $.layout.browser.msie&&a<0&&f<0||a>=s&&a<=o&&f>=i&&f<=u},msg:function(e,t,n,r){function a(){var e=$.support.fixedPosition?"fixed":"absolute",t=$('<div id="layoutLogger" style="position: '+e+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">'+'<div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;">'+'<span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div>'+'<ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul>'+"</div>").appendTo("body");return t.css("left",$(window).width()-t.outerWidth()-5),$.ui.draggable&&t.draggable({handle:":first-child"}),t}if($.isPlainObject(e)&&window.debugData){typeof t=="string"?(r=n,n=t):typeof n=="object"&&(r=n,n=null);var i=n||"log( <object> )",s=$.extend({sort:!1,returnHTML:!1,display:!1},r);t===!0||s.display?debugData(e,i,s):window.console&&console.log(debugData(e,i,s))}else if(t)alert(e);else if(window.console)console.log(e);else{var o="#layoutLogger",u=$(o);u.length||(u=a()),u.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>")}}};var lang=$.layout.language;$.layout.defaults={name:"",containerSelector:"",containerClass:"ui-layout-container",scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,autoBindCustomButtons:!1,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:lang.Close,togglerTip_closed:lang.Open,togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,noRoomToOpenTip:lang.noRoomToOpenTip,resizerTip:lang.Resize,sliderTip:lang.Slide,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:!1,showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,childOptions:null,initChildLayout:!0,destroyChildLayout:!0,resizeChildLayout:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},$.layout.optionsMap={layout:"stateManagement,effects,zIndexes,name,zIndex,scrollToBookmarkOnLoad,showErrorMessages,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,onresizeall,onresizeall_start,onresizeall_end,onload,onunload,autoBindCustomButtons".split(","),center:"paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,maskContents,maskObjects,liveContentResizing,childOptions,initChildLayout,resizeChildLayout,destroyChildLayout,onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end".split(","),noDefault:"paneSelector,resizerCursor,customHotkey".split(",")},$.layout.transformData=function(e){var t={panes:{},center:{}},n,r,i,s,o,u,a,f;if(typeof e!="object")return t;for(i in e){r=t,n=$.layout.optionsMap.layout,u=e[i],s=i.split("__"),f=s.length-1;for(a=0;a<=f;a++)o=s[a],a===f?r[o]=u:r[o]||(r[o]={}),r=r[o]}return t},$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",resizeNestedLayout:"resizeChildLayout",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure"},renameOptions:function(e){function o(t,n){var r=t.split("."),i=r.length-1,s={branch:e,key:r[i]},o=0,u,a;for(;o<i;o++)u=r[o],s.branch[u]==undefined?n?s.branch=s.branch[u]={}:s.branch={}:s.branch=s.branch[u];return s}var t=$.layout.backwardCompatibility.map,n,r,i;for(var s in t)n=o(s),i=n.branch[n.key],i!==undefined&&(r=o(t[s],!0),r.branch[r.key]=i,delete n.branch[n.key])},renameAllOptions:function(e){var t=$.layout.backwardCompatibility.renameOptions;return t(e),e.defaults&&(typeof e.panes!="object"&&(e.panes={}),$.extend(!0,e.panes,e.defaults),delete e.defaults),e.panes&&t(e.panes),$.each($.layout.config.allPanes,function(n,r){e[r]&&t(e[r])}),e}},$.fn.layout=function(opts){function keyDown(e){if(!e)return!0;var t=e.keyCode;if(t<33)return!0;var n={38:"north",40:"south",37:"west",39:"east"},r=e.altKey,i=e.shiftKey,s=e.ctrlKey,o=s&&t>=37&&t<=40,u,a,f,l;return o&&options[n[t]].enableCursorHotkey?l=n[t]:(s||i)&&$.each(_c.borderPanes,function(e,n){u=options[n],a=u.customHotkey,f=u.customHotkeyModifier;if(i&&f=="SHIFT"||s&&f=="CTRL"||s&&i)if(a&&t===(isNaN(a)||a<=9?a.toUpperCase().charCodeAt(0):a))return l=n,!1}),!l||!$Ps[l]||!options[l].closable||state[l].isHidden?!0:(toggle(l),e.stopPropagation(),e.returnValue=!1,!1)}function allowOverflow(e){if(!isInitialized())return;this&&this.tagName&&(e=this);var t;isStr(e)?t=$Ps[e]:$(e).data("layoutRole")?t=$(e):$(e).parents().each(function(){if($(this).data("layoutRole"))return t=$(this),!1});if(!t||!t.length)return;var n=t.data("layoutEdge"),r=state[n];r.cssSaved&&resetOverflow(n);if(r.isSliding||r.isResizing||r.isClosed){r.cssSaved=!1;return}var i={zIndex:options.zIndexes.resizer_normal+1},s={},o=t.css("overflow"),u=t.css("overflowX"),a=t.css("overflowY");o!="visible"&&(s.overflow=o,i.overflow="visible"),u&&!u.match(/visible|auto/)&&(s.overflowX=u,i.overflowX="visible"),a&&!a.match(/visible|auto/)&&(s.overflowY=u,i.overflowY="visible"),r.cssSaved=s,t.css(i),$.each(_c.allPanes,function(e,t){t!=n&&resetOverflow(t)})}function resetOverflow(e){if(!isInitialized())return;this&&this.tagName&&(e=this);var t;isStr(e)?t=$Ps[e]:$(e).data("layoutRole")?t=$(e):$(e).parents().each(function(){if($(this).data("layoutRole"))return t=$(this),!1});if(!t||!t.length)return;var n=t.data("layoutEdge"),r=state[n],i=r.cssSaved||{};!r.isSliding&&!r.isResizing&&t.css("zIndex",options.zIndexes.pane_normal),t.css(i),r.cssSaved=!1}var browser=$.layout.browser,lang=$.layout.language,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,elCSS=$.layout.getElementCSS,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,options=$.extend(!0,{},$.layout.defaults),effects=options.effects=$.extend(!0,{},$.layout.effects),state={id:"layout"+$.now(),initialized:!1,container:{},north:{},south:{},east:{},west:{},center:{}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(e,t,n){timer.clear(e),timer.data[e]=setTimeout(t,n)},clear:function(e){var t=timer.data;t[e]&&(clearTimeout(t[e]),delete t[e])}},_log=function(e,t){$.layout.msg(options.name+" / "+e,t&&options.showErrorMessages)},_runCallbacks=function(evtName,pane,skipBoundEvents){var o=pane?options[pane]:options,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,lng.length-4):"",fn=o[lng],retVal="NC",args=[];return!fn&&shrt&&(fn=o[shrt]),fn&&(isStr(fn)&&(fn.match(/,/)?(args=fn.split(","),fn=eval(args[0])):fn=eval(fn)),$.isFunction(fn)&&(args.length?retVal=fn(args[1]):pane&&$Ps[pane]?retVal=fn(pane,$Ps[pane],state[pane],options[pane],options.name):retVal=fn(Instance,state,options,options.name))),!skipBoundEvents&&retVal!==!1&&(pane?($Ps[pane].triggerHandler("layoutpane"+lng,[pane,$Ps[pane],state[pane],options[pane],options.name]),shrt&&$Ps[pane].triggerHandler("layoutpane"+shrt,[pane,$Ps[pane],state[pane],options[pane],options.name])):$N.triggerHandler("layout"+lng,[pane,$Ps[pane],state[pane],options[pane],options.name])),(evtName==="onresize_end"||evtName==="onsizecontent_end")&&resizeChildLayout(pane),retVal},_fixIframe=function(e){if(browser.mozilla)return;var t=$Ps[e];state[e].tagName==="IFRAME"?t.css(_c.hidden).css(_c.visible):t.find("IFRAME").css(_c.hidden).css(_c.visible)},cssSize=function(e,t){var n=_c[e].dir=="horz"?cssH:cssW;return n($Ps[e],t)},cssMinDims=function(e){var t=$Ps[e],n=_c[e].dir,r={minWidth:1001-cssW(t,1e3),minHeight:1001-cssH(t,1e3)};return n==="horz"&&(r.minSize=r.minHeight),n==="vert"&&(r.minSize=r.minWidth),r},setOuterWidth=function(e,t,n){var r=e,i;isStr(e)?r=$Ps[e]:e.jquery||(r=$(e)),i=cssW(r,t),r.css({width:i}),i>0?n&&r.data("autoHidden")&&r.innerHeight()>0&&(r.show().data("autoHidden",!1),browser.mozilla||r.css(_c.hidden).css(_c.visible)):n&&!r.data("autoHidden")&&r.hide().data("autoHidden",!0)},setOuterHeight=function(e,t,n){var r=e,i;isStr(e)?r=$Ps[e]:e.jquery||(r=$(e)),i=cssH(r,t),r.css({height:i,visibility:"visible"}),i>0&&r.innerWidth()>0?n&&r.data("autoHidden")&&(r.show().data("autoHidden",!1),browser.mozilla||r.css(_c.hidden).css(_c.visible)):n&&!r.data("autoHidden")&&r.hide().data("autoHidden",!0)},setOuterSize=function(e,t,n){_c[pane].dir=="horz"?setOuterHeight(e,t,n):setOuterWidth(e,t,n)},_parseSize=function(e,t,n){n||(n=_c[e].dir),isStr(t)&&t.match(/%/)&&(t=t==="100%"?-1:parseInt(t,10)/100);if(t===0)return 0;if(t>=1)return parseInt(t,10);var r=options,i=0;n=="horz"?i=sC.innerHeight-($Ps.north?r.north.spacing_open:0)-($Ps.south?r.south.spacing_open:0):n=="vert"&&(i=sC.innerWidth-($Ps.west?r.west.spacing_open:0)-($Ps.east?r.east.spacing_open:0));if(t===-1)return i;if(t>0)return round(i*t);if(e=="center")return 0;var s=n==="horz"?"height":"width",o=$Ps[e],u=s==="height"?$Cs[e]:!1,a=$.layout.showInvisibly(o),f=o.css(s),l=u?u.css(s):0;return o.css(s,"auto"),u&&u.css(s,"auto"),t=s==="height"?o.outerHeight():o.outerWidth(),o.css(s,f).css(a),u&&u.css(s,l),t},getPaneSize=function(e,t){var n=$Ps[e],r=options[e],i=state[e],s=t?r.spacing_open:0,o=t?r.spacing_closed:0;return!n||i.isHidden?0:i.isClosed||i.isSliding&&t?o:_c[e].dir==="horz"?n.outerHeight()+s:n.outerWidth()+s},setSizeLimits=function(e,t){if(!isInitialized())return;var n=options[e],r=state[e],i=_c[e],s=i.dir,o=i.side.toLowerCase(),u=i.sizeType.toLowerCase(),a=t!=undefined?t:r.isSliding,f=$Ps[e],l=n.spacing_open,c=_c.oppositeEdge[e],h=state[c],p=$Ps[c],d=!p||h.isVisible===!1||h.isSliding?0:s=="horz"?p.outerHeight():p.outerWidth(),v=(!p||h.isHidden?0:options[c][h.isClosed!==!1?"spacing_closed":"spacing_open"])||0,m=s=="horz"?sC.innerHeight:sC.innerWidth,g=cssMinDims("center"),y=s=="horz"?max(options.center.minHeight,g.minHeight):max(options.center.minWidth,g.minWidth),b=m-l-(a?0:_parseSize("center",y,s)+d+v),w=r.minSize=max(_parseSize(e,n.minSize),cssMinDims(e).minSize),E=r.maxSize=min(n.maxSize?_parseSize(e,n.maxSize):1e5,b),S=r.resizerPosition={},x=sC.insetTop,T=sC.insetLeft,N=sC.innerWidth,C=sC.innerHeight,k=n.spacing_open;switch(e){case"north":S.min=x+w,S.max=x+E;break;case"west":S.min=T+w,S.max=T+E;break;case"south":S.min=x+C-E-k,S.max=x+C-w-k;break;case"east":S.min=T+N-E-k,S.max=T+N-w-k}},calcNewCenterPaneDims=function(){var e={top:getPaneSize("north",!0),bottom:getPaneSize("south",!0),left:getPaneSize("west",!0),right:getPaneSize("east",!0),width:0,height:0};return e.width=sC.innerWidth-e.left-e.right,e.height=sC.innerHeight-e.bottom-e.top,e.top+=sC.insetTop,e.bottom+=sC.insetBottom,e.left+=sC.insetLeft,e.right+=sC.insetRight,e},getHoverClasses=function(e,t){var n=$(e),r=n.data("layoutRole"),i=n.data("layoutEdge"),s=options[i],o=s[r+"Class"],u="-"+i,a="-open",f="-closed",l="-sliding",c="-hover ",h=n.hasClass(o+f)?f:a,p=h===f?a:f,d=o+c+(o+u+c)+(o+h+c)+(o+u+h+c);return t&&(d+=o+p+c+(o+u+p+c)),r=="resizer"&&n.hasClass(o+l)&&(d+=o+l+c+(o+u+l+c)),$.trim(d)},addHover=function(e,t){var n=$(t||this);e&&n.data("layoutRole")==="toggler"&&e.stopPropagation(),n.addClass(getHoverClasses(n))},removeHover=function(e,t){var n=$(t||this);n.removeClass(getHoverClasses(n,!0))},onResizerEnter=function(e){$.fn.disableSelection&&$("body").disableSelection()},onResizerLeave=function(e,t){var n=t||this,r=$(n).data("layoutEdge"),i=r+"ResizerLeave";timer.clear(r+"_openSlider"),timer.clear(i),t?!state[r].isResizing&&$.fn.enableSelection&&$("body").enableSelection():timer.set(i,function(){onResizerLeave(e,n)},200)},_create=function(){initOptions();var e=options;return state.creatingLayout=!0,runPluginCallbacks(Instance,$.layout.onCreate),!1===_runCallbacks("onload_start")?"cancel":(_initContainer(),initHotkeys(),$(window).bind("unload."+sID,unload),runPluginCallbacks(Instance,$.layout.onLoad),e.initPanes&&_initLayoutElements(),delete state.creatingLayout,state.initialized)},isInitialized=function(){return state.initialized||state.creatingLayout?!0:_initLayoutElements()},_initLayoutElements=function(e){var t=options;if(!$N.is(":visible"))return!e&&browser.webkit&&$N[0].tagName==="BODY"&&setTimeout(function(){_initLayoutElements(!0)},50),!1;if(!getPane("center").length)return options.showErrorMessages&&_log(lang.errCenterPaneMissing,!0),!1;state.creatingLayout=!0,$.extend(sC,elDims($N)),initPanes();if(t.scrollToBookmarkOnLoad){var n=self.location;n.hash&&n.replace(n.hash)}return Instance.hasParentLayout?t.resizeWithWindow=!1:t.resizeWithWindow&&$(window).bind("resize."+sID,windowResize),delete state.creatingLayout,state.initialized=!0,runPluginCallbacks(Instance,$.layout.onReady),_runCallbacks("onload_end"),!0},_initChildLayouts=function(){$.each(_c.allPanes,function(e,t){options[t].initChildLayout&&createChildLayout(t)})},createChildLayout=function(e,t){var n=evtPane.call(this,e),r=$Ps[n],i=children;if(r){var s=$Cs[n],o=t||options[n].childOptions,u="layout",a=o.containerSelector?r.find(o.containerSelector):s||r,f=a.length,l=f?i[n]=a.data(u)||null:null;!l&&f&&o&&(l=i[n]=a.eq(0).layout(o)||null),l&&(l.hasParentLayout=!0)}Instance[n].child=i[n]},windowResize=function(){var e=Number(options.resizeWithWindowDelay);e<10&&(e=100),timer.clear("winResize"),timer.set("winResize",function(){timer.clear("winResize"),timer.clear("winResizeRepeater");var e=elDims($N);(e.innerWidth!==sC.innerWidth||e.innerHeight!==sC.innerHeight)&&resizeAll()},e),timer.data.winResizeRepeater||setWindowResizeRepeater()},setWindowResizeRepeater=function(){var e=Number(options.resizeWithWindowMaxDelay);e>0&&timer.set("winResizeRepeater",function(){setWindowResizeRepeater(),resizeAll()},e)},unload=function(){var e=options;_runCallbacks("onunload_start"),runPluginCallbacks(Instance,$.layout.onUnload),_runCallbacks("onunload_end")},_initContainer=function(){var e=$N[0],t=sC.tagName=e.tagName,n=sC.id=e.id,r=sC.className=e.className,i=options,s=i.name,o=t==="BODY",u="overflow,position,margin,padding,border",a="layoutCSS",f={},l="hidden",c=$N.data("parentLayout"),h=$N.data("layoutEdge"),p=c&&h;sC.selector=$N.selector.split(".slice")[0],sC.ref=(i.name?i.name+" layout / ":"")+t+(n?"#"+n:r?".["+r+"]":""),$N.data({layout:Instance,layoutContainer:sID}).addClass(i.containerClass);var d={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"},s;for(s in d)$N.bind("layout"+s.toLowerCase()+"."+sID,Instance[d[s]||s]);p&&(Instance.hasParentLayout=!0,c[h].child=c.children[h]=$N.data("layout"));if(!$N.data(a)){if(o){f=$.extend(elCSS($N,u),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")});var v=$("html");v.data(a,{height:"auto",overflow:v.css("overflow"),overflowX:v.css("overflowX"),overflowY:v.css("overflowY")})}else f=elCSS($N,u+",top,bottom,left,right,width,height,overflow,overflowX,overflowY");$N.data(a,f)}try{if(o)$("html").css({height:"100%",overflow:l,overflowX:l,overflowY:l}),$("body").css({position:"relative",height:"100%",overflow:l,overflowX:l,overflowY:l,margin:0,padding:0,border:"none"}),$.extend(sC,elDims($N));else{f={overflow:l,overflowX:l,overflowY:l};var m=$N.css("position"),g=$N.css("height");!p&&(!m||!m.match(/fixed|absolute|relative/))&&(f.position="relative"),$N.css(f),$N.is(":visible")&&($.extend(sC,elDims($N)),i.showErrorMessages&&sC.innerHeight<1&&_log(lang.errContainerHeight.replace(/CONTAINER/,sC.ref),!0))}}catch(y){}},initHotkeys=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,function(e,t){var n=options[t];if(n.enableCursorHotkey||n.customHotkey)return $(document).bind("keydown."+sID,keyDown),!1})},initOptions=function(){function c(e){var t=options[e],n=options.panes;t.fxSettings||(t.fxSettings={}),n.fxSettings||(n.fxSettings={}),$.each(["_open","_close","_size"],function(r,i){var s="fxName"+i,o="fxSpeed"+i,u="fxSettings"+i,a=t[s]=t[s]||n[s]||t.fxName||n.fxName||"none";if(a==="none"||!$.effects||!$.effects[a]||!options.effects[a])a=t[s]="none";var f=options.effects[a]||{},l=f.all||null,c=f[e]||null;t[o]=t[o]||n[o]||t.fxSpeed||n.fxSpeed||null,t[u]=$.extend({},l,c,n.fxSettings,t.fxSettings,n[u],t[u])}),delete t.fxName,delete t.fxSpeed,delete t.fxSettings}var e,t,n,r,i,s,o,u;opts=$.layout.transformData(opts),opts=$.layout.backwardCompatibility.renameAllOptions(opts);if(!$.isEmptyObject(opts.panes)){e=$.layout.optionsMap.noDefault;for(s=0,o=e.length;s<o;s++)r=e[s],delete opts.panes[r];e=$.layout.optionsMap.layout;for(s=0,o=e.length;s<o;s++)r=e[s],delete opts.panes[r]}e=$.layout.optionsMap.layout;var a=$.layout.config.optionRootKeys;for(r in opts)i=opts[r],$.inArray(r,a)<0&&$.inArray(r,e)<0&&(opts.panes[r]||(opts.panes[r]=$.isPlainObject(i)?$.extend(!0,{},i):i),delete opts[r]);$.extend(!0,options,opts),$.each(_c.allPanes,function(n,i){_c[i]=$.extend(!0,{},_c.panes,_c[i]),t=options.panes,u=options[i];if(i==="center"){e=$.layout.optionsMap.center;for(n=0,o=e.length;n<o;n++)r=e[n],!opts.center[r]&&(opts.panes[r]||!u[r])&&(u[r]=t[r])}else u=options[i]=$.extend({},t,u),c(i),u.resizerClass||(u.resizerClass="ui-layout-resizer"),u.togglerClass||(u.togglerClass="ui-layout-toggler");u.paneClass||(u.paneClass="ui-layout-pane")});var f=opts.zIndex,l=options.zIndexes;f>0&&(l.pane_normal=f,l.content_mask=max(f+1,l.content_mask),l.resizer_normal=max(f+2,l.resizer_normal)),delete options.panes},getPane=function(e){var t=options[e].paneSelector;if(t.substr(0,1)==="#")return $N.find(t).eq(0);var n=$N.children(t).eq(0);return n.length?n:$N.children("form:first").children(t).eq(0)},initPanes=function(){$.each(_c.allPanes,function(e,t){addPane(t,!0)}),initHandles(),$.each(_c.borderPanes,function(e,t){$Ps[t]&&state[t].isVisible&&(setSizeLimits(t),makePaneFit(t))}),sizeMidPanes("center"),$.each(_c.allPanes,function(e,t){var n=options[t];$Ps[t]&&(state[t].isVisible&&(sizeContent(t),n.triggerEventsOnLoad?_runCallbacks("onresize_end",t):resizeChildLayout(t)),n.initChildLayout&&n.childOptions&&createChildLayout(t))})},addPane=function(e,t){if(!t&&!isInitialized())return;var n=options[e],r=state[e],i=_c[e],s=r.fx,o=i.dir,u=n.spacing_open||0,a=e==="center",f={},l=$Ps[e],c,h,p;l?removePane(e,!1,!0,!1):$Cs[e]=!1,l=$Ps[e]=getPane(e);if(!l.length){$Ps[e]=!1;return}if(!l.data("layoutCSS")){var d="position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";l.data("layoutCSS",elCSS(l,d))}Instance[e]={name:e,pane:$Ps[e],content:$Cs[e],options:options[e],state:state[e],child:children[e]},l.data({parentLayout:Instance,layoutPane:Instance[e],layoutEdge:e,layoutRole:"pane"}).css(i.cssReq).css("zIndex",options.zIndexes.pane_normal).css(n.applyDemoStyles?i.cssDemo:{}).addClass(n.paneClass+" "+n.paneClass+"-"+e).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var v={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"manualSizePane",sizePane:"manualSizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildLayout:"",resizeChildLayout:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"},m;for(m in v)l.bind("layoutpane"+m.toLowerCase()+"."+sID,Instance[v[m]||m]);initContent(e,!1),a||(c=r.size=_parseSize(e,n.size),h=_parseSize(e,n.minSize)||1,p=_parseSize(e,n.maxSize)||1e5,c>0&&(c=max(min(c,p),h)),r.isClosed=!1,r.isSliding=!1,r.isResizing=!1,r.isHidden=!1,r.pins||(r.pins=[])),r.tagName=l[0].tagName,r.edge=e,r.noRoom=!1,r.isVisible=!0;switch(e){case"north":f.top=sC.insetTop,f.left=sC.insetLeft,f.right=sC.insetRight;break;case"south":f.bottom=sC.insetBottom,f.left=sC.insetLeft,f.right=sC.insetRight;break;case"west":f.left=sC.insetLeft;break;case"east":f.right=sC.insetRight;break;case"center":}o==="horz"?f.height=cssH(l,c):o==="vert"&&(f.width=cssW(l,c)),l.css(f),o!="horz"&&sizeMidPanes(e,!0),n.initClosed&&n.closable&&!n.initHidden?close(e,!0,!0):n.initHidden||n.initClosed?hide(e):r.noRoom||l.css("display","block"),l.css("visibility","visible"),n.showOverflowOnHover&&l.hover(allowOverflow,resetOverflow),state.initialized&&(initHandles(e),initHotkeys(e),resizeAll(),r.isVisible&&(n.triggerEventsOnLoad?_runCallbacks("onresize_end",e):resizeChildLayout(e)),n.initChildLayout&&n.childOptions&&createChildLayout(e))},initHandles=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,function(e,t){var n=$Ps[t];$Rs[t]=!1,$Ts[t]=!1;if(!n)return;var r=options[t],i=state[t],s=_c[t],o=r.resizerClass,u=r.togglerClass,a=s.side.toLowerCase(),f=i.isVisible?r.spacing_open:r.spacing_closed,l="-"+t,c=i.isVisible?"-open":"-closed",h=Instance[t],p=h.resizer=$Rs[t]=$("<div></div>"),d=h.toggler=r.closable?$Ts[t]=$("<div></div>"):!1;!i.isVisible&&r.slidable&&p.attr("title",r.sliderTip).css("cursor",r.sliderCursor),p.attr("id",r.paneSelector.substr(0,1)=="#"?r.paneSelector.substr(1)+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(r.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(o+" "+o+l).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).appendTo($N),d&&(d.attr("id",r.paneSelector.substr(0,1)=="#"?r.paneSelector.substr(1)+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(r.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(u+" "+u+l).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo(p),r.togglerContent_open&&$("<span>"+r.togglerContent_open+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",t).addClass("content content-open").css("display","none").appendTo(d),r.togglerContent_closed&&$("<span>"+r.togglerContent_closed+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(d),enableClosable(t)),initResizable(t),i.isVisible?setAsOpen(t):(setAsClosed(t),bindStartSlidingEvent(t,!0))}),sizeHandles()},initContent=function(e,t){if(!isInitialized())return;var n=options[e],r=n.contentSelector,i=Instance[e],s=$Ps[e],o;r&&(o=i.content=$Cs[e]=n.findNestedContent?s.find(r).eq(0):s.children(r).eq(0)),o&&o.length?(o.data("layoutRole","content"),o.data("layoutCSS")||o.data("layoutCSS",elCSS(o,"height")),o.css(_c.content.cssReq),n.applyDemoStyles&&
(o.css(_c.content.cssDemo),s.css(_c.content.cssDemoPane)),state[e].content={},t!==!1&&sizeContent(e)):i.content=$Cs[e]=!1},initResizable=function(e){var t=$.layout.plugins.draggable,n;e=e?e.split(","):_c.borderPanes,$.each(e,function(e,n){var i=options[n];if(!t||!$Ps[n]||!i.resizable)return i.resizable=!1,!0;var s=state[n],o=options.zIndexes,u=_c[n],a=u.dir=="horz"?"top":"left",f=_c.oppositeEdge[n],l=n+",center,"+f+(u.dir=="horz"?",west,east":""),c=$Ps[n],h=$Rs[n],p=i.resizerClass,d=0,v,m,g=p+"-drag",y=p+"-"+n+"-drag",b=p+"-dragging",w=p+"-"+n+"-dragging",E=p+"-dragging-limit",S=p+"-"+n+"-dragging-limit",x=!1;s.isClosed||h.attr("title",i.resizerTip).css("cursor",i.resizerCursor),h.draggable({containment:$N[0],axis:u.dir=="horz"?"y":"x",delay:0,distance:1,grid:i.resizingGrid,helper:"clone",opacity:i.resizerDragOpacity,addClasses:!1,zIndex:o.resizer_drag,start:function(e,t){i=options[n],s=state[n],m=i.livePaneResizing;if(!1===_runCallbacks("ondrag_start",n))return!1;s.isResizing=!0,timer.clear(n+"_closeSlider"),setSizeLimits(n),v=s.resizerPosition,d=t.position[a],h.addClass(g+" "+y),x=!1,$("body").disableSelection(),showMasks(l)},drag:function(e,t){x||(t.helper.addClass(b+" "+w).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),x=!0,s.isSliding&&$Ps[n].css("zIndex",o.pane_sliding));var u=0;t.position[a]<v.min?(t.position[a]=v.min,u=-1):t.position[a]>v.max&&(t.position[a]=v.max,u=1),u?(t.helper.addClass(E+" "+S),window.defaultStatus=u>0&&n.match(/north|west/)||u<0&&n.match(/south|east/)?lang.maxSizeWarning:lang.minSizeWarning):(t.helper.removeClass(E+" "+S),window.defaultStatus=""),m&&Math.abs(t.position[a]-d)>=i.liveResizingTolerance&&(d=t.position[a],r(e,t,n))},stop:function(e,t){$("body").enableSelection(),window.defaultStatus="",h.removeClass(g+" "+y),s.isResizing=!1,r(e,t,n,!0,l)}})});var r=function(e,t,n,r,i){var s=t.position,o=_c[n],u=options[n],a=state[n],f;switch(n){case"north":f=s.top;break;case"west":f=s.left;break;case"south":f=sC.offsetHeight-s.top-u.spacing_open;break;case"east":f=sC.offsetWidth-s.left-u.spacing_open}var l=f-sC["inset"+o.side];if(!r){if(Math.abs(l-a.size)<u.liveResizingTolerance)return;manualSizePane(n,l,!1,!0),sizeMasks()}else!1!==_runCallbacks("ondrag_end",n)&&manualSizePane(n,l,!1,!0),hideMasks(),a.isSliding&&i&&showMasks(i,!0)}},sizeMask=function(){var e=$(this),t=e.data("layoutMask"),n=state[t];n.tagName=="IFRAME"&&n.isVisible&&e.css({top:n.offsetTop,left:n.offsetLeft,width:n.outerWidth,height:n.outerHeight})},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(e,t){var n=e?e.split(","):$.layout.config.allPanes,r=options.zIndexes,i,s;$.each(n,function(e,n){s=state[n],i=options[n],s.isVisible&&(!t&&i.maskContents||i.maskObjects)&&getMasks(n).each(function(){sizeMask.call(this),this.style.zIndex=s.isSliding?r.pane_sliding+1:r.pane_normal+1,this.style.display="block"})})},hideMasks=function(){var e;$.each($.layout.config.borderPanes,function(t,n){if(state[n].isResizing)return e=!0,!1}),e||$Ms.hide()},getMasks=function(e){var t=$([]),n,r=0,i=$Ms.length;for(;r<i;r++)n=$Ms.eq(r),n.data("layoutMask")===e&&(t=t.add(n));return t.length?t:createMasks(e)},createMasks=function(e){var t=$Ps[e],n=state[e],r=options[e],i=options.zIndexes,s=$([]),o,u,a,f,l;if(!r.maskContents&&!r.maskObjects)return s;for(l=0;l<(r.maskObjects?2:1);l++)o=r.maskObjects&&l==0,u=document.createElement(o?"iframe":"div"),a=$(u).data("layoutMask",e),u.className="ui-layout-mask ui-layout-mask-"+e,f=u.style,f.display="block",f.position="absolute",o&&(u.frameborder=0,u.src="about:blank",f.opacity=0,f.filter="Alpha(Opacity='0')",f.border=0),n.tagName=="IFRAME"?(f.zIndex=i.pane_normal+1,$N.append(u)):(a.addClass("ui-layout-mask-inside-pane"),f.zIndex=r.maskZindex||i.content_mask,f.top=0,f.left=0,f.width="100%",f.height="100%",t.append(u)),s=s.add(u),$Ms=$Ms.add(u);return s},destroy=function(e){$(window).unbind("."+sID),$(document).unbind("."+sID),$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID),$Ms.remove(),$.each(_c.allPanes,function(t,n){removePane(n,!1,!0,e)});var t="layoutCSS";$N.data(t)&&!$N.data("layoutRole")&&$N.css($N.data(t)).removeData(t),sC.tagName==="BODY"&&($N=$("html")).data(t)&&$N.css($N.data(t)).removeData(t),runPluginCallbacks(Instance,$.layout.onDestroy),unload();for(n in Instance)n.match(/^(container|options)$/)||delete Instance[n];return Instance.destroyed=!0,Instance},removePane=function(e,t,n,r){if(!isInitialized())return;var i=evtPane.call(this,e),s=$Ps[i],o=$Cs[i],u=$Rs[i],a=$Ts[i];s&&$.isEmptyObject(s.data())&&(s=!1),o&&$.isEmptyObject(o.data())&&(o=!1),u&&$.isEmptyObject(u.data())&&(u=!1),a&&$.isEmptyObject(a.data())&&(a=!1),s&&s.stop(!0,!0);var f=options[i],l=state[i],c="layout",h="layoutCSS",p=children[i]||(s?s.data(c):0)||(o?o.data(c):0)||null,d=r!==undefined?r:f.destroyChildLayout;d&&p&&!p.destroyed&&(p.destroy(!0),p.destroyed&&(p=null));if(s&&t&&!p)s.remove();else if(s&&s[0]){var v=f.paneClass,m=v+"-"+i,g="-open",y="-sliding",b="-closed",w=[v,v+g,v+b,v+y,m,m+g,m+b,m+y];$.merge(w,getHoverClasses(s,!0)),s.removeClass(w.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID),o&&o.data(c)?(o.width(o.width()),p.resizeAll()):o&&o.css(o.data(h)).removeData(h).removeData("layoutRole"),s.data(c)||s.css(s.data(h)).removeData(h)}a&&a.remove(),u&&u.remove(),Instance[i]=$Ps[i]=$Cs[i]=$Rs[i]=$Ts[i]=children[i]=!1,l={removed:!0},n||resizeAll()},_hidePane=function(e){var t=$Ps[e],n=options[e],r=t[0].style;n.useOffscreenClose?(t.data(_c.offscreenReset)||t.data(_c.offscreenReset,{left:r.left,right:r.right}),t.css(_c.offscreenCSS)):t.hide().removeData(_c.offscreenReset)},_showPane=function(e){var t=$Ps[e],n=options[e],r=_c.offscreenCSS,i=t.data(_c.offscreenReset),s=t[0].style;t.show().removeData(_c.offscreenReset),n.useOffscreenClose&&i&&(s.left==r.left&&(s.left=i.left),s.right==r.right&&(s.right=i.right))},hide=function(e,t){if(!isInitialized())return;var n=evtPane.call(this,e),r=options[n],i=state[n],s=$Ps[n],o=$Rs[n];if(!s||i.isHidden)return;if(state.initialized&&!1===_runCallbacks("onhide_start",n))return;i.isSliding=!1,o&&o.hide(),!state.initialized||i.isClosed?(i.isClosed=!0,i.isHidden=!0,i.isVisible=!1,state.initialized||_hidePane(n),sizeMidPanes(_c[n].dir==="horz"?"":"center"),(state.initialized||r.triggerEventsOnLoad)&&_runCallbacks("onhide_end",n)):(i.isHiding=!0,close(n,!1,t))},show=function(e,t,n,r){if(!isInitialized())return;var i=evtPane.call(this,e),s=options[i],o=state[i],u=$Ps[i],a=$Rs[i];if(!u||!o.isHidden)return;if(!1===_runCallbacks("onshow_start",i))return;o.isSliding=!1,o.isShowing=!0,t===!1?close(i,!0):open(i,!1,n,r)},toggle=function(e,t){if(!isInitialized())return;var n=evtObj(e),r=evtPane.call(this,e),i=state[r];n&&n.stopImmediatePropagation(),i.isHidden?show(r):i.isClosed?open(r,!!t):close(r)},_closePane=function(e,t){var n=$Ps[e],r=state[e];_hidePane(e),r.isClosed=!0,r.isVisible=!1},close=function(e,t,n,r){function v(){f.isMoving=!1,bindStartSlidingEvent(i,!0);var e=_c.oppositeEdge[i];state[e].noRoom&&(setSizeLimits(e),makePaneFit(e)),hideMasks(),!r&&(state.initialized||a.triggerEventsOnLoad)&&(h||_runCallbacks("onclose_end",i),h&&_runCallbacks("onshow_end",i),p&&_runCallbacks("onhide_end",i))}var i=evtPane.call(this,e);if(!state.initialized&&$Ps[i]){_closePane(i);return}if(!isInitialized())return;var s=$Ps[i],o=$Rs[i],u=$Ts[i],a=options[i],f=state[i],l=_c[i],c,h,p,d;$N.queue(function(e){if(!s||!a.closable&&!f.isShowing&&!f.isHiding||!t&&f.isClosed&&!f.isShowing)return e();var r=!f.isShowing&&!1===_runCallbacks("onclose_start",i);h=f.isShowing,p=f.isHiding,d=f.isSliding,delete f.isShowing,delete f.isHiding;if(r)return e();c=!n&&!f.isClosed&&a.fxName_close!="none",f.isMoving=!0,f.isClosed=!0,f.isVisible=!1,p?f.isHidden=!0:h&&(f.isHidden=!1),f.isSliding?bindStopSlidingEvents(i,!1):sizeMidPanes(_c[i].dir==="horz"?"":"center",!1),setAsClosed(i);if(c){var o="center"+(l.dir=="horz"?",west,east":"");showMasks(o,!0),lockPaneForFX(i,!0),s.hide(a.fxName_close,a.fxSettings_close,a.fxSpeed_close,function(){lockPaneForFX(i,!1),f.isClosed&&v(),e()})}else _hidePane(i),v(),e()})},setAsClosed=function(e){var t=$Ps[e],n=$Rs[e],r=$Ts[e],i=options[e],s=state[e],o=_c[e].side.toLowerCase(),u="inset"+_c[e].side,a=i.resizerClass,f=i.togglerClass,l="-"+e,c="-open",h="-sliding",p="-closed";n.css(o,sC[u]).removeClass(a+c+" "+a+l+c).removeClass(a+h+" "+a+l+h).addClass(a+p+" "+a+l+p).unbind("dblclick."+sID),i.resizable&&$.layout.plugins.draggable&&n.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),r&&(r.removeClass(f+c+" "+f+l+c).addClass(f+p+" "+f+l+p).attr("title",i.togglerTip_closed),r.children(".content-open").hide(),r.children(".content-closed").css("display","block")),syncPinBtns(e,!1),state.initialized&&sizeHandles()},open=function(e,t,n,r){function p(){f.isMoving=!1,_fixIframe(i),f.isSliding||(hideMasks(),sizeMidPanes(_c[i].dir=="vert"?"center":"",!1)),setAsOpen(i)}if(!isInitialized())return;var i=evtPane.call(this,e),s=$Ps[i],o=$Rs[i],u=$Ts[i],a=options[i],f=state[i],l=_c[i],c,h;$N.queue(function(e){if(!s||!a.resizable&&!a.closable&&!f.isShowing||f.isVisible&&!f.isSliding)return e();if(f.isHidden&&!f.isShowing){e(),show(i,!0);return}a.autoResize&&f.size!=a.size?sizePane(i,a.size,!0,!0,!0):setSizeLimits(i,t);var o=_runCallbacks("onopen_start",i);if(o==="abort")return e();o!=="NC"&&setSizeLimits(i,t);if(f.minSize>f.maxSize)return syncPinBtns(i,!1),!r&&a.noRoomToOpenTip&&alert(a.noRoomToOpenTip),e();t?bindStopSlidingEvents(i,!0):f.isSliding?bindStopSlidingEvents(i,!1):a.slidable&&bindStartSlidingEvent(i,!1),f.noRoom=!1,makePaneFit(i),h=f.isShowing,delete f.isShowing,c=!n&&f.isClosed&&a.fxName_open!="none",f.isMoving=!0,f.isVisible=!0,f.isClosed=!1,h&&(f.isHidden=!1);if(c){var u="center"+(l.dir=="horz"?",west,east":"");f.isSliding&&(u+=","+_c.oppositeEdge[i]),showMasks(u,!0),lockPaneForFX(i,!0),s.show(a.fxName_open,a.fxSettings_open,a.fxSpeed_open,function(){lockPaneForFX(i,!1),f.isVisible&&p(),e()})}else _showPane(i),p(),e()})},setAsOpen=function(e,t){var n=$Ps[e],r=$Rs[e],i=$Ts[e],s=options[e],o=state[e],u=_c[e].side.toLowerCase(),a="inset"+_c[e].side,f=s.resizerClass,l=s.togglerClass,c="-"+e,h="-open",p="-closed",d="-sliding";r.css(u,sC[a]+getPaneSize(e)).removeClass(f+p+" "+f+c+p).addClass(f+h+" "+f+c+h),o.isSliding?r.addClass(f+d+" "+f+c+d):r.removeClass(f+d+" "+f+c+d),s.resizerDblClickToggle&&r.bind("dblclick",toggle),removeHover(0,r),s.resizable&&$.layout.plugins.draggable?r.draggable("enable").css("cursor",s.resizerCursor).attr("title",s.resizerTip):o.isSliding||r.css("cursor","default"),i&&(i.removeClass(l+p+" "+l+c+p).addClass(l+h+" "+l+c+h).attr("title",s.togglerTip_open),removeHover(0,i),i.children(".content-closed").hide(),i.children(".content-open").css("display","block")),syncPinBtns(e,!o.isSliding),$.extend(o,elDims(n)),state.initialized&&(sizeHandles(),sizeContent(e,!0)),!t&&(state.initialized||s.triggerEventsOnLoad)&&n.is(":visible")&&(_runCallbacks("onopen_end",e),o.isShowing&&_runCallbacks("onshow_end",e),state.initialized&&_runCallbacks("onresize_end",e))},slideOpen=function(e){function s(){r.isClosed?r.isMoving||open(n,!0):bindStopSlidingEvents(n,!0)}if(!isInitialized())return;var t=evtObj(e),n=evtPane.call(this,e),r=state[n],i=options[n].slideDelay_open;t&&t.stopImmediatePropagation(),r.isClosed&&t&&t.type==="mouseenter"&&i>0?timer.set(n+"_openSlider",s,i):s()},slideClose=function(e){function o(){i.isClosed?bindStopSlidingEvents(n,!1):i.isMoving||close(n)}if(!isInitialized())return;var t=evtObj(e),n=evtPane.call(this,e),r=options[n],i=state[n],s=i.isMoving?1e3:300;if(i.isClosed||i.isResizing)return;if(r.slideTrigger_close==="click")o();else{if(r.preventQuickSlideClose&&i.isMoving)return;if(r.preventPrematureSlideClose&&t&&$.layout.isMouseOverElem(t,$Ps[n]))return;t?timer.set(n+"_closeSlider",o,max(r.slideDelay_close,s)):o()}},slideToggle=function(e){var t=evtPane.call(this,e);toggle(t,!0)},lockPaneForFX=function(e,t){var n=$Ps[e],r=state[e],i=options[e],s=options.zIndexes;t?(n.css({zIndex:s.pane_animate}),e=="south"?n.css({top:sC.insetTop+sC.innerHeight-n.outerHeight()}):e=="east"&&n.css({left:sC.insetLeft+sC.innerWidth-n.outerWidth()})):(n.css({zIndex:r.isSliding?s.pane_sliding:s.pane_normal}),e=="south"?n.css({top:"auto"}):e=="east"&&!n.css("left").match(/\-99999/)&&n.css({left:"auto"}),browser.msie&&i.fxOpacityFix&&i.fxName_open!="slide"&&n.css("filter")&&n.css("opacity")==1&&n[0].style.removeAttribute("filter"))},bindStartSlidingEvent=function(e,t){var n=options[e],r=$Ps[e],i=$Rs[e],s=n.slideTrigger_open.toLowerCase();if(!i||t&&!n.slidable)return;s.match(/mouseover/)?s=n.slideTrigger_open="mouseenter":s.match(/click|dblclick|mouseenter/)||(s=n.slideTrigger_open="click"),i[t?"bind":"unbind"](s+"."+sID,slideOpen).css("cursor",t?n.sliderCursor:"default").attr("title",t?n.sliderTip:"")},bindStopSlidingEvents=function(e,t){function l(t){timer.clear(e+"_closeSlider"),t.stopPropagation()}var n=options[e],r=state[e],i=_c[e],s=options.zIndexes,o=n.slideTrigger_close.toLowerCase(),u=t?"bind":"unbind",a=$Ps[e],f=$Rs[e];r.isSliding=t,timer.clear(e+"_closeSlider"),t&&bindStartSlidingEvent(e,!1),a.css("zIndex",t?s.pane_sliding:s.pane_normal),f.css("zIndex",t?s.pane_sliding+2:s.resizer_normal),o.match(/click|mouseleave/)||(o=n.slideTrigger_close="mouseleave"),f[u](o,slideClose),o==="mouseleave"&&(a[u]("mouseleave."+sID,slideClose),f[u]("mouseenter."+sID,l),a[u]("mouseenter."+sID,l)),t?o==="click"&&!n.resizable&&(f.css("cursor",t?n.sliderCursor:"default"),f.attr("title",t?n.togglerTip_open:"")):timer.clear(e+"_closeSlider")},makePaneFit=function(e,t,n,r){var i=options[e],s=state[e],o=_c[e],u=$Ps[e],a=$Rs[e],f=o.dir==="vert",l=!1;if(e==="center"||f&&s.noVerticalRoom)l=s.maxHeight>=0,l&&s.noRoom?(_showPane(e),a&&a.show(),s.isVisible=!0,s.noRoom=!1,f&&(s.noVerticalRoom=!1),_fixIframe(e)):!l&&!s.noRoom&&(_hidePane(e),a&&a.hide(),s.isVisible=!1,s.noRoom=!0);if(e!=="center")if(s.minSize<=s.maxSize){l=!0;if(s.size>s.maxSize)sizePane(e,s.maxSize,n,r,!0);else if(s.size<s.minSize)sizePane(e,s.minSize,n,r,!0);else if(a&&s.isVisible&&u.is(":visible")){var c=o.side.toLowerCase(),h=s.size+sC["inset"+o.side];$.layout.cssNum(a,c)!=h&&a.css(c,h)}s.noRoom&&(s.wasOpen&&i.closable?i.autoReopen?open(e,!1,!0,!0):s.noRoom=!1:show(e,s.wasOpen,!0,!0))}else s.noRoom||(s.noRoom=!0,s.wasOpen=!s.isClosed&&!s.isSliding,s.isClosed||(i.closable?close(e,!0,!0):hide(e,!0)))},manualSizePane=function(e,t,n,r){if(!isInitialized())return;var i=evtPane.call(this,e),s=options[i],o=state[i],u=s.livePaneResizing&&!o.isResizing;s.autoResize=!1,sizePane(i,t,n,u,r)},sizePane=function(e,t,n,r,i){function g(){var e=c==="width"?a.outerWidth():a.outerHeight(),i=[{pane:s,count:1,target:t,actual:e,correct:t===e,attempt:t,cssSize:m}],o=i[0],d="Inaccurate size after resizing the "+s+"-pane.";while(!o.correct){thisTry={pane:s,count:o.count+1,target:t},o.actual>t?thisTry.attempt=max(0,o.attempt-(o.actual-t)):thisTry.attempt=max(0,o.attempt+(t-o.actual)),thisTry.cssSize=cssSize(s,thisTry.attempt),a.css(c,thisTry.cssSize),thisTry.actual=c=="width"?a.outerWidth():a.outerHeight(),thisTry.correct=t===thisTry.actual,options.showDebugMessages&&(i.length===1&&(_log(d,!1),_log(o,!1)),_log(thisTry,!1));if(i.length>3)break;i.push(thisTry),o=i[i.length-1]}u.size=t,$.extend(u,elDims(a)),u.isVisible&&a.is(":visible")&&(f&&f.css(l,t+sC[h]),sizeContent(s)),!n&&!p&&state.initialized&&u.isVisible&&_runCallbacks("onresize_end",s),n||(u.isSliding||sizeMidPanes(_c[s].dir=="horz"?"":"center",p,r),sizeHandles());var g=_c.oppositeEdge[s];t<v&&state[g].noRoom&&(setSizeLimits(g),makePaneFit(g,!1,n)),options.showDebugMessages&&i.length>1&&_log(d+"\nSee the Error Console for details.",!0)}if(!isInitialized())return;var s=evtPane.call(this,e),o=options[s],u=state[s],a=$Ps[s],f=$Rs[s],l=_c[s].side.toLowerCase(),c=_c[s].sizeType.toLowerCase(),h="inset"+_c[s].side,p=u.isResizing&&!o.triggerEventsDuringLiveResize,d=i!==!0&&o.animatePaneSizing,v,m;$N.queue(function(e){setSizeLimits(s),v=u.size,t=_parseSize(s,t),t=max(t,_parseSize(s,o.minSize)),t=min(t,u.maxSize);if(t<u.minSize){e(),makePaneFit(s,!1,n);return}if(!r&&t===v)return e();!n&&state.initialized&&u.isVisible&&_runCallbacks("onresize_start",s),m=cssSize(s,t);if(d&&a.is(":visible")){var i=$.layout.effects.size[s]||$.layout.effects.size.all,f=o.fxSettings_size.easing||i.easing,l=options.zIndexes,h={};h[c]=m+"px",u.isMoving=!0,a.css({zIndex:l.pane_animate}).show().animate(h,o.fxSpeed_size,f,function(){a.css({zIndex:u.isSliding?l.pane_sliding:l.pane_normal}),u.isMoving=!1,g(),e()})}else a.css(c,m),a.is(":visible")?g():(u.size=t,$.extend(u,elDims(a))),e()})},sizeMidPanes=function(e,t,n){e=(e?e:"east,west,center").split(","),$.each(e,function(e,r){if(!$Ps[r])return;var i=options[r],s=state[r],o=$Ps[r],u=$Rs[r],a=r=="center",f=!0,l={},c=calcNewCenterPaneDims();$.extend(s,elDims(o));if(r==="center"){if(!n&&s.isVisible&&c.width===s.outerWidth&&c.height===s.outerHeight)return!0;$.extend(s,cssMinDims(r),{maxWidth:c.width,maxHeight:c.height}),l=c,l.width=cssW(o,l.width),l.height=cssH(o,l.height),f=l.width>=0&&l.height>=0;if(!state.initialized&&i.minWidth>s.outerWidth){var h=i.minWidth-s.outerWidth,p=options.east.minSize||0,d=options.west.minSize||0,v=state.east.size,m=state.west.size,g=v,y=m;h>0&&state.east.isVisible&&v>p&&(g=max(v-p,v-h),h-=v-g),h>0&&state.west.isVisible&&m>d&&(y=max(m-d,m-h),h-=m-y);if(h===0){v!=p&&sizePane("east",g,!0,n,!0),m!=d&&sizePane("west",y,!0,n,!0),sizeMidPanes("center",t,n);return}}}else{s.isVisible&&!s.noVerticalRoom&&$.extend(s,elDims(o),cssMinDims(r));if(!n&&!s.noVerticalRoom&&c.height===s.outerHeight)return!0;l.top=c.top,l.bottom=c.bottom,l.height=cssH(o,c.height),s.maxHeight=l.height,f=s.maxHeight>=0,f||(s.noVerticalRoom=!0)}f?(!t&&state.initialized&&_runCallbacks("onresize_start",r),o.css(l),sizeHandles(r),s.noRoom&&!s.isClosed&&!s.isHidden&&makePaneFit(r),s.isVisible&&($.extend(s,elDims(o)),state.initialized&&sizeContent(r))):!s.noRoom&&s.isVisible&&makePaneFit(r);if(!s.isVisible)return!0;if(r==="center"){var b=$.layout.browser,w=b.isIE6||b.msie&&!$.support.boxModel;$Ps.north&&(w||state.north.tagName=="IFRAME")&&$Ps.north.css("width",cssW($Ps.north,sC.innerWidth)),$Ps.south&&(w||state.south.tagName=="IFRAME")&&$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}!t&&state.initialized&&_runCallbacks("onresize_end",r)})},resizeAll=function(){if(!state.initialized){_initLayoutElements();return}var e=sC.innerWidth,t=sC.innerHeight;if(!$N.is(":visible:"))return;$.extend(state.container,elDims($N));if(!sC.outerHeight)return;if(!1===_runCallbacks("onresizeall_start"))return!1;var n=sC.innerHeight<t,r=sC.innerWidth<e,i,s,o,u;$.each(["south","north","east","west"],function(e,t){if(!$Ps[t])return;o=state[t],s=options[t],u=_c[t].dir,s.autoResize&&o.size!=s.size?sizePane(t,s.size,!0,!0,!0):(setSizeLimits(t),makePaneFit(t,!1,!0,!0))}),sizeMidPanes("",!0,!0),sizeHandles(),s=options,$.each(_c.allPanes,function(e,t){i=$Ps[t];if(!i)return;state[t].isVisible&&_runCallbacks("onresize_end",t)}),_runCallbacks("onresizeall_end")},resizeChildLayout=function(e){var t=evtPane.call(this,e);if(!options[t].resizeChildLayout)return;var n=$Ps[t],r=$Cs[t],i="layout",s=Instance[t],o=children[t];if(s.child&&!o){var u=s.child.container;o=children[t]=(u?u.data(i):0)||null}o&&o.destroyed&&(o=children[t]=null),o||(o=children[t]=n.data(i)||(r?r.data(i):0)||null),s.child=children[t],o&&o.resizeAll()},sizeContent=function(e,t){if(!isInitialized())return;var n=evtPane.call(this,e);n=n?n.split(","):_c.allPanes,$.each(n,function(e,n){function f(e){return max(o.css.paddingBottom,parseInt(e.css("marginBottom"),10)||0)}function l(){var e=options[n].contentIgnoreSelector,t=i.nextAll().not(e||":lt(0)"),r=t.filter(":visible"),s=r.filter(":last");u={top:i[0].offsetTop,height:i.outerHeight(),numFooters:t.length,hiddenFooters:t.length-r.length,spaceBelow:0},u.spaceAbove=u.top,u.bottom=u.top+u.height,s.length?u.spaceBelow=s[0].offsetTop+s.outerHeight()-u.bottom+f(s):u.spaceBelow=f(i)}var r=$Ps[n],i=$Cs[n],s=options[n],o=state[n],u=o.content;if(!r||!i||!r.is(":visible"))return!0;if(!i.length){initContent(n,!1);if(!i)return}if(!1===_runCallbacks("onsizecontent_start",n))return;if(!o.isMoving&&!o.isResizing||s.liveContentResizing||t||u.top==undefined)l(),u.hiddenFooters>0&&r.css("overflow")==="hidden"&&(r.css("overflow","visible"),l(),r.css("overflow","hidden"));var a=o.innerHeight-(u.spaceAbove-o.css.paddingTop)-(u.spaceBelow-o.css.paddingBottom);if(!i.is(":visible")||u.height!=a)setOuterHeight(i,a,!0),u.height=a;state.initialized&&_runCallbacks("onsizecontent_end",n)})},sizeHandles=function(e){var t=evtPane.call(this,e);t=t?t.split(","):_c.borderPanes,$.each(t,function(e,t){var n=options[t],r=state[t],i=$Ps[t],s=$Rs[t],o=$Ts[t],u;if(!i||!s)return;var a=_c[t].dir,f=r.isClosed?"_closed":"_open",l=n["spacing"+f],c=n["togglerAlign"+f],h=n["togglerLength"+f],p,d,v,m={};if(l===0){s.hide();return}!r.noRoom&&!r.isHidden&&s.show(),a==="horz"?(p=sC.innerWidth,r.resizerLength=p,d=$.layout.cssNum(i,"left"),s.css({width:cssW(s,p),height:cssH(s,l),left:d>-9999?d:sC.insetLeft})):(p=i.outerHeight(),r.resizerLength=p,s.css({height:cssH(s,p),width:cssW(s,l),top:sC.insetTop+getPaneSize("north",!0)})),removeHover(n,s);if(o){if(h===0||r.isSliding&&n.hideTogglerOnSlide){o.hide();return}o.show();if(!(h>0)||h==="100%"||h>p)h=p,v=0;else if(isStr(c))switch(c){case"top":case"left":v=0;break;case"bottom":case"right":v=p-h;break;case"middle":case"center":default:v=round((p-h)/2)}else{var g=parseInt(c,10);c>=0?v=g:v=p-h+g}if(a==="horz"){var y=cssW(o,h);o.css({width:y,height:cssH(o,l),left:v,top:0}),o.children(".content").each(function(){u=$(this),u.css("marginLeft",round((y-u.outerWidth())/2))})}else{var b=cssH(o,h);o.css({height:b,width:cssW(o,l),top:v,left:0}),o.children(".content").each(function(){u=$(this),u.css("marginTop",round((b-u.outerHeight())/2))})}removeHover(0,o)}!state.initialized&&(n.initHidden||r.noRoom)&&(s.hide(),o&&o.hide())})},enableClosable=function(e){if(!isInitialized())return;var t=evtPane.call(this,e),n=$Ts[t],r=options[t];if(!n)return;r.closable=!0,n.bind("click."+sID,function(e){e.stopPropagation(),toggle(t)}).css("visibility","visible").css("cursor","pointer").attr("title",state[t].isClosed?r.togglerTip_closed:r.togglerTip_open).show()},disableClosable=function(e,t){if(!isInitialized())return;var n=evtPane.call(this,e),r=$Ts[n];if(!r)return;options[n].closable=!1,state[n].isClosed&&open(n,!1,!0),r.unbind("."+sID).css("visibility",t?"hidden":"visible").css("cursor","default").attr("title","")},enableSlidable=function(e){if(!isInitialized())return;var t=evtPane.call(this,e),n=$Rs[t];if(!n||!n.data("draggable"))return;options[t].slidable=!0,s.isClosed&&bindStartSlidingEvent(t,!0)},disableSlidable=function(e){if(!isInitialized())return;var t=evtPane.call(this,e),n=$Rs[t];if(!n)return;options[t].slidable=!1,state[t].isSliding?close(t,!1,!0):(bindStartSlidingEvent(t,!1),n.css("cursor","default").attr("title",""),removeHover(null,n[0]))},enableResizable=function(e){if(!isInitialized())return;var t=evtPane.call(this,e),n=$Rs[t],r=options[t];if(!n||!n.data("draggable"))return;r.resizable=!0,n.draggable("enable"),state[t].isClosed||n.css("cursor",r.resizerCursor).attr("title",r.resizerTip)},disableResizable=function(e){if(!isInitialized())return;var t=evtPane.call(this,e),n=$Rs[t];if(!n||!n.data("draggable"))return;options[t].resizable=!1,n.draggable("disable").css("cursor","default").attr("title",""),removeHover(null,n[0])},swapPanes=function(e,t){function o(e){var t=$Ps[e],n=$Cs[e];return t?{pane:e,P:t?t[0]:!1,C:n?n[0]:!1,state:$.extend(!0,{},state[e]),options:$.extend(!0,{},options[e])}:!1}function u(e,t){if(!e)return;var n=e.P,r=e.C,i=e.pane,o=_c[t],u=o.side.toLowerCase(),a="inset"+o.side,f=$.extend({},state[t]),l=options[t],c={resizerCursor:l.resizerCursor},h,p,d;$.each("fxName,fxSpeed,fxSettings".split(","),function(e,t){c[t+"_open"]=l[t+"_open"],c[t+"_close"]=l[t+"_close"],c[t+"_size"]=l[t+"_size"]}),$Ps[t]=$(n).data({layoutPane:Instance[t],layoutEdge:t}).css(_c.hidden).css(o.cssReq),$Cs[t]=r?$(r):!1,options[t]=$.extend({},e.options,c),state[t]=$.extend({},e.state),h=new RegExp(l.paneClass+"-"+i,"g"),n.className=n.className.replace(h,l.paneClass+"-"+t),initHandles(t),o.dir!=_c[i].dir?(p=s[t]||0,setSizeLimits(t),p=max(p,state[t].minSize),manualSizePane(t,p,!0,!0)):$Rs[t].css(u,sC[a]+(state[t].isVisible?getPaneSize(t):0)),e.state.isVisible&&!f.isVisible?setAsOpen(t,!0):(setAsClosed(t),bindStartSlidingEvent(t,!0)),e=null}if(!isInitialized())return;var n=evtPane.call(this,e);state[n].edge=t,state[t].edge=n;if(!1===_runCallbacks("onswap_start",n)||!1===_runCallbacks("onswap_start",t)){state[n].edge=n,state[t].edge=t;return}var r=o(n),i=o(t),s={};s[n]=r?r.state.size:0,s[t]=i?i.state.size:0,$Ps[n]=!1,$Ps[t]=!1,state[n]={},state[t]={},$Ts[n]&&$Ts[n].remove(),$Ts[t]&&$Ts[t].remove(),$Rs[n]&&$Rs[n].remove(),$Rs[t]&&$Rs[t].remove(),$Rs[n]=$Rs[t]=$Ts[n]=$Ts[t]=!1,u(r,t),u(i,n),r=i=s=null,$Ps[n]&&$Ps[n].css(_c.visible),$Ps[t]&&$Ps[t].css(_c.visible),resizeAll(),_runCallbacks("onswap_end",n),_runCallbacks("onswap_end",t);return},syncPinBtns=function(e,t){$.layout.plugins.buttons&&$.each(state[e].pins,function(n,r){$.layout.buttons.setPinState(Instance,$(r),e,t)})},$N=$(this).eq(0);if(!$N.length)return options.showErrorMessages&&_log(lang.errContainerMissing,!0),null;if($N.data("layoutContainer")&&$N.data("layout"))return $N.data("layout");var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id,Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,initContent:initContent,addPane:addPane,removePane:removePane,createChildLayout:createChildLayout,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:!1,children:children,north:!1,south:!1,west:!1,east:!1,center:!1};return _create()==="cancel"?null:Instance},$.ui||($.ui={}),$.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(e){var t=document.cookie,n=t?t.split(";"):[],r;for(var i=0,s=n.length;i<s;i++){r=$.trim(n[i]).split("=");if(r[0]==e)return decodeURIComponent(r[1])}return null},write:function(e,t,n){var r="",i="",s=!1,o=n||{},u=o.expires;if(u&&u.toUTCString)i=u;else if(u===null||typeof u=="number")i=new Date,u>0?i.setDate(i.getDate()+u):(i.setFullYear(1970),s=!0);i&&(r+=";expires="+i.toUTCString()),o.path&&(r+=";path="+o.path),o.domain&&(r+=";domain="+o.domain),o.secure&&(r+=";secure"),document.cookie=e+"="+(s?"":encodeURIComponent(t))+r},clear:function(e){$.ui.cookie.write(e,"",{expires:-1})}},$.cookie||($.cookie=function(e,t,n){var r=$.ui.cookie;if(t===null)r.clear(e);else{if(t===undefined)return r.read(e);r.write(e,t,n)}}),$.layout.plugins.stateManagement=!0,$.layout.config.optionRootKeys.push("stateManagement"),$.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},$.layout.optionsMap.layout.push("stateManagement"),$.layout.state={saveCookie:function(e,t,n){var r=e.options,i=r.stateManagement,s=$.extend(!0,{},i.cookie,n||null),o=e.state.stateData=e.readState(t||i.stateKeys);return $.ui.cookie.write(s.name||r.name||"Layout",$.layout.state.encodeJSON(o),s),$.extend(!0,{},o)},deleteCookie:function(e){var t=e.options;$.ui.cookie.clear(t.stateManagement.cookie.name||t.name||"Layout")},readCookie:function(e){var t=e.options,n=$.ui.cookie.read(t.stateManagement.cookie.name||t.name||"Layout");return n?$.layout.state.decodeJSON(n):{}},loadCookie:function(e){var t=$.layout.state.readCookie(e);return t&&(e.state.stateData=$.extend(!0,{},t),e.loadState(t)),t},loadState:function(e,t,n){t=$.layout.transformData(t);if($.isEmptyObject(t))return;$.extend(!0,e.options,t);if(e.state.initialized){var r,i,s,o,u,a,f=n===!1;$.each($.layout.config.borderPanes,function(n,r){state=e.state[r],s=t[r];if(typeof s!="object")return;o=s.size,a=s.initClosed,u=s.initHidden,i=state.isVisible,i||e.sizePane(r,o,!1,!1),u===!0?e.hide(r,f):a===!1?e.open(r,!1,f):a===!0?e.close(r,!1,f):u===!1&&e.show(r,!1,f),i&&e.sizePane(r,o,!1,f)})}},readState:function(e,t){var n={},r={isClosed:"initClosed",isHidden:"initHidden"},i=e.state,s=$.layout.config.allPanes,o,u,a,f;t||(t=e.options.stateManagement.stateKeys),$.isArray(t)&&(t=t.join(",")),t=t.replace(/__/g,".").split(",");for(var l=0,c=t.length;l<c;l++){o=t[l].split("."),u=o[0],a=o[1];if($.inArray(u,s)<0)continue;f=i[u][a];if(f==undefined)continue;a=="isClosed"&&i[u].isSliding&&(f=!0),(n[u]||(n[u]={}))[r[a]?r[a]:a]=f}return n},encodeJSON:function(e){function t(e){var n=[],r=0,i,s,o;for(i in e)s=e[i],o=typeof s,o=="string"?s='"'+s+'"':o=="object"&&(s=t(s)),n[r++]='"'+i+'":'+s;return"{"+n.join(",")+"}"}return t(e)},decodeJSON:function(e){try{return $.parseJSON?$.parseJSON(e):window.eval("("+e+")")||{}}catch(t){return{}}},_create:function(e){var t=$.layout.state;$.extend(e,{readCookie:function(){return t.readCookie(e)},deleteCookie:function(){t.deleteCookie(e)},saveCookie:function(n,r){return t.saveCookie(e,n,r)},loadCookie:function(){return t.loadCookie(e)},loadState:function(n,r){t.loadState(e,n,r)},readState:function(n){return t.readState(e,n)},encodeJSON:t.encodeJSON,decodeJSON:t.decodeJSON}),e.state.stateData={};var n=e.options.stateManagement;n.enabled&&(n.autoLoad?e.loadCookie():e.state.stateData=e.readCookie())},_unload:function(e){var t=e.options.stateManagement;t.enabled&&(t.autoSave?e.saveCookie():e.state.stateData=e.readState())}},$.layout.onCreate.push($.layout.state._create),$.layout.onUnload.push($.layout.state._unload),$.layout.plugins.buttons=!0,$.layout.defaults.autoBindCustomButtons=!1,$.layout.optionsMap.layout.push("autoBindCustomButtons");var lang=$.layout.language;$.layout.buttons={init:function(e){var t="ui-layout-button-",n=e.options.name||"",r;$.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(i,s){$.each($.layout.config.borderPanes,function(i,o){$("."+t+s+"-"+o).each(function(){r=$(this).data("layoutName")||$(this).attr("layoutName"),(r==undefined||r===n)&&e.bindButton(this,s,o)})})})},get:function(e,t,n,r){var i=$(t),s=e.options,o=s.showErrorMessages;if(!i.length)o&&$.layout.msg(lang.errButton+lang.selector+": "+t,!0);else if($.inArray(n,$.layout.config.borderPanes)<0)o&&$.layout.msg(lang.errButton+lang.pane+": "+n,!0),i=$("");else{var u=s[n].buttonClass+"-"+r;i.addClass(u+" "+u+"-"+n).data("layoutName",s.name)}return i},bind:function(e,t,n,r){var i=$.layout.buttons;switch(n.toLowerCase()){case"toggle":i.addToggle(e,t,r);break;case"open":i.addOpen(e,t,r);break;case"close":i.addClose(e,t,r);break;case"pin":i.addPin(e,t,r);break;case"toggle-slide":i.addToggle(e,t,r,!0);break;case"open-slide":i.addOpen(e,t,r,!0)}return e},addToggle:function(e,t,n,r){return $.layout.buttons.get(e,t,n,"toggle").click(function(t){e.toggle(n,!!r),t.stopPropagation()}),e},addOpen:function(e,t,n,r){return $.layout.buttons.get(e,t,n,"open").attr("title",lang.Open).click(function(t){e.open(n,!!r),t.stopPropagation()}),e},addClose:function(e,t,n){return $.layout.buttons.get(e,t,n,"close").attr("title",lang.Close).click(function(t){e.close(n),t.stopPropagation()}),e},addPin:function(e,t,n){var r=$.layout.buttons,i=r.get(e,t,n,"pin");if(i.length){var s=e.state[n];i.click(function(t){r.setPinState(e,$(this),n,s.isSliding||s.isClosed),s.isSliding||s.isClosed?e.open(n):e.close(n),t.stopPropagation()}),r.setPinState(e,i,n,!s.isClosed&&!s.isSliding),s.pins.push(t)}return e},setPinState:function(e,t,n,r){var i=t.attr("pin");if(i&&r===(i=="down"))return;var s=e.options[n].buttonClass+"-pin",o=s+"-"+n,u=s+"-up "+o+"-up",a=s+"-down "+o+"-down";t.attr("pin",r?"down":"up").attr("title",r?lang.Unpin:lang.Pin).removeClass(r?u:a).addClass(r?a:u)},syncPinBtns:function(e,t,n){$.each(state[t].pins,function(r,i){$.layout.buttons.setPinState(e,$(i),t,n)})},_load:function(e){var t=$.layout.buttons;$.extend(e,{bindButton:function(n,r,i){return t.bind(e,n,r,i)},addToggleBtn
:function(n,r,i){return t.addToggle(e,n,r,i)},addOpenBtn:function(n,r,i){return t.addOpen(e,n,r,i)},addCloseBtn:function(n,r){return t.addClose(e,n,r)},addPinBtn:function(n,r){return t.addPin(e,n,r)}});for(var n=0;n<4;n++){var r=$.layout.config.borderPanes[n];e.state[r].pins=[]}e.options.autoBindCustomButtons&&t.init(e)},_unload:function(e){}},$.layout.onLoad.push($.layout.buttons._load),$.layout.plugins.browserZoom=!0,$.layout.defaults.browserZoomCheckInterval=1e3,$.layout.optionsMap.layout.push("browserZoomCheckInterval"),$.layout.browserZoom={_init:function(e){$.layout.browserZoom.ratio()!==!1&&$.layout.browserZoom._setTimer(e)},_setTimer:function(e){if(e.destroyed)return;var t=e.options,n=e.state,r=e.hasParentLayout?5e3:Math.max(t.browserZoomCheckInterval,100);setTimeout(function(){if(e.destroyed||!t.resizeWithWindow)return;var r=$.layout.browserZoom.ratio();r!==n.browserZoom&&(n.browserZoom=r,e.resizeAll()),$.layout.browserZoom._setTimer(e)},r)},ratio:function(){function f(e,t){return(parseInt(e,10)/parseInt(t,10)*100).toFixed()}var e=window,t=screen,n=document,r=n.documentElement||n.body,i=$.layout.browser,s=i.version,o,u,a;return i.msie&&s>8||!i.msie?!1:t.deviceXDPI?f(t.deviceXDPI,t.systemXDPI):i.webkit&&(o=n.body.getBoundingClientRect)?f(o.left-o.right,n.body.offsetWidth):i.webkit&&(u=e.outerWidth)?f(u,e.innerWidth):(u=t.width)&&(a=r.clientWidth)?f(u,a):!1}},$.layout.onReady.push($.layout.browserZoom._init)}(jQuery),define("libs/jquery/layout/jquery.layout",function(){}),define("app/layout",["rtext!templates/layout.full.html","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.sortable","libs/jquery/ui/jquery.ui.draggable","libs/jquery/layout/jquery.layout"],function(e){var t=38,n=36,r=50,i=24;return function(s,o){function p(){for(var e=0;e<a.length;e++)a[e].resizeAll()}function g(e){var t;d&&(a.splice(a.indexOf(d),1),a.splice(a.indexOf(v),1),a.splice(a.indexOf(m),1),d.destroy()),e?(s.find(".pg-output").removeClass("ui-layout-east").addClass("ui-layout-south"),t={defaults:f,south:{size:"50%",closable:!1}}):(s.find(".pg-output").removeClass("ui-layout-south").addClass("ui-layout-east"),t={defaults:f,east:{size:"50%",closable:!1}}),a.push(d=s.find(".pg-io").layout(t)),a.push(m=s.find(".pg-output").layout({defaults:f,north:l})),a.push(v=s.find(".pg-input").layout({defaults:f,north:l,onresize:function(){$(u).trigger("resizeCodeEditor")}})),s.find(".ui-layout-resizer").addClass("ui-widget-shadow"),o=e,$(u).trigger("resizeCodeEditor"),$(u).trigger("ioOrientationChanged",o)}var u,a=[];s!==!0&&s!==!1||"undefined"!=typeof o?s=s&&$(s)||$("body"):(o=s,s=$("body")),s.append(e),a.push(s.layout());var f={initClosed:!1,resizable:!0,slidable:!0},l={resizable:!1,closable:!1,slidable:!1,size:n,spacing_open:0,spacing_closed:0},c={resizable:!1,closable:!1,slidable:!1,size:r,spacing_open:0,spacing_closed:0},h=$.extend({},l,{size:i});a.push(s.find(".pg-labcoat").layout({defaults:f,north:$.extend({},l,{size:t}),west:{size:220,initClosed:!1}})),a.push(s.find(".pg-system").layout({defaults:f,south:{size:"50%",initClosed:!1}})),a.push(s.find(".pg-folders").layout({defaults:f,north:c})),a.push(s.find(".pg-queries").layout({defaults:f,north:c})),a.push(s.find(".pg-main").layout({defaults:f,south:{size:"15%",initClosed:!0}})),a.push(s.find(".pg-editor-support").layout({defaults:f,east:{size:"40%",maxSize:800,minSize:305,initClosed:!1,maskIframesOnResize:!0}})),a.push(s.find(".pg-editor").layout({defaults:f,south:h}));var d,v,m;return g(o),s.addClass("ui-widget-content"),s.find(".pg-pane").addClass("ui-widget-content"),s.find(".ui-layout-toggler").mouseenter(function(){$(this).addClass("ui-state-hover")}).mouseleave(function(){$(this).removeClass("ui-state-hover")}).addClass("ui-widget-header"),s.find(".ui-layout-resizer-dragging").addClass("ui-state-hover"),u={container:s,refresh:p,getContainer:function(){return s.find(".pg-labcoat")},getInput:function(){return s.find(".pg-input")},getBarEditor:function(){return s.find(".pg-input .pg-toolbar")},getBarMain:function(){return s.find(".pg-mainbar")},getCodeEditor:function(){return s.find(".pg-input .pg-code-editor")},getOutput:function(){return s.find(".pg-output")},getStatusBar:function(){return s.find(".pg-statusbar")},getSystem:function(){return s.find(".pg-folders")},getQueries:function(){return s.find(".pg-queries")},getSupport:function(){return s.find(".pg-support")},setIoVertical:g,isIoVertical:function(){return o}}}}),define("app/util/md5",[],function(){var e={bitOR:function(e,t){var n=e&1|t&1,r=e>>>1|t>>>1;return r<<1|n},bitXOR:function(e,t){var n=e&1^t&1,r=e>>>1^t>>>1;return r<<1|n},bitAND:function(e,t){var n=e&1&(t&1),r=e>>>1&t>>>1;return r<<1|n},addme:function(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535},rhex:function(e){var t="",n="0123456789abcdef",r=0;while(r<4){var i=r++;t+=n.charAt(e>>i*8+4&15)+n.charAt(e>>i*8&15)}return t},str2blks:function(e){var t=(e.length+8>>6)+1,n=[],r=0,i=t*16;while(r<i)n[++r]=0;var s=0;while(s<e.length)n[s>>2]|=e.charCodeAt(s)<<(e.length*8+s)%4*8,s++;n[s>>2]|=128<<(e.length*8+s)%4*8;var o=e.length*8,u=t*16-2;return n[u]=o&255,n[u]|=(o>>>8&255)<<8,n[u]|=(o>>>16&255)<<16,n[u]|=(o>>>24&255)<<24,n},rol:function(e,t){return e<<t|e>>>32-t},cmn:function(e,t,n,r,i,s){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(r,s)),i),n)},ff:function(e,t,n,r,i,s,o){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(~t,r)),e,t,i,s,o)},gg:function(e,t,n,r,i,s,o){return this.cmn(this.bitOR(this.bitAND(t,r),this.bitAND(n,~r)),e,t,i,s,o)},hh:function(e,t,n,r,i,s,o){return this.cmn(this.bitXOR(this.bitXOR(t,n),r),e,t,i,s,o)},ii:function(e,t,n,r,i,s,o){return this.cmn(this.bitXOR(n,this.bitOR(t,~r)),e,t,i,s,o)},doEncode:function(e){var t=this.str2blks(e),n=1732584193,r=-271733879,i=-1732584194,s=271733878,o,u=0;while(u<t.length){var a=n,f=r,l=i,c=s;o=0,n=this.ff(n,r,i,s,t[u],7,-680876936),s=this.ff(s,n,r,i,t[u+1],12,-389564586),i=this.ff(i,s,n,r,t[u+2],17,606105819),r=this.ff(r,i,s,n,t[u+3],22,-1044525330),n=this.ff(n,r,i,s,t[u+4],7,-176418897),s=this.ff(s,n,r,i,t[u+5],12,1200080426),i=this.ff(i,s,n,r,t[u+6],17,-1473231341),r=this.ff(r,i,s,n,t[u+7],22,-45705983),n=this.ff(n,r,i,s,t[u+8],7,1770035416),s=this.ff(s,n,r,i,t[u+9],12,-1958414417),i=this.ff(i,s,n,r,t[u+10],17,-42063),r=this.ff(r,i,s,n,t[u+11],22,-1990404162),n=this.ff(n,r,i,s,t[u+12],7,1804603682),s=this.ff(s,n,r,i,t[u+13],12,-40341101),i=this.ff(i,s,n,r,t[u+14],17,-1502002290),r=this.ff(r,i,s,n,t[u+15],22,1236535329),n=this.gg(n,r,i,s,t[u+1],5,-165796510),s=this.gg(s,n,r,i,t[u+6],9,-1069501632),i=this.gg(i,s,n,r,t[u+11],14,643717713),r=this.gg(r,i,s,n,t[u],20,-373897302),n=this.gg(n,r,i,s,t[u+5],5,-701558691),s=this.gg(s,n,r,i,t[u+10],9,38016083),i=this.gg(i,s,n,r,t[u+15],14,-660478335),r=this.gg(r,i,s,n,t[u+4],20,-405537848),n=this.gg(n,r,i,s,t[u+9],5,568446438),s=this.gg(s,n,r,i,t[u+14],9,-1019803690),i=this.gg(i,s,n,r,t[u+3],14,-187363961),r=this.gg(r,i,s,n,t[u+8],20,1163531501),n=this.gg(n,r,i,s,t[u+13],5,-1444681467),s=this.gg(s,n,r,i,t[u+2],9,-51403784),i=this.gg(i,s,n,r,t[u+7],14,1735328473),r=this.gg(r,i,s,n,t[u+12],20,-1926607734),n=this.hh(n,r,i,s,t[u+5],4,-378558),s=this.hh(s,n,r,i,t[u+8],11,-2022574463),i=this.hh(i,s,n,r,t[u+11],16,1839030562),r=this.hh(r,i,s,n,t[u+14],23,-35309556),n=this.hh(n,r,i,s,t[u+1],4,-1530992060),s=this.hh(s,n,r,i,t[u+4],11,1272893353),i=this.hh(i,s,n,r,t[u+7],16,-155497632),r=this.hh(r,i,s,n,t[u+10],23,-1094730640),n=this.hh(n,r,i,s,t[u+13],4,681279174),s=this.hh(s,n,r,i,t[u],11,-358537222),i=this.hh(i,s,n,r,t[u+3],16,-722521979),r=this.hh(r,i,s,n,t[u+6],23,76029189),n=this.hh(n,r,i,s,t[u+9],4,-640364487),s=this.hh(s,n,r,i,t[u+12],11,-421815835),i=this.hh(i,s,n,r,t[u+15],16,530742520),r=this.hh(r,i,s,n,t[u+2],23,-995338651),n=this.ii(n,r,i,s,t[u],6,-198630844),s=this.ii(s,n,r,i,t[u+7],10,1126891415),i=this.ii(i,s,n,r,t[u+14],15,-1416354905),r=this.ii(r,i,s,n,t[u+5],21,-57434055),n=this.ii(n,r,i,s,t[u+12],6,1700485571),s=this.ii(s,n,r,i,t[u+3],10,-1894986606),i=this.ii(i,s,n,r,t[u+10],15,-1051523),r=this.ii(r,i,s,n,t[u+1],21,-2054922799),n=this.ii(n,r,i,s,t[u+8],6,1873313359),s=this.ii(s,n,r,i,t[u+15],10,-30611744),i=this.ii(i,s,n,r,t[u+6],15,-1560198380),r=this.ii(r,i,s,n,t[u+13],21,1309151649),n=this.ii(n,r,i,s,t[u+4],6,-145523070),s=this.ii(s,n,r,i,t[u+11],10,-1120210379),i=this.ii(i,s,n,r,t[u+2],15,718787259),r=this.ii(r,i,s,n,t[u+9],21,-343485551),n=this.addme(n,a),r=this.addme(r,f),i=this.addme(i,l),s=this.addme(s,c),u+=16}return this.rhex(n)+this.rhex(r)+this.rhex(i)+this.rhex(s)}};return function(t){return e.doEncode(t)}}),define("app/util/dom",[],function(){return{selectText:function(e,t,n){t=t||0,n=n||$(e).text().length;if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,n);else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r.select()}},canSelect:function(e){return!!e.setSelectionRange||!!e.createTextRange}}}),function(e){var t,n,r,i=e(window),s={jqueryui:{container:"ui-widget ui-widget-content ui-corner-all",notice:"ui-state-highlight",notice_icon:"ui-icon ui-icon-info",info:"",info_icon:"ui-icon ui-icon-info",success:"ui-state-default",success_icon:"ui-icon ui-icon-circle-check",error:"ui-state-error",error_icon:"ui-icon ui-icon-alert",closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s",hi_menu:"ui-state-default ui-corner-bottom",hi_btn:"ui-state-default ui-corner-all",hi_btnhov:"ui-state-hover",hi_hnd:"ui-icon ui-icon-grip-dotted-horizontal"},bootstrap:{container:"alert",notice:"",notice_icon:"icon-exclamation-sign",info:"alert-info",info_icon:"icon-info-sign",success:"alert-success",success_icon:"icon-ok-sign",error:"alert-error",error_icon:"icon-warning-sign",closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play",hi_menu:"well",hi_btn:"btn",hi_btnhov:"",hi_hnd:"icon-chevron-down"}},o=function(){r=e("body"),i=e(window),i.bind("resize",function(){n&&clearTimeout(n),n=setTimeout(e.pnotify_position_all,10)})};document.body?o():e(o),e.extend({pnotify_remove_all:function(){var t=i.data("pnotify");t&&t.length&&e.each(t,function(){this.pnotify_remove&&this.pnotify_remove()})},pnotify_position_all:function(){n&&clearTimeout(n),n=null;var t=i.data("pnotify");if(!t||!t.length)return;e.each(t,function(){var e=this.opts.stack;if(!e)return;e.nextpos1=e.firstpos1,e.nextpos2=e.firstpos2,e.addpos2=0,e.animation=!0}),e.each(t,function(){this.pnotify_position()})},pnotify:function(o){var u,a;typeof o!="object"?(a=e.extend({},e.pnotify.defaults),a.text=o):a=e.extend({},e.pnotify.defaults,o);for(var f in a)typeof f=="string"&&f.match(/^pnotify_/)&&(a[f.replace(/^pnotify_/,"")]=a[f]);if(a.before_init&&a.before_init(a)===!1)return null;var l,h=function(t,n){d.css("display","none");var r=document.elementFromPoint(t.clientX,t.clientY);d.css("display","block");var i=e(r),s=i.css("cursor");d.css("cursor",s!="auto"?s:"default");if(!l||l.get(0)!=r)l&&(c.call(l.get(0),"mouseleave",t.originalEvent),c.call(l.get(0),"mouseout",t.originalEvent)),c.call(r,"mouseenter",t.originalEvent),c.call(r,"mouseover",t.originalEvent);c.call(r,n,t.originalEvent),l=i},p=s[a.styling],d=e("<div />",{"class":"ui-pnotify "+a.addclass,css:{display:"none"},mouseenter:function(e){a.nonblock&&e.stopPropagation(),a.mouse_reset&&u=="out"&&(d.stop(!0),u="in",d.css("height","auto").animate({width:a.width,opacity:a.nonblock?a.nonblock_opacity:a.opacity},"fast")),a.nonblock&&d.animate({opacity:a.nonblock_opacity},"fast"),a.hide&&a.mouse_reset&&d.pnotify_cancel_remove(),a.sticker&&!a.nonblock&&d.sticker.trigger("pnotify_icon").css("visibility","visible"),a.closer&&!a.nonblock&&d.closer.css("visibility","visible")},mouseleave:function(t){a.nonblock&&t.stopPropagation(),l=null,d.css("cursor","auto"),a.nonblock&&u!="out"&&d.animate({opacity:a.opacity},"fast"),a.hide&&a.mouse_reset&&d.pnotify_queue_remove(),a.sticker_hover&&d.sticker.css("visibility","hidden"),a.closer_hover&&d.closer.css("visibility","hidden"),e.pnotify_position_all()},mouseover:function(e){a.nonblock&&e.stopPropagation()},mouseout:function(e){a.nonblock&&e.stopPropagation()},mousemove:function(e){a.nonblock&&(e.stopPropagation(),h(e,"onmousemove"))},mousedown:function(e){a.nonblock&&(e.stopPropagation(),e.preventDefault(),h(e,"onmousedown"))},mouseup:function(e){a.nonblock&&(e.stopPropagation(),e.preventDefault(),h(e,"onmouseup"))},click:function(e){a.nonblock&&(e.stopPropagation(),h(e,"onclick"))},dblclick:function(e){a.nonblock&&(e.stopPropagation(),h(e,"ondblclick"))}});d.opts=a,d.container=e("<div />",{"class":p.container+" ui-pnotify-container "+(a.type=="error"?p.error:a.type=="info"?p.info:a.type=="success"?p.success:p.notice)}).appendTo(d),a.cornerclass!=""&&d.container.removeClass("ui-corner-all").addClass(a.cornerclass),a.shadow&&d.container.addClass("ui-pnotify-shadow"),d.pnotify_version="1.2.0",d.pnotify=function(t){var n=a;typeof t=="string"?a.text=t:a=e.extend({},a,t);for(var r in a)typeof r=="string"&&r.match(/^pnotify_/)&&(a[r.replace(/^pnotify_/,"")]=a[r]);d.opts=a,a.cornerclass!=n.cornerclass&&d.container.removeClass("ui-corner-all").addClass(a.cornerclass),a.shadow!=n.shadow&&(a.shadow?d.container.addClass("ui-pnotify-shadow"):d.container.removeClass("ui-pnotify-shadow")),a.addclass===!1?d.removeClass(n.addclass):a.addclass!==n.addclass&&d.removeClass(n.addclass).addClass(a.addclass),a.title===!1?d.title_container.slideUp("fast"):a.title!==n.title&&(a.title_escape?d.title_container.text(a.title).slideDown(200):d.title_container.html(a.title).slideDown(200)),a.text===!1?d.text_container.slideUp("fast"):a.text!==n.text&&(a.text_escape?d.text_container.text(a.text).slideDown(200):d.text_container.html(a.insert_brs?String(a.text).replace(/\n/g,"<br />"):a.text).slideDown(200)),d.pnotify_history=a.history,d.pnotify_hide=a.hide,a.type!=n.type&&d.container.removeClass(p.error+" "+p.notice+" "+p.success+" "+p.info).addClass(a.type=="error"?p.error:a.type=="info"?p.info:a.type=="success"?p.success:p.notice);if(a.icon!==n.icon||a.icon===!0&&a.type!=n.type)d.container.find("div.ui-pnotify-icon").remove(),a.icon!==!1&&e("<div />",{"class":"ui-pnotify-icon"}).append(e("<span />",{"class":a.icon===!0?a.type=="error"?p.error_icon:a.type=="info"?p.info_icon:a.type=="success"?p.success_icon:p.notice_icon:a.icon})).prependTo(d.container);return a.width!==n.width&&d.animate({width:a.width}),a.min_height!==n.min_height&&d.container.animate({minHeight:a.min_height}),a.opacity!==n.opacity&&d.fadeTo(a.animate_speed,a.opacity),!a.closer||a.nonblock?d.closer.css("display","none"):d.closer.css("display","block"),!a.sticker||a.nonblock?d.sticker.css("display","none"):d.sticker.css("display","block"),d.sticker.trigger("pnotify_icon"),a.sticker_hover?d.sticker.css("visibility","hidden"):a.nonblock||d.sticker.css("visibility","visible"),a.closer_hover?d.closer.css("visibility","hidden"):a.nonblock||d.closer.css("visibility","visible"),a.hide?n.hide||d.pnotify_queue_remove():d.pnotify_cancel_remove(),d.pnotify_queue_position(),d},d.pnotify_position=function(e){var t=d.opts.stack;if(!t)return;t.nextpos1||(t.nextpos1=t.firstpos1),t.nextpos2||(t.nextpos2=t.firstpos2),t.addpos2||(t.addpos2=0);var n=d.css("display")=="none";if(!n||e){var r,s,o={},u;switch(t.dir1){case"down":u="top";break;case"up":u="bottom";break;case"left":u="right";break;case"right":u="left"}r=parseInt(d.css(u)),isNaN(r)&&(r=0),typeof t.firstpos1=="undefined"&&!n&&(t.firstpos1=r,t.nextpos1=t.firstpos1);var a;switch(t.dir2){case"down":a="top";break;case"up":a="bottom";break;case"left":a="right";break;case"right":a="left"}s=parseInt(d.css(a)),isNaN(s)&&(s=0),typeof t.firstpos2=="undefined"&&!n&&(t.firstpos2=s,t.nextpos2=t.firstpos2);if(t.dir1=="down"&&t.nextpos1+d.height()>i.height()||t.dir1=="up"&&t.nextpos1+d.height()>i.height()||t.dir1=="left"&&t.nextpos1+d.width()>i.width()||t.dir1=="right"&&t.nextpos1+d.width()>i.width())t.nextpos1=t.firstpos1,t.nextpos2+=t.addpos2+(typeof t.spacing2=="undefined"?25:t.spacing2),t.addpos2=0;if(t.animation&&t.nextpos2<s)switch(t.dir2){case"down":o.top=t.nextpos2+"px";break;case"up":o.bottom=t.nextpos2+"px";break;case"left":o.right=t.nextpos2+"px";break;case"right":o.left=t.nextpos2+"px"}else d.css(a,t.nextpos2+"px");switch(t.dir2){case"down":case"up":d.outerHeight(!0)>t.addpos2&&(t.addpos2=d.height());break;case"left":case"right":d.outerWidth(!0)>t.addpos2&&(t.addpos2=d.width())}if(t.nextpos1)if(t.animation&&(r>t.nextpos1||o.top||o.bottom||o.right||o.left))switch(t.dir1){case"down":o.top=t.nextpos1+"px";break;case"up":o.bottom=t.nextpos1+"px";break;case"left":o.right=t.nextpos1+"px";break;case"right":o.left=t.nextpos1+"px"}else d.css(u,t.nextpos1+"px");(o.top||o.bottom||o.right||o.left)&&d.animate(o,{duration:500,queue:!1});switch(t.dir1){case"down":case"up":t.nextpos1+=d.height()+(typeof t.spacing1=="undefined"?25:t.spacing1);break;case"left":case"right":t.nextpos1+=d.width()+(typeof t.spacing1=="undefined"?25:t.spacing1)}}},d.pnotify_queue_position=function(t){n&&clearTimeout(n),t||(t=10),n=setTimeout(e.pnotify_position_all,t)},d.pnotify_display=function(){d.parent().length||d.appendTo(r);if(a.before_open&&a.before_open(d)===!1)return;a.stack.push!="top"&&d.pnotify_position(!0),a.animation=="fade"||a.animation.effect_in=="fade"?d.show().fadeTo(0,0).hide():a.opacity!=1&&d.show().fadeTo(0,a.opacity).hide(),d.animate_in(function(){a.after_open&&a.after_open(d),d.pnotify_queue_position(),a.hide&&d.pnotify_queue_remove()})},d.pnotify_remove=function(){d.timer&&(window.clearTimeout(d.timer),d.timer=null);if(a.before_close&&a.before_close(d)===!1)return;d.animate_out(function(){if(a.after_close&&a.after_close(d)===!1)return;d.pnotify_queue_position(),a.remove&&d.detach()})},d.animate_in=function(e){u="in";var t;typeof a.animation.effect_in!="undefined"?t=a.animation.effect_in:t=a.animation,t=="none"?(d.show(),e()):t=="show"?d.show(a.animate_speed,e):t=="fade"?d.show().fadeTo(a.animate_speed,a.opacity,e):t=="slide"?d.slideDown(a.animate_speed,e):typeof t=="function"?t("in",e,d):d.show(t,typeof a.animation.options_in=="object"?a.animation.options_in:{},a.animate_speed,e)},d.animate_out=function(e){u="out";var t;typeof a.animation.effect_out!="undefined"?t=a.animation.effect_out:t=a.animation,t=="none"?(d.hide(),e()):t=="show"?d.hide(a.animate_speed,e):t=="fade"?d.fadeOut(a.animate_speed,e):t=="slide"?d.slideUp(a.animate_speed,e):typeof t=="function"?t("out",e,d):d.hide(t,typeof a.animation.options_out=="object"?a.animation.options_out:{},a.animate_speed,e)},d.pnotify_cancel_remove=function(){d.timer&&window.clearTimeout(d.timer)},d.pnotify_queue_remove=function(){d.pnotify_cancel_remove(),d.timer=window.setTimeout(function(){d.pnotify_remove()},isNaN(a.delay)?0:a.delay)},d.closer=e("<div />",{"class":"ui-pnotify-closer",css:{cursor:"pointer",visibility:a.closer_hover?"hidden":"visible"},click:function(){d.pnotify_remove(),d.sticker.css("visibility","hidden"),d.closer.css("visibility","hidden")}}).append(e("<span />",{"class":p.closer})).appendTo(d.container),(!a.closer||a.nonblock)&&d.closer.css("display","none"),d.sticker=e("<div />",{"class":"ui-pnotify-sticker",css:{cursor:"pointer",visibility:a.sticker_hover?"hidden":"visible"},click:function(){a.hide=!a.hide,a.hide?d.pnotify_queue_remove():d.pnotify_cancel_remove(),e(this).trigger("pnotify_icon")}}).bind("pnotify_icon",function(){e(this).children().removeClass(p.pin_up+" "+p.pin_down).addClass(a.hide?p.pin_up:p.pin_down)}).append(e("<span />",{"class":p.pin_up})).appendTo(d.container),(!a.sticker||a.nonblock)&&d.sticker.css("display","none"),a.icon!==!1&&e("<div />",{"class":"ui-pnotify-icon"}).append(e("<span />",{"class":a.icon===!0?a.type=="error"?p.error_icon:a.type=="info"?p.info_icon:a.type=="success"?p.success_icon:p.notice_icon:a.icon})).prependTo(d.container),d.title_container=e("<h4 />",{"class":"ui-pnotify-title"}).appendTo(d.container),a.title===!1?d.title_container.hide():a.title_escape?d.title_container.text(a.title):d.title_container.html(a.title),d.text_container=e("<div />",{"class":"ui-pnotify-text"}).appendTo(d.container),a.text===!1?d.text_container.hide():a.text_escape?d.text_container.text(a.text):d.text_container.html(a.insert_brs?String(a.text).replace(/\n/g,"<br />"):a.text),typeof a.width=="string"&&d.css("width",a.width),typeof a.min_height=="string"&&d.container.css("min-height",a.min_height),d.pnotify_history=a.history,d.pnotify_hide=a.hide;var v=i.data("pnotify");if(v==null||typeof v!="object")v=[];a.stack.push=="top"?v=e.merge([d],v):v=e.merge(v,[d]),i.data("pnotify",v),a.stack.push=="top"&&d.pnotify_queue_position(1),a.after_init&&a.after_init(d);if(a.history){var m=i.data("pnotify_history");if(typeof m=="undefined"){m=e("<div />",{"class":"ui-pnotify-history-container "+p.hi_menu,mouseleave:function(){m.animate({top:"-"+t+"px"},{duration:100,queue:!1})}}).append(e("<div />",{"class":"ui-pnotify-history-header",text:"Redisplay"})).append(e("<button />",{"class":"ui-pnotify-history-all "+p.hi_btn,text:"All",mouseenter:function(){e(this).addClass(p.hi_btnhov)},mouseleave:function(){e(this).removeClass(p.hi_btnhov)},click:function(){return e.each(v,function(){this.pnotify_history&&(this.is(":visible")?this.pnotify_hide&&this.pnotify_queue_remove():this.pnotify_display&&this.pnotify_display())}),!1}})).append(e("<button />",{"class":"ui-pnotify-history-last "+p.hi_btn,text:"Last",mouseenter:function(){e(this).addClass(p.hi_btnhov)},mouseleave:function(){e(this).removeClass(p.hi_btnhov)},click:function(){var e=-1,t;do{e==-1?t=v.slice(e):t=v.slice(e,e+1);if(!t[0])break;e--}while(!t[0].pnotify_history||t[0].is(":visible"));return t[0]?(t[0].pnotify_display&&t[0].pnotify_display(),!1):!1}})).appendTo(r);var g=e("<span />",{"class":"ui-pnotify-history-pulldown "+p.hi_hnd,mouseenter:function(){m.animate({top:"0"},{duration:100,queue:!1})}}).appendTo(m);t=g.offset().top+2,m.css({top:"-"+t+"px"}),i.data("pnotify_history",m)}}return a.stack.animation=!1,d.pnotify_display(),d}});var u=/^on/,a=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,f=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/,l=/^(scroll|resize|(un)?load|abort|error)$/,c=function(t,n){var r;t=t.toLowerCase();if(document.createEvent&&this.dispatchEvent){t=t.replace(u,""),t.match(a)?(e(this).offset(),r=document.createEvent("MouseEvents"),r.initMouseEvent(t,n.bubbles,n.cancelable,n.view,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget)):t.match(f)?(r=document.createEvent("UIEvents"),r.initUIEvent(t,n.bubbles,n.cancelable,n.view,n.detail)):t.match(l)&&(r=document.createEvent("HTMLEvents"),r.initEvent(t,n.bubbles,n.cancelable));if(!r)return;this.dispatchEvent(r)}else t.match(u)||(t="on"+t),r=document.createEventObject(n),this.fireEvent(t,r)};e.pnotify.defaults={title:!1,title_escape:!1,text:!1,text_escape:!1,styling:"bootstrap",addclass:"",cornerclass:"",nonblock:!1,nonblock_opacity:.2,history:!0,width:"300px",min_height:"16px",type:"notice",icon:!0,animation:"fade",animate_speed:"slow",opacity:1,shadow:!0,closer:!0,closer_hover:!0,sticker:!0,sticker_hover:!0,hide:!0,delay:8e3,mouse_reset:!0,remove:!0,insert_brs:!0,stack:{dir1:"down",dir2:"left",push:"bottom",spacing1:25,spacing2:25}}}(jQuery),define("libs/jquery/pnotify/jquery.pnotify",function(){}),define("app/util/notification",["app/util/dom","libs/jquery/pnotify/jquery.pnotify"],function(e){function i(e){return e}function o(e,t,n){for(var r=0;r<n.length;r++)"undefined"!=typeof e[n[r].src]&&(t[n[r].dst]=n[r].handler(e[n[r].src]))}var t=5e3,n=2500,r=1e4,s=[{src:"text",dst:"text",handler:i},{src:"type",dst:"type",handler:i},{src:"icon",dst:"notice_icon",handler:function(e){return"ui-icon "+e}},{src:"timeout",dst:"delay",handler:i},{src:"hide",dst:"hide",handler:i},{src:"before_open",dst:"before_open",handler:i},{src:"before_close",dst:"before_close",handler:i},{src:"after_open",dst:"after_open",handler:i},{src:"after_close",dst:"after_close",handler:i},{src:"history",dst:"history",handler:i},{src:"sticker",dst:"sticker",handler:i},{src:"width",dst:"width",handler:i},{src:"min_height",dst:"min_height",handler:i},{src:"opacity",dst:"opacity",handler:i},{src:"stack",dst:"stack",handler:i},{src:"shadow",dst:"shadow",handler:i}];return{error:function(e,t){return t=t||{},t.type="error",this.success(e,t)},success:function(e,n){n=n||{};var r={title:e,shadow:!0,delay:t,sticker:!1,insert_brs:!1,styling:"jqueryui",title_escape:!1,text_escape:!1};return o(n,r,s),r.text||(r.text=""),r.text+='\n<div class="pg-clear"></div>',$.pnotify(r)},context:function(e,t){t=t||{},t.voffset=t.voffset||25,t.width=t.width||"420px";var n=this.tip(e,t),r=function(){$("body").off("mousedown",r),n.remove()};return n.mousedown(function(e){e.stopPropagation()}),$("body").on("mousedown",r),n},copier:function(t,n){n=n||{};var r=navigator.userAgent.indexOf("Mac OS X")!=-1?"CMD+C":"CTRL+C";n.text='<div class="pg-message">'+n.text+'</div><div class="pg-textarea"><textarea>'+n.copy+'</textarea></div><div class="pg-footer">'+r+" to copy the link</div>";var i=this.context(t,n),s=i.find("textarea");return s.click(function(){e.selectText(s.get(0))}),setTimeout(function(){e.selectText(s.get(0))},500),i},tip:function(e,t){function i(){var e=$(n).offset(),i=$(n).outerWidth(),s=r.outerWidth(),o=(i-s)/2+e.left;o<t.hoffset?o=t.hoffset:o+s+t.hoffset>$(window).width()&&(o=$(window).width()-t.hoffset-s),r.css({left:o+"px",top:e.top+t.voffset+"px"})}function s(){$(window).off("resize",i)}t=t||{},t.history=!1,t.sticker=!1,t.hide=!1,t.stack=!1,t.shadow=!0,t.type=t.type||"info",t.opacity=.95,t.voffset=t.voffset||40,t.hoffset=t.hoffset||10;var n=t.target||document.body,r=this.success(e,t);$(window).on("resize",i);var o=t.before_close;return t.before_close=function(e){console.log(o),o&&o.apply(this,e),s(this,e)},setTimeout(i,0),r},main:function(e,t){function i(){var e=$(window).width(),t=$(window).height(),n=r.outerWidth(),i=r.outerHeight();r.css({left:(e-n)/2+"px",top:(t-i)/2+"px"})}function s(){$(window).off("resize",i)}t=t||{},t.history=!1,t.sticker=!1,t.width="500px",t.min_height||(t.min_height="300px"),t.hide=!1,t.stack=!1,t.shadow=!0,t.type="info",t.opacity=.95;var n=t.before_close;t.before_close=function(e){n&&n.apply(this,e),s(this,e)};var r=this.success(e,t);return $(window).on("resize",i),setTimeout(i,0),r},quick:function(e,t){return t=t||{},t.timeout=n,this.success(e,t)},progress:function(e,t){var n=1,i,s,o,u=t.text||"",a;return t.hide=!1,t.text='<div class="pg-message">'+u+'</div><div class="pg-progress-bar"></div>',t.before_open=function(e){i=e,s=e.find("div.pg-progress-bar"),o=e.find("div.pg-message")},t.progressStart=function(e){clearInterval(a),i.show(),o.removeClass("ui-state-error"),o.html(e),s.show(),s.progressbar({value:0})},t.progressStep=function(e){var t=e*100;t>100&&(t=100),s.progressbar({value:t})},t.progressComplete=function(e){o.html(e),s.hide(),a=setTimeout(function(){i.hide()},r)},t.progressError=function(e){s.hide(),o.addClass("ui-state-error").html(e),a=setTimeout(function(){i.hide()},r)},t.el=this.success(e,t)}}}),function(e,t){e.widget("ui.progressbar",{version:"@VERSION",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){e==="value"&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return typeof e!="number"&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})}(jQuery),define("libs/jquery/ui/jquery.ui.progressbar",function(){}),function(e,t){function i(){return++n}function s(e){return e=e.cloneNode(!1),e.hash.length>1&&e.href.replace(r,"")===location.href.replace(r,"")}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"@VERSION",options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t,n=this,r=this.options,i=r.active;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this._processTabs();if(i===null){location.hash&&this.anchors.each(function(e,t){if(t.hash===location.hash)return i=e,!1}),i===null&&(i=this.lis.filter(".ui-tabs-active").index());if(i===null||i===-1)i=this.lis.length?0:!1}i!==!1&&(i=this.lis.eq(i).index(),i===-1&&(i=r.collapsible?!1:0)),r.active=i,!r.collapsible&&r.active===!1&&this.anchors.length&&(r.active=0),e.isArray(r.disabled)&&(r.disabled=e.unique(r.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e){return n.lis.index(e)}))).sort()),this._refresh(),this.panels.hide(),this.lis.removeClass("ui-tabs-active ui-state-active"),r.active!==!1&&this.anchors.length?(this.active=this._findActive(r.active),t=this._getPanelForTab(this.active),t.show(),this.lis.eq(r.active).addClass("ui-tabs-active ui-state-active"),this.load(r.active)):this.active=e()},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t,n=this.options,r=this.list.children(":has(a[href])");n.disabled=e.map(r.filter(".ui-state-disabled"),function(e){return r.index(e)}),this._processTabs(),this._refresh(),this.panels.not(this._getPanelForTab(this.active)).hide(),n.active===!1||!this.anchors.length?(n.active=!1,this.active=e()):this.active.length&&!e.contains(this.list[0],this.active[0])?(t=n.active-1,this._activate(t>=0?t:0)):n.active=this.lis.index(this.active)},_refresh:function(){var e=this.options;this.element.toggleClass("ui-tabs-collapsible",e.collapsible),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.anchors.addClass("ui-tabs-anchor"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),this._setupDisabled(e.disabled),this._setupEvents(e.event),this._setupHeightStyle(e.heightStyle),this.lis.unbind(".tabs"),this._focusable(this.lis),this._hoverable(this.lis)},_processTabs:function(){var t=this;this.list=this._getList(),this.lis=this.list.find("> li:has(a[href])"),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).closest("li");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(a),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.list))),o.length&&(t.panels=t.panels.add(o)),a.data("ui-tabs-aria-controls",a.attr("aria-controls")).attr("aria-controls",i.substring(1))})},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.lis[n];n++)e(r).toggleClass("ui-state-disabled",t===!0||e.inArray(n,t)!==-1);this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this.anchors
.unbind(".tabs"),this._bind(this.anchors,n)},_setupHeightStyle:function(t){var n,r,i=this.element.parent();t==="fill"?(e.support.minHeight||(r=i.css("overflow"),i.css("overflow","hidden")),n=i.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),r&&i.css("overflow",r),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.lis.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.lis.index(s),t),this._toggle(t,l)},_toggle:function(e,t){function s(){n.running=!1,n._trigger("activate",e,t)}function o(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&n.options.show?n._show(r,n.options.show,s):(r.show(),s())}var n=this,r=t.newPanel,i=t.oldPanel;this.running=!0,i.length&&this.options.hide?this._hide(i,this.options.hide,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i.hide(),o())},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.lis.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){return this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.removeClass("ui-tabs-anchor").unbind(".tabs").removeData("href.tabs").removeData("load.tabs"),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-active","ui-state-active","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom"].join(" "))}),this.lis.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n):t.removeAttr("aria-controls")}),this.options.heightStyle!=="content"&&this.panels.css("height",""),this},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.lis,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.lis.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax({url:o.attr("href"),beforeSend:function(t,i){return r._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:i},a))}}),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),e===r.xhr&&delete r.xhr},1)}))},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.uiBackCompat!==!1&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this.element.bind("tabsbeforeload.tabs",function(n,r){if(e.data(r.tab[0],"cache.tabs")){n.preventDefault();return}e.extend(r.ajaxSettings,t.options.ajaxOptions,{error:function(e,n,i){try{t.options.ajaxOptions.error(e,n,r.tab.closest("li").index(),r.tab[0])}catch(i){}}}),r.jqXHR.success(function(){t.options.cache&&e.data(r.tab[0],"cache.tabs",!0)})})},_setOption:function(e,t){e==="cache"&&t===!1&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e,t){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._bind({tabsbeforeload:function(e,t){if(!this.options.spinner)return;var n=t.tab.find("span"),r=n.html();n.html(this.options.spinner),t.jqXHR.complete(function(){n.html(r)})}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var n=this.options,r;if(t&&n.disabled===!0||e.isArray(n.disabled)&&e.inArray(t,n.disabled)!==-1)r=!0;this._superApply(arguments),r&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var n=this.options,r;if(t&&n.disabled===!1||e.isArray(n.disabled)&&e.inArray(t,n.disabled)===-1)r=!0;this._superApply(arguments),r&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(n,r,i){i===t&&(i=this.anchors.length);var s,o,u=this.options,a=e(u.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,r)),f=n.indexOf("#")?this._tabId(a):n.replace("#","");return a.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),a.attr("aria-controls",f),s=i>=this.lis.length,o=this.element.find("#"+f),o.length||(o=this._createPanel(f),s?i>0?o.insertAfter(this.panels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.panels[i])),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),s?a.appendTo(this.list):a.insertBefore(this.lis[i]),u.disabled=e.map(u.disabled,function(e){return e>=i?++e:e}),this.refresh(),this.lis.length===1&&u.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(t){t=this._getIndex(t);var n=this.options,r=this.lis.eq(t).remove(),i=this._getPanelForTab(r).remove();return r.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e){return e!==t}),function(e){return e>=t?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var n=t.is("li")?t.find("a[href]"):t;return n=n[0],e(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;e.active===null&&e.selected!==t&&(e.active=e.selected===-1?!1:e.selected),this._super(),e.selected=e.active,e.selected===!1&&(e.selected=-1)},_setOption:function(e,t){if(e!=="selected")return this._super(e,t);var n=this.options;this._super("active",t===-1?!1:t),n.selected=n.active,n.selected===!1&&(n.selected=-1)},_eventHandler:function(e){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,n){var r=this._superApply(arguments);return r?(e==="beforeActivate"&&n.newTab.length?r=this._super("select",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()}):e==="activate"&&n.newTab.length&&(r=this._super("show",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()})),r):!1}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){e=this._getIndex(e);if(e===-1){if(!this.options.collapsible||this.options.selected===-1)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+".tabs")}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e=this.options,t;e.active==null&&e.cookie&&(t=parseInt(this._cookie(),10),t===-1&&(t=!1),e.active=t),this._super()},_cookie:function(n){var r=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(r.push(n===!1?-1:n),r.push(this.options.cookie)),e.cookie.apply(null,r)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(e){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,n,r){var i=e.extend({},r);return t==="load"&&(i.panel=i.panel[0],i.tab=i.tab.find(".ui-tabs-anchor")[0]),this._super(t,n,i)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,n,r=this.options.fx;return r&&(e.isArray(r)?(t=r[0],n=r[1]):t=n=r),r?{show:n,hide:t}:null},_toggle:function(e,t){function o(){n.running=!1,n._trigger("activate",e,t)}function u(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&s.show?r.animate(s.show,s.show.duration,function(){o()}):(r.show(),o())}var n=this,r=t.newPanel,i=t.oldPanel,s=this._getFx();if(!s)return this._super(e,t);n.running=!0,i.length&&s.hide?i.animate(s.hide,s.hide.duration,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i.hide(),u())}}))}(jQuery),define("libs/jquery/ui/jquery.ui.tabs",function(){}),function(e){var t=null;e.widget("ui.menu",{version:"@VERSION",defaultElement:"<ul>",delay:300,options:{menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click.menu",e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._bind({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(n){var r=e(n.target);r[0]!==t&&(t=r[0],r.one("click.menu",function(e){t=null}),r.closest(".ui-menu-item").is(".ui-state-disabled")||(this.select(n),this._delay(function(){this.element.is(":focus")||this.element.focus()},20)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t){var n=this.element,r=n.children(".ui-menu-item").eq(0);this._hasScroll()&&!this.active?n.children().each(function(){var t=e(this);if(t.offset().top-n.offset().top>=0)return r=t,!1}):this.active&&(r=this.active),this.focus(t,r)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._bind(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t)}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content"),e(t).unbind("click.menu")},_keydown:function(t){function u(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active.is(".ui-state-disabled")||this.expand(t);break;case e.ui.keyCode.ENTER:this._activate(t);break;case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,n=this.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+u(i),"i")).test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),n=this.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+u(i),"i")).test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});t=n.add(this.element),t.children(":not( .ui-menu-item ):has( a )").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),n.each(function(){var t=e(this),n=t.prev("a"),r=e('<span class="ui-menu-icon ui-icon ui-icon-carat-1-e"></span>').data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))})},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(t,n){var r,i;this.blur(t,t&&t.type==="focus"),this._scrollIntoView(n),this.active=n.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&t.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),r=e("> .ui-menu",n),r.length&&/^mouse/.test(t.type)&&this._startOpening(r),this.activeMenu=n.parent(),this._trigger("focus",t,{item:n})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},e.type(this.options.position)==="function"?this.options.position(this.active):this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents()).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(t&&t.length)return this._close(),this.focus(e,t),!0},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(t&&t.length)return this._open(t.parent()),this._delay(function(){this.focus(e,t)},20),!0},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){if(!this.active){this._move("next","first",t);return}if(this.isLastItem())return;if(this._hasScroll()){var n=this.active.offset().top,r=this.element.height(),i;this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),e(this).offset().top-n-r<0}),this.focus(t,i)}else this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){if(!this.active){this._move("next","first",t);return}if(this.isFirstItem())return;if(this._hasScroll()){var n=this.active.offset().top,r=this.element.height(),i;this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),e(this).offset().top-n+r>0}),this.focus(t,i)}else this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){var t={item:this.active};this.collapseAll(e,!0),this._trigger("select",e,t)}})}(jQuery),define("libs/jquery/ui/jquery.ui.menu",function(){}),define("app/util/ui",["app/util/dom","app/util/notification","jquery","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.progressbar","libs/jquery/ui/jquery.ui.tabs","libs/jquery/ui/jquery.ui.menu"],function(e,t){var n,r=0;return $.fn.outerHTML=function(){return this.length?this[0].outerHTML||function(e){var t=document.createElement("div");t.appendChild(e.cloneNode(!0));var n=t.innerHTML;return t=null,n}(this[0]):this},n={clickOrDoubleClick:function(e,t,n){var r=0;e.click(function(e){r++,r===1?setTimeout(function(){if(r!==1){r=0;return}r=0,t.call(this,e)},200):(r=0,n.call(this,e))})},button:function(e,t){e=$(e),t=$.extend({disabled:!1,label:"",text:!1,handler:function(){},icons:null},t);var r={disabled:t.disabled,text:t.text,label:t.label,icons:t.icon?{primary:t.icon}:t.icons};r.icons||delete r.icons;var i=e.append("<button></button>").find("button:last").button(r).click(function(e){return t.handler.apply(i.get(0)),e.preventDefault(),!1});return t.description&&n.tooltip(i,t.description),i},menu:function(e,t){return e=$(e),t=$.extend({disabled:!1},t),e.menu({disabled:t.disabled})},contextmenu:function(e,t){"string"==typeof e?e=$("body").append(e).find("div:last ul"):e=$(e);var n=e.parent(),t=this.menu(e,t);return n.hide(),n.mouseleave(function(){n.hide()}).click(function(){n.hide()}),n},tabs:function(e,t){return e=$(e),e.tabs(t)},radios:function(e,t){var i;e=$(e),t&&(e.find("*").remove(),r++,$(t).each(function(s,o){var u=o.group,a="pg-buttonset-"+r+"-"+s,f=o.label;o.btn=e.append('<input type="radio" id="'+a+'" name="'+u+'" '+(o.checked?'checked="checked" ':"")+'/><label for="'+a+'">'+f+"</label>").find("#"+a),o.btn.click(function(){$(t).each(function(e,t){t.checked=t.token===o.token}),o.handler(o)}),o.checked&&(i=o.btn),o.description&&n.tooltip(btn,o.description)}));var s=e.buttonset();return i&&setTimeout(function(){i.click()},100),s},checks:function(e,t){return e=$(e),t&&(e.find("*").remove(),r++,$(t).each(function(t,i){var s=i.name||"",o=i.checked||!1,u="pg-buttonset-"+r+"-"+t,a=i.label,f=e.append('<input type="checkbox" id="'+u+'" name="'+s+'" '+(o?'checked="checked" ':"")+'/><label for="'+u+'">'+a+"</label>").find("#"+u);f.click(function(e){i.checked=!!f.attr("checked"),i.handler&&i.handler.call(f,e,i)}),i.description&&n.tooltip(f,i.description)})),e.buttonset()},buttonset:function(e){return e=$(e),e.buttonset()},progressbar:function(e){return e=$(e),e.progressbar()},tooltip:function(e,t){var n="function"==typeof t?t:function(){return t};return $(e).attr("title",n.apply($(e),[])),e},edit:function(n,r){function a(){u&&u.remove(),n.html(s),r.cancel()}n=$(n),r=$.extend({handler:function(e){return null},cancel:function(){}},r);var i=r.text||n.text().trim(),s=n.html(),o=n.html('<input type="text" name="pg-editable" id="pg-editable" value="'+i+'" />').find("#pg-editable"),u;$(document.body).one("mousedown",function(){a()}),o.change(function(){var e=o.val();if(e===i)return a();r.handler(e,function(r){u&&u.remove();if(r){u=t.tip("invalid value",{target:n,text:r,type:"error"});return}n.html(e)})}).keyup(function(e){switch(e.which){case 9:case 13:o.trigger("change");break;case 27:a()}}),o.focus();var f=n.get(0);e.canSelect(f)||(f=o.get(0)),e.selectText(f,0,i.length)}}}),define("rtext!templates/toolbar.main.html",[],function(){return'<div class="pg-toolbar-actions">\n    <a class="pg-brand" href="#" target="_blank"><span class="pg-logo"></span></a>\n</div>\n<div class="pg-toolbar-context">\n\n</div>'}),define("app/util/fullscreen",[],function(){function r(){e=!window.screenTop&&!window.screenY,$(".pg-precog-labcoat .pg-fullscreen span.k-link").text(e?"reduce":"fullscreen")}var e,t,n;return document.documentElement.requestFullscreen?t=function(e){e.requestFullscreen()}:document.documentElement.mozRequestFullScreen?t=function(e){e.mozRequestFullScreen()}:document.documentElement.webkitRequestFullScreen?t=function(e){e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),document.webkitCurrentFullScreenElement||e.webkitRequestFullScreen()}:(setTimeout(function(){$(".pg-precog-labcoat .pg-fullscreen").hide()},20),t=function(){console.log("your browser doesn't support the FullScreen option")}),document.exitFullscreen?n=function(){document.exitFullscreen()}:document.mozCancelFullScreen?n=function(){document.mozCancelFullScreen()}:document.webkitCancelFullScreen?n=function(e){e.webkitRequestFullScreen(),document.webkitCancelFullScreen()}:n=function(){console.log("your browser doesn't support the FullScreen option")},document.addEventListener&&(document.addEventListener("fullscreenchange",r,!1),document.addEventListener("mozfullscreenchange",r,!1),document.addEventListener("webkitfullscreenchange",r,!1)),r(),{toggle:function(r){r=r||document.documentElement,e?n(r):t(r)},isFullScreen:function(){return e}}}),define("rtext!templates/dialog.confirm.html",[],function(){return'<div class="pg-dialog-confirm">\n    <div class="pg-message"></div>\n</div>'}),define("app/util/numbercaptcha",[],function(){function e(e,t){return e+Math.floor(Math.random()*(1+t-e))}return function(t){var n=Math.round(t),r=["+","-","/","*"][e(0,3)],i=e(1,n),s,o;switch(r){case"+":s=e(1,n),o=s+i;break;case"-":s=e(1,n);if(s<i){var u=s;s=i,i=u}o=s-i;break;case"*":s=e(2,10),o=s*i;if(e(0,1)){var u=s;s=i,i=u}break;case"/":s=i*e(2,10),o=s/i}return{first:s,second:i,operator:r,result:o,description:s+" "+r+" "+i}}}),function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"@VERSION",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t=this,r=this.options,i=r.title||"&#160;",s=(this.uiDialog=e("<div>")).addClass(n+r.dialogClass).css({display:"none",outline:0,zIndex:r.zIndex}).attr("tabIndex",-1).keydown(function(n){r.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).mousedown(function(e){t.moveToTop(!1,e)}).appendTo("body"),o=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),u=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").prependTo(s),a=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),t.close(e)}).appendTo(u),f=(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(a),l=e("<span>").uniqueId().addClass("ui-dialog-title").html(i).prependTo(u),c=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),h=(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(c);s.attr({role:"dialog","aria-labelledby":l.attr("id")}),u.find("*").add(u).disableSelection(),this._hoverable(a),this._focusable(a),r.draggable&&e.fn.draggable&&this._makeDraggable(),r.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(r.buttons),this._isOpen=!1,e.fn.bgiframe&&s.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i;if(!this._isOpen)return;if(!1===this._trigger("beforeClose",t))return;return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.uiDialog.unbind("keypress.ui-dialog"),this.options.hide?this.uiDialog.hide(this.options.hide,function(){n._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(r=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.ui.dialog.maxZ=r),this},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this.options,i;return r.modal&&!t||!r.stack&&!r.modal?this._trigger("focus",n):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),i={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(i),this._trigger("focus",n),this)},open:function(){if(this._isOpen)return;var t,n=this.options,r=this.uiDialog;return this._size(),this._position(n.position),r.show(n.show),this.overlay=n.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),n.modal&&r.bind("keydown.ui-dialog",function(t){if(t.keyCode!==e.ui.keyCode.TAB)return;var n=e(":tabbable",this),r=n.filter(":first"),i=n.filter(":last");if(t.target===i[0]&&!t.shiftKey)return r.focus(1),!1;if(t.target===r[0]&&t.shiftKey)return i.focus(1),!1}),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=r)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this},_createButtons:function(t){var n,r,i=this,s=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(s=!0)}),s?(e.each(t,function(t,n){n=e.isFunction(n)?{click:n,text:t}:n;var r=e("<button type='button'>").attr(n,!0).unbind("click").click(function(){n.click.apply(i.element[0],arguments)}).appendTo(i.uiButtonSet);e.fn.button&&r.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function u(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,i=this.options,s=this.uiDialog.css("position"),o=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,u(n))},resize:function(e,t){r._trigger("resize",e,u(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),i.height=e(this).height(),i.width=e(this).width(),r._trigger("resizeStop",t,u(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n.join(" "),at:n.join(" "),offset:r.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options
.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,r){var i,s,o=this.uiDialog;switch(t){case"buttons":this._createButtons(r);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(n+r);break;case"disabled":r?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":i=o.is(":data(draggable)"),i&&!r&&o.draggable("destroy"),!i&&r&&this._makeDraggable();break;case"position":this._position(r);break;case"resizable":s=o.is(":data(resizable)"),s&&!r&&o.resizable("destroy"),s&&typeof r=="string"&&o.resizable("option","handles",r),!s&&r!==!1&&this._makeResizable(r);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(r||"&#160;"))}this._super(t,r)},_size:function(){var t,n,r,i=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),n=Math.max(0,i.minHeight-t),i.height==="auto"?e.support.minHeight?this.element.css({minHeight:n,height:"auto"}):(this.uiDialog.show(),r=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(r,n))):this.element.height(Math.max(i.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(r){var i=e.ui.dialog.overlay.instances;i.length!==0&&i[i.length-1]===n&&t.options.closeOnEscape&&!r.isDefaultPrevented()&&r.keyCode&&r.keyCode===e.ui.keyCode.ESCAPE&&(t.close(r),r.preventDefault())}),n.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances),r=0;n!==-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),define("libs/jquery/ui/jquery.ui.dialog",function(){}),define("app/util/dialog-confirm",["rtext!templates/dialog.confirm.html","app/util/ui","app/util/dom","app/util/numbercaptcha","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.sortable","libs/jquery/ui/jquery.ui.draggable","libs/jquery/ui/jquery.ui.dialog"],function(e,t,n,r){function a(){i.dialog("option","position","center")}function f(){function t(e,t){$(window).off("resize",a)}i=$("body").append(e).find(".pg-dialog-confirm:last").dialog({modal:!0,autoOpen:!1,resizable:!1,dialogClass:"pg-el",closeOnEscape:!0,buttons:[{text:"OK",click:function(){return i.dialog("close"),s&&s(),!0},ref:"ok"},{text:"Cancel",click:function(){$(this).dialog("close"),t(),o&&o()},ref:"cancel"}]}),i.bind("dialogopen",function(){$(window).on("resize",a)}),i.bind("dialogclose",t)}var i,s,o,u,l=!1,c,h;return function(e,t,n,u){u=u||{},l||(f(),l=!0),s=n,i.dialog("option","position","center"),i.dialog("option","title",e),i.dialog("option","width",u.width&&u.width||300),i.dialog("option","height",u.height&&u.height||"auto"),i.dialog("open"),o=u.cancel;var a=i.parent().find("button[ref=ok]"),p=i.find(".pg-message");c&&c.detach(),h&&h.detach(),c=t=!t||"string"==typeof t?$("<div>"+(t||"")+"</div>"):t,p.append(t);if(u.captcha){a.button("disable");var d=h=$('<div class="captcha"></div>'),v=r(100);d.append('<div class="ui-widget"><div class="ui-state-highlight"><p>Solve this simple problem if you want to delete the data: <b>'+v.description+" is equal to?</b></p></div></div>");var m=$('<input type="number" step="1">').keyup(function(){var e=$(this).attr("value");e===""+v.result&&(d.children("*").remove(),d.append('<div class="ui-widget"><div class="ui-state-highlight"><p>Good Job! Now click OK to confirm</p></div></div>'),a.button("enable"))});d.append($('<div class="ui-widget"></div>').append("<p></p>").append(m)),p.append(d)}else a.button("enable")}}),define("rtext!templates/dialog.global.settings.html",[],function(){return'<div>\n    <dl class="labcoat-url-generator">\n\n        <dt class="header">Account Settings</dt>\n        <dt><label for="apiKey">API Key</label></dt>\n        <dd class="ui-widget-content ui-corner-all">\n            <input id="apiKey" value="" type="text" class="api-key">\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt><label for="basePath">Base Path</label></dt>\n        <dd class="ui-widget-content ui-corner-all">\n            <input id="basePath" type="text" class="path">\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt class="header">User Preferences</dt>\n        <dt><label for="limit">Limit</label></dt>\n        <dd class="ui-widget-content ui-corner-all">\n            <input id="limit" type="text" class="int">\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt><label for="theme">Theme</label></dt>\n        <dd class="ui-widget-content ui-corner-all">\n            <select id="theme"></select>\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt class="header">Server Settings</dt>\n        <dt>Analytics Service</dt>\n        <dd class="ui-widget-content ui-corner-all">\n            https://<input id="analyticsService" value="" type="text" class="url">\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt>Labcoat Host</dt>\n        <dd class="ui-widget-content ui-corner-all">\n            https://<input id="labcoatHost" value="" type="text" class="url">\n            <div class="input-error ui-state-error ui-corner-all" style="display:none"></div>\n        </dd>\n\n        <dt class="full-line output header">Labcoat Url</dt>\n        <dd class="full-line ui-widget-content ui-corner-all output ui-state-highlight"><a href="" class="labcoatUrl" target="_blank"></a></dd>\n    </dl>\n</div>'}),define("app/util/dispatcher",[],function(){function e(e,t){var n=e.length,r=[];for(var i=t;i<n;i++)r.push(e[i]);return r}return function(){var t={},n;return n={emit:function(n,r){var i=t[r]||[];for(var s=0;s<i.length;s++)if(i[s].apply(n,e(arguments,2))===!1)break},on:function(e,n){var r=t[e]||(t[e]=[]);return r.indexOf(n)>=0?!1:(r.push(n),!0)},off:function(e,n){var r=t[e],i;return(!r||(i=r.indexOf(n))<0)&&!1,r.splice(i,1),!0}}}}),define("app/util/valuemodel",["app/util/dispatcher"],function(e){return function(t,n,r){var i,s=t,o=n||function(){return null},u=r||function(e){return e},a=e(),f;return i={set:function(e){if((f=o(e))!==null)return a.emit(this,"validation.error",f,e),!1;var t=s;return s=u(e),a.emit(this,"value.change",s,t),!0},setDefault:function(e){var n=t;return t=u(e),a.emit(this,"default.change",t,n),this.set(e),!0},reset:function(){return t===s?!1:this.set(t)?(a.emit(this,"value.reset",t),!0):!1},get:function(e){return s!==null&&typeof s!="undefined"&&s||e},getDefault:function(){return t},validate:function(e){return o(e)==null},lastError:function(){return f},on:function(e,t){a.on(e,t)},off:function(e,t){a.off(e,t)},setValidator:function(e){o=e||function(){return null},a.emit(this,"validator.change",o)},setFilter:function(e){u=e||function(){return null},a.emit(this,"filter.change",e)},isDefault:function(){return s===t}}}}),define("app/util/objectmodel",["app/util/dispatcher"],function(e){return function(){function o(){for(key in i)if(i.hasOwnProperty(key))return!1;return!0}var t={},n=e(),r,i={},s=!0;return r={addField:function(e,r){this.removeField(e),t[e]=r,r.on("value.change",function(){n.emit(this,"value.change",e,r),s||(delete i[e],s=o()),s&&n.emit(this,"validation.success",e,r),n.emit(this,"object.change",e,r)}),r.on("validation.error",function(){s=!1,i[e]=!0,n.emit(this,"validation.error",e,r)}),n.emit(this,"field.add",e,r)},removeField:function(e){if(!this.hasField(e))return!1;var r=t[e];delete t[e],n.emit(this,"field.remove",e,r)},hasField:function(e){return!!t[e]},getField:function(e){return t[e]},get:function(e){var t=this.getField(e);return null==t?null:t.get()},on:function(e,t){n.on(e,t)},off:function(e,t){n.off(e,t)},isValid:function(){return s},reset:function(){for(name in t)t.hasOwnProperty(name)&&t[name].reset()},hasChanged:function(){for(name in t)if(t.hasOwnProperty(name)&&!t[name].isDefault())return!0;return!1}}}}),define("app/util/converters",[],function(){function e(e){var t=[],n=0;while(n>=0){var r=e.indexOf(e,n);r<0}return t}return{jsonToCsv:function(e){function c(e){return e.replace(u,"\\n").replace(a,"\\r").replace(f,'""')}function h(e){return"string"==typeof e?e.match(o)?'"'+c(e)+'"':e:e instanceof Array||e instanceof Object?h(JSON.stringify(e)):""+e}if(!e)return"";var t=[],n=e[0],r,i,s=[],o=/[",\n\r]/g,u=/\n/g,a=/\r/g,f=/"/g,l;r=[];if(n instanceof Object){for(i in n)n.hasOwnProperty(i)&&(s.push(i),r.push(h(i)));t.push(r.join(","));for(l=0;l<e.length;l++){r=[],n=e[l];for(var p=0;p<s.length;p++)r.push(h(n[s[p]]));t.push(r.join(","))}}else{t.push(h("value"));for(l=0;l<e.length;l++)t.push(h(e[l]))}return t.join("\n")},minifyQuirrel:function(e){function i(e,t,n){if(t.escape){var r=t.escape.length,i;for(;;){i=e.indexOf(t.close,n);if(i<0)return i;n=i+t.close.length;if(e.substr(i-r,r)===t.escape)continue;break}return i}return e.indexOf(t.close,n)}function s(e,t,n){var r=t.length,s,o;for(var u=0;u<e.length;u++)s=t.indexOf(e[u].open,n),s>=0&&s<r&&(o=e[u],o.start=r=s);return o?(o.end=i(t,o,o.start+o.open.length),o):null}function o(e,t){var n="",i,o=0,u=20;do{i=s(e,t,o);if(!i)break;i.start>o&&(n+=r(t.substr(o,i.start-o))),i.end>=0?(n+=i.handler(t.substr(i.start+i.open.length,i.end-(i.start+i.open.length))),o=i.end+i.close.length):o=-1,u--;if(u<0){console.log("GUARD REACHED",t);break}}while(i&&o<t.length&&o>=0);return i?n+=i.handler(t.substr(i.start+i.open.length)):n+=r(t.substr(o)),n.trim()}var t=[{open:'"',close:'"',escape:"\\",start:-1,end:-1,handler:function(e){return'"'+e+'"'}}],n=t.concat([{open:"--",close:"\n",escape:!1,start:-1,end:-1,handler:function(e){return" "}},{open:"(-",close:"-)",escape:!1,start:-1,end:-1,handler:function(e){return" "}}]),r=function(e){return e.replace(/(\s+)/g," ")};return o(t,o(n,e))}}}),define("rtext!templates/dialog.export.html",[],function(){return'<div class="pg-dialog-export">\n    <div class="pg-toolbar pg-actions"></div>\n    <div class="pg-toolbar pg-options"></div>\n    <form method="POST">\n        <div class="pg-export">\n            <textarea name="code" class="ui-widget-content"></textarea>\n            <input type="hidden" name="name" value="">\n        </div>\n    </form>\n</div>'}),define("app/util/uiconfig",[],function(){var e={disableUpload:$("head script[data-labcoat-disable-upload]").attr("data-labcoat-disable-upload")==="true",disableDownload:$("head script[data-labcoat-disable-download]").attr("data-labcoat-disable-download")==="true"};return e}),function(e){e.fn.zclip=function(t){if(typeof t=="object"&&!t.length){var n=e.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:!0,setHandCursor:!0,setCSSEffects:!0},t);return this.each(function(){var t=e(this);if(t.is(":visible")&&(typeof n.copy=="string"||e.isFunction(n.copy))){ZeroClipboard.setMoviePath(n.path);var r=new ZeroClipboard.Client;e.isFunction(n.copy)&&t.bind("zClip_copy",n.copy),e.isFunction(n.beforeCopy)&&t.bind("zClip_beforeCopy",n.beforeCopy),e.isFunction(n.afterCopy)&&t.bind("zClip_afterCopy",n.afterCopy),r.setHandCursor(n.setHandCursor),r.setCSSEffects(n.setCSSEffects),r.addEventListener("mouseOver",function(e){t.trigger("mouseenter")}),r.addEventListener("mouseOut",function(e){t.trigger("mouseleave")}),r.addEventListener("mouseDown",function(i){t.trigger("mousedown"),e.isFunction(n.copy)?r.setText(t.triggerHandler("zClip_copy")):r.setText(n.copy),e.isFunction(n.beforeCopy)&&t.trigger("zClip_beforeCopy")}),r.addEventListener("complete",function(r,i){e.isFunction(n.afterCopy)?t.trigger("zClip_afterCopy"):(i.length>500&&(i=i.substr(0,500)+"...\n\n("+(i.length-500)+" characters not shown)"),t.removeClass("hover"),alert("Copied text to clipboard:\n\n "+i)),n.clickAfter&&t.trigger("click")}),r.glue(t[0],t.parent()[0]),e(window).bind("load resize",function(){r.reposition()})}})}if(typeof t=="string")return this.each(function(){var n=e(this);t=t.toLowerCase();var r=n.data("zclipId"),i=e("#"+r+".zclip");t=="remove"?(i.remove(),n.removeClass("active hover")):t=="hide"?(i.hide(),n.removeClass("active hover")):t=="show"&&i.show()})}}(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(e){return typeof e=="string"&&(e=document.getElementById(e)),e.addClass||(e.hide=function(){this.style.display="none"},e.show=function(){this.style.display=""},e.addClass=function(e){this.removeClass(e),this.className+=" "+e},e.removeClass=function(e){var t=this.className.split(/\s+/),n=-1;for(var r=0;r<t.length;r++)t[r]==e&&(n=r,r=t.length);return n>-1&&(t.splice(n,1),this.className=t.join(" ")),this},e.hasClass=function(e){return!!this.className.match(new RegExp("\\s*"+e+"\\s*"))}),e},setMoviePath:function(e){this.moviePath=e},dispatch:function(e,t,n){var r=this.clients[e];r&&r.receiveEvent(t,n)},register:function(e,t){this.clients[e]=t},getDOMObjectPosition:function(e,t){var n={left:0,top:0,width:e.width?e.width:e.offsetWidth,height:e.height?e.height:e.offsetHeight};return e&&e!=t&&(n.left+=e.offsetLeft,n.top+=e.offsetTop),n},Client:function(e){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),e&&this.glue(e)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(e,t,n){this.domElement=ZeroClipboard.$(e);var r=99;this.domElement.style.zIndex&&(r=parseInt(this.domElement.style.zIndex,10)+1),typeof t=="string"?t=ZeroClipboard.$(t):typeof t=="undefined"&&(t=document.getElementsByTagName("body")[0]);var i=ZeroClipboard.getDOMObjectPosition(this.domElement,t);this.div=document.createElement("div"),this.div.className="zclip",this.div.id="zclip-"+this.movieId,$(this.domElement).data("zclipId","zclip-"+this.movieId);var s=this.div.style;s.position="absolute",s.left=""+i.left+"px",s.top=""+i.top+"px",s.width=""+i.width+"px",s.height=""+i.height+"px",s.zIndex=r;if(typeof n=="object")for(addedStyle in n)s[addedStyle]=n[addedStyle];t.appendChild(this.div),this.div.innerHTML=this.getHTML(i.width,i.height)},getHTML:function(e,t){var n="",r="id="+this.id+"&width="+e+"&height="+t;if(navigator.userAgent.match(/MSIE/)){var i=location.href.match(/^https/i)?"https://":"http://";n+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+i+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+e+'" height="'+t+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+r+'"/><param name="wmode" value="transparent"/></object>'}else n+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+e+'" height="'+t+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+r+'" wmode="transparent" />';return n},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var e=document.getElementsByTagName("body")[0];try{e.removeChild(this.div)}catch(t){}this.domElement=null,this.div=null}},reposition:function(e){e&&(this.domElement=ZeroClipboard.$(e),this.domElement||this.hide());if(this.domElement&&this.div){var t=ZeroClipboard.getDOMObjectPosition(this.domElement),n=this.div.style;n.left=""+t.left+"px",n.top=""+t.top+"px"}},setText:function(e){this.clipText=e,this.ready&&this.movie.setText(e)},addEventListener:function(e,t){e=e.toString().toLowerCase().replace(/^on/,""),this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},setHandCursor:function(e){this.handCursorEnabled=e,this.ready&&this.movie.setHandCursor(e)},setCSSEffects:function(e){this.cssEffects=!!e},receiveEvent:function(e,t){e=e.toString().toLowerCase().replace(/^on/,"");switch(e){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var n=this;setTimeout(function(){n.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var n=this;setTimeout(function(){n.receiveEvent("load",null)},100),this.ready=!0;return}this.ready=!0;try{this.movie.setText(this.clipText)}catch(r){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(r){}break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[e])for(var i=0,s=this.handlers[e].length;i<s;i++){var o=this.handlers[e][i];typeof o=="function"?o(this,t):typeof o=="object"&&o.length==2?o[0][o[1]](this,t):typeof o=="string"&&window[o](this,t)}}},define("libs/jquery/zclip/jquery.zclip",function(){}),define("app/util/dialog-export",["rtext!templates/dialog.export.html","app/util/uiconfig","app/util/ui","app/util/dom","app/util/notification","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.sortable","libs/jquery/ui/jquery.ui.draggable","libs/jquery/ui/jquery.ui.dialog","libs/jquery/zclip/jquery.zclip"],function(e,t,n,r,i){function p(){setTimeout(function(){r.selectText(o.get(0))},100)}function d(){u.dialog("option","position","center")}function v(){var n=[{text:"Copy",click:function(){return u.dialog("close"),!0}}];t.disableDownload||n.push({text:"Download",click:function(){i.quick("code downloaded"),f.submit(),u.dialog("close")}}),u=$("body").append(e).find(".pg-dialog-export").dialog({modal:!0,autoOpen:!1,resizable:!1,width:820,height:480,dialogClass:"pg-el",closeOnEscape:!0,buttons:n}),a=u.find(".pg-actions"),elOptions=u.find(".pg-options"),o=u.find(".pg-export textarea"),f=u.find("form"),f.attr("action",s),f.submit(function(e){return c?c.call(this,o.text(),h):!0}),o.click(function(){p()}),u.bind("dialogopen",function(){$(window).on("resize",d)}),u.bind("dialogclose",function(){$(window).off("resize",d)})}var s="http://api.reportgrid.com/services/viz/proxy/download-code.php",o,u,a,f,l,c,h,m=!1;return function(e,t,r,s,f){function d(e){u.find("input[name=name]").val("precog."+e.token),elOptions.find("*").remove(),e.buildOptions&&e.buildOptions(elOptions,function(){o.text(e.handler(r,e.options)),p()}),o.text(e.handler(r,e.options)),p()}c=f,m||(v(),m=!0),a.find("*").remove(),elOptions.find("*").remove(),s=s||t[0].token,n.radios(a,$(t).map(function(e,t){return t.token===s&&(h=t),{label:t.name,handler:function(){return h=t,d(t),!0},group:"actions",checked:t.token===s}})),a.find(".ui-button:first").click(),u.dialog("option","position","center"),u.dialog("option","title",e),u.dialog("open"),l?$(window).trigger("resize"):l=u.dialog("widget").find(".ui-dialog-buttonpane button.ui-button:first").css({zIndex:1e6}).zclip({path:"js/libs/jquery/zclip/ZeroClipboard.swf",copy:function(){return""+o.val()},afterCopy:function(){i.quick("copied to clipboard")}})}}),define("rtext!templates/dialog.lineinput.html",[],function(){return'<div class="pg-dialog-lineinput">\n    <div class="pg-message ui-content ui-state-highlight ui-corner-all"></div>\n    <div class="pg-lineinput">\n        <label for="pg-input-lineinput"></label> <input id="pg-input-lineinput" type="text" name="value" class="ui-widget-content" multiple/>\n    </div>\n    <div class="pg-error ui-content ui-state-error ui-corner-all"></div>\n</div>'}),define("app/util/dialog-lineinput",["rtext!templates/dialog.lineinput.html","app/util/ui","app/util/dom","libs/jquery/ui/jquery.ui.core","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.mouse","libs/jquery/ui/jquery.ui.resizable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.sortable","libs/jquery/ui/jquery.ui.draggable","libs/jquery/ui/jquery.ui.dialog"],function(e,t,n){function a(e){r.find(".pg-error").hide();var t=r.find(".pg-lineinput input[type="+o+"]").val();if(s){var n=s(t);if(n)return r.find(".pg-error").html(n).show(),e&&e.preventDefault(),!1}i&&i(t,u),r.dialog("close")}function f(){r.dialog("option","position","center")}function l(){r=$("body").append(e).find(".pg-dialog-lineinput:last").dialog({modal:!0,autoOpen:!1,resizable:!1,dialogClass:"pg-el",width:"400px",closeOnEscape:!0,buttons:[{text:"Close",click:function(){return r.dialog("close"),!0}},{text:"OK",click:a}]}),r.bind("dialogopen",function(){$(window).on("resize",f)}),r.bind("dialogclose",function(){$(window).off("resize",f)})}var r,i,s,o,u,c=!1;return function(e,t,n,f,h,p,d){d||(d="text"),o=d,c||(l(),c=!0);var v=r.find("input").outerHTML().replace(/type=["'][^"']*["']/,'type="'+d+'"');r.find("input").replaceWith(v),s=h,i=p,r.find(".pg-message").html(t||""),r.find(".pg-lineinput input[type="+o+"]").val(f||"").keyup(function(e){e.keyCode==13&&a()}).change(function(e){u=e.target.files}),r.find(".pg-error").hide(),r.find("label").html(n&&n+":"||""),r.dialog("option","position","center"),r.dialog("option","title",e),r.dialog("open")}}),define("rtext!templates/toolbar.editor.html",[],function(){return'<div class="pg-toolbar-actions pg-tabs-container">\n    <div class="pg-editor-tabs">\n        <ul></ul>\n    </div>\n</div>\n<div class="pg-toolbar-context">\n</div>'}),function(e,t){function C(e,t){this._d=e,this._isUTC=!!t}function k(e){return e<0?Math.ceil(e):Math.floor(e)}function L(e){var t=this._data={},n=e.years||e.y||0,r=e.months||e.M||0,i=e.weeks||e.w||0,s=e.days||e.d||0,o=e.hours||e.h||0,u=e.minutes||e.m||0,a=e.seconds||e.s||0,f=e.milliseconds||e.ms||0;this._milliseconds=f+a*1e3+u*6e4+o*36e5,this._days=s+i*7,this._months=r+n*12,t.milliseconds=f%1e3,a+=k(f/1e3),t.seconds=a%60,u+=k(a/60),t.minutes=u%60,o+=k(u/60),t.hours=o%24,s+=k(o/24),s+=i*7,t.days=s%30,r+=k(s/30),t.months=r%12,n+=k(r/12),t.years=n}function A(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function O(e,t,n){var r=t._milliseconds,i=t._days,s=t._months,o;r&&e._d.setTime(+e+r*n),i&&e.date(e.date()+i*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function M(e){return Object.prototype.toString.call(e)==="[object Array]"}function _(t){return new e(t[0],t[1]||0,t[2]||1,t[3]||0,t[4]||0,t[5]||0,t[6]||0)}function D(t,r){function m(r){var c,g;switch(r){case"M":return i+1;case"Mo":return i+1+d(i+1);case"MM":return A(i+1,2);case"MMM":return n.monthsShort[i];case"MMMM":return n.months[i];case"D":return s;case"Do":return s+d(s);case"DD":return A(s,2);case"DDD":return c=new e(o,i,s),g=new e(o,0,1),~~((c-g)/864e5+1.5);case"DDDo":return c=m("DDD"),c+d(c);case"DDDD":return A(m("DDD"),3);case"d":return u;case"do":return u+d(u);case"ddd":return n.weekdaysShort[u];case"dddd":return n.weekdays[u];case"w":return c=new e(o,i,s-u+5),g=new e(c.getFullYear(),0,4),~~((c-g)/864e5/7+1.5);case"wo":return c=m("w"),c+d(c);case"ww":return A(m("w"),2);case"YY":return A(o%100,2);case"YYYY":return o;case"a":return v?v(a,f,!1):a>11?"pm":"am";case"A":return v?v(a,f,!0):a>11?"PM":"AM";case"H":return a;case"HH":return A(a,2);case"h":return a%12||12;case"hh":return A(a%12||12,2);case"m":return f;case"mm":return A(f,2);case"s":return l;case"ss":return A(l,2);case"S":return~~(h/100);case"SS":return A(~~(h/10),2);case"SSS":return A(h,3);case"Z":return(p<0?"-":"+")+A(~~(Math.abs(p)/60),2)+":"+A(~~(Math.abs(p)%60),2);case"ZZ":return(p<0?"-":"+")+A(~~(10*Math.abs(p)/6),4);case"L":case"LL":case"LLL":case"LLLL":case"LT":return D(t,n.longDateFormat[r]);default:return r.replace(/(^\[)|(\\)|\]$/g,"")}}var i=t.month(),s=t.date(),o=t.year(),u=t.day(),a=t.hours(),f=t.minutes(),l=t.seconds(),h=t.milliseconds(),p=-t.zone(),d=n.ordinal,v=n.meridiem;return r.replace(c,m)}function P(e){switch(e){case"DDDD":return v;case"YYYY":return m;case"S":case"SS":case"SSS":case"DDD":return d;case"MMM":case"MMMM":case"ddd":case"dddd":case"a":case"A":return g;case"Z":case"ZZ":return y;case"T":return b;case"MM":case"DD":case"dd":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return p;default:return new RegExp(e.replace("\\",""))}}function H(e,t,r,i){var s;switch(e){case"M":case"MM":r[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":for(s=0;s<12;s++)if(n.monthsParse[s].test(t)){r[1]=s;break}break;case"D":case"DD":case"DDD":case"DDDD":r[2]=~~t;break;case"YY":t=~~t,r[0]=t+(t>70?1900:2e3);break;case"YYYY":r[0]=~~Math.abs(t);break;case"a":case"A":i.isPm=(t+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":r[3]=~~t;break;case"m":case"mm":r[4]=~~t;break;case"s":case"ss":r[5]=~~t;break;case"S":case"SS":case"SSS":r[6]=~~(("0."+t)*1e3);break;case"Z":case"ZZ":i.isUTC=!0,s=(t+"").match(x),s&&s[1]&&(i.tzh=~~s[1]),s&&s[2]&&(i.tzm=~~s[2]),s&&s[0]==="+"&&(i.tzh=-i.tzh,i.tzm=-i.tzm)}}function B(t,n){var r=[0,0,1,0,0,0,0],i={tzh:0,tzm:0},s=n.match(c),o,u;for(o=0;o<s.length;o++)u=(P(s[o]).exec(t)||[])[0],t=t.replace(P(s[o]),""),H(s[o],u,r,i);return i.isPm&&r[3]<12&&(r[3]+=12),i.isPm===!1&&r[3]===12&&(r[3]=0),r[3]+=i.tzh,r[4]+=i.tzm,i.isUTC?new e(e.UTC.apply({},r)):_(r)}function j(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function F(e,t){var n,r=e.match(h)||[],i,s=99,o,u,a;for(o=0;o<t.length;o++)u=B(e,t[o]),i=D(new C(u),t[o]).match(h)||[],a=j(r,i),a<s&&(s=a,n=u);return n}function I(t){var n="YYYY-MM-DDT",r;if(w.exec(t)){for(r=0;r<4;r++)if(S[r][1].exec(t)){n+=S[r][0];break}return y.exec(t)?B(t,n+" Z"):B(t,n)}return new e(t)}function q(e,t,r,i){var s=n.relativeTime[e];return typeof s=="function"?s(t||1,!!r,e,i):s.replace(/%d/i,t||1)}function R(e,t){var n=i(Math.abs(e)/1e3),r=i(n/60),s=i(r/60),o=i(s/24),u=i(o/365),a=n<45&&["s",n]||r===1&&["m"]||r<45&&["mm",r]||s===1&&["h"]||s<22&&["hh",s]||o===1&&["d"]||o<=25&&["dd",o]||o<=45&&["M"]||o<345&&["MM",i(o/30)]||u===1&&["y"]||["yy",u];return a[2]=t,a[3]=e>0,q.apply({},a)}function U(e,t){n.fn[e]=function(e){var n=this._isUTC?"UTC":"";return e!=null?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}}function z(e){n.duration.fn[e]=function(){return this._data[e]}}function W(e,t){n.duration.fn["as"+e]=function(){return+this/t}}var n,r="1.6.2",i=Math.round,s,o={},u="en",a=typeof module!="undefined",f="months|monthsShort|monthsParse|weekdays|weekdaysShort|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),l=/^\/?Date\((\-?\d+)/i,c=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|LT|LL?L?L?)/g,h=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,p=/\d\d?/,d=/\d{1,3}/,v=/\d{3}/,m=/\d{4}/,g=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,y=/Z|[\+\-]\d\d:?\d\d/i,b=/T/i,w=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,E="YYYY-MM-DDTHH:mm:ssZ",S=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],x=/([\+\-]|\d\d)/gi,T="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),N={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6};n=function(r,i){if(r===null||r==="")return null;var s,o,u;return n.isMoment(r)?(s=new e(+r._d),u=r._isUTC):i?M(i)?s=F(r,i):s=B(r,i):(o=l.exec(r),s=r===t?new e:o?new e(+o[1]):r instanceof e?r:M(r)?_(r):typeof r=="string"?I(r):new e(r)),new C(s,u)},n.utc=function(t,r){return M(t)?new C(new e(e.UTC.apply({},t)),!0):r&&t?n(t+" +0000",r+" Z").utc():n(t&&!y.exec(t)?t+"+0000":t).utc()},n.unix=function(e){return n(e*1e3)},n.duration=function(e,t){var r=n.isDuration(e),i=typeof e=="number",s=r?e._data:i?{}:e;return i&&(t?s[t]=e:s.milliseconds=e),new L(s)},n.humanizeDuration=function(e,t,r){return n.duration(e,t===!0?null:t).humanize(t===!0?!0:r)},n.version=r,n.defaultFormat=E,n.lang=function(e,t){var r,i,s=[];if(!e)return u;if(t){for(r=0;r<12;r++)s[r]=new RegExp("^"+t.months[r]+"|^"+t.monthsShort[r].replace(".",""),"i");t.monthsParse=t.monthsParse||s,o[e]=t}if(o[e]){for(r=0;r<f.length;r++)n[f[r]]=o[e][f[r]]||o.en[f[r]];u=e}else a&&(i=require("./lang/"+e),n.lang(e,i))},n.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:!1,calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"}}),n.isMoment=function(e){return e instanceof C},n.isDuration=function(e){return e instanceof L},n.fn=C.prototype={clone:function(){return n(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},utc:function(){return this._isUTC=!0,this},local:function(){return this
._isUTC=!1,this},format:function(e){return D(this,e?e:n.defaultFormat)},add:function(e,t){var r=t?n.duration(+t,e):n.duration(e);return O(this,r,1),this},subtract:function(e,t){var r=t?n.duration(+t,e):n.duration(e);return O(this,r,-1),this},diff:function(e,t,r){var s=this._isUTC?n(e).utc():n(e).local(),o=(this.zone()-s.zone())*6e4,u=this._d-s._d-o,a=this.year()-s.year(),f=this.month()-s.month(),l=this.date()-s.date(),c;return t==="months"?c=a*12+f+l/30:t==="years"?c=a+(f+l/30)/12:c=t==="seconds"?u/1e3:t==="minutes"?u/6e4:t==="hours"?u/36e5:t==="days"?u/864e5:t==="weeks"?u/6048e5:u,r?c:i(c)},from:function(e,t){return n.duration(this.diff(e)).humanize(!t)},fromNow:function(e){return this.from(n(),e)},calendar:function(){var e=this.diff(n().sod(),"days",!0),t=n.calendar,r=t.sameElse,i=e<-6?r:e<-1?t.lastWeek:e<0?t.lastDay:e<1?t.sameDay:e<2?t.nextDay:e<7?t.nextWeek:r;return this.format(typeof i=="function"?i.apply(this):i)},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<n([this.year()]).zone()||this.zone()<n([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e==null?t:this.add({d:e-t})},sod:function(){return n(this).hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return n(this).month(this.month()+1).date(0).date()}};for(s=0;s<T.length;s++)U(T[s].toLowerCase(),T[s]);U("year","FullYear"),n.duration.fn=L.prototype={weeks:function(){return k(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(e){var t=+this,r=n.relativeTime,i=R(t,!e);return e&&(i=(t<=0?r.past:r.future).replace(/%s/i,i)),i}};for(s in N)N.hasOwnProperty(s)&&(W(s,N[s]),z(s.toLowerCase()));W("Weeks",6048e5),a&&(module.exports=n),typeof window!="undefined"&&typeof ender=="undefined"&&(window.moment=n),typeof define=="function"&&define.amd&&define("moment",[],function(){return n})}(Date),define("libs/moment/moment",function(){}),define("rtext!templates/toolbar.status.html",[],function(){return'<div class="pg-toolbar-actions pg-tabs-container">\n    <button class="pg-editor-settings-trigger ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-secondary" role="button" aria-disabled="false">\n        <span class="ui-button-text">tab size: <span class="pg-tab-size"></span></span>\n        <span class="ui-button-icon-secondary ui-icon ui-icon-triangle-1-n"></span>\n    </button>\n    |\n    line: <span class="pg-line">1</span>,\n    column: <span class="pg-column">1</span>\n    |\n    words: <span class="pg-words">0</span>,\n    characters: <span class="pg-characters">0</span>\n</div>\n<div class="pg-toolbar-context">\n    <div class="pg-container pg-progressbar"></div>\n    <div class="pg-container pg-execution-time"></div>\n</div>'}),define("rtext!templates/menu.editor.status.html",[],function(){return'<div class="pg-el pg-menu-editor-status">\n    <ul>\n        <li class="pg-change-orientation"><a href="#">change orientation</a></li>\n        <li class="pg-soft-tabs"><a href="#">indent using spaces</a></li>\n        <li data-tab-size="1" class="pg-tab-size-option"><a href="#">tab size: 1</a></li>\n        <li data-tab-size="2" class="pg-tab-size-option"><a href="#">tab size: 2</a></li>\n        <li data-tab-size="3" class="pg-tab-size-option"><a href="#">tab size: 3</a></li>\n        <li data-tab-size="4" class="pg-tab-size-option"><a href="#">tab size: 4</a></li>\n        <li data-tab-size="5" class="pg-tab-size-option"><a href="#">tab size: 5</a></li>\n        <li data-tab-size="6" class="pg-tab-size-option"><a href="#">tab size: 6</a></li>\n        <li data-tab-size="7" class="pg-tab-size-option"><a href="#">tab size: 7</a></li>\n        <li data-tab-size="8" class="pg-tab-size-option k-last"><a href="#">tab size: 8</a></li>\n    </ul>\n</div>'}),define("app/bar-status",["app/util/ui","rtext!templates/toolbar.status.html","rtext!templates/menu.editor.status.html"],function(e,t,n){return function(r,i,s){function a(){var e=""+i.getTabSize();r.find(".pg-tab-size").text(e),u.find(".pg-tab-size-option").each(function(){$(this).attr("data-tab-size")===e?$(this).addClass("ui-state-active"):$(this).removeClass("ui-state-active")})}function f(){var e=i.getUseSoftTabs();u.find(".pg-soft-tabs").each(function(){e?$(this).addClass("ui-state-active"):$(this).removeClass("ui-state-active")})}var o;r.append(t);var u=e.contextmenu(n);r.find(".pg-editor-settings-trigger").click(function(){if(u.is(":visible")){u.hide();return}var e=$(this).offset();u.css({position:"absolute",top:e.top-u.outerHeight()+"px",left:e.left+"px"}).show()}),u.find(".pg-tab-size-option").click(function(){i.setTabSize(parseInt($(this).attr("data-tab-size")))}),u.find(".pg-soft-tabs").click(function(){i.setUseSoftTabs(!i.getUseSoftTabs())}),u.find(".pg-change-orientation").click(function(){s.setIoVertical(!s.isIoVertical())}),$(i).on("tabSizeChanged",a),$(i).on("useSoftTabsChanged",f),$(i).on("change",function(e,t){r.find(".pg-words").text(t.split(/\b[a-z0-9]+?\b/gi).length-1),r.find(".pg-characters").text(t.length)}),$(i).on("changeCursor",function(e,t){r.find(".pg-line").text(t.row+1),r.find(".pg-column").text(t.column+1)}),a(),f();var l=e.progressbar(r.find(".pg-progressbar"));l.hide();var c=r.find(".pg-execution-time");c.hide();var h=0,p={startTime:null,killProgress:null,lastExecution:2e3,start:function(){h++,clearInterval(p.killProgress),p.startTime=(new Date).getTime(),p.update(),p.killProgress=setInterval(function(){p.update()},50),c.hide(),l.show()},update:function(){var e=(new Date).getTime()-p.startTime,t=parseInt(e/p.lastExecution*1e3)/10;t>100?t=100:t<0&&(t=0),l.progressbar("value",t)},end:function(e){e&&(p.lastExecution=(new Date).getTime()-p.startTime,c.html("query time "+p.lastExecution+" ms")),h--;if(h>0)return;l.hide(),c.show(),clearInterval(p.killProgress)}},d=2;return o={startRequest:function(){p.start()},endRequest:function(e){p.end(e)}}}}),define("app/config/themes",[],function(){return[{token:"gray",name:"gray",ui:"gray",group:"light",editor:{ace:"tomorrow"}},{token:"blue",name:"blue",ui:"blue",group:"light",editor:{ace:"idle_fingers"}},{token:"dark",name:"dark",ui:"dark",group:"dark",editor:{ace:"solarized_dark"}},{token:"black",name:"black",ui:"black",group:"dark",editor:{ace:"merbivore"}}]}),define("app/theme",["app/config/themes"],function(e){function i(e){return t+e+"/jquery-ui.css"}function s(e,t){function n(){try{var r=document.styleSheets;for(var i=0,s=r.length;i<s;i++)r[i].href==e&&r[i].cssRules;setTimeout(t,0)}catch(o){setTimeout(n,50)}}n()}function o(e,t){var n=i(e),r=$('<link href="'+n+'" type="text/css" rel="Stylesheet" class="ui-theme" />');$.browser.safari?s(n,t):r.on("load",t),$("head").append(r),$("link.ui-theme").size()>3&&$("link.ui-theme:first").remove()}var t="css/jquery/ui/",n={},r={};$.each(e,function(){n[this.token]=this,r[this.group]=r[this.group]||{},r[this.group][this.token]=this});var u={current:null,set:function(e){if(this.current===e)return;this.current=e,$(u).trigger("change",e),o(n[e].ui,function(){$(u).trigger("changed",e)})},list:function(){return e},map:function(){return n},groups:function(){return r},getEditorTheme:function(e,t){return n[e].editor[t]}};return u}),define("ace/lib/regexp",["require","exports","module"],function(e,t,n){function o(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function u(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var r=n||0;r<e.length;r++)if(e[r]===t)return r;return-1}var r={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},i=r.exec.call(/()??/,"")[1]===undefined,s=function(){var e=/^/g;return r.test.call(e,""),!e.lastIndex}();if(s&&i)return;RegExp.prototype.exec=function(e){var t=r.exec.apply(this,arguments),n,a;if(typeof e=="string"&&t){!i&&t.length>1&&u(t,"")>-1&&(a=RegExp(this.source,r.replace.call(o(this),"g","")),r.replace.call(e.slice(t.index),a,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===undefined&&(t[e]=undefined)}));if(this._xregexp&&this._xregexp.captureNames)for(var f=1;f<t.length;f++)n=this._xregexp.captureNames[f-1],n&&(t[n]=t[f]);!s&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--}return t},s||(RegExp.prototype.test=function(e){var t=r.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t})}),define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function v(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError;var r=o.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=n.prototype;var s=new e,u=n.apply(s,r.concat(o.call(arguments)));return u!==null&&Object(u)===u?u:s}return n.apply(t,r.concat(o.call(arguments)))};return i});var r=Function.prototype.call,i=Array.prototype,s=Object.prototype,o=i.slice,u=r.bind(s.toString),a=r.bind(s.hasOwnProperty),f,l,c,h,p;if(p=a(s,"__defineGetter__"))f=r.bind(s.__defineGetter__),l=r.bind(s.__defineSetter__),c=r.bind(s.__lookupGetter__),h=r.bind(s.__lookupSetter__);Array.isArray||(Array.isArray=function(t){return u(t)=="[object Array]"}),Array.prototype.forEach||(Array.prototype.forEach=function(t){var n=_(this),r=arguments[1],i=0,s=n.length>>>0;if(u(t)!="[object Function]")throw new TypeError;while(i<s)i in n&&t.call(r,n[i],i,n),i++}),Array.prototype.map||(Array.prototype.map=function(t){var n=_(this),r=n.length>>>0,i=Array(r),s=arguments[1];if(u(t)!="[object Function]")throw new TypeError;for(var o=0;o<r;o++)o in n&&(i[o]=t.call(s,n[o],o,n));return i}),Array.prototype.filter||(Array.prototype.filter=function(t){var n=_(this),r=n.length>>>0,i=[],s=arguments[1];if(u(t)!="[object Function]")throw new TypeError;for(var o=0;o<r;o++)o in n&&t.call(s,n[o],o,n)&&i.push(n[o]);return i}),Array.prototype.every||(Array.prototype.every=function(t){var n=_(this),r=n.length>>>0,i=arguments[1];if(u(t)!="[object Function]")throw new TypeError;for(var s=0;s<r;s++)if(s in n&&!t.call(i,n[s],s,n))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var n=_(this),r=n.length>>>0,i=arguments[1];if(u(t)!="[object Function]")throw new TypeError;for(var s=0;s<r;s++)if(s in n&&t.call(i,n[s],s,n))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n=_(this),r=n.length>>>0;if(u(t)!="[object Function]")throw new TypeError;if(!r&&arguments.length==1)throw new TypeError;var i=0,s;if(arguments.length>=2)s=arguments[1];else do{if(i in n){s=n[i++];break}if(++i>=r)throw new TypeError}while(!0);for(;i<r;i++)i in n&&(s=t.call(void 0,s,n[i],i,n));return s}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var n=_(this),r=n.length>>>0;if(u(t)!="[object Function]")throw new TypeError;if(!r&&arguments.length==1)throw new TypeError;var i,s=r-1;if(arguments.length>=2)i=arguments[1];else do{if(s in n){i=n[s--];break}if(--s<0)throw new TypeError}while(!0);do s in this&&(i=t.call(void 0,i,n[s],s,n));while(s--);return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var n=_(this),r=n.length>>>0;if(!r)return-1;var i=0;arguments.length>1&&(i=O(arguments[1])),i=i>=0?i:Math.max(0,r+i);for(;i<r;i++)if(i in n&&n[i]===t)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){var n=_(this),r=n.length>>>0;if(!r)return-1;var i=r-1;arguments.length>1&&(i=Math.min(i,O(arguments[1]))),i=i>=0?i:r-Math.abs(i);for(;i>=0;i--)if(i in n&&t===n[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:s)});if(!Object.getOwnPropertyDescriptor){var d="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,n){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(d+t);if(!a(t,n))return;var r,i,o;r={enumerable:!0,configurable:!0};if(p){var u=t.__proto__;t.__proto__=s;var i=c(t,n),o=h(t,n);t.__proto__=u;if(i||o)return i&&(r.get=i),o&&(r.set=o),r}return r.value=t[n],r}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),Object.create||(Object.create=function(t,n){var r;if(t===null)r={__proto__:null};else{if(typeof t!="object")throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,r=new i,r.__proto__=t}return n!==void 0&&Object.defineProperties(r,n),r});if(Object.defineProperty){var m=v({}),g=typeof document=="undefined"||v(document.createElement("div"));if(!m||!g)var y=Object.defineProperty}if(!Object.defineProperty||y){var b="Property description must be an object: ",w="Object.defineProperty called on non-object: ",E="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,n,r){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(w+t);if(typeof r!="object"&&typeof r!="function"||r===null)throw new TypeError(b+r);if(y)try{return y.call(Object,t,n,r)}catch(i){}if(a(r,"value"))if(p&&(c(t,n)||h(t,n))){var o=t.__proto__;t.__proto__=s,delete t[n],t[n]=r.value,t.__proto__=o}else t[n]=r.value;else{if(!p)throw new TypeError(E);a(r,"get")&&f(t,n,r.get),a(r,"set")&&l(t,n,r.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,n){for(var r in n)a(n,r)&&Object.defineProperty(t,r,n[r]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(S){Object.freeze=function(t){return function(n){return typeof n=="function"?n:t(n)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;var n="";while(a(t,n))n+="?";t[n]=!0;var r=a(t,n);return delete t[n],r});if(!Object.keys){var x=!0,T=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],N=T.length;for(var C in{toString:null})x=!1;Object.keys=function D(e){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError("Object.keys called on a non-object");var D=[];for(var t in e)a(e,t)&&D.push(t);if(x)for(var n=0,r=N;n<r;n++){var i=T[n];a(e,i)&&D.push(i)}return D}}if(!Date.prototype.toISOString||(new Date(-621987552e5)).toISOString().indexOf("-000001")===-1)Date.prototype.toISOString=function(){var t,n,r,i;if(!isFinite(this))throw new RangeError;t=[this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],i=this.getUTCFullYear(),i=(i<0?"-":i>9999?"+":"")+("00000"+Math.abs(i)).slice(0<=i&&i<=9999?-4:-6),n=t.length;while(n--)r=t[n],r<10&&(t[n]="0"+r);return i+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"};Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(t){if(typeof this.toISOString!="function")throw new TypeError;return this.toISOString()}),Date.parse("+275760-09-13T00:00:00.000Z")!==864e13&&(Date=function(e){var t=function i(t,n,r,s,o,u,a){var f=arguments.length;if(this instanceof e){var l=f==1&&String(t)===t?new e(i.parse(t)):f>=7?new e(t,n,r,s,o,u,a):f>=6?new e(t,n,r,s,o,u):f>=5?new e(t,n,r,s,o):f>=4?new e(t,n,r,s):f>=3?new e(t,n,r):f>=2?new e(t,n):f>=1?new e(t):new e;return l.constructor=i,l}return e.apply(this,arguments)},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");for(var r in e)t[r]=e[r];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(r){var i=n.exec(r);if(i){i.shift();for(var s=1;s<7;s++)i[s]=+(i[s]||(s<3?1:0)),s==1&&i[s]--;var o=+i.pop(),u=+i.pop(),a=i.pop(),f=0;if(a){if(u>23||o>59)return NaN;f=(u*60+o)*6e4*(a=="+"?-1:1)}var l=+i[0];return 0<=l&&l<=99?(i[0]=l+400,e.UTC.apply(this,i)+f-126227808e5):e.UTC.apply(this,i)+f}return e.parse.apply(this,arguments)},t}(Date));var k="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||k.trim()){k="["+k+"]";var L=new RegExp("^"+k+k+"*"),A=new RegExp(k+k+"*$");String.prototype.trim=function(){return String(this).replace(L,"").replace(A,"")}}var O=function(e){return e=+e,e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e},M="a"[0]!="a",_=function(e){if(e==null)throw new TypeError;return M&&typeof e=="string"&&e?e.split(""):Object(e)}}),define("ace/lib/fixoldbrowsers",["require","exports","module","./regexp","./es5-shim"],function(e,t,n){e("./regexp"),e("./es5-shim")}),define("ace/lib/dom",["require","exports","module"],function(e,t,n){var r="http://www.w3.org/1999/xhtml";t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||r,e):document.createElement(e)},t.setText=function(e,t){e.innerText!==undefined&&(e.innerText=t),e.textContent!==undefined&&(e.textContent=t)},t.hasCssClass=function(e,t){var n=e.className.split(/\s+/g);return n.indexOf(t)!==-1},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){var n=e.className.split(/\s+/g);for(;;){var r=n.indexOf(t);if(r==-1)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){var n=e.className.split(/\s+/g),r=!0;for(;;){var i=n.indexOf(t);if(i==-1)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n=0,r;t=t||document;if(t.createStyleSheet&&(r=t.styleSheets)){while(n<r.length)if(r[n++].owningElement.id===e)return!0}else if(r=t.getElementsByTagName("style"))while(n<r.length)if(r[n++].id===e)return!0;return!1},t.importCssString=function(n,i,s){s=s||document;if(i&&t.hasCssString(i,s))return null;var o;if(s.createStyleSheet)o=s.createStyleSheet(),o.cssText=n,i&&(o.owningElement.id=i);else{o=s.createElementNS?s.createElementNS(r,"style"):s.createElement("style"),o.appendChild(s.createTextNode(n)),i&&(o.id=i);var u=s.getElementsByTagName("head")[0]||s.documentElement;u.appendChild(o)}},t.importCssStylsheet=function(e,n){if(n.createStyleSheet)n.createStyleSheet(e);else{var r=t.createElement("link");r.rel="stylesheet",r.href=e;var i=n.getElementsByTagName("head")[0]||n.documentElement;i.appendChild(r)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},window.pageYOffset!==undefined?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?t.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:t.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.scrollbarWidth=function(e){var n=t.createElement("p");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px";var r=t.createElement("div"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",r.appendChild(n);var s=e.body||e.documentElement;s.appendChild(r);var o=n.offsetWidth;i.overflow="scroll";var u=n.offsetWidth;return o==u&&(u=r.clientWidth),s.removeChild(r),o-u},t.setInnerHtml=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},t.setInnerText=function(e,t){var n=e.ownerDocument;n.body&&"textContent"in n.body?e.textContent=t:e.innerText=t},t.getInnerText=function(e){var t=e.ownerDocument;return t.body&&"textContent"in t.body?e.textContent:e.innerText||e.textContent||""},t.getParentWindow=function(e){return e.defaultView||e.parentWindow}}),define("ace/lib/oop",["require","exports","module"],function(e,t,n){t.inherits=function(){var e=function(){};return function(t,n){e.prototype=n.prototype,t.super_=n.prototype,t.prototype=new e,t.prototype.constructor=t}}(),t.mixin=function(e,t){for(var n in t)e[n]=t[n]},t.implement=function(e,n){t.mixin(e,n)}}),define("ace/lib/keys",["require","exports","module","./oop"],function(e,t,n){var r=e("./oop"),i=function(){var e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,meta:8,command:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};for(var t in e.FUNCTION_KEYS){var n=e.FUNCTION_KEYS[t].toUpperCase();e[n]=parseInt(t,10)}return r.mixin(e,e.MODIFIER_KEYS),r.mixin(e,e.PRINTABLE_KEYS),r.mixin(e,e.FUNCTION_KEYS),e}();r.mixin(t,i),t.keyCodeToString=function(e){return(i[e]||String.fromCharCode(e)).toLowerCase()}}),define("ace/lib/useragent",["require","exports","module"],function(e,t,n){var r=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),i=navigator.userAgent;t.isWin=r=="win",t.isMac=r=="mac",t.isLinux=r=="linux",t.isIE=navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.userAgent.match(/MSIE ([0-9]+[\.0-9]+)/)[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=window.controllers&&window.navigator.product==="Gecko",t.isOldGecko=t.isGecko&&parseInt((navigator.userAgent.match(/rv\:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(i.split("WebKit/")[1])||undefined,t.isChrome=parseFloat(i.split(" Chrome/")[1])||undefined,t.isAIR=i.indexOf("AdobeAIR")>=0,t.isIPad=i.indexOf("iPad")>=0,t.isTouchPad=i.indexOf("TouchPad")>=0,t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS}}),define("ace/lib/event",["require","exports","module","./keys","./useragent","./dom"],function(e,t,n){function o(e,t,n){var s=0;!i.isOpera||"KeyboardEvent"in window||!i.isMac?s=0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0):s=0|(t.metaKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.ctrlKey?8:0);if(n in r.MODIFIER_KEYS){switch(r.MODIFIER_KEYS[n]){case"Alt":s=2;break;case"Shift":s=4;break;case"Ctrl":s=1;break;default:s=8}n=0}return s&8&&(n==91||n==93)&&(n=0),!!s||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS?e(t,s,n):!1}var r=e("./keys"),i=e("./useragent"),s=e("./dom");t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var r=function(){n(window.event)};n._wrapper=r,e.attachEvent("on"+t,r)}},t.removeListener=function(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return e.type=="dblclick"?0:e.type=="contextmenu"||e.ctrlKey&&i.isMac?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},document.documentElement.setCapture?t.capture=function(e,n,r){function i(e){return n(e),t.stopPropagation(e)}function o(i){n(i),s||(s=!0,r(i)),t.removeListener(e,"mousemove",n),t.removeListener(e,"mouseup",o),t.removeListener(e,"losecapture",o),e.releaseCapture()}var s=!1;t.addListener(e,"mousemove",n),t.addListener(e,"mouseup",o),t.addListener(e,"losecapture",o),e.setCapture()}:t.capture=function(e,t,n){function r(e){t(e),e.stopPropagation()}function i(e){t&&t(e),n&&n(e),document.removeEventListener("mousemove",r,!0),document.removeEventListener("mouseup",i,!0),e.stopPropagation()}document.addEventListener("mousemove",r,!0),document.addEventListener("mouseup",i,!0)},t.addMouseWheelListener=function(e,n){var r=8,i=function(e){e.wheelDelta!==undefined?e.wheelDeltaX!==undefined?(e.wheelX=-e.wheelDeltaX/r,e.wheelY=-e.wheelDeltaY/r):(e.wheelX=0,e.wheelY=-e.wheelDelta/r):e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=(e.detail||0)*5,e.wheelY=0):(e.wheelX=0,e.wheelY=(e.detail||0)*5),n(e)};t.addListener(e,"DOMMouseScroll",i),t.addListener(e,"mousewheel",i)},t.addMultiMouseDownListener=function(e,n,r,s){var o=0,u,a,f,l={2:"dblclick",3:"tripleclick",4:"quadclick"},c=function(e){if(t.getButton(e)!=0)o=0;else{var i=Math.abs(e.clientX-u)>5||Math.abs(e.clientY-a)>5;if(!f||i)o=0;o+=1,f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600)}o==1&&(u=e.clientX,a=e.clientY),r[s]("mousedown",e);if(o>4)o=0;else if(o>1)return r[s](l[o],e)};t.addListener(e,"mousedown",c),i.isOldIE&&t.addListener(e,"dblclick",c)},t.addCommandKeyListener=function(e,n){var r=t.addListener;if(i.isOldGecko||i.isOpera&&!("KeyboardEvent"in window)){var s=null;r(e,"keydown",function(e){s=e.keyCode}),r(e,"keypress",function(e){return o(n,e,s)})}else{var u=null;r(e,"keydown",function(e){return u=e.keyIdentifier||e.keyCode,o(n,e,e.keyCode)})}};if(window.postMessage){var u=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+u;t.addListener(n,"message",function i(s){s.data==r&&(t.stopPropagation(s),t.removeListener(n,"message",i),e())}),n.postMessage(r,"*")}}else t.nextTick=function(e,t){t=t||window,window.setTimeout(e,0)}}),define("ace/lib/lang",["require","exports","module"],function(e,t,n){t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){return(new Array(t+1)).join(e)};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n]&&typeof e[n]=="object"?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function(e){if(typeof e!="object")return e;var t=e.constructor();for(var n in e)typeof e[n]=="object"?t[n]=this.deepCopy(e[n]):t[n]=e[n];return t},t.arrayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r}}),define("ace/keyboard/textinput",["require","exports","module","../lib/event","../lib/useragent","../lib/dom"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent"),s=e("../lib/dom"),o=function(e,t){function c(e){try{e?(n.value=o,n.selectionStart=0,n.selectionEnd=1):n.select()}catch(t){}}function h(e){if(!a){var r=e||n.value;r&&(r.length>1&&(r.charAt(0)==o?r=r.substr(1):r.charAt(r.length-1)==o&&(r=r.slice(0,-1))),r&&r!=o&&(f?t.onPaste(r):t.onTextInput(r)))}a=!1,f=!1,c(!0)}function w(){return document.activeElement===n}function E(){setTimeout(function(){l&&(n.style.cssText=l,l=""),h(),t.renderer.$keepTextAreaAtCursor==null&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},0)}var n=s.createElement("textarea");i.isTouchPad&&n.setAttribute("x-palm-disable-auto-cap",!0),n.setAttribute("wrap","off"),n.style.top="-2em",e.insertBefore(n,e.firstChild);var o=i.isIE?"":"";h();var u=!1,a=!1,f=!1,l="",p=function(e){u||h(e.data),setTimeout(function(){u||c(!0)},0)},d=function(e){setTimeout(function(){u||h()},0)},v=function(e){u=!0,t.onCompositionStart(),setTimeout(m,0)},m=function(){if(!u)return;t.onCompositionUpdate(n.value)},g=function(e){u=!1,t.onCompositionEnd()},y=function(e){a=!0;var r=t.getCopyText();r?n.value=r:e.preventDefault(),c(),setTimeout(function(){h()},0)},b=function(e){a=!0;var r=t.getCopyText();r?(n.value=r,t.onCut()):e.preventDefault(),c(),setTimeout(function(){h()},0)};r.addCommandKeyListener(n,t.onCommandKey.bind(t)),r.addListener(n,"input",i.isIE?d:p),r.addListener(n,"paste",function(e){f=!0,e.clipboardData&&e.clipboardData.getData?(h(e.clipboardData.getData("text/plain")),e.preventDefault()):d()}),"onbeforecopy"in n&&typeof clipboardData!="undefined"?(r.addListener(n,"beforecopy",function(e){if(l)return;var n=t.getCopyText();n?clipboardData.setData("Text",n):e.preventDefault()}),r.addListener(e,"keydown",function(e){if(e.ctrlKey&&e.keyCode==88){var n=t.getCopyText();n&&(clipboardData.setData("Text",n),t.onCut()),r.preventDefault(e)}}),r.addListener(n,"cut",b)):i.isOpera?r.addListener(e,"keydown",function(e){if(i.isMac&&!e.metaKey||!e.ctrlKey)return;if(e.keyCode==88||e.keyCode==67){var r=t.getCopyText();r&&(n.value=r,n.select(),e.keyCode==88&&t.onCut())}}):(r.addListener(n,"copy",y),r.addListener(n,"cut",b)),r.addListener(n,"compositionstart",v),i.isGecko&&r.addListener(n,"text",m),i.isWebKit&&r.addListener(n,"keyup",m),r.addListener(n,"compositionend",g),r.addListener(n,"blur",function(){t.onBlur()}),r.addListener(n,"focus",function(){t.onFocus(),c()}),this.focus=function(){c(),n.focus()},this.blur=function(){n.blur()},this.isFocused=w,this.getElement=function(){return n},this.onContextMenu=function(e){l||(l=n.style.cssText),n.style.cssText="position:fixed; z-index:100000;left:"+(e.clientX-2)+"px; top:"+(e.clientY-2)+"px;",t.selection.isEmpty()&&(n.value="");if(e.type!="mousedown")return;t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),i.isGecko&&i.isWin&&r.capture(t.container,function(e){n.style.left=e.clientX-2+"px",n.style.top=e.clientY-2+"px"},E)},this.onContextMenuClose=E,i.isGecko||r.addListener(n,"contextmenu",function(e){t.textInput.onContextMenu(e),E()})};t.TextInput=o}),define("ace/mouse/default_handlers",["require","exports","module","../lib/dom","../lib/useragent"],function(e,t,n){function o(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onScroll.bind(e));var n=["select","startSelect","drag","dragEnd","dragWait","dragWaitEnd","startDrag","focusWait"];n.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange"),e.$focusWaitTimout=250}function u(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function a(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else var n=2*t.row-e.start.row-e.end.row;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var r=e("../lib/dom"),i=e("../lib/useragent"),s=5;(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var r=this.editor,i=e.getButton();if(i!==0){var s=r.getSelectionRange(),o=s.isEmpty();o&&(r.moveCursorToPosition(n),r.selection.clearSelection()),r.textInput.onContextMenu(e.domEvent);return}if(t&&!r.isFocused()){r.focus();if(this.$focusWaitTimout&&!this.$clickSelection)return this.setState("focusWait"),this.captureMouse(e),e.preventDefault()}return!t||this.$clickSelection||e.getShiftKey()?this.startSelect(n):t&&(this.mousedownEvent.time=(new Date).getTime(),this.setState("dragWait"
)),this.captureMouse(e),e.preventDefault()},this.startSelect=function(e){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y),this.mousedownEvent.getShiftKey()?this.editor.selection.selectToPosition(e):this.$clickSelection||(this.editor.moveCursorToPosition(e),this.editor.selection.clearSelection()),this.setState("select")},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(r==-1)e=this.$clickSelection.end;else if(r==1)e=this.$clickSelection.start;else{var i=a(this.$clickSelection,n);n=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[e](r.row,r.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),o=this.$clickSelection.comparePoint(i.end);if(s==-1&&o<=0){t=this.$clickSelection.end;if(i.end.row!=r.row||i.end.column!=r.column)r=i.start}else if(o==1&&s>=0){t=this.$clickSelection.start;if(i.start.row!=r.row||i.start.column!=r.column)r=i.end}else if(s==-1&&o==1)r=i.end,t=i.start;else{var u=a(this.$clickSelection,r);r=u.cursor,t=u.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.startDrag=function(){var e=this.editor;this.setState("drag"),this.dragRange=e.getSelectionRange();var t=e.getSelectionStyle();this.dragSelectionMarker=e.session.addMarker(this.dragRange,"ace_selection",t),e.clearSelection(),r.addCssClass(e.container,"ace_dragging"),this.$dragKeybinding||(this.$dragKeybinding={handleKeyboard:function(e,t,n,r){if(n=="esc")return{command:this.command}},command:{exec:function(e){var t=e.$mouseHandler;t.dragCursor=null,t.dragEnd(),t.startSelect()}}}),e.keyBinding.addKeyboardHandler(this.$dragKeybinding)},this.focusWait=function(){var e=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=(new Date).getTime();(e>s||t-this.mousedownEvent.time>this.$focusWaitTimout)&&this.startSelect()},this.dragWait=function(e){var t=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),n=(new Date).getTime(),r=this.editor;t>s?this.startSelect():n-this.mousedownEvent.time>r.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(e){this.mousedownEvent.domEvent=e,this.startSelect()},this.drag=function(){var e=this.editor;this.dragCursor=e.renderer.screenToTextCoordinates(this.x,this.y),e.moveCursorToPosition(this.dragCursor),e.renderer.scrollCursorIntoView()},this.dragEnd=function(e){var t=this.editor,n=this.dragCursor,i=this.dragRange;r.removeCssClass(t.container,"ace_dragging"),t.session.removeMarker(this.dragSelectionMarker),t.keyBinding.removeKeyboardHandler(this.$dragKeybinding);if(!n)return;t.clearSelection();if(e&&(e.ctrlKey||e.altKey)){var s=t.session,o=i;o.end=s.insert(n,s.getTextRange(i)),o.start=n}else{if(i.contains(n.row,n.column))return;var o=t.moveText(i,n)}if(!o)return;t.selection.setSelectionRange(o)},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session,i=r.getBracketRange(t);if(i){i.isEmpty()&&(i.start.column--,i.end.column++),this.$clickSelection=i,this.setState("select");return}this.$clickSelection=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines"),this.$clickSelection=n.selection.getLineRange(t.row)},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("null")},this.onScroll=function(e){var t=this.editor,n=t.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);if(n)this.$passScrollEvent=!1;else{if(this.$passScrollEvent)return;if(!this.$scrollStopTimeout){var r=this;this.$scrollStopTimeout=setTimeout(function(){r.$passScrollEvent=!0,r.$scrollStopTimeout=null},200)}}return t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.preventDefault()}}).call(o.prototype),t.DefaultHandlers=o}),define("ace/mouse/default_gutter_handler",["require","exports","module","../lib/dom"],function(e,t,n){function i(e){var t=e.editor;e.editor.setDefaultHandler("guttermousedown",function(n){var i=n.domEvent.target;if(i.className.indexOf("ace_gutter-cell")==-1)return;if(!t.isFocused())return;var s=parseInt(r.computedStyle(i).paddingLeft);if(n.x<s+i.getBoundingClientRect().left+1)return;var o=n.getDocumentPosition().row,u=t.session.selection;return n.getShiftKey()?u.selectTo(o,0):e.$clickSelection=t.selection.getLineRange(o),e.captureMouse(n,"selectByLines"),n.preventDefault()})}var r=e("../lib/dom");t.GutterHandler=i}),define("ace/mouse/mouse_event",["require","exports","module","../lib/event","../lib/useragent"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent"),s=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var e=this.editor;if(e.getReadOnly())this.$inSelection=!1;else{var t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)}),define("ace/mouse/dragdrop",["require","exports","module","../lib/event"],function(e,t,n){var r=e("../lib/event"),i=function(e){var t=e.editor,n,i,s,o,u,a,f,l=0,c=t.container;r.addListener(c,"dragenter",function(e){l++;if(!n){u=t.getSelectionRange(),a=t.selection.isBackwards();var i=t.getSelectionStyle();n=t.session.addMarker(u,"ace_selection",i),t.clearSelection(),clearInterval(o),o=setInterval(h,20)}return r.preventDefault(e)}),r.addListener(c,"dragover",function(e){return i=e.clientX,s=e.clientY,r.preventDefault(e)});var h=function(){f=t.renderer.screenToTextCoordinates(i,s),t.moveCursorToPosition(f),t.renderer.scrollCursorIntoView()};r.addListener(c,"dragleave",function(e){l--;if(l>0)return;return console.log(e.type,l,e.target),clearInterval(o),t.session.removeMarker(n),n=null,t.selection.setSelectionRange(u,a),r.preventDefault(e)}),r.addListener(c,"drop",function(e){return console.log(e.type,l,e.target),l=0,clearInterval(o),t.session.removeMarker(n),n=null,u.end=t.session.insert(f,e.dataTransfer.getData("Text")),u.start=f,t.focus(),t.selection.setSelectionRange(u),r.preventDefault(e)})};t.DragdropHandler=i}),define("ace/mouse/mouse_handler",["require","exports","module","../lib/event","./default_handlers","./default_gutter_handler","./mouse_event","./dragdrop"],function(e,t,n){var r=e("../lib/event"),i=e("./default_handlers").DefaultHandlers,s=e("./default_gutter_handler").GutterHandler,o=e("./mouse_event").MouseEvent,u=e("./dragdrop").DragdropHandler,a=function(e){this.editor=e,new i(this),new s(this),new u(this),r.addListener(e.container,"mousedown",function(t){return e.focus(),r.preventDefault(t)});var t=e.renderer.getMouseEventTarget();r.addListener(t,"click",this.onMouseEvent.bind(this,"click")),r.addListener(t,"mousemove",this.onMouseMove.bind(this,"mousemove")),r.addMultiMouseDownListener(t,[300,300,250],this,"onMouseEvent"),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"));var n=e.renderer.$gutter;r.addListener(n,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),r.addListener(n,"click",this.onMouseEvent.bind(this,"gutterclick")),r.addListener(n,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),r.addListener(n,"mousemove",this.onMouseMove.bind(this,"gutter"))};(function(){this.$scrollSpeed=1,this.setScrollSpeed=function(e){this.$scrollSpeed=e},this.getScrollSpeed=function(){return this.$scrollSpeed},this.onMouseEvent=function(e,t){this.editor._emit(e,new o(t,this.editor))},this.$dragDelay=250,this.setDragDelay=function(e){this.$dragDelay=e},this.getDragDelay=function(){return this.$dragDelay},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!n||!n.length)return;this.editor._emit(e,new o(t,this.editor))},this.onMouseWheel=function(e,t){var n=new o(t,this.editor);n.speed=this.$scrollSpeed*2,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){t&&this.setState(t),this.x=e.x,this.y=e.y;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var i=this,s=function(e){i.x=e.clientX,i.y=e.clientY},o=function(e){clearInterval(a),i[i.state+"End"]&&i[i.state+"End"](e),i.$clickSelection=null,n.$keepTextAreaAtCursor==null&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor())},u=function(){i[i.state]&&i[i.state]()};r.capture(this.editor.container,s,o);var a=setInterval(u,20)}}).call(a.prototype),t.MouseHandler=a}),define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,n){function r(e){e.on("click",function(t){var n=t.getDocumentPosition(),r=e.session,i=r.getFoldAt(n.row,n.column,1);i&&(t.getAccelKey()?r.removeFold(i):r.expandFold(i),t.stop())}),e.on("gutterclick",function(t){if(t.domEvent.target.className.indexOf("ace_fold-widget")!=-1){var n=t.getDocumentPosition().row;e.session.onFoldWidgetClick(n,t.domEvent),t.stop()}})}t.FoldHandler=r}),define("ace/keyboard/keybinding",["require","exports","module","../lib/keys","../lib/event"],function(e,t,n){var r=e("../lib/keys"),i=e("../lib/event"),s=function(e){this.$editor=e,this.$data={},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0),this.$data={editor:this.$editor}},this.setKeyboardHandler=function(e){if(this.$handlers[this.$handlers.length-1]==e)return;while(this.$handlers[1])this.removeKeyboardHandler(this.$handlers[1]);this.addKeyboardHandler(e,1)},this.addKeyboardHandler=function(e,t){if(!e)return;var n=this.$handlers.indexOf(e);n!=-1&&this.$handlers.splice(n,1),t==undefined?this.$handlers.push(e):this.$handlers.splice(t,0,e),n==-1&&e.attach&&e.attach(this.$editor)},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return t==-1?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.$callKeyboardHandlers=function(e,t,n,r){var s;for(var o=this.$handlers.length;o--;){s=this.$handlers[o].handleKeyboard(this.$data,e,t,n,r);if(s&&s.command)break}if(!s||!s.command)return!1;var u=!1,a=this.$editor.commands;return s.command!="null"?u=a.exec(s.command,this.$editor,s.args,r):u=s.passEvent!=1,u&&r&&e!=-1&&i.stopEvent(r),u},this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);this.$callKeyboardHandlers(t,i,n,e)},this.onTextInput=function(e){var t=this.$callKeyboardHandlers(-1,e);t||this.$editor.commands.exec("insertstring",this.$editor,e)}}).call(s.prototype),t.KeyBinding=s}),define("ace/range",["require","exports","module"],function(e,t,n){var r=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row==e.start.row&&this.end.row==e.end.row&&this.start.column==e.start.column&&this.end.column==e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return this.compare(e,t)==0},this.compareRange=function(e){var t,n=e.end,r=e.start;return t=this.compare(n.row,n.column),t==1?(t=this.compare(r.row,r.column),t==1?2:t==0?1:0):t==-1?-2:(t=this.compare(r.row,r.column),t==-1?-1:t==1?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0},this.intersects=function(e){var t=this.compareRange(e);return t==-1||t==0||t==1},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){typeof e=="object"?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){typeof e=="object"?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return this.compare(e,t)==0?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return!this.isMultiLine()&&e===this.start.row?t<this.start.column?-1:t>this.end.column?1:0:e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};if(this.start.row>t)var i={row:t+1,column:0};if(this.start.row<e)var i={row:e,column:0};if(this.end.row<e)var n={row:e,column:0};return r.fromPoints(i||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(n==0)return this;if(n==-1)var i={row:e,column:t};else var s={row:e,column:t};return r.fromPoints(i||this.start,s||this.end)},this.isEmpty=function(){return this.start.row==this.end.row&&this.start.column==this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return r.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new r(t.row,t.column,n.row,n.column)}}).call(r.prototype),r.fromPoints=function(e,t){return new r(e.row,e.column,t.row,t.column)},t.Range=r}),define("ace/search",["require","exports","module","./lib/lang","./lib/oop","./range"],function(e,t,n){var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$matchIterator(e,this.$options);if(!t)return!1;var n=null;return t.forEach(function(e,t,r){if(!e.start){var i=e.offset+(r||0);n=new s(t,i,t,i+e.length)}else n=e;return!0}),n},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);if(t.range)var n=t.range,i=e.getLines(n.start.row,n.end.row);else var i=e.doc.getAllLines();var o=[],u=t.re;if(t.$isMultiLine){var a=u.length,f=i.length-a;for(var l=u.offset||0;l<f;l++){for(var c=0;c<u.length;c++)if(i[l+c].search(u[c])==-1)break;var h=i[l+c].match(u[0])[0].length,p=line.match(u[a-1])[0].length;o.push(new s(l,startLine.length-h,l+a-1,p))}}else for(var d=0;d<i.length;d++){var v=r.getMatchOffsets(i[d],u);for(var c=0;c<v.length;c++){var m=v[c];o.push(new s(d,m.offset,d,m.offset+m.length))}}if(t.range){var g=n.start.column,y=n.start.column,d=0,c=o.length-1;while(d<c&&o[d].start.column<g&&o[d].start.row==n.start.row)d++;while(d<c&&o[c].end.column>y&&o[c].end.row==n.end.row)c--;return o.slice(d,c+1)}return o},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(!r)return;var i=r.exec(e);if(!i||i[0].length!=e.length)return null;t=e.replace(r,t);if(n.preserveCase){t=t.split("");for(var s=Math.min(e.length,e.length);s--;){var o=e[s];o&&o.toLowerCase()!=o?t[s]=t[s].toUpperCase():t[s]=t[s].toLowerCase()}t=t.join("")}return t},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var i=this,o,u=t.backwards;if(t.$isMultiLine)var a=n.length,f=function(t,r,i){var u=t.search(n[0]);if(u==-1)return;for(var f=1;f<a;f++){t=e.getLine(r+f);if(t.search(n[f])==-1)return}var l=t.match(n[a-1])[0].length,c=new s(r,u,r+a-1,l);n.offset==1?(c.start.row--,c.start.column=Number.MAX_VALUE):i&&(c.start.column+=i);if(o(c))return!0};else if(u)var f=function(e,t,i){var s=r.getMatchOffsets(e,n);for(var u=s.length-1;u>=0;u--)if(o(s[u],t,i))return!0};else var f=function(e,t,i){var s=r.getMatchOffsets(e,n);for(var u=0;u<s.length;u++)if(o(s[u],t,i))return!0};return{forEach:function(n){o=n,i.$lineIterator(e,t).forEach(f)}}},this.$assembleRegExp=function(e){if(e.needle instanceof RegExp)return e.re=e.needle;var t=e.needle;if(!e.needle)return e.re=!1;e.regExp||(t=r.escapeRegExp(t)),e.wholeWord&&(t="\\b"+t+"\\b");var n=e.caseSensitive?"g":"gi";e.$isMultiLine=/[\n\r]/.test(t);if(e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(t,n);try{var i=new RegExp(t,n)}catch(s){var i=!1}return e.re=i},this.$assembleMultilineRegExp=function(e,t){var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[];for(var i=0;i<n.length;i++)try{r.push(new RegExp(n[i],t))}catch(s){return!1}return n[0]==""?(r.shift(),r.offset=1):r.offset=0,r},this.$lineIterator=function(e,t){var n=t.range,r=t.backwards==1,i=t.skipCurrent!=0,n=t.range,s=t.start;s||(s=n?n[r?"end":"start"]:e.selection.getRange()),s.start&&(s=s[i!=r?"end":"start"]);var o=n?n.start.row:0,u=n?n.start.column:0,a=n?n.end.row:e.getLength()-1;if(!r)var f=function(n){var r=s.row,i=e.getLine(r).substr(s.column);if(n(i,r,s.column))return;for(r+=1;r<=a;r++)if(n(e.getLine(r),r))return;if(t.wrap==0)return;for(r=o,a=s.row;r<=a;r++)if(n(e.getLine(r),r))return};else var f=function(n){var r=s.row,i=e.getLine(r).substring(0,s.column);if(n(i,r))return;for(r--;r>=o;r--)if(n(e.getLine(r),r))return;if(t.wrap==0)return;for(r=a,o=s.row;r>=o;r--)if(n(e.getLine(r),r))return};return{forEach:f}}}).call(o.prototype),t.Search=o}),define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){var r={};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry=this._eventRegistry||{},this._defaultHandlers=this._defaultHandlers||{};var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(!n.length&&!r)return;t=t||{},t.type=e,t.stopPropagation||(t.stopPropagation=function(){this.propagationStopped=!0}),t.preventDefault||(t.preventDefault=function(){this.defaultPrevented=!0});for(var i=0;i<n.length;i++){n[i](t);if(t.propagationStopped)break}if(r&&!t.defaultPrevented)return r(t)},r.setDefaultHandler=function(e,t){this._defaultHandlers=this._defaultHandlers||{};if(this._defaultHandlers[e])throw new Error("The default handler for '"+e+"' is already set");this._defaultHandlers[e]=t},r.on=r.addEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];n||(n=this._eventRegistry[e]=[]),n.indexOf(t)==-1&&n.push(t)},r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)return;var r=n.indexOf(t);r!==-1&&n.splice(r,1)},r.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=r}),define("ace/commands/default_commands",["require","exports","module","../lib/lang"],function(e,t,n){function i(e,t){return{win:e,mac:t}}var r=e("../lib/lang");t.commands=[{name:"selectall",bindKey:i("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:i(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:i("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:i("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},readOnly:!0},{name:"unfold",bindKey:i("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},readOnly:!0},{name:"foldall",bindKey:i("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll()},readOnly:!0},{name:"unfoldall",bindKey:i("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},readOnly:!0},{name:"findnext",bindKey:i("Ctrl-K","Command-G"),exec:function(e){e.findNext()},readOnly:!0},{name:"findprevious",bindKey:i("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},readOnly:!0},{name:"find",bindKey:i("Ctrl-F","Command-F"),exec:function(e){var t=prompt("Find:",e.getCopyText());e.find(t)},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:i("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},readOnly:!0},{name:"gotostart",bindKey:i("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},readOnly:!0},{name:"selectup",bindKey:i("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:!0},{name:"golineup",bindKey:i("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selecttoend",bindKey:i("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"gotoend",bindKey:i("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"selectdown",bindKey:i("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",readOnly:!0},{name:"golinedown",bindKey:i("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectwordleft",bindKey:i("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"gotowordleft",bindKey:i("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttolinestart",bindKey:i("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"gotolinestart",bindKey:i("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"selectleft",bindKey:i("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"gotoleft",bindKey:i("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectwordright",bindKey:i("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",readOnly:!0},{name:"gotowordright",bindKey:i("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttolineend",bindKey:i("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"gotolineend",bindKey:i("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"selectright",bindKey:i("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",readOnly:!0},{name:"gotoright",bindKey:i("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:i(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:i("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:i(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:i("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:i("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"togglerecording",bindKey:i("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording()},readOnly:!0},{name:"replaymacro",bindKey:i("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:i("Ctrl-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttomatching",bindKey:i("Ctrl-Shift-P",null),exec:function(e){e.jumpToMatching(!0)},readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},multiSelectAction:"forEach"},{name:"removeline",bindKey:i("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},multiSelectAction:"forEach"},{name:"duplicateSelection",bindKey:i("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},multiSelectAction:"forEach"},{name:"togglecomment",bindKey:i("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEach"},{name:"replace",bindKey:i("Ctrl-R","Command-Option-F"),exec:function(e){var t=prompt("Find:",e.getCopyText());if(!t)return;var n=prompt("Replacement:");if(!n)return;e.replace(n,{needle:t})}},{name:"replaceall",bindKey:i("Ctrl-Shift-R","Command-Shift-Option-F"),exec:function(e){var t=prompt("Find:");if(!t)return;var n=prompt("Replacement:");if(!n)return;e.replaceAll(n,{needle:t})}},{name:"undo",bindKey:i("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:i("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:i("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()}},{name:"movelinesup",bindKey:i("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()}},{name:"copylinesdown",bindKey:i("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()}},{name:"movelinesdown",bindKey:i("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()}},{name:"del",bindKey:i("Delete","Delete|Ctrl-D"),exec:function(e){e.remove("right")},multiSelectAction:"forEach"},{name:"backspace",bindKey:i("Command-Backspace|Option-Backspace|Shift-Backspace|Backspace","Ctrl-Backspace|Command-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach"},{name:"removetolinestart",bindKey:i("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach"},{name:"removetolineend",bindKey:i("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach"},{name:"removewordleft",bindKey:i("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach"},{name:"removewordright",bindKey:i("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach"},{name:"outdent",bindKey:i("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach"},{name:"indent",bindKey:i("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach"},{name:"inserttext",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach"},{name:"splitline",bindKey:i(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach"},{name:"transposeletters",bindKey:i("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)}},{name:"touppercase",bindKey:i("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach"},{name:"tolowercase",bindKey:i("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach"}]}),define("ace/lib/net",["require","exports","module"],function(e,t,n){t.get=function(e,n){var r=t.createXhr();r.open("GET",e,!0),r.onreadystatechange=function(e){r.readyState===4&&n(r.responseText)},r.send(null)};var r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];t.createXhr=function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(t=0;t<3;t++){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}if(!e)throw new Error("createXhr(): XMLHttpRequest not available");return e},t.loadScript=function(e,t){var n=document.getElementsByTagName("head")[0],r=document.createElement("script");r.src=e,n.appendChild(r),r.onload=t}}),define("ace/selection",["require","exports","module","./lib/oop","./lib/lang","./lib/event_emitter","./range"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})};(function(){r.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){if(this.$isEmpty){this.moveCursorTo(this.lead.row,this.lead.column+e);return}var t=this.getSelectionAnchor(),n=this.getSelectionLead(),r=this.isBackwards();(!r||t.column!==0)&&this.setSelectionAnchor(t.row,t.column+e),(r||n.column!==0)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+e)})},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=
function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(typeof t=="undefined"){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n=typeof e=="number"?e:this.lead.row,r,i=this.session.getFoldLine(n);return i?(n=i.start.row,r=i.end.row):r=n,t?new o(n,0,r,this.session.getLine(r).length):new o(n,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(e.column==0)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column-n,e.column).split(" ").length-1==n?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column,e.column+n).split(" ").length-1==n?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(e,null,r.row,r.column),s=i.match(/^\s*/);s[0].length==t?this.moveCursorTo(r.row,r.column):this.moveCursorTo(r.row,r.column+s[0].length)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var s=this.session.getFoldAt(e,t,1);if(s){this.moveCursorTo(s.end.row,s.end.column);return}if(i=this.session.nonTokenRe.exec(r))t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t);if(t>=n.length){this.moveCursorTo(e,n.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight();return}if(i=this.session.tokenRe.exec(r))t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0;this.moveCursorTo(e,t)},this.moveCursorLongWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1)){this.moveCursorTo(n.start.row,n.start.column);return}var r=this.session.getFoldStringAt(e,t,-1);r==null&&(r=this.doc.getLine(e).substring(0,t));var s=i.stringReverse(r),o;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;if(o=this.session.nonTokenRe.exec(s))t-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0;if(t<=0){this.moveCursorTo(e,0),this.moveCursorLeft(),e>0&&this.moveCursorWordLeft();return}if(o=this.session.tokenRe.exec(s))t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0;this.moveCursorTo(e,t)},this.$shortWordEndIndex=function(e){var t,n=0,r,i=/\s/,s=this.session.tokenRe;s.lastIndex=0;if(t=this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{while((r=e[n])&&i.test(r))n++;if(n<=1){s.lastIndex=0;while((r=e[n])&&!s.test(r)){s.lastIndex=0,n++;if(i.test(r)){if(n>2){n--;break}while((r=e[n])&&i.test(r))n++;if(n>2)break}}}}return s.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){var s=this.doc.getLength();do e++,r=this.doc.getLine(e);while(e<s&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var o=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var r=this.session.getLine(e).substring(0,t);if(t==0){do e--,r=this.doc.getLine(e);while(e>0&&/^\s*$/.test(r));t=r.length,/\s+$/.test(r)||(r="")}var s=i.stringReverse(r),o=this.$shortWordEndIndex(s);return this.moveCursorTo(e,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);t===0&&(this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);var r=this.session.screenToDocumentPosition(n.row+e,n.column);this.moveCursorTo(r.row,r.column+t,t===0)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e}}).call(u.prototype),t.Selection=u}),define("ace/tokenizer",["require","exports","module"],function(e,t,n){var r=function(e,t){t=t?"g"+t:"g",this.rules=e,this.regExps={},this.matchMappings={};for(var n in this.rules){var r=this.rules[n],i=r,s=[],o=0,u=this.matchMappings[n]={};for(var a=0;a<i.length;a++){i[a].regex instanceof RegExp&&(i[a].regex=i[a].regex.toString().slice(1,-1));var f=(new RegExp("(?:("+i[a].regex+")|(.))")).exec("a").length-2,l=i[a].regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+o+1)});if(f>1&&i[a].token.length!==f-1)throw new Error("Matching groups and length of the token array don't match in rule #"+a+" of state "+n);u[o]={rule:a,len:f},o+=f,s.push(l)}this.regExps[n]=new RegExp("(?:("+s.join(")|(")+")|(.))",t)}};(function(){this.getLineTokens=function(e,t){var n=t||"start",r=this.rules[n],i=this.matchMappings[n],s=this.regExps[n];s.lastIndex=0;var o,u=[],a=0,f={type:null,value:""};while(o=s.exec(e)){var l="text",c=null,h=[o[0]];for(var p=0;p<o.length-2;p++){if(o[p+1]===undefined)continue;c=r[i[p].rule],i[p].len>1&&(h=o.slice(p+2,p+1+i[p].len)),typeof c.token=="function"?l=c.token.apply(this,h):l=c.token,c.next&&(n=c.next,r=this.rules[n],i=this.matchMappings[n],a=s.lastIndex,s=this.regExps[n],s.lastIndex=a);break}if(h[0]){typeof l=="string"&&(h=[h.join("")],l=[l]);for(var p=0;p<h.length;p++){if(!h[p])continue;(!c||c.merge||l[p]==="text")&&f.type===l[p]?f.value+=h[p]:(f.type&&u.push(f),f={type:l[p],value:h[p]})}}if(a==e.length)break;a=s.lastIndex}return f.type&&u.push(f),{tokens:u,state:n}}}).call(r.prototype),t.Tokenizer=r}),define("ace/mode/text_highlight_rules",["require","exports","module","../lib/lang"],function(e,t,n){var r=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{token:"text",regex:".+"}]}};(function(){this.addRules=function(e,t){for(var n in e){var r=e[n];for(var i=0;i<r.length;i++){var s=r[i];s.next&&(s.next=t+s.next)}this.$rules[t+n]=r}},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i){var s=(new e).getRules();if(i)for(var o=0;o<i.length;o++)i[o]=t+i[o];else{i=[];for(var u in s)i.push(t+u)}this.addRules(s,t);for(var o=0;o<i.length;o++)Array.prototype.unshift.apply(this.$rules[i[o]],r.deepCopy(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds}}).call(i.prototype),t.TextHighlightRules=i}),define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if(typeof e=="function")var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;var t={};for(var n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(r.prototype),t.Behaviour=r}),define("ace/unicode",["require","exports","module"],function(e,t,n){function r(e){var n=/\w{4}/g;for(var r in e)t.packages[r]=e[r].replace(n,"\\u$&")}t.packages={},r({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF"
,Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),define("ace/mode/text",["require","exports","module","../tokenizer","./text_highlight_rules","./behaviour","../unicode"],function(e,t,n){var r=e("../tokenizer").Tokenizer,i=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour").Behaviour,o=e("../unicode"),u=function(){this.$tokenizer=new r((new i).getRules()),this.$behaviour=new s};(function(){this.tokenRe=new RegExp("^["+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]|s])+","g"),this.getTokenizer=function(){return this.$tokenizer},this.toggleCommentLines=function(e,t,n,r){},this.getNextLineIndent=function(e,t,n){return""},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){var t=e.match(/^(\s+)/);return t?t[1]:""},this.createWorker=function(e){return null},this.createModeDelegates=function(e){if(!this.$embeds)return;this.$modes={};for(var t=0;t<this.$embeds.length;t++)e[this.$embeds[t]]&&(this.$modes[this.$embeds[t]]=new e[this.$embeds[t]]);var n=["toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction"];for(var t=0;t<n.length;t++)(function(e){var r=n[t],i=e[r];e[n[t]]=function(){return this.$delegator(r,arguments,i)}})(this)},this.$delegator=function(e,t,n){var r=t[0];for(var i=0;i<this.$embeds.length;i++){if(!this.$modes[this.$embeds[i]])continue;var s=r.split(this.$embeds[i]);if(!s[0]&&s[1]){t[0]=s[1];var o=this.$modes[this.$embeds[i]];return o[e].apply(o,t)}}var u=n.apply(this,t);return n?u:undefined},this.transformAction=function(e,t,n,r,i){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var o in s)if(s[o][t]){var u=s[o][t].apply(this,arguments);if(u)return u}}}}).call(u.prototype),t.Mode=u}),define("ace/anchor",["require","exports","module","./lib/oop","./lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=t.Anchor=function(e,t,n){this.document=e,typeof n=="undefined"?this.setPosition(t.row,t.column):this.setPosition(t,n),this.$onChange=this.onChange.bind(this),e.on("change",this.$onChange)};(function(){r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.onChange=function(e){var t=e.data,n=t.range;if(n.start.row==n.end.row&&n.start.row!=this.row)return;if(n.start.row>this.row)return;if(n.start.row==this.row&&n.start.column>this.column)return;var r=this.row,i=this.column;t.action==="insertText"?n.start.row===r&&n.start.column<=i?n.start.row===n.end.row?i+=n.end.column-n.start.column:(i-=n.start.column,r+=n.end.row-n.start.row):n.start.row!==n.end.row&&n.start.row<r&&(r+=n.end.row-n.start.row):t.action==="insertLines"?n.start.row<=r&&(r+=n.end.row-n.start.row):t.action=="removeText"?n.start.row==r&&n.start.column<i?n.end.column>=i?i=n.start.column:i=Math.max(0,i-(n.end.column-n.start.column)):n.start.row!==n.end.row&&n.start.row<r?(n.end.row==r&&(i=Math.max(0,i-n.end.column)+n.start.column),r-=n.end.row-n.start.row):n.end.row==r&&(r-=n.end.row-n.start.row,i=Math.max(0,i-n.end.column)+n.start.column):t.action=="removeLines"&&n.start.row<=r&&(n.end.row<=r?r-=n.end.row-n.start.row:(r=n.start.row,i=0)),this.setPosition(r,i,!0)},this.setPosition=function(e,t,n){var r;n?r={row:e,column:t}:r=this.$clipPositionToDocument(e,t);if(this.row==r.row&&this.column==r.column)return;var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._emit("change",{old:i,value:r})},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(s.prototype)}),define("ace/document",["require","exports","module","./lib/oop","./lib/event_emitter","./range","./anchor"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,o=e("./anchor").Anchor,u=function(e){this.$lines=[],e.length==0?this.$lines=[""]:Array.isArray(e)?this.insertLines(0,e):this.insert({row:0,column:0},e)};(function(){r.implement(this,i),this.setValue=function(e){var t=this.getLength();this.remove(new s(0,0,t,this.getLine(t-1).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new o(this,e,t)},"aaa".split(/a/).length==0?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine="\n"},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";case"auto":return this.$autoNewLine}},this.$autoNewLine="\n",this.$newLineMode="auto",this.setNewLineMode=function(e){if(this.$newLineMode===e)return;this.$newLineMode=e},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return e=="\r\n"||e=="\r"||e=="\n"},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){if(e.start.row==e.end.row)return this.$lines[e.start.row].substring(e.start.column,e.end.column);var t=this.getLines(e.start.row+1,e.end.row-1);return t.unshift((this.$lines[e.start.row]||"").substring(e.start.column)),t.push((this.$lines[e.end.row]||"").substring(0,e.end.column)),t.join(this.getNewLineCharacter())},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t&&(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length),e},this.insert=function(e,t){if(!t||t.length===0)return e;e=this.$clipPosition(e),this.getLength()<=1&&this.$detectNewLine(t);var n=this.$split(t),r=n.splice(0,1)[0],i=n.length==0?null:n.splice(n.length-1,1)[0];return e=this.insertInLine(e,r),i!==null&&(e=this.insertNewLine(e),e=this.insertLines(e.row,n),e=this.insertInLine(e,i||"")),e},this.insertLines=function(e,t){if(t.length==0)return{row:e,column:0};if(t.length>65535){var n=this.insertLines(e,t.slice(65535));t=t.slice(0,65535)}var r=[e,0];r.push.apply(r,t),this.$lines.splice.apply(this.$lines,r);var i=new s(e,0,e+t.length,0),o={action:"insertLines",range:i,lines:t};return this._emit("change",{data:o}),n||i.end},this.insertNewLine=function(e){e=this.$clipPosition(e);var t=this.$lines[e.row]||"";this.$lines[e.row]=t.substring(0,e.column),this.$lines.splice(e.row+1,0,t.substring(e.column,t.length));var n={row:e.row+1,column:0},r={action:"insertText",range:s.fromPoints(e,n),text:this.getNewLineCharacter()};return this._emit("change",{data:r}),n},this.insertInLine=function(e,t){if(t.length==0)return e;var n=this.$lines[e.row]||"";this.$lines[e.row]=n.substring(0,e.column)+t+n.substring(e.column);var r={row:e.row,column:e.column+t.length},i={action:"insertText",range:s.fromPoints(e,r),text:t};return this._emit("change",{data:i}),r},this.remove=function(e){e.start=this.$clipPosition(e.start),e.end=this.$clipPosition(e.end);if(e.isEmpty())return e.start;var t=e.start.row,n=e.end.row;if(e.isMultiLine()){var r=e.start.column==0?t:t+1,i=n-1;e.end.column>0&&this.removeInLine(n,0,e.end.column),i>=r&&this.removeLines(r,i),r!=t&&(this.removeInLine(t,e.start.column,this.getLine(t).length),this.removeNewLine(e.start.row))}else this.removeInLine(t,e.start.column,e.end.column);return e.start},this.removeInLine=function(e,t,n){if(t==n)return;var r=new s(e,t,e,n),i=this.getLine(e),o=i.substring(t,n),u=i.substring(0,t)+i.substring(n,i.length);this.$lines.splice(e,1,u);var a={action:"removeText",range:r,text:o};return this._emit("change",{data:a}),r.start},this.removeLines=function(e,t){var n=new s(e,0,t+1,0),r=this.$lines.splice(e,t-e+1),i={action:"removeLines",range:n,nl:this.getNewLineCharacter(),lines:r};return this._emit("change",{data:i}),r},this.removeNewLine=function(e){var t=this.getLine(e),n=this.getLine(e+1),r=new s(e,t.length,e+1,0),i=t+n;this.$lines.splice(e,2,i);var o={action:"removeText",range:r,text:this.getNewLineCharacter()};this._emit("change",{data:o})},this.replace=function(e,t){if(t.length==0&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);if(t)var n=this.insert(e.start,t);else n=e.start;return n},this.applyDeltas=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=s.fromPoints(n.range.start,n.range.end);n.action=="insertLines"?this.insertLines(r.start.row,n.lines):n.action=="insertText"?this.insert(r.start,n.text):n.action=="removeLines"?this.removeLines(r.start.row,r.end.row-1):n.action=="removeText"&&this.remove(r)}},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],r=s.fromPoints(n.range.start,n.range.end);n.action=="insertLines"?this.removeLines(r.start.row,r.end.row-1):n.action=="insertText"?this.remove(r):n.action=="removeLines"?this.insertLines(r.start.row,n.lines):n.action=="removeText"&&this.insert(r.start,n.text)}}}).call(u.prototype),t.Document=u}),define("ace/background_tokenizer",["require","exports","module","./lib/oop","./lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=5e3,o=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(!n.running)return;var e=new Date,t=n.currentLine,r=n.doc,i=0,s=r.getLength();while(n.currentLine<s){n.$tokenizeRow(n.currentLine);while(n.lines[n.currentLine])n.currentLine++;i++;if(i%5==0&&new Date-e>20){n.fireUpdateEvent(t,n.currentLine-1),n.running=setTimeout(n.$worker,20);return}}n.running=!1,n.fireUpdateEvent(t,s-1)}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._emit("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.$updateOnChange=function(e){var t=e.range,n=t.start.row,r=t.end.row-n;if(r===0)this.lines[n]=null;else if(e.action=="removeText"||e.action=="removeLines")this.lines.splice(n,r+1,null),this.states.splice(n,r+1,null);else{var i=Array(r+1);i.unshift(n,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(n,this.currentLine,this.doc.getLength()),this.stop(),this.running=setTimeout(this.$worker,700)},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1];if(t.length>s){var r={value:t.substr(s),type:"text"};t=t.slice(0,s)}var i=this.tokenizer.getLineTokens(t,n);return r&&(i.tokens.push(r),i.state="start"),this.states[e]!==i.state?(this.states[e]=i.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=i.tokens}}).call(o.prototype),t.BackgroundTokenizer=o}),define("ace/search_highlight",["require","exports","module","./lib/lang","./lib/oop","./range"],function(e,t,n){var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.setRegexp=function(e){if(this.regExp+""==e+"")return;this.regExp=e,this.cache=[]},this.update=function(e,t,n,i){if(!this.regExp)return;var o=i.firstRow,u=i.lastRow;for(var a=o;a<=u;a++){var f=this.cache[a];f==null&&(f=r.getMatchOffsets(n.getLine(a),this.regExp),f=f.map(function(e){return new s(a,e.offset,a,e.offset+e.length)}),this.cache[a]=f.length?f:"");for(var l=f.length;l--;)t.drawSingleLineMarker(e,f[l].toScreenRange(n),this.clazz,i,null,this.type)}}}).call(o.prototype),t.SearchHighlight=o}),define("ace/edit_session/fold_line",["require","exports","module","../range"],function(e,t,n){function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw"Can't add a fold to this FoldLine as it has no connection";this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw"Trying to add fold to FoldRow that doesn't have a matching row";this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var r=0,i=this.folds,s,o,u,a=!0;t==null&&(t=this.end.row,n=this.end.column);for(var f=0;f<i.length;f++){s=i[f],o=s.range.compareStart(t,n);if(o==-1){e(null,t,n,r,a);return}u=e(null,s.start.row,s.start.column,r,a),u=!u&&e(s.placeholder,s.start.row,s.start.column,r);if(u||o==0)return;a=!s.sameRow,r=s.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){var n,r;for(var i=0;i<this.folds.length;i++){n=this.folds[i],r=n.range.compareEnd(e,t);if(r==-1)return{fold:n,kind:"after"};if(r==0)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var r=this.getNextFoldTo(e,t),i,s;if(r){i=r.fold;if(r.kind=="inside"&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){s=this.folds;var o=s.indexOf(i);o==0&&(this.start.column+=n);for(o;o<s.length;o++){i=s[o],i.start.column+=n;if(!i.sameRow)return;i.end.column+=n}this.end.column+=n}}},this.split=function(e,t){var n=this.getNextFoldTo(e,t).fold,r=this.folds,s=this.foldData;if(!n)return null;var o=r.indexOf(n),u=r[o-1];this.end.row=u.end.row,this.end.column=u.end.column,r=r.splice(o,r.length-o);var a=new i(s,r);return s.splice(s.indexOf(this)+1,0,a),a},this.merge=function(e){var t=e.folds;for(var n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){var t=0,n;for(var r=0;r<this.folds.length;r++){var n=this.folds[r];e-=n.start.column-t;if(e<0)return{row:n.start.row,column:n.start.column+e};e-=n.placeholder.length;if(e<0)return n.start;t=n.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),define("ace/edit_session/fold",["require","exports","module"],function(e,t,n){var r=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=[]};(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new r(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t},this.addSubFold=function(e){if(this.range.isEqual(e))return this;if(!this.range.containsRange(e))throw"A fold can't intersect already existing fold"+e.range+this.range;var t=e.range.start.row,n=e.range.start.column;for(var r=0,i=-1;r<this.subFolds.length;r++){i=this.subFolds[r].range.compare(t,n);if(i!=1)break}var s=this.subFolds[r];if(i==0)return s.addSubFold(e);var t=e.range.end.row,n=e.range.end.column;for(var o=r,i=-1;o<this.subFolds.length;o++){i=this.subFolds[o].range.compare(t,n);if(i!=1)break}var u=this.subFolds[o];if(i==0)throw"A fold can't intersect already existing fold"+e.range+this.range;var a=this.subFolds.splice(r,o-r,e);return e.setFoldLine(this.foldLine),e}}).call(r.prototype)}),define("ace/token_iterator",["require","exports","module"],function(e,t,n){var r=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var e=this.$session.getLength();this.$tokenIndex+=1;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1;if(this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(n!==undefined)return n;n=0;while(t>0)t-=1,n+=e[t].value.length;return n}}).call(r.prototype),t.TokenIterator=r}),define("ace/edit_session/folding",["require","exports","module","../range","./fold_line","./fold","../token_iterator"],function(e,t,n){function u(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;var i=r.folds;for(var s=0;s<i.length;s++){var o=i[s];if(o.range.contains(e,t)){if(n==1&&o.range.isEnd(e,t))continue;if(n==-1&&o.range.isStart(e,t))continue;return o}}},this.getFoldsInRange=function(e){e=e.clone();var t=e.start,n=e.end,r=this.$foldData,i=[];t.column+=1,n.column-=1;for(var s=0;s<r.length;s++){var o=r[s].range.compareRange(e);if(o==2)continue;if(o==-2)break;var u=r[s].folds;for(var a=0;a<u.length;a++){var f=u[a];o=f.range.compareRange(e);if(o==-2)break;if(o==2)continue;if(o==42)break;i.push(f)}}return i},this.getAllFolds=function(){function n(t){e.push(t);if(!t.subFolds)return;for(var r=0;r<t.subFolds.length;r++)n(t.subFolds[r])}var e=[],t=this.$foldData;for(var r=0;r<t.length;r++)for(var i=0;i<t[r].folds.length;i++)n(t[r].folds[i]);return e},this.getFoldStringAt=function(e,t,n,r){r=r||this.getFoldLine(e);if(!r)return null;var i={end:{column:0}},s,o;for(var u=0;u<r.folds.length;u++){o=r.folds[u];var a=o.range.compareEnd(e,t);if(a==-1){s=this.getLine(o.start.row).substring(i.end.column,o.start.column);break}if(a===0)return null;i=o}return s||(s=this.getLine(o.start.row).substring(i.end.column)),n==-1?s.substring(0,t-i.end.column):n==1?s.substring(t-i.end.column):s},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){var n=this.$foldData,r=t-e+1;for(var i=0;i<n.length;i++){var s=n[i],o=s.end.row,u=s.start.row;if(o>=t){u<t&&(u>=e?r-=t-u:r=0);break}o>=e&&(u>=e?r-=o-u:r-=o-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n=this.$foldData,r=!1,o;e instanceof s?o=e:o=new s(t,e),this.$clipRangeToDocument(o.range);var u=o.start.row,a=o.start.column,f=o.end.row,l=o.end.column;if(o.placeholder.length<2)throw"Placeholder has to be at least 2 characters";if(u==f&&l-a<2)throw"The range has to be at least 2 characters width";var c=this.getFoldAt(u,a,1),h=this.getFoldAt(f,l,-1);if(c&&h==c)return c.addSubFold(o);if(c&&!c.range.isStart(u,a)||h&&!h.range.isEnd(f,l))throw"A fold can't intersect already existing fold"+o.range+c.range;var p=this.getFoldsInRange(o.range);p.length>0&&(this.removeFolds(p),o.subFolds=p);for(var d=0;d<n.length;d++){var v=n[d];if(f==v.start.row){v.addFold(o),r=!0;break}if(u==v.end.row){v.addFold(o),r=!0;if(!o.sameRow){var m=n[d+1];if(m&&m.start.row==f){v.merge(m);break}}break}if(f<=v.start.row)break}return r||(v=this.$addFoldLine(new i(this.$foldData,o))),this.$useWrapMode?this.$updateWrapData(v.start.row,v.start.row):this.$updateRowLengthCache(v.start.row,v.start.row),this.$modified=!0,this._emit("changeFold",{data:o}),o},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,i=this.$foldData,s=t.folds;if(s.length==1)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))s.pop(),t.end.row=s[s.length-1].end.row,t.end.column=s[s.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))s.shift(),t.start.row=s[0].start.row,t.start.column=s[0].start.column;else if(e.sameRow)s.splice(s.indexOf(e),1);else{var o=t.split(e.start.row,e.start.column);s=o.folds,s.shift(),o.start.row=s[0].start.row,o.start.column=s[0].start.column}this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r),this.$modified=!0,this._emit("changeFold",{data:e})},this.removeFolds=function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(e){this.addFold(e)},this),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;e==null?n=new r(0,0,this.getLength(),0):typeof e=="number"?n=new r(e,0,e,this.getLine(e).length):"row"in e?n=r.fromPoints(e,e):n=e,i=this.getFoldsInRange(n);if(t)this.removeFolds(i);else while(i.length)this.expandFolds(i),i=this.getFoldsInRange(n)},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getFoldDisplayLine=function(e,t,n,r,i){r==null&&(r=e.start.row,i=0),t==null&&(t=e.end.row,n=this.getLine(t).length);var s=this.doc,o="";return e.walk(function(e,t,n,u){if(t<r)return;if(t==r){if(n<i)return;u=Math.max(i,u)}e?o+=e:o+=s.getLine(t).substring(u,n)}.bind(this),t,n),o},this.getDisplayLine=function(e,t,n,r){var i=this.getFoldLine(e);if(!i){var s;return s=this.doc.getLine(e),s.substring(r||0,t||s.length)}return this.getFoldDisplayLine(i,e,t,n,r)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new i(e,n)}),e},this.toggleFold=function(e){var t=this.selection,n=t.getRange(),r,i;if(n.isEmpty()){var s=n.start;r=this.getFoldAt(s.row,s.column);if(r){this.expandFold(r);return}(i=this.findMatchingBracket(s))?n.comparePoint(i)==1?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:s.row,column:s.column+1}))?(n.comparePoint(i)==1?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(s.row,s.column)||n}else{var o=this.getFoldsInRange(n);if(e&&o.length){this.expandFolds(o);return}o.length==1&&(r=o[0])}r||(r=this.getFoldAt(n.start.row,n.start.column));if(r&&r.range.toString()==n.toString()){this.expandFold(r);return}var u="...";if(!n.isMultiLine()){u=this.getTextRange(n);if(u.length<4)return;u=u.trim().substring(0,2)+".."}this.addFold(u,n)},this.getCommentFoldRange=function(e,t){var n=new o(this,e,t),i=n.getCurrentToken();if(i&&/^comment|string/.test(i.type)){var s=new r,u=new RegExp(i.type.replace(/\..*/,"\\."));do i=n.stepBackward();while(i&&u.test(i.type));n.stepForward(),s.start.row=n.getCurrentTokenRow(),s.start.column=n.getCurrentTokenColumn()+2,n=new o(this,e,t);do i=n.stepForward();while(i&&u.test(i.type));return i=n.stepBackward(),s.end.row=n.getCurrentTokenRow(),s.end.column=n.getCurrentTokenColumn()+i.value.length,s}},this.foldAll=function(e,t){var n=this.foldWidgets;t=t||this.getLength();for(var r=e||0;r<t;r++){n[r]==null&&(n[r]=this.getFoldWidget(r));if(n[r]!="start")continue;var i=this.getFoldWidgetRange(r);if(i&&i.end.row<t)try{this.addFold("...",i)}catch(s){}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle==e)return;this.$foldStyle=e,e=="manual"&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)},this.$setFolding=function(e){if(this.$foldMode==e)return;this.$foldMode=e,this.removeListener("change",this.$updateFoldWidgets),this._emit("changeAnnotation");if(!e||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets)},this.onFoldWidgetClick=function(e,t){var n=this.getFoldWidget(e),r=this.getLine(e),i=t.shiftKey,s=i||t.ctrlKey||t.altKey||t.metaKey,o;n=="end"?o=this.getFoldAt(e,0,-1):o=this.getFoldAt(e,r.length,1);if(o){s?this.removeFold(o):this.expandFold(o);return}var u=this.getFoldWidgetRange(e);if(u){if(!u.isMultiLine()){o=this.getFoldAt(u.start.row,u.start.column,1);if(o&&u.isEqual(o.range)){this.removeFold(o);return}}i||this.addFold("...",u),s&&this.foldAll(u.start.row+1,u.end.row)}else s&&this.foldAll(e+1,this.getLength()),t.target.className+=" invalid"},this.updateFoldWidgets=function(e){var t=e.data,n=t.range,r=n.start.row,i=n.end.row-r;if(i===0)this.foldWidgets[r]=null;else if(t.action=="removeText"||t.action=="removeLines")this.foldWidgets.splice(r,i+1,null);else{var s=Array(i+1);s.unshift(r,1),this.foldWidgets.splice.apply(this.foldWidgets,s)}}}var r=e("../range").Range,i=e("./fold_line").FoldLine,s=e("./fold").Fold,o=e("../token_iterator").TokenIterator;t.Folding=u}),define("ace/edit_session/bracket_match",["require","exports","module","../token_iterator","../range"],function(e,t,n){function s(){this.findMatchingBracket=function(e){if(e.column==0)return null;var t=this.getLine(e.row).charAt(e.column-1);if(t=="")return null;var n=t.match(/([\(\[\{])|([\)\]\}])/);return n?n[1]?this.$findClosingBracket(n[1],e):this.$findOpeningBracket(n[2],e):null},this.getBracketRange=function(e){var t=this.getLine(e.row),n=!0,r,s=t.charAt(e.column-1),o=s&&s.match(/([\(\[\{])|([\)\]\}])/);o||(s=t.charAt(e.column),e={row:e.row,column:e.column+1},o=s&&s.match(/([\(\[\{])|([\)\]\}])/),n=!1);if(!o)return null;if(o[1]){var u=this.$findClosingBracket(o[1],e);if(!u)return null;r=i.fromPoints(e,u),n||(r.end.column++,r.start.column--),r.cursor=r.end}else{var u=this.$findOpeningBracket(o[2],e);if(!u)return null;r=i.fromPoints(u,e),n||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("rparen",".paren")+")+"));var a=t.column-o.getCurrentTokenColumn()-2,f=u.value;for(;;){while(a>=0){var l=f.charAt(a);if(l==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else l==e&&(s+=1);a-=1}do u=o.stepBackward();while(u&&!n.test(u.type));if(u==null)break;f=u.value,a=f.length-1}return null},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("lparen",".paren")+")+"));var a=t.column-o.getCurrentTokenColumn();for(;;){var f=u.value,l=f.length;while(a<l){var c=f.charAt(a);if(c==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else c==e&&(s+=1);a+=1}do u=o.stepForward();while(u&&!n.test(u.type));if(u==null)break;a=0}return null}}var r=e("../token_iterator").TokenIterator,i=e("../range").Range;t.BracketMatch=s}),define("ace/undomanager",["require","exports","module"],function(e,t,n){var r=function(){this.reset()};(function(){this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],this.$undoStack.push(t),this.$redoStack=[]},this.undo=function(e){var t=this.$undoStack.pop(),n=null;return t&&(n=this.$doc.undoChanges(t,e),this.$redoStack.push(t)),n},this.redo=function(e){var t=this.$redoStack.pop(),n=null;return t&&(n=this.$doc.redoChanges(t,e),this.$undoStack.push(t)),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[]},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0}}).call(r.prototype),t.UndoManager=r}),define("ace/layer/gutter",["require","exports","module","../lib/dom","../lib/oop","../lib/event_emitter"],function(e,t,n){var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/event_emitter").EventEmitter,o=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets
),this.gutterWidth=0,this.$breakpoints=[],this.$annotations=[],this.$decorations=[]};(function(){i.implement(this,s),this.setSession=function(e){this.session=e},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,"")},this.setAnnotations=function(e){this.$annotations=[];for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(!n)continue;var r=this.$annotations[t]={text:[]};for(var i=0;i<n.length;i++){var s=n[i],o=s.text.replace(/"/g,"&quot;").replace(/'/g,"&#8217;").replace(/</,"&lt;");r.text.indexOf(o)===-1&&r.text.push(o);var u=s.type;u=="error"?r.className="ace_error":u=="warning"&&r.className!="ace_error"?r.className="ace_warning":u=="info"&&!r.className&&(r.className="ace_info")}}},this.update=function(e){this.$config=e;var t={className:"",text:[]},n=[],i=e.firstRow,s=e.lastRow,o=this.session.getNextFoldLine(i),u=o?o.start.row:Infinity,a=this.$showFoldWidgets&&this.session.foldWidgets,f=this.session.$breakpoints;for(;;){i>u&&(i=o.end.row+1,o=this.session.getNextFoldLine(i,o),u=o?o.start.row:Infinity);if(i>s)break;var l=this.$annotations[i]||t;n.push("<div class='ace_gutter-cell",this.$decorations[i]||"",f[i]?" ace_breakpoint ":" ",l.className,"' title='",l.text.join("\n"),"' style='height:",this.session.getRowLength(i)*e.lineHeight,"px;'>",i+1);if(a){var c=a[i];c==null&&(c=a[i]=this.session.getFoldWidget(i)),c&&n.push("<span class='ace_fold-widget ",c,c=="start"&&i==u&&i<o.end.row?" closed":" open","'></span>")}n.push("</div>"),i++}this.session.$useWrapMode&&n.push("<div class='ace_gutter-cell' style='pointer-events:none;opacity:0'>",this.session.getLength()-1,"</div>"),this.element=r.setInnerHtml(this.element,n.join("")),this.element.style.height=e.minHeight+"px";var h=this.element.offsetWidth;h!==this.gutterWidth&&(this.gutterWidth=h,this._emit("changeGutterWidth",h))},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e},this.getShowFoldWidgets=function(){return this.$showFoldWidgets}}).call(o.prototype),t.Gutter=o}),define("ace/layer/marker",["require","exports","module","../range","../lib/dom"],function(e,t,n){var r=e("../range").Range,i=e("../lib/dom"),s=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){var e=e||this.config;if(!e)return;this.config=e;var t=[];for(var n in this.markers){var r=this.markers[n];if(!r.range){r.update(t,this,this.session,e);continue}var s=r.range.clipRows(e.firstRow,e.lastRow);if(s.isEmpty())continue;s=s.toScreenRange(this.session);if(r.renderer){var o=this.$getTop(s.start.row,e),u=Math.round(this.$padding+s.start.column*e.characterWidth);r.renderer(t,s,u,o,e)}else s.isMultiLine()?r.type=="text"?this.drawTextMarker(t,s,r.clazz,e):this.drawMultiLineMarker(t,s,r.clazz,e,r.type):this.drawSingleLineMarker(t,s,r.clazz+" start",e,null,r.type)}this.element=i.setInnerHtml(this.element,t.join(""))},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,n,i){var s=t.start.row,o=new r(s,t.start.column,s,this.session.getScreenLastRowColumn(s));this.drawSingleLineMarker(e,o,n+" start",i,1,"text"),s=t.end.row,o=new r(s,0,s,t.end.column),this.drawSingleLineMarker(e,o,n,i,0,"text");for(s=t.start.row+1;s<t.end.row;s++)o.start.row=s,o.end.row=s,o.end.column=this.session.getScreenLastRowColumn(s),this.drawSingleLineMarker(e,o,n,i,1,"text")},this.drawMultiLineMarker=function(e,t,n,r,i){var s=i==="background"?0:this.$padding,o=r.lineHeight,u=this.$getTop(t.start.row,r),a=Math.round(s+t.start.column*r.characterWidth);e.push("<div class='",n," start' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",a,"px;'></div>"),u=this.$getTop(t.end.row,r);var f=Math.round(t.end.column*r.characterWidth);e.push("<div class='",n,"' style='","height:",o,"px;","width:",f,"px;","top:",u,"px;","left:",s,"px;'></div>"),o=(t.end.row-t.start.row-1)*r.lineHeight;if(o<0)return;u=this.$getTop(t.start.row+1,r),e.push("<div class='",n,"' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",s,"px;'></div>")},this.drawSingleLineMarker=function(e,t,n,r,i,s){var o=s==="background"?0:this.$padding,u=r.lineHeight;if(s==="background")var a=r.width;else a=Math.round((t.end.column+(i||0)-t.start.column)*r.characterWidth);var f=this.$getTop(t.start.row,r),l=Math.round(o+t.start.column*r.characterWidth);e.push("<div class='",n,"' style='","height:",u,"px;","width:",a,"px;","top:",f,"px;","left:",l,"px;'></div>")}}).call(s.prototype),t.Marker=s}),define("ace/layer/text",["require","exports","module","../lib/oop","../lib/dom","../lib/lang","../lib/useragent","../lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,a=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$characterSize=this.$measureSizes()||{width:0,height:0},this.$pollSizeChanges()};(function(){r.implement(this,u),this.EOF_CHAR="¶",this.EOL_CHAR="¬",this.TAB_CHAR="→",this.SPACE_CHAR="·",this.$padding=0,this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$characterSize.height||1},this.getCharacterWidth=function(){return this.$characterSize.width||1},this.checkForSizeChanges=function(){var e=this.$measureSizes();e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)&&(this.$characterSize=e,this._emit("changeCharacterSize",{data:e}))},this.$pollSizeChanges=function(){var e=this;this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.$fontStyles={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,lineHeight:1},this.$measureSizes=o.isIE||o.isOldGecko?function(){var e=1e3;if(!this.$measureNode){var t=this.$measureNode=i.createElement("div"),n=t.style;n.width=n.height="auto",n.left=n.top=-e*40+"px",n.visibility="hidden",n.position="fixed",n.overflow="visible",n.whiteSpace="nowrap",t.innerHTML=s.stringRepeat("Xy",e);if(this.element.ownerDocument.body)this.element.ownerDocument.body.appendChild(t);else{var r=this.element.parentNode;while(!i.hasCssClass(r,"ace_editor"))r=r.parentNode;r.appendChild(t)}}if(!this.element.offsetWidth)return null;var n=this.$measureNode.style,o=i.computedStyle(this.element);for(var u in this.$fontStyles)n[u]=o[u];var a={height:this.$measureNode.offsetHeight,width:this.$measureNode.offsetWidth/(e*2)};return a.width==0||a.height==0?null:a}:function(){if(!this.$measureNode){var e=this.$measureNode=i.createElement("div"),t=e.style;t.width=t.height="auto",t.left=t.top="-100px",t.visibility="hidden",t.position="fixed",t.overflow="visible",t.whiteSpace="nowrap",e.innerHTML="X";var n=this.element.parentNode;while(n&&!i.hasCssClass(n,"ace_editor"))n=n.parentNode;if(!n)return this.$measureNode=null;n.appendChild(e)}var r=this.$measureNode.getBoundingClientRect(),s={height:r.height,width:r.width};return s.width==0||s.height==0?null:s},this.setSession=function(e){this.session=e},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,!0)},this.$tabStrings=[],this.$computeTabString=function(){var e=this.session.getTabSize(),t=this.$tabStrings=[0];for(var n=1;n<e+1;n++)this.showInvisibles?t.push("<span class='ace_invisible'>"+this.TAB_CHAR+(new Array(n)).join("&#160;")+"</span>"):t.push((new Array(n+1)).join("&#160;"))},this.updateLines=function(e,t,n){this.$computeTabString(),(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)&&this.scrollLines(e),this.config=e;var r=Math.max(t,e.firstRow),s=Math.min(n,e.lastRow),o=this.element.childNodes,u=0;for(var a=e.firstRow;a<r;a++){var f=this.session.getFoldLine(a);if(f){if(f.containsRow(r)){r=f.start.row;break}a=f.end.row}u++}for(var l=r;l<=s;l++){var c=o[u++];if(!c)continue;var h=[],p=this.session.getTokens(l);this.$renderLine(h,l,p,!this.$useLineGroups()),c=i.setInnerHtml(c,h.join("")),l=this.session.getRowFoldEnd(l)}},this.scrollLines=function(e){this.$computeTabString();var t=this.config;this.config=e;if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var n=this.element;if(t.firstRow<e.firstRow)for(var r=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);r>0;r--)n.removeChild(n.firstChild);if(t.lastRow>e.lastRow)for(var r=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);r>0;r--)n.removeChild(n.lastChild);if(e.firstRow<t.firstRow){var i=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)}if(e.lastRow>t.lastRow){var i=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);n.appendChild(i)}},this.$renderLinesFragment=function(e,t,n){var r=this.element.ownerDocument.createDocumentFragment(),s=t,o=this.session.getNextFoldLine(s),u=o?o.start.row:Infinity;for(;;){s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:Infinity);if(s>n)break;var a=i.createElement("div"),f=[],l=this.session.getTokens(s);this.$renderLine(f,s,l,!1),a.innerHTML=f.join("");if(this.$useLineGroups())a.className="ace_line_group",r.appendChild(a);else{var c=a.childNodes;while(c.length)r.appendChild(c[0])}s++}return r},this.update=function(e){this.$computeTabString(),this.config=e;var t=[],n=e.firstRow,r=e.lastRow,s=n,o=this.session.getNextFoldLine(s),u=o?o.start.row:Infinity;for(;;){s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:Infinity);if(s>r)break;this.$useLineGroups()&&t.push("<div class='ace_line_group'>");var a=this.session.getTokens(s);this.$renderLine(t,s,a,!1),this.$useLineGroups()&&t.push("</div>"),s++}this.element=i.setInnerHtml(this.element,t.join(""))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,r){var i=this,s=/\t|&|<|( +)|([\u0000-\u0019\u00a0\u1680\u180E\u2000-\u200b\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,o=function(e,n,r,s,o){if(n)return(new Array(e.length+1)).join("&#160;");if(e=="&")return"&#38;";if(e=="<")return"&#60;";if(e=="	"){var u=i.session.getScreenTabSize(t+s);return t+=u-1,i.$tabStrings[u]}if(e=="　"){var a=i.showInvisibles?"ace_cjk ace_invisible":"ace_cjk",f=i.showInvisibles?i.SPACE_CHAR:"";return t+=1,"<span class='"+a+"' style='width:"+i.config.characterWidth*2+"px'>"+f+"</span>"}return r?"<span class='ace_invisible ace_invalid'>"+i.SPACE_CHAR+"</span>":(t+=1,"<span class='ace_cjk' style='width:"+i.config.characterWidth*2+"px'>"+e+"</span>")},u=r.replace(s,o);if(!this.$textToken[n.type]){var a="ace_"+n.type.replace(/\./g," ace_"),f="";n.type=="fold"&&(f=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",a,"'",f,">",u,"</span>")}else e.push(u);return t+r.length},this.$renderLineCore=function(e,t,n,r,i){var s=0,o=0,u,a=0,f=this;!r||r.length==0?u=Number.MAX_VALUE:u=r[0],i||e.push("<div class='ace_line' style='height:",this.config.lineHeight,"px","'>");for(var l=0;l<n.length;l++){var c=n[l],h=c.value;if(s+h.length<u)a=f.$renderToken(e,a,c,h),s+=h.length;else{while(s+h.length>=u)a=f.$renderToken(e,a,c,h.substring(0,u-s)),h=h.substring(u-s),s=u,i||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px","'>"),o++,a=0,u=r[o]||Number.MAX_VALUE;h.length!=0&&(s+=h.length,a=f.$renderToken(e,a,c,h))}}this.showInvisibles&&(t!==this.session.getLength()-1?e.push("<span class='ace_invisible'>"+this.EOL_CHAR+"</span>"):e.push("<span class='ace_invisible'>"+this.EOF_CHAR+"</span>")),i||e.push("</div>")},this.$renderLine=function(e,t,n,r){if(!this.session.isRowFolded(t)){var i=this.session.getRowSplitData(t);this.$renderLineCore(e,t,n,i,r)}else this.$renderFoldLine(e,t,n,r)},this.$renderFoldLine=function(e,t,n,r){function u(e,t,n){var r=0,i=0;while(i+e[r].value.length<t){i+=e[r].value.length,r++;if(r==e.length)return}if(i!=t){var s=e[r].value.substring(t-i);s.length>n-t&&(s=s.substring(0,n-t)),o.push({type:e[r].type,value:s}),i=t+s.length,r+=1}while(i<n&&r<e.length){var s=e[r].value;s.length+i>n?o.push({type:e[r].type,value:s.substring(0,n-i)}):o.push(e[r]),i+=s.length,r+=1}}var i=this.session,s=i.getFoldLine(t),o=[];s.walk(function(e,t,r,s,a){e?o.push({type:"fold",value:e}):(a&&(n=i.getTokens(t)),n.length&&u(n,s,r))},s.end.row,this.session.getLine(s.end.row).length);var a=this.session.$useWrapMode?this.session.$wrapData[t]:null;this.$renderLineCore(e,t,o,a,r)},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),t.Text=a}),define("ace/layer/cursor",["require","exports","module","../lib/dom"],function(e,t,n){var r=e("../lib/dom"),i=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.cursors=[],this.cursor=this.addCursor()};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.addCursor=function(){var e=r.createElement("div"),t="ace_cursor";return this.isVisible||(t+=" ace_hidden"),this.overwrite&&(t+=" ace_overwrite"),e.className=t,this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1;for(var e=this.cursors.length;e--;)r.addCssClass(this.cursors[e],"ace_hidden");clearInterval(this.blinkId)},this.showCursor=function(){this.isVisible=!0;for(var e=this.cursors.length;e--;)r.removeCssClass(this.cursors[e],"ace_hidden");this.element.style.visibility="",this.restartTimer()},this.restartTimer=function(){clearInterval(this.blinkId);if(!this.isVisible)return;var e=this.cursors.length==1?this.cursor:this.element;this.blinkId=setInterval(function(){e.style.visibility="hidden",setTimeout(function(){e.style.visibility=""},400)},1e3)},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),r=Math.round(this.$padding+n.column*this.config.characterWidth),i=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:i}},this.update=function(e){this.config=e;if(this.session.selectionMarkerCount>0){var t=this.session.$selectionMarkers,n=0,r,i=0;for(var n=t.length;n--;){r=t[n];var s=this.getPixelPosition(r.cursor,!0),o=(this.cursors[i++]||this.addCursor()).style;o.left=s.left+"px",o.top=s.top+"px",o.width=e.characterWidth+"px",o.height=e.lineHeight+"px"}if(i>1)while(this.cursors.length>i)this.removeCursor()}else{var s=this.getPixelPosition(null,!0),o=this.cursor.style;o.left=s.left+"px",o.top=s.top+"px",o.width=e.characterWidth+"px",o.height=e.lineHeight+"px";while(this.cursors.length>1)this.removeCursor()}var u=this.session.getOverwrite();u!=this.overwrite&&this.$setOverite(u),this.$pixelPos=s,this.restartTimer()},this.$setOverite=function(e){this.overwrite=e;for(var t=this.cursors.length;t--;)e?r.addCssClass(this.cursors[t],"ace_overwrite"):r.removeCssClass(this.cursors[t],"ace_overwrite")},this.destroy=function(){clearInterval(this.blinkId)}}).call(i.prototype),t.Cursor=i}),define("ace/scrollbar",["require","exports","module","./lib/oop","./lib/dom","./lib/event","./lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,u=function(e){this.element=i.createElement("div"),this.element.className="ace_sb",this.inner=i.createElement("div"),this.element.appendChild(this.inner),e.appendChild(this.element),this.width=i.scrollbarWidth(e.ownerDocument),this.element.style.width=(this.width||15)+5+"px",s.addListener(this.element,"scroll",this.onScroll.bind(this))};(function(){r.implement(this,o),this.onScroll=function(){this._emit("scroll",{data:this.element.scrollTop})},this.getWidth=function(){return this.width},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=function(e){this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.element.scrollTop=e}}).call(u.prototype),t.ScrollBar=u}),define("ace/renderloop",["require","exports","module","./lib/event"],function(e,t,n){var r=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window};(function(){this.schedule=function(e){this.changes=this.changes|e;if(!this.pending){this.pending=!0;var t=this;r.nextTick(function(){t.pending=!1;var e;while(e=t.changes)t.changes=0,t.onRender(e)},this.window)}}}).call(i.prototype),t.RenderLoop=i}),function(){var e=typeof require!="undefined"&&require;define("ace/requirejs/text",["require","exports","module","ace/lib/net"],function(t,n,r){n.load=function(n,r,i,s){e&&e.nodeRequire?i(e.nodeRequire("fs").readFileSync(r.toUrl(n),"utf8")):t("ace/lib/net").get(r.toUrl(n),i)}})}(),define("ace/range_list",["require","exports","module"],function(e,t,n){var r=function(){this.ranges=[]};(function(){this.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},this.pointIndex=function(e,t){var n=this.ranges;for(var r=t||0;r<n.length;r++){var i=n[r],s=this.comparePoints(e,i.end);if(s>0)continue;return s==0?r:(s=this.comparePoints(e,i.start),s>=0?r:-r-1)}return-r-1},this.add=function(e){var t=this.pointIndex(e.start);t<0&&(t=-t-1);var n=this.pointIndex(e.end,t);return n<0?n=-n-1:n++,this.ranges.splice(t,n-t,e)},this.addList=function(e){var t=[];for(var n=e.length;n--;)t.push.call(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){var e=[],t=this.ranges,n=t[0],r;for(var i=1;i<t.length;i++){r=n,n=t[i];var s=this.comparePoints(r.end,n.start);if(s<0)continue;if(s==0&&!r.isEmpty()&&!n.isEmpty())continue;this.comparePoints(r.end,n.end)<0&&(r.end.row=n.end.row,r.end.column=n.end.column),t.splice(i,1),e.push(n),n=r,i--}return e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var i=this.pointIndex({row:t,column:0},r);i<0&&(i=-i-1);var s=[];for(var o=r;o<i;o++)s.push(n[o]);return s},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){if(!this.session)return;this.session.removeListener("change",this.onChange),this.session=null},this.$onChange=function(e){var t=e.data.range;if(e.data.action[0]=="i")var n=t.start,r=t.end;else var r=t.start,n=t.end;var i=n.row,s=r.row,o=s-i,u=-n.column+r.column,a=this.ranges;for(var f=0,l=a.length;f<l;f++){var c=a[f];if(c.end.row<i)continue;if(c.start.row>i)break;c.start.row==i&&c.start.column>=n.column&&(c.start.column+=u,c.start.row+=o),c.end.row==i&&c.end.column>=n.column&&(c.end.column+=u,c.end.row+=o)}if(o!=0&&f<l)for(;f<l;f++){var c=a[f];c.start.row+=o,c.end.row+=o}}}).call(r.prototype),t.RangeList=r}),define("ace/mouse/multi_select_handler",["require","exports","module","../lib/event"],function(e,t,n){function i(e,t){return e.row==t.row&&e.column==t.column}function s(e){var t=e.domEvent,n=t.altKey,s=t.shiftKey,o=e.getAccelKey(),u=e.getButton();if(e.editor.inMultiSelectMode&&u==2){e.editor.textInput.onContextMenu(e.domEvent);return}if(!o&&!n){u==0&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode();return}var a=e.editor,f=a.selection,l=a.inMultiSelectMode,c=e.getDocumentPosition(),h=f.getCursor(),p=e.inSelection()||f.isEmpty()&&i(c,h),d=e.x,v=e.y,m=function(e){d=e.clientX,v=e.clientY},g=function(){var e=a.renderer.pixelToScreenCoordinates(d,v),t=y.screenToDocumentPosition(e.row,e.column);if(i(w,e)&&i(t,f.selectionLead))return;w=e,a.selection.moveCursorToPosition(t),a.selection.clearSelection(),a.renderer.scrollCursorIntoView(),a.removeSelectionMarkers(x),x=f.rectangularRangeBlock(w,b),x.forEach(a.addSelectionMarker,a),a.updateSelectionMarkers()},y=a.session,b=a.renderer.pixelToScreenCoordinates(d,v),w=b;if(o&&!s&&!n&&u==0){if(!l&&p)return;if(!l){var E=f.toOrientedRange();a.addSelectionMarker(E)}var S=f.rangeList.rangeAtPoint(c);r.capture(a.container,function(){},function(){var e=f.toOrientedRange();S&&e.isEmpty()&&i(S.cursor,e.cursor)?f.substractPoint(e.cursor):(E&&(a.removeSelectionMarker(E),f.addRange(E)),f.addRange(e))})}else if(!s&&n&&u==0){e.stop(),l&&!o?f.toSingleRange():!l&&o&&f.addRange(),f.moveCursorToPosition(c),f.clearSelection();var x=[],T=function(e){clearInterval(C),a.removeSelectionMarkers(x);for(var t=0;t<x.length;t++)f.addRange(x[t])},N=g;r.capture(a.container,m,T);var C=setInterval(function(){N()},20);return e.preventDefault()}}var r=e("../lib/event");t.onMouseDown=s}),define("ace/keyboard/hash_handler",["require","exports","module","../lib/keys"],function(e,t,n){function i(e,t){this.platform=t,this.commands={},this.commmandKeyBinding={},this.addCommands(e)}var r=e("../lib/keys");(function(){this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e){var t=typeof e=="string"?e:e.name;e=this.commands[t],delete this.commands[t];var n=this.commmandKeyBinding;for(var r in n)for(var i in n[r])n[r][i]==e&&delete n[r][i]},this.bindKey=function(e,t){if(!e)return;if(typeof t=="function"){this.addCommand({exec:t,bindKey:e,name:e});return}var n=this.commmandKeyBinding;e.split("|").forEach(function(e){var r=this.parseKeys(e,t),i=r.hashId;(n[i]||(n[i]={}))[r.key]=t},this)},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(typeof n=="string")return this.bindKey(n,t);typeof n=="function"&&(n={exec:n}),n.name||(n.name=t),this.addCommand(n)},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){var t=e.bindKey;if(!t)return;var n=typeof t=="string"?t:t[this.platform];this.bindKey(n,e)},this.parseKeys=function(e){var t,n=0,i=e.toLowerCase().trim().split(/\s*\-\s*/);for(var s=0,o=i.length;s<o;s++)r.KEY_MODS[i[s]]?n|=r.KEY_MODS[i[s]]:t=i[s]||"-";return i[0]=="text"&&i.length==2&&(n=-1,t=i[1]),{key:t,hashId:n}},this.findKeyCommand=function(t,n){var r=this.commmandKeyBinding;return r[t]&&r[t][n.toLowerCase()]},this.handleKeyboard=function(e,t,n,r){return{command:this.findKeyCommand(t,n)}}}).call(i.prototype),t.HashHandler=i}),define("ace/commands/command_manager",["require","exports","module","../lib/oop","../keyboard/hash_handler","../lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../keyboard/hash_handler").HashHandler,s=e("../lib/event_emitter").EventEmitter,o=function(e,t){this.platform=e,this.commands={},this.commmandKeyBinding={},this.addCommands(t),this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};r.inherits(o,i),function(){r.implement(this,s),this.exec=function(e,t,n){typeof e=="string"&&(e=this.commands[e]);if(!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;var r=this._emit("exec",{editor:t,command:e,args:n});return r===!1?!1:!0},this.toggleRecording=function(){if(this.$inReplay)return;return this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(this.$inReplay||!this.macro)return;if(this.recording)return this.toggleRecording();try{this.$inReplay=!0,this.macro.forEach(function(t){typeof t=="string"?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}},this.trimMacro=function(e){return e.map(function(e){return typeof e[0]!="string"&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),define("ace/commands/multi_select_commands",["require","exports","module","../keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L"},readonly:!0}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},readonly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)}),define("ace/keyboard/state_handler",["require","exports","module"],function(e,t,n){function i(e){this.keymapping=this.$buildKeymappingRegex(e)}var r=!1;i.prototype={$buildKeymappingRegex:function(e){for(var t in e)this.$buildBindingsRegex(e[t]);return e},$buildBindingsRegex:function(e){e.forEach(function(e){e.key?e.key=new RegExp("^"+e.key+"$"):Array.isArray(e.regex)?("key"in e||(e.key=new RegExp("^"+e.regex[1]+"$")),e.regex=new RegExp(e.regex.join("")+"$")):e.regex&&(e.regex=new RegExp(e.regex+"$"))})},$composeBuffer:function(e,t,n,r){if(e.state==null||e.buffer==null)e.state="start",e.buffer="";var i=[];t&1&&i.push("ctrl"),t&8&&i.push("command"),t&2&&i.push("option"),t&4&&i.push("shift"),n&&i.push(n);var s=i.join("-"),o=e.buffer+s;t!=2&&(e.buffer=o);var u={bufferToUse:o,symbolicName:s};return r&&(u.keyIdentifier=r.keyIdentifier),u},$find:function(e,t,n,i,s,o){var u={};return this.keymapping[e.state].some(function(a){var f;if(a.key&&!a.key.test(n))return!1;if(a.regex&&!(f=a.regex.exec(t)))return!1;if(a.match&&!a.match(t,i,s,n,o))return!1;if(a.disallowMatches)for(var l=0;l<a.disallowMatches.length;l++)if(!!f[a.disallowMatches[l]])return!1;if(a.exec){u.command=a.exec;if(a.params){var c;u.args={},a.params.forEach(function(e){e.match!=null&&f!=null?c=f[e.match]||e.defaultValue:c=e.defaultValue,e.type==="number"&&(c=parseInt(c)),u.args[e.name]=c})}e.buffer=""}return a.then&&(e.state=a.then,e.buffer=""),u.command==null&&(u.command="null"),r&&console.log("KeyboardStateMapper#find",a),!0}),u.command?u:(e.buffer="",!1)},handleKeyboard:function(e,t,n,i,s){t==-1&&(t=0);if(t==0||n!=""&&n!=String.fromCharCode(0)){var o=this.$composeBuffer(e,t,n,s),u=o.bufferToUse,a=o.symbolicName,f=o.keyIdentifier;return o=this.$find(e,u,a,t,n,f),r&&console.log("KeyboardStateMapper#match",u,a,o),o}return null}},t.matchCharacterOnly=function(e,t,n,r){return t==0?!0:t==4&&n.length==1?!0:!1},t.StateHandler=i}),define("ace/placeholder",["require","exports","module","./range","./lib/event_emitter","./lib/oop"],function(e,t,n){var r=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),o=function(e,t,n,r,i,s){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=n;var u=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session,i=this.$pos;this.pos=t.createAnchor(i.row,i.column),this.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(t){n.removeMarker(e.markerId),e.markerId=n.addMarker(new r(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(n){var r=t.createAnchor(n.row,n.column);e.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(this.othersActive)return;var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1),n.on("change",function(i){e.removeMarker(n.markerId),n.markerId=e.addMarker(new r(i.value.row,i.value.column,i.value.row,i.value.column+t.length),t.othersClass,null,!1)})})},this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)},this.onUpdate=function(e){var t=e.data,n=t.range;if(n.start.row!==n.end.row)return;if(n.start.row!==this.pos.row)return;if(this.$updating)return;this.$updating=!0;var i=t.action==="insertText"?n.end.column-n.start.column:n.start.column-n.end.column;if(n.start.column>=this.pos.column&&n.start.column<=this.pos.column+this.length+1){var s=n.start.column-this.pos.column;this.length+=i;if(!this.session.$fromUndo){if(t.action==="insertText")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};u.row===n.start.row&&n.start.column<u.column&&(a.column+=i),this.doc.insert(a,t.text)}else if(t.action==="removeText")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};u.row===n.start.row&&n.start.column<u.column&&(a.column+=i),this.doc.remove(new r(a.row,a.column,a.row,a.column-i))}n.start.column===this.pos.column&&t.action==="insertText"?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-i);for(var e=0;e<this.others.length;e++){var t=this.others[e],r={row:t.row,column:t.column-i};t.row===n.start.row&&n.start.column<t.column&&(r.column+=i),t.setPosition(r.row,r.column)}}.bind(this),0):n.start.column===this.pos.column&&t.action==="removeText"&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var t=this.others[e];t.row===n.start.row&&n.start.column<t.column&&t.setPosition(t.row,t.column-i)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var o=0;o<this.others.length;o++)this.others[o]._emit("change",{value:this.others[o]})}this.$updating=!1},this.onCursorChange=function(e){if(this.$updating)return;var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var e=0;e<this.others.length;e++)this.others[e].detach();this.session.setUndoSelect(!0
)},this.cancel=function(){if(this.$undoStackDepth===-1)throw Error("Canceling placeholders only supported with undo manager attached to session.");var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth;for(var n=0;n<t;n++)e.undo(!0)}}).call(o.prototype),t.PlaceHolder=o}),define("ace/config",["require","exports","module","./lib/lang"],function(e,t,n){"no use strict";function o(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var r=e("./lib/lang"),i=function(){return this}(),s={packaged:!1,workerPath:"",modePath:"",themePath:"",suffix:".js",$moduleUrls:{}};t.get=function(e){if(!s.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return s[e]},t.set=function(e,t){if(!s.hasOwnProperty(e))throw new Error("Unknown config key: "+e);s[e]=t},t.all=function(){return r.copyObject(s)},t.moduleUrl=function(e,t){if(s.$moduleUrls[e])return s.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var r=n[n.length-1].replace(t,"").replace(/(^[\-_])|([\-_]$)/,"");return!r&&n.length>1&&(r=n[n.length-2]),this.get(t+"Path")+"/"+t+"-"+r+this.get("suffix")},t.setModuleUrl=function(e,t){return s.$moduleUrls[e]=t},t.init=function(){s.packaged=e.packaged||n.packaged||i.define&&define.packaged;if(!i.document)return"";var r={},u="",a=document.getElementsByTagName("script");for(var f=0;f<a.length;f++){var l=a[f],c=l.src||l.getAttribute("src");if(!c)continue;var h=l.attributes;for(var p=0,d=h.length;p<d;p++){var v=h[p];v.name.indexOf("data-ace-")===0&&(r[o(v.name.replace(/^data-ace-/,""))]=v.value)}var m=c.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);m&&(u=m[1])}u&&(r.base=r.base||u,r.packaged=!0),r.workerPath=r.workerPath||r.base,r.modePath=r.modePath||r.base,r.themePath=r.themePath||r.base,delete r.base;for(var g in r)typeof r[g]!="undefined"&&t.set(g,r[g])}}),define("ace/edit_session",["require","exports","module","./config","./lib/oop","./lib/lang","./lib/net","./lib/event_emitter","./selection","./mode/text","./range","./document","./background_tokenizer","./search_highlight","./edit_session/folding","./edit_session/bracket_match"],function(e,t,n){var r=e("./config"),i=e("./lib/oop"),s=e("./lib/lang"),o=e("./lib/net"),u=e("./lib/event_emitter").EventEmitter,a=e("./selection").Selection,f=e("./mode/text").Mode,l=e("./range").Range,c=e("./document").Document,h=e("./background_tokenizer").BackgroundTokenizer,p=e("./search_highlight").SearchHighlight,d=function(e,t){this.$modified=!0,this.$breakpoints=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$resetRowCache(0),this.$wrapData=[],this.$foldData=[],this.$rowLengthCache=[],this.$undoSelect=!0,this.$foldData.toString=function(){var e="";return this.forEach(function(t){e+="\n"+t.toString()}),e},typeof e=="object"&&e.getLine?this.setDocument(e):this.setDocument(new c(e)),this.selection=new a(this),this.setMode(t)};(function(){function y(e){return e<4352?!1:e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510}i.implement(this,u),this.setDocument=function(e){if(this.doc)throw new Error("Document is already set");this.doc=e,e.on("change",this.onChange.bind(this)),this.on("changeFold",this.onChangeFold.bind(this)),this.bgTokenizer&&(this.bgTokenizer.setDocument(this.getDocument()),this.bgTokenizer.start(0))},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e){this.$docRowCache=[],this.$screenRowCache=[];return}var t=this.$getRowCacheIndex(this.$docRowCache,e)+1,n=this.$docRowCache.length;this.$docRowCache.splice(t,n),this.$screenRowCache.splice(t,n)},this.$getRowCacheIndex=function(e,t){var n=0,r=e.length-1;while(n<=r){var i=n+r>>1,s=e[i];if(t>s)n=i+1;else{if(!(t<s))return i;r=i-1}}return n&&n-1},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){var t=e.data;this.$modified=!0,this.$resetRowCache(t.range.start.row);var n=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&!t.ignore&&(this.$deltasDoc.push(t),n&&n.length!=0&&this.$deltasFold.push({action:"removeFolds",folds:n}),this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(t),this._emit("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveCursorTo(0,0),this.selection.clearSelection(),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n=this.bgTokenizer.getTokens(e),r,i=0;if(t==null)s=n.length-1,i=this.getLine(e).length;else for(var s=0;s<n.length;s++){i+=n[s].value.length;if(i>=t)break}return r=n[s],r?(r.index=s,r.start=i-r.value.length,r):null},this.highlight=function(e){if(!this.$searchHighlight){var t=new p(null,"ace_selected_word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.setUndoManager=function(e){this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel();if(e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),t.$deltas.length>0&&e.execute({action:"aceupdate",args:[t.$deltas,t]}),t.$deltas=[]},this.$informUndoManager=s.deferredCall(this.$syncInformUndoManager)}},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?s.stringRepeat(" ",this.getTabSize()):"	"},this.$useSoftTabs=!0,this.setUseSoftTabs=function(e){if(this.$useSoftTabs===e)return;this.$useSoftTabs=e},this.getUseSoftTabs=function(){return this.$useSoftTabs},this.$tabSize=4,this.setTabSize=function(e){if(isNaN(e)||this.$tabSize===e)return;this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._emit("changeTabSize")},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.$overwrite=!1,this.setOverwrite=function(e){if(this.$overwrite==e)return;this.$overwrite=e,this._emit("changeOverwrite")},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]=!0;this._emit("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._emit("changeBreakpoint",{})},this.setBreakpoint=function(e){this.$breakpoints[e]=!0,this._emit("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._emit("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var i=this.$markerId++,s={range:e,type:n||"line",renderer:typeof n=="function"?n:null,clazz:t,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=s,this._emit("changeFrontMarker")):(this.$backMarkers[i]=s,this._emit("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(!e.update)return;var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._emit("changeFrontMarker")):(this.$backMarkers[n]=e,this._emit("changeBackMarker")),e},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(!t)return;var n=t.inFront?this.$frontMarkers:this.$backMarkers;t&&(delete n[e],this._emit(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.setAnnotations=function(e){this.$annotations={};for(var t=0;t<e.length;t++){var n=e[t],r=n.row;this.$annotations[r]?this.$annotations[r].push(n):this.$annotations[r]=[n]}this._emit("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||{}},this.clearAnnotations=function(){this.$annotations={},this._emit("changeAnnotation",{})},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine="\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe));if(r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var i=/\s/;else var i=this.nonTokenRe;var s=t;if(s>0){do s--;while(s>=0&&n.charAt(s).match(i));s++}var o=t;while(o<n.length&&n.charAt(o).match(i))o++;return new l(e,s,e,o)},this.getAWordRange=function(e,t){var n=this.getWordRange(e,t),r=this.getLine(n.end.row);while(r.charAt(n.end.column).match(/[ \t]/))n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.$useWorker=!0,this.setUseWorker=function(e){if(this.$useWorker==e)return;this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._emit("tokenizerUpdate",e)},this.$modes={},this._loadMode=function(t,n){function a(e){if(i.$modes[t])return n(i.$modes[t]);i.$modes[t]=new e.Mode,i.$modes[t].$id=t,i._emit("loadmode",{name:t,mode:i.$modes[t]}),n(i.$modes[t])}function l(e,t){if(!r.get("packaged"))return t();o.loadScript(r.moduleUrl(e,"mode"),t)}this.$modes["null"]||(this.$modes["null"]=this.$modes["ace/mode/text"]=new f);if(this.$modes[t])return n(this.$modes[t]);var i=this,s;try{s=e(t)}catch(u){}if(s&&s.Mode)return a(s);this.$mode||this.$setModePlaceholder(),l(t,function(){e([t],a)})},this.$setModePlaceholder=function(){this.$mode=this.$modes["null"];var e=this.$mode.getTokenizer();if(!this.bgTokenizer){this.bgTokenizer=new h(e);var t=this;this.bgTokenizer.addEventListener("update",function(e){t._emit("tokenizerUpdate",e)})}else this.bgTokenizer.setTokenizer(e);this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=this.$mode.tokenRe,this.nonTokenRe=this.$mode.nonTokenRe},this.$mode=null,this.$modeId=null,this.setMode=function(e){e=e||"null";if(typeof e=="string"){if(this.$modeId==e)return;this.$modeId=e;var t=this;this._loadMode(e,function(n){if(t.$modeId!==e)return;t.setMode(n)});return}if(this.$mode===e)return;this.$mode=e,this.$modeId=e.$id,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(n.addEventListener!==undefined){var r=this.onReloadTokenizer.bind(this);n.addEventListener("update",r)}if(!this.bgTokenizer){this.bgTokenizer=new h(n);var t=this;this.bgTokenizer.addEventListener("update",function(e){t._emit("tokenizerUpdate",e)})}else this.bgTokenizer.setTokenizer(n);this.bgTokenizer.setDocument(this.getDocument()),this.bgTokenizer.start(0),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,this.$setFolding(e.foldingRules),this._emit("changeMode")},this.$stopWorker=function(){this.$worker&&this.$worker.terminate(),this.$worker=null},this.$startWorker=function(){if(typeof Worker!="undefined"&&!e.noWorker)try{this.$worker=this.$mode.createWorker(this)}catch(t){console.log("Could not load worker"),console.log(t),this.$worker=null}else this.$worker=null},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){e=Math.round(Math.max(0,e));if(this.$scrollTop===e)return;this.$scrollTop=e,this._emit("changeScrollTop",e)},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){e=Math.round(Math.max(0,e));if(this.$scrollLeft===e)return;this.$scrollLeft=e,this._emit("changeScrollLeft",e)},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.screenWidth},this.$computeWidth=function(e){if(this.$modified||e){this.$modified=!1;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,s=this.$foldData[i],o=s?s.start.row:Infinity,u=t.length;for(var a=0;a<u;a++){if(a>o){a=s.end.row+1;if(a>=u)break;s=this.$foldData[i++],o=s?s.start.row:Infinity}n[a]==null&&(n[a]=this.$getStringScreenWidth(t[a])[0]),n[a]>r&&(r=n[a])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.undoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;var n=null;for(var r=e.length-1;r!=-1;r--){var i=e[r];i.group=="doc"?(this.doc.revertDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!0,n)):i.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n},this.redoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;var n=null;for(var r=0;r<e.length;r++){var i=e[r];i.group=="doc"&&(this.doc.applyDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,n){function r(e){var n=e.action=="insertText"||e.action=="insertLines";return t?!n:n}var i=e[0],s,o,u=!1;r(i)?(s=i.range.clone(),u=!0):(s=l.fromPoints(i.range.start,i.range.start),u=!1);for(var a=1;a<e.length;a++)i=e[a],r(i)?(o=i.range.start,s.compare(o.row,o.column)==-1&&s.setStart(i.range.start),o=i.range.end,s.compare(o.row,o.column)==1&&s.setEnd(i.range.end),u=!0):(o=i.range.start,s.compare(o.row,o.column)==-1&&(s=l.fromPoints(i.range.start,i.range.start)),u=!1);if(n!=null){var f=n.compareRange(s);f==1?s.setStart(n.start):f==-1&&s.setEnd(n.end)}return s},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t){var n=this.getTextRange(e);this.remove(e);var r=t.row,i=t.column;!e.isMultiLine()&&e.start.row==r&&e.end.column<i&&(i-=n.length);if(e.isMultiLine()&&e.end.row<r){var s=this.doc.$split(n);r-=s.length-1}var o=r+e.end.row-e.start.row,u=e.isMultiLine()?e.end.column:i+e.end.column-e.start.column,a=new l(r,i,o,u);return this.insert(a.start,n),a},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;r<=t;r++)this.insert({row:r,column:0},n)},this.outdentRows=function(e){var t=e.collapseRows(),n=new l(0,0,0,0),r=this.getTabSize();for(var i=t.start.row;i<=t.end.row;++i){var s=this.getLine(i);n.start.row=i,n.end.row=i;for(var o=0;o<r;++o)if(s.charAt(o)!=" ")break;o<r&&s.charAt(o)=="	"?(n.start.column=o,n.end.column=o+1):(n.start.column=0,n.end.column=o),this.remove(n)}},this.moveLinesUp=function(e,t){if(e<=0)return 0;var n=this.doc.removeLines(e,t);return this.doc.insertLines(e-1,n),-1},this.moveLinesDown=function(e,t){if(t>=this.doc.getLength()-1)return 0;var n=this.doc.removeLines(e,t);return this.doc.insertLines(e+1,n),1},this.duplicateLines=function(e,t){var e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t),n=this.getLines(e,t);this.doc.insertLines(e,n);var r=t-e+1;return r},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){t=Math.max(0,t);if(e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0);if(e){var t=this.getLength();this.$wrapData=[];for(var n=0;n<t;n++)this.$wrapData.push([]);this.$updateWrapData(0,t-1)}this._emit("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){if(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)this.$wrapLimitRange.min=e,this.$wrapLimitRange.max=t,this.$modified=!0,this._emit("changeWrapMode")},this.adjustWrapLimit=function(e){var t=this.$constrainWrapLimit(e);return t!=this.$wrapLimit&&t>0?(this.$wrapLimit=t,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._emit("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(e){var t=this.$wrapLimitRange.min;t&&(e=Math.max(t,e));var n=this.$wrapLimitRange.max;return n&&(e=Math.min(n,e)),Math.max(1,e)},this.getWrapLimit=function(){return this.$wrapLimit},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n,r=e.data.action,i=e.data.range.start.row,s=e.data.range.end.row,o=e.data.range.start,u=e.data.range.end,a=null;r.indexOf("Lines")!=-1?(r=="insertLines"?s=i+e.data.lines.length:s=i,n=e.data.lines?e.data.lines.length:s-i):n=s-i;if(n!=0)if(r.indexOf("remove")!=-1){this[t?"$wrapData":"$rowLengthCache"].splice(i,n);var f=this.$foldData;a=this.getFoldsInRange(e.data.range),this.removeFolds(a);var l=this.getFoldLine(u.row),c=0;if(l){l.addRemoveChars(u.row,u.column,o.column-u.column),l.shiftRow(-n);var h=this.getFoldLine(i);h&&h!==l&&(h.merge(l),l=h),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=u.row&&l.shiftRow(-n)}s=i}else{var p;if(t){p=[i,0];for(var d=0;d<n;d++)p.push([]);this.$wrapData.splice.apply(this.$wrapData,p)}else p=Array(n),p.unshift(i,0),this.$rowLengthCache.splice.apply(this.$rowLengthCache,p);var f=this.$foldData,l=this.getFoldLine(i),c=0;if(l){var v=l.range.compareInside(o.row,o.column);v==0?(l=l.split(o.row,o.column),l.shiftRow(n),l.addRemoveChars(s,0,u.column-o.column)):v==-1&&(l.addRemoveChars(i,0,u.column-o.column),l.shiftRow(n)),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=i&&l.shiftRow(n)}}else{n=Math.abs(e.data.range.start.column-e.data.range.end.column),r.indexOf("remove")!=-1&&(a=this.getFoldsInRange(e.data.range),this.removeFolds(a),n=-n);var l=this.getFoldLine(i);l&&l.addRemoveChars(i,o.column,n)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),t?this.$updateWrapData(i,s):this.$updateRowLengthCache(i,s),a},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var n=this.doc.getAllLines(),r=this.getTabSize(),i=this.$wrapData,o=this.$wrapLimit,u,f,l=e;t=Math.min(t,n.length-1);while(l<=t){f=this.getFoldLine(l,f);if(!f)u=this.$getDisplayTokens(s.stringTrimRight(n[l])),i[l]=this.$computeWrapSplits(u,o,r),l++;else{u=[],f.walk(function(e,t,r,i){var s;if(e){s=this.$getDisplayTokens(e,u.length),s[0]=a;for(var o=1;o<s.length;o++)s[o]=c}else s=this.$getDisplayTokens(n[t].substring(i,r),u.length);u=u.concat(s)}.bind(this),f.end.row,n[f.end.row].length+1);while(u.length!=0&&u[u.length-1]>=v)u.pop();i[f.start.row]=this.$computeWrapSplits(u,o,r),l=f.end.row+1}}};var t=1,n=2,a=3,c=4,d=9,v=10,m=11,g=12;this.$computeWrapSplits=function(e,t){function o(t){var r=e.slice(i,t),o=r.length;r.join("").replace(/12/g,function(){o-=1}).replace(/2/g,function(){o-=1}),s+=o,n.push(s),i=t}if(e.length==0)return[];var n=[],r=e.length,i=0,s=0;while(r-i>t){var u=i+t;if(e[u]>=v){while(e[u]>=v)u++;o(u);continue}if(e[u]==a||e[u]==c){for(u;u!=i-1;u--)if(e[u]==a)break;if(u>i){o(u);continue}u=i+t;for(u;u<e.length;u++)if(e[u]!=c)break;if(u==e.length)break;o(u);continue}var f=Math.max(u-10,i-1);while(u>f&&e[u]<a)u--;while(u>f&&e[u]==d)u--;if(u>f){o(++u);continue}u=i+t,o(u)}return n},this.$getDisplayTokens=function(e,r){var i=[],s;r=r||0;for(var o=0;o<e.length;o++){var u=e.charCodeAt(o);if(u==9){s=this.getScreenTabSize(i.length+r),i.push(m);for(var a=1;a<s;a++)i.push(g)}else u==32?i.push(v):u>39&&u<48||u>57&&u<64?i.push(d):u>=4352&&y(u)?i.push(t,n):i.push(t)}return i},this.$getStringScreenWidth=function(e,t,n){if(t==0)return[0,0];t==null&&(t=Infinity),n=n||0;var r,i;for(i=0;i<e.length;i++){r=e.charCodeAt(i),r==9?n+=this.getScreenTabSize(n):r>=4352&&y(r)?n+=2:n+=1;if(n>t)break}return[n,i]},this.getRowLength=function(e){return!this.$useWrapMode||!this.$wrapData[e]?1:this.$wrapData[e].length+1},this.getRowHeight=function(e,t){return this.getRowLength(t)*e.lineHeight},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:undefined},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t){if(e<0)return{row:0,column:0};var n,r=0,i=0,s,o=0,u=0,a=this.$screenRowCache,f=this.$getRowCacheIndex(a,e);if(0<f&&f<a.length)var o=a[f],r=this.$docRowCache[f],l=e>o||e==o&&f==a.length-1;else var l=!0;var c=this.getLength()-1,h=this.getNextFoldLine(r),p=h?h.start.row:Infinity;while(o<=e){u=this.getRowLength(r);if(o+u-1>=e||r>=c)break;o+=u,r++,r>p&&(r=h.end.row+1,h=this.getNextFoldLine(r,h),p=h?h.start.row:Infinity),l&&(this.$docRowCache.push(r),this.$screenRowCache.push(o))}if(h&&h.start.row<=r)n=this.getFoldDisplayLine(h),r=h.start.row;else{if(o+u<=e||r>c)return{row:c,column:this.getLine(c).length};n=this.getLine(r),h=null}if(this.$useWrapMode){var d=this.$wrapData[r];d&&(s=d[e-o],e>o&&d.length&&(i=d[e-o-1]||d[d.length-1],n=n.substring(i)))}return i+=this.$getStringScreenWidth(n,t)[1],this.$useWrapMode&&i>=s&&(i=s-1),h?h.idxToPosition(i):{row:r,column:i}},this.documentToScreenPosition=function(e,t){if(typeof t=="undefined")var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r=0,i=null,s=null;s=this.getFoldAt(e,t,1),s&&(e=s.start.row,t=s.start.column);var o,u=0,a=this.$docRowCache,f=this.$getRowCacheIndex(a,e);if(0<f&&f<a.length)var u=a[f],r=this.$screenRowCache[f],l=e>u||e==u&&f==a.length-1;else var l=!0;var c=this.getNextFoldLine(u),h=c?c.start.row:Infinity;while(u<e){if(u>=h){o=c.end.row+1;if(o>e)break;c=this.getNextFoldLine(o,c),h=c?c.start.row:Infinity}else o=u+1;r+=this.getRowLength(u),u=o,l&&(this.$docRowCache.push(u),this.$screenRowCache.push(r))}var p="";c&&u>=h?(p=this.getFoldDisplayLine(c,e,t),i=c.start.row):(p=this.getLine(e).substring(0,t),i=e);if(this.$useWrapMode){var d=this.$wrapData[i],v=0;while(p.length>=d[v])r++,v++;p=p.substring(d[v-1]||0,p.length)}return{row:r,column:this.$getStringScreenWidth(p)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(!this.$useWrapMode){e=this.getLength();var n=this.$foldData;for(var r=0;r<n.length;r++)t=n[r],e-=t.end.row-t.start.row}else{var i=this.$wrapData.length,s=0,r=0,t=this.$foldData[r++],o=t?t.start.row:Infinity;while(s<i)e+=this.$wrapData[s].length+1,s++,s>o&&(s=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:Infinity)}return e}}).call(d.prototype),e("./edit_session/folding").Folding.call(d.prototype),e("./edit_session/bracket_match").BracketMatch.call(d.prototype),t.EditSession=d}),define("ace/editor",["require","exports","module","./lib/fixoldbrowsers","./lib/oop","./lib/lang","./lib/useragent","./keyboard/textinput","./mouse/mouse_handler","./mouse/fold_handler","./keyboard/keybinding","./edit_session","./search","./range","./lib/event_emitter","./commands/command_manager","./commands/default_commands"],function(e,t,n){e("./lib/fixoldbrowsers");var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./lib/useragent"),o=e("./keyboard/textinput").TextInput,u=e("./mouse/mouse_handler").MouseHandler,a=e("./mouse/fold_handler").FoldHandler,f=e("./keyboard/keybinding").KeyBinding,l=e("./edit_session").EditSession,c=e("./search").Search,h=e("./range").Range,p=e("./lib/event_emitter").EventEmitter,d=e("./commands/command_manager").CommandManager,v=e("./commands/default_commands").commands,m=function(e,t){var n=e.getContainerElement();this.container=n,this.renderer=e,this.commands=new d(s.isMac?"mac":"win",v),this.textInput=new o(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new f(this),s.isIPad||(this.$mouseHandler=new u(this),new a(this)),this.$blockScrolling=0,this.$search=(new c).set({wrap:!0}),this.setSession(t||new l(""))};(function(){r.implement(this,p),this.setKeyboardHandler=function(e){this.keyBinding.setKeyboardHandler(e)},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session==e)return;if(this.session){var t=this.session;this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeLeftTop",this.$onScrollLeftChange);var n=this.session.getSelection();n.removeEventListener("changeCursor",this.$onCursorChange),n.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e,this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.updateText.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull(),this._emit("changeSession",{session:e,oldSession:t})},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?t==1?this.navigateFileEnd():t==-1&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e){this.renderer.setTheme(e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.setFontSize=function(e){this.container.style.fontSize=e,this.renderer.updateFontSize()},this.$highlightBrackets=function(){this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null);if(this.$highlightPending)return;var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session.findMatchingBracket(e.getCursorPosition());if(t){var n=new h(t.row,t.column,t.row,t.column+1);e.session.$bracketHighlight=e.session.addMarker(n,"ace_bracket","text")}},10)},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(){if(this.$isFocused)return;this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus")},this.onBlur=function(){if(!this.$isFocused)return;this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur")},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t=e.data,n=t.range,r;n.start.row==n.end.row&&t.action!="insertLines"&&t.action!="removeLines"?r=n.end.row:r=Infinity,this.renderer.updateLines(n.start.row,r),this._emit("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||this.renderer.scrollCursorIntoView(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},this.$updateHighlightActiveLine=function(){var e=this.getSession();e.$highlightLineMarker&&e.removeMarker(e.$highlightLineMarker),e.$highlightLineMarker=null;if(this.$highlightActiveLine){var t=this.getCursorPosition(),n=this.session.getFoldLine(t.row);if(this.getSelectionStyle()!="line"||!this.selection.isMultiLine()){var r;n?r=new h(n.start.row,0,n.end.row+1,0):r=new h(t.row,0,t.row+1,0),e.$highlightLineMarker=e.addMarker(r,"ace_active_line","background")}}},this.
onSelectionChange=function(e){var t=this.session;t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null;if(!this.selection.isEmpty()){var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}else this.$updateHighlightActiveLine();var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i)},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(t.isEmpty()||t.isMultiLine())return;var n=t.start.column-1,r=t.end.column+1,i=e.getLine(t.start.row),s=i.length,o=i.substring(Math.max(n,0),Math.min(r,s));if(n>=0&&/^[\w\d]/.test(o)||r<=s&&/[\w\d]$/.test(o))return;o=i.substring(t.start.column,t.end.column);if(!/^[\w\d]+$/.test(o))return;var u=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o});return u},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(){this.renderer.updateText()},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getCopyText=function(){var e="";return this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange())),this._emit("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e){this._emit("paste",e),this.insert(e)},this.insert=function(e){var t=this.session,n=t.getMode(),r=this.getCursorPosition();if(this.getBehavioursEnabled()){var i=n.transformAction(t.getState(r.row),"insertion",this,t,e);i&&(e=i.text)}e=e.replace("	",this.session.getTabString());if(!this.selection.isEmpty())r=this.session.remove(this.getSelectionRange()),this.clearSelection();else if(this.session.getOverwrite()){var s=new h.fromPoints(r,r);s.end.column+=e.length,this.session.remove(s)}this.clearSelection();var o=r.column,u=t.getState(r.row),a=n.checkOutdent(u,t.getLine(r.row),e),f=t.getLine(r.row),l=n.getNextLineIndent(u,f.slice(0,r.column),t.getTabString()),c=t.insert(r,e);i&&i.selection&&(i.selection.length==2?this.selection.setSelectionRange(new h(r.row,o+i.selection[0],r.row,o+i.selection[1])):this.selection.setSelectionRange(new h(r.row+i.selection[0],i.selection[1],r.row+i.selection[2],i.selection[3])));var u=t.getState(r.row);if(t.getDocument().isNewLine(e)){this.moveCursorTo(r.row+1,0);var p=t.getTabSize(),d=Number.MAX_VALUE;for(var v=r.row+1;v<=c.row;++v){var m=0;f=t.getLine(v);for(var g=0;g<f.length;++g)if(f.charAt(g)=="	")m+=p;else{if(f.charAt(g)!=" ")break;m+=1}/[^\s]/.test(f)&&(d=Math.min(m,d))}for(var v=r.row+1;v<=c.row;++v){var y=d;f=t.getLine(v);for(var g=0;g<f.length&&y>0;++g)f.charAt(g)=="	"?y-=p:f.charAt(g)==" "&&(y-=1);t.remove(new h(v,0,v,g))}t.indentRows(r.row+1,c.row,l)}a&&n.autoOutdent(u,t,r.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.$mouseHandler.setScrollSpeed(e)},this.getScrollSpeed=function(){return this.$mouseHandler.getScrollSpeed()},this.setDragDelay=function(e){this.$mouseHandler.setDragDelay(e)},this.getDragDelay=function(){return this.$mouseHandler.getDragDelay()},this.$selectionStyle="line",this.setSelectionStyle=function(e){if(this.$selectionStyle==e)return;this.$selectionStyle=e,this.onSelectionChange(),this._emit("changeSelectionStyle",{data:e})},this.getSelectionStyle=function(){return this.$selectionStyle},this.$highlightActiveLine=!0,this.setHighlightActiveLine=function(e){if(this.$highlightActiveLine==e)return;this.$highlightActiveLine=e,this.$updateHighlightActiveLine()},this.getHighlightActiveLine=function(){return this.$highlightActiveLine},this.$highlightGutterLine=!0,this.setHighlightGutterLine=function(e){if(this.$highlightGutterLine==e)return;this.renderer.setHighlightGutterLine(e),this.$highlightGutterLine=e},this.getHighlightGutterLine=function(){return this.$highlightGutterLine},this.$highlightSelectedWord=!0,this.setHighlightSelectedWord=function(e){if(this.$highlightSelectedWord==e)return;this.$highlightSelectedWord=e,this.$onSelectionChange()},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){if(this.getShowInvisibles()==e)return;this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.$readOnly=!1,this.setReadOnly=function(e){this.$readOnly=e},this.getReadOnly=function(){return this.$readOnly},this.$modeBehaviours=!0,this.setBehavioursEnabled=function(e){this.$modeBehaviours=e},this.getBehavioursEnabled=function(){return this.$modeBehaviours},this.setShowFoldWidgets=function(e){var t=this.renderer.$gutterLayer;if(t.getShowFoldWidgets()==e)return;this.renderer.$gutterLayer.setShowFoldWidgets(e),this.$showFoldWidgets=e,this.renderer.updateFull()},this.getShowFoldWidgets=function(){return this.renderer.$gutterLayer.getShowFoldWidgets()},this.setFadeFoldWidgets=function(e){this.renderer.setFadeFoldWidgets(e)},this.getFadeFoldWidgets=function(){return this.renderer.getFadeFoldWidgets()},this.remove=function(e){this.selection.isEmpty()&&(e=="left"?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),i=n.getMode().transformAction(r,"deletion",this,n,t);i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(!this.selection.isEmpty())return;var e=this.getCursorPosition(),t=e.column;if(t===0)return;var n=this.session.getLine(e.row),r,i;t<n.length?(r=n.charAt(t)+n.charAt(t-1),i=new h(e.row,t-1,e.row,t+1)):(r=n.charAt(t-1)+n.charAt(t-2),i=new h(e.row,t-2,e.row,t)),this.session.replace(i,r)},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row||t.start.column<t.end.column)){var r;if(this.session.getUseSoftTabs()){var s=e.getTabSize(),o=this.getCursorPosition(),u=e.documentToScreenColumn(o.row,o.column),a=s-u%s;r=i.stringRepeat(" ",a)}else r="	";return this.insert(r)}var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"	")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.removeLines=function(){var e=this.$getSelectedRows(),t;e.first===0||e.last+1<this.session.getLength()?t=new h(e.first,0,e.last+1,0):t=new h(e.first-1,this.session.getLine(e.first-1).length,e.last,this.session.getLine(e.last).length),this.session.remove(t),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange();if(n.isEmpty()){var r=n.start.row;t.duplicateLines(r,r)}else{var i=e.isBackwards(),s=e.isBackwards()?n.start:n.end,o=t.insert(s,t.getTextRange(n),!1);n.start=s,n.end=o,e.setSelectionRange(n,i)}},this.moveLinesDown=function(){this.$moveLines(function(e,t){return this.session.moveLinesDown(e,t)})},this.moveLinesUp=function(){this.$moveLines(function(e,t){return this.session.moveLinesUp(e,t)})},this.moveText=function(e,t){return this.$readOnly?null:this.session.moveText(e,t)},this.copyLinesUp=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t),0})},this.copyLinesDown=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t)})},this.$moveLines=function(e){var t=this.$getSelectedRows(),n=this.selection;if(!n.isMultiLine())var r=n.getRange(),i=n.isBackwards();var s=e.call(this,t.first,t.last);r?(r.start.row+=s,r.end.row+=s,n.setSelectionRange(r,i)):(n.setSelectionAnchor(t.last+s+1,0),n.$moveSelection(function(){n.moveCursorTo(t.first+s,0)}))},this.$getSelectedRows=function(){var e=this.getSelectionRange().collapseRows();return{first:e.start.row,last:e.end.row}},this.onCompositionStart=function(e){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,i=e*Math.floor(r.height/r.lineHeight);this.$blockScrolling++,t==1?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):t==0&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection()),this.$blockScrolling--;var s=n.scrollTop;n.scrollBy(0,i*r.lineHeight),t!=null&&n.scrollCursorIntoView(null,.5),n.animateScrolling(s)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e){var t=this.getCursorPosition(),n=this.session.getBracketRange(t);if(!n){n=this.find({needle:/[{}()\[\]]/g,preventScroll:!0,start:{row:t.row,column:t.column-1}});if(!n)return;var r=n.start;r.row==t.row&&Math.abs(r.column-t.column)<2&&(n=this.session.getBracketRange(r))}r=n&&n.cursor||r,r&&(e?n&&n.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(r.row,r.column):(this.clearSelection(),this.moveCursorTo(r.row,r.column)))},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.moveCursorTo(e-1,t||0),this.$blockScrolling-=1,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.navigateUp=function(e){this.selection.clearSelection(),e=e||1,this.selection.moveCursorBy(-e,0)},this.navigateDown=function(e){this.selection.clearSelection(),e=e||1,this.selection.moveCursorBy(e,0)},this.navigateLeft=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorLeft()}this.clearSelection()},this.navigateRight=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorRight()}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){var e=this.renderer.scrollTop;this.selection.moveCursorFileEnd(),this.clearSelection(),this.renderer.animateScrolling(e)},this.navigateFileStart=function(){var e=this.renderer.scrollTop;this.selection.moveCursorFileStart(),this.clearSelection(),this.renderer.animateScrolling(e)},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),n!==null&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;this.$blockScrolling+=1;var i=this.getSelectionRange();this.clearSelection(),this.selection.moveCursorTo(0,0);for(var s=n.length-1;s>=0;--s)this.$tryReplace(n[s],e)&&r++;return this.selection.setSelectionRange(i),this.$blockScrolling-=1,r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),t!==null?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),typeof e=="string"||e instanceof RegExp?t.needle=e:typeof e=="object"&&r.mixin(t,e);var i=this.selection.getRange();t.needle==null&&(e=this.session.getTextRange(i)||this.$search.$options.needle,e||(i=this.session.getWordRange(i.start.row,i.start.column),e=this.session.getTextRange(i)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:i});var s=this.$search.find(this.session);if(t.preventScroll)return s;if(s)return this.revealRange(s,n),s;t.backwards?i.start=i.end:i.end=i.start,this.selection.setRange(i)},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!=0&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy()}}).call(m.prototype),t.Editor=m}),define("ace/multi_select",["require","exports","module","./range_list","./range","./selection","./mouse/multi_select_handler","./lib/event","./commands/multi_select_commands","./search","./edit_session","./editor"],function(e,t,n){function c(e,t,n){return l.$options.wrap=!0,l.$options.needle=t,l.$options.backwards=n==-1,l.find(e)}function d(e,t){return e.row==t.row&&e.column==t.column}function v(e){e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),t.onSessionChange.call(e,e),e.on("changeSession",t.onSessionChange.bind(e)),e.on("mousedown",o),e.commands.addCommands(a.defaultCommands),m(e)}function m(e){function i(){n&&(r.style.cursor="",n=!1)}var t=e.textInput.getElement(),n=!1,r=e.renderer.content;u.addListener(t,"keydown",function(e){e.keyCode==18&&!(e.ctrlKey||e.shiftKey||e.metaKey)?n||(r.style.cursor="crosshair",n=!0):n&&(r.style.cursor="")}),u.addListener(t,"keyup",i),u.addListener(t,"blur",i)}var r=e("./range_list").RangeList,i=e("./range").Range,s=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),a=e("./commands/multi_select_commands");t.commands=a.defaultCommands.concat(a.multiSelectCommands);var f=e("./search").Search,l=new f,h=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(h.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(!e)return;if(!this.inMultiSelectMode&&this.rangeCount==0){var n=this.toOrientedRange();if(e.intersects(n))return t||this.fromOrientedRange(e);this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._emit("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._emit("addRange",{range:e})},this.$onRemoveRange=function(e){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._emit("removeRange",{ranges:e}),this.rangeCount==0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._emit("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){if(this.rangeList)return;this.rangeList=new r,this.ranges=[],this.rangeCount=0},this.getAllRanges=function(){return this.rangeList.ranges.concat()},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var n=this.getRange(),r=n.start.row,s=n.end.row;if(r==s)return;var o=[],u=this.getLineRange(r,!0);u.start.column=n.start.column,o.push(u);for(var a=r+1;a<s;a++)o.push(this.getLineRange(a,!0));u=this.getLineRange(s,!0),u.end.column=n.end.column,o.push(u),o.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.selectionLead),s=this.session.documentToScreenPosition(this.selectionAnchor),o=this.rectangularRangeBlock(r,s);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],s=e.column<t.column;if(s)var o=e.column,u=t.column;else var o=t.column,u=e.column;var a=e.row<t.row;if(a)var f=e.row,l=t.row;else var f=t.row,l=e.row;o<0&&(o=0),f<0&&(f=0),f==l&&(n=!0);for(var c=f;c<=l;c++){var h=i.fromPoints(this.session.screenToDocumentPosition(c,o),this.session.screenToDocumentPosition(c,u));if(h.isEmpty()){if(p&&d(h.end,p))break;var p=h.end}h.cursor=s?h.start:h.end,r.push(h)}a&&r.reverse();if(!n){var v=r.length-1;while(r[v].isEmpty()&&v>0)v--;if(v>0){var m=0;while(r[m].isEmpty())m++}for(var g=v;g>=m;g--)r[g].isEmpty()&&r.splice(g,1)}return r}}.call(s.prototype);var p=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(!e.marker)return;this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);t!=-1&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length},this.removeSelectionMarkers=function(e){var t=this.session.$selectionMarkers;for(var n=e.length;n--;){var r=e[n];if(!r.marker)continue;this.session.removeMarker(r.marker);var i=t.indexOf(r);i!=-1&&t.splice(i,1)}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){if(this.inMultiSelectMode)return;this.inMultiSelectMode=!0,this.setStyle("multiselect"),this.keyBinding.addKeyboardHandler(a.keyboardHandler),this.commands.on("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onSingleSelect=function(e){if(this.session.multiSelect.inVirtualMode)return;this.inMultiSelectMode=!1,this.unsetStyle("multiselect"),this.keyBinding.removeKeyboardHandler(a.keyboardHandler),this.commands.removeEventListener("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(!n.multiSelect)return;t.multiSelectAction?t.multiSelectAction=="forEach"?n.forEachSelection(t,e.args):t.multiSelectAction=="single"?(n.exitMultiSelectMode(),t.exec(n,e.args||{})):t.multiSelectAction(n,e.args||{}):(t.exec(n,e.args||{}),n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()),e.preventDefault()},this.forEachSelection=function(e,t){if(this.inVirtualSelectionMode)return;var n=this.session,r=this.selection,i=r.rangeList,o=r._eventRegistry;r._eventRegistry={};var u=new s(n);this.inVirtualSelectionMode=!0;for(var a=i.ranges.length;a--;)u.fromOrientedRange(i.ranges[a]),this.selection=n.selection=u,e.exec(this,t||{}),u.toOrientedRange(i.ranges[a]);u.detach(),this.selection=n.selection=r,this.inVirtualSelectionMode=!1,r._eventRegistry=o,r.mergeOverlappingRanges(),this.onCursorChange(),this.onSelectionChange()},this.exitMultiSelectMode=function(){if(this.inVirtualSelectionMode)return;this.multiSelect.toSingleRange()},this.getCopyText=function(){var e="";if(this.inMultiSelectMode){var t=this.multiSelect.rangeList.ranges;e=[];for(var n=0;n<t.length;n++)e.push(this.session.getTextRange(t[n]));e=e.join(this.session.getDocument().getNewLineCharacter())}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.onPaste=function(e){this._emit("paste",e);if(!this.inMultiSelectMode)return this.insert(e);var t=e.split(/\r\n|\r|\n/),n=this.selection.rangeList.ranges;if(t.length>n.length||t.length<=2||!t[1])return this.commands.exec("insertstring",this,e);for(var r=n.length;r--;){var i=n[r];i.isEmpty()||this.session.remove(i),this.session.insert(i.start,t[r])}},this.findAll=function(e,t,n){t=t||{},t.needle=e||t.needle,this.$search.set(t);var r=this.$search.findAll(this.session);if(!r.length)return 0;this.$blockScrolling+=1;var i=this.multiSelect;n||i.toSingleRange(r[0]);for(var s=r.length;s--;)i.addRange(r[s],!0);return this.$blockScrolling-=1,r.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,s=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(s.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(s.row+e,s.column);if(!n.isEmpty())var u=this.session.documentToScreenPosition(r?n.end:n.start),a=this.session.screenToDocumentPosition(u.row+e,u.column);else var a=o;if(r){var f=i.fromPoints(o,a);f.cursor=f.start}else{var f=i.fromPoints(a,o);f.cursor=f.end}f.desiredColumn=s.column;if(!this.selection.inMultiSelectMode)this.selection.addRange(n);else if(t)var l=n.cursor;this.selection.addRange(f),l&&this.selection.substractPoint(l)},this.transposeSelections=function(e){var t=this.session,n=t.multiSelect,r=n.ranges;for(var i=r.length;i--;){var s=r[i];if(s.isEmpty()){var o=t.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}}n.mergeOverlappingRanges();var u=[];for(var i=r.length;i--;){var s=r[i];u.unshift(t.getTextRange(s))}e<0?u.unshift(u.pop()):u.push(u.shift());for(var i=r.length;i--;){var s=r[i],o=s.clone();t.replace(s,u[i]),s.start.row=o.start.row,s.start.column=o.start.column}},this.selectMore=function(e,t){var n=this.session,r=n.multiSelect,i=r.toOrientedRange();if(i.isEmpty()){var i=n.getWordRange(i.start.row,i.start.column);i.cursor=i.end,this.multiSelect.addRange(i)}var s=n.getTextRange(i),o=c(n,s,e);o&&(o.cursor=e==-1?o.start:o.end,this.multiSelect.addRange(o)),t&&this.multiSelect.substractPoint(i.cursor)}}).call(p.prototype),t.onSessionChange=function(e){var t=e.session;t.multiSelect||(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t.multiSelect;var n=e.oldSession;n&&(n.multiSelect&&n.multiSelect.editor==this&&(n.multiSelect.editor=null),t.multiSelect.removeEventListener("addRange",this.$onAddRange),t.multiSelect.removeEventListener("removeRange",this.$onRemoveRange),t.multiSelect.removeEventListener("multiSelect",this.$onMultiSelect),t.multiSelect.removeEventListener("singleSelect",this.$onSingleSelect)),t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=v}),define("ace/virtual_renderer",["require","exports","module","./lib/oop","./lib/dom","./lib/event","./lib/useragent","./config","./lib/net","./layer/gutter","./layer/marker","./layer/text","./layer/cursor","./scrollbar","./renderloop","./lib/event_emitter","ace/requirejs/text!./css/editor.css"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/event"),o=e("./lib/useragent"),u=e("./config"),a=e("./lib/net"),f=e("./layer/gutter").Gutter,l=e("./layer/marker").Marker,c=e("./layer/text").Text,h=e("./layer/cursor").Cursor,p=e("./scrollbar").ScrollBar,d=e("./renderloop").RenderLoop,v=e("./lib/event_emitter").EventEmitter,m=e("ace/requirejs/text!./css/editor.css");i.importCssString(m,"ace_editor");var g=function(e,t){var n=this;this.container=e,this.$keepTextAreaAtCursor=!o.isIE,i.addCssClass(e,"ace_editor"),this.setTheme(t),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new f(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onResize.bind(this,!0)),this.setFadeFoldWidgets(!0),this.$markerBack=new l(this.content);var r=this.$textLayer=new c(this.content);this.canvas=r.element,this.$markerFront=new l(this.content),this.characterWidth=r.getCharacterWidth(),this.lineHeight=r.getLineHeight(),this.$cursorLayer=new h(this.content),this.$cursorPadding=8,this.$horizScroll=!1,this.$horizScrollAlwaysVisible=!1,this.$animatedScroll=!1,this.scrollBar=new p(e),this.scrollBar.addEventListener("scroll",function(e){n.$inScrollAnimation||n.session.setScrollTop(e.data)}),this.scrollTop=0,this.scrollLeft=0,s.addListener(this.scroller,"scroll",function(){var e=n.scroller.scrollLeft;n.scrollLeft=e,n.session.setScrollLeft(e)}),this.cursorPos={row:0,column:0},this.$textLayer.addEventListener("changeCharacterSize",function(){n.characterWidth=r.getCharacterWidth(),n.lineHeight=r.getLineHeight(),n.$updatePrintMargin(),n.onResize(!0),n.$loop.schedule(n.CHANGE_FULL)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:1,characterWidth:1,minHeight:1,maxHeight:1,offset:0,height:1},this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.setPadding(4),this.$updatePrintMargin()};(function(){this.showGutter=!0,this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,v),this.setSession=function(e){this.session=e,this.scroller.className="ace_scroller",this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),this.$loop.schedule(this.CHANGE_FULL)},this.updateLines=function(e,t){t===undefined&&(t=Infinity),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$loop.schedule(this.CHANGE_LINES)},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.onResize=function(e,t,n,r){var s=this.CHANGE_SIZE,o=this.$size;if(this.resizing>2)return;this.resizing>1?this.resizing++:this.resizing=e?1:0,r||(r=i.getInnerHeight(this.container));if(e||o.height!=r)o.height=r,this.scroller.style.height=r+"px",o.scrollerHeight=this.scroller.clientHeight,this.scrollBar.setHeight(o.scrollerHeight),this.session&&(this.session.setScrollTop(this.getScrollTop()),s|=this.CHANGE_FULL);n||(n=i.getInnerWidth(this.container));if(e||this.resizing>1||o.width!=n){o.width=n;var t=this.showGutter?this.$gutter.offsetWidth:0;this.scroller.style.left=t+"px",o.scrollerWidth=Math.max(0,n-t-this.scrollBar.getWidth()),this.scroller.style.right=this.scrollBar.getWidth()+"px";if(this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)s|=this.CHANGE_FULL}e?this.$renderChanges(s,!0):this.$loop.schedule(s),e&&delete this.resizing},this.adjustWrapLimit=
function(){var e=this.$size.scrollerWidth-this.$padding*2,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t)},this.setAnimatedScroll=function(e){this.$animatedScroll=e},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},this.getShowInvisibles=function(){return this.$textLayer.showInvisibles},this.$showPrintMargin=!0,this.setShowPrintMargin=function(e){this.$showPrintMargin=e,this.$updatePrintMargin()},this.getShowPrintMargin=function(){return this.$showPrintMargin},this.$printMarginColumn=80,this.setPrintMarginColumn=function(e){this.$printMarginColumn=e,this.$updatePrintMargin()},this.getPrintMarginColumn=function(){return this.$printMarginColumn},this.getShowGutter=function(){return this.showGutter},this.setShowGutter=function(e){if(this.showGutter===e)return;this.$gutter.style.display=e?"block":"none",this.showGutter=e,this.onResize(!0)},this.getFadeFoldWidgets=function(){return i.hasCssClass(this.$gutter,"ace_fade-fold-widgets")},this.setFadeFoldWidgets=function(e){e?i.addCssClass(this.$gutter,"ace_fade-fold-widgets"):i.removeCssClass(this.$gutter,"ace_fade-fold-widgets")},this.$highlightGutterLine=!0,this.setHighlightGutterLine=function(e){if(this.$highlightGutterLine==e)return;this.$highlightGutterLine=e,this.$loop.schedule(this.CHANGE_GUTTER)},this.getHighlightGutterLine=function(){return this.$highlightGutterLine},this.$updateGutterLineHighlight=function(e){var t=this.session.selection.lead.row;if(t==this.$gutterLineHighlight)return;if(!e){var n,r=this.$gutterLayer.element.children,s=this.$gutterLineHighlight-this.layerConfig.firstRow;s>=0&&(n=r[s])&&i.removeCssClass(n,"ace_gutter_active_line"),s=t-this.layerConfig.firstRow,s>=0&&(n=r[s])&&i.addCssClass(n,"ace_gutter_active_line")}this.$gutterLayer.removeGutterDecoration(this.$gutterLineHighlight,"ace_gutter_active_line"),this.$gutterLayer.addGutterDecoration(t,"ace_gutter_active_line"),this.$gutterLineHighlight=t},this.$updatePrintMargin=function(){var e;if(!this.$showPrintMargin&&!this.$printMarginEl)return;this.$printMarginEl||(e=i.createElement("div"),e.className="ace_print_margin_layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print_margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.$textLayer.element));var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",t.visibility=this.$showPrintMargin?"visible":"hidden"},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$keepTextAreaAtCursor)return;var e=this.$cursorLayer.$pixelPos.top,t=this.$cursorLayer.$pixelPos.left;e-=this.layerConfig.offset;if(e<0||e>this.layerConfig.height-this.lineHeight)return;var n=this.characterWidth;this.$composition&&(n+=this.textarea.scrollWidth),t-=this.scrollLeft,t>this.$size.scrollerWidth-n&&(t=this.$size.scrollerWidth-n),this.showGutter&&(t+=this.$gutterLayer.gutterWidth),this.textarea.style.height=this.lineHeight+"px",this.textarea.style.width=n+"px",this.textarea.style.left=t+"px",this.textarea.style.top=e-1+"px"},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.getHScrollBarAlwaysVisible=function(){return this.$horizScrollAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.$horizScrollAlwaysVisible!=e&&(this.$horizScrollAlwaysVisible=e,(!this.$horizScrollAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL))},this.$updateScrollBar=function(){this.scrollBar.setInnerHeight(this.layerConfig.maxHeight),this.scrollBar.setScrollTop(this.scrollTop)},this.$renderChanges=function(e,t){if(!t&&(!e||!this.session||!this.container.offsetWidth))return;(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL)&&this.$computeLayerConfig();if(e&this.CHANGE_H_SCROLL){this.scroller.scrollLeft=this.scrollLeft;var n=this.scroller.scrollLeft;this.scrollLeft=n,this.session.setScrollLeft(n),this.scroller.className=this.scrollLeft==0?"ace_scroller":"ace_scroller horscroll"}if(e&this.CHANGE_FULL){this.$textLayer.checkForSizeChanges(),this.$updateScrollBar(),this.$textLayer.update(this.layerConfig),this.showGutter&&(this.$highlightGutterLine&&this.$updateGutterLineHighlight(!0),this.$gutterLayer.update(this.layerConfig)),this.$markerBack.update(this.layerConfig),this.$markerFront.update(this.layerConfig),this.$cursorLayer.update(this.layerConfig),this.$moveTextAreaToCursor();return}if(e&this.CHANGE_SCROLL){this.$updateScrollBar(),e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(this.layerConfig):this.$textLayer.scrollLines(this.layerConfig),this.showGutter&&(this.$highlightGutterLine&&this.$updateGutterLineHighlight(!0),this.$gutterLayer.update(this.layerConfig)),this.$markerBack.update(this.layerConfig),this.$markerFront.update(this.layerConfig),this.$cursorLayer.update(this.layerConfig),this.$moveTextAreaToCursor();return}e&this.CHANGE_TEXT?(this.$textLayer.update(this.layerConfig),this.showGutter&&this.$gutterLayer.update(this.layerConfig)):e&this.CHANGE_LINES?this.$updateLines()&&(this.$updateScrollBar(),this.showGutter&&this.$gutterLayer.update(this.layerConfig)):e&this.CHANGE_GUTTER&&this.showGutter&&this.$gutterLayer.update(this.layerConfig),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(this.layerConfig),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(!1)),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(this.layerConfig),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(this.layerConfig),e&this.CHANGE_SIZE&&this.$updateScrollBar()},this.$computeLayerConfig=function(){var e=this.session,t=this.scrollTop%this.lineHeight,n=this.$size.scrollerHeight+this.lineHeight,r=this.$getLongestLine(),i=this.$horizScrollAlwaysVisible||this.$size.scrollerWidth-r<0,s=this.$horizScroll!==i;this.$horizScroll=i,s&&(this.scroller.style.overflowX=i?"scroll":"hidden",i||this.session.setScrollLeft(0));var o=this.session.getScreenLength()*this.lineHeight;this.session.setScrollTop(Math.max(0,Math.min(this.scrollTop,o-this.$size.scrollerHeight)));var u=Math.ceil(n/this.lineHeight)-1,a=Math.max(0,Math.round((this.scrollTop-t)/this.lineHeight)),f=a+u,l,c,h={lineHeight:this.lineHeight};a=e.screenToDocumentRow(a,0);var p=e.getFoldLine(a);p&&(a=p.start.row),l=e.documentToScreenRow(a,0),c=e.getRowHeight(h,a),f=Math.min(e.screenToDocumentRow(f,0),e.getLength()-1),n=this.$size.scrollerHeight+e.getRowHeight(h,f)+c,t=this.scrollTop-l*this.lineHeight,this.layerConfig={width:r,padding:this.$padding,firstRow:a,firstRowScreen:l,lastRow:f,lineHeight:this.lineHeight,characterWidth:this.characterWidth,minHeight:n,maxHeight:o,offset:t,height:this.$size.scrollerHeight},this.$gutterLayer.element.style.marginTop=-t+"px",this.content.style.marginTop=-t+"px",this.content.style.width=r+2*this.$padding+"px",this.content.style.height=n+"px",s&&this.onResize(!0)},this.$updateLines=function(){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(e>n.lastRow+1)return;if(t<n.firstRow)return;if(t===Infinity){this.showGutter&&this.$gutterLayer.update(n),this.$textLayer.update(n);return}return this.$textLayer.updateLines(n,e,t),!0},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.$textLayer.showInvisibles&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t),this.$loop.schedule(this.CHANGE_GUTTER)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t){if(this.$size.scrollerHeight===0)return;var n=this.$cursorLayer.getPixelPosition(e),r=n.left,i=n.top;this.scrollTop>i?(t&&(i-=t*this.$size.scrollerHeight),this.session.setScrollTop(i)):this.scrollTop+this.$size.scrollerHeight<i+this.lineHeight&&(t&&(i+=t*this.$size.scrollerHeight),this.session.setScrollTop(i+this.lineHeight-this.$size.scrollerHeight));var s=this.scrollLeft;s>r?(r<this.$padding+2*this.layerConfig.characterWidth&&(r=0),this.session.setScrollLeft(r)):s+this.$size.scrollerWidth<r+this.characterWidth&&this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth))},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){typeof e=="number"&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=n.top-this.$size.scrollerHeight*(t||0);this.session.setScrollTop(r)},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,r=this.STEPS,i=[],s=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;n<r;++n)i.push(s(n/this.STEPS,e,t-e));return i},this.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}),s=i.top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),n!==!1&&this.animateScrolling(o,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll&&Math.abs(e-n)<1e5){var r=this,i=r.$calcSteps(e,n);this.$inScrollAnimation=!0,clearInterval(this.$timer),r.session.setScrollTop(i.shift()),this.$timer=setInterval(function(){i.length?(r.session.setScrollTop(i.shift()),r.session.$scrollTop=n):n!=null?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$inScrollAnimation=!1,t&&t())},10)}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){e<0&&(e=0),this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){if(t<0&&this.session.getScrollTop()>0)return!0;if(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight<this.layerConfig.maxHeight)return!0},this.pixelToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=(e+this.scrollLeft-n.left-this.$padding)/this.characterWidth,i=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),s=Math.round(r);return{row:i,column:s,side:r-s>0?1:-1}},this.screenToTextCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=Math.round((e+this.scrollLeft-n.left-this.$padding)/this.characterWidth),i=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(i,Math.max(r,0))},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+Math.round(r.column*this.characterWidth),s=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+s-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(e){this.$moveTextAreaToCursor()},this.hideComposition=function(){if(!this.$composition)return;i.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null},this._loadTheme=function(e,t){if(!u.get("packaged"))return t();a.loadScript(u.moduleUrl(e,"theme"),t)},this.setTheme=function(t){function u(e){i.importCssString(e.cssText,e.cssClass,n.container.ownerDocument),n.$theme&&i.removeCssClass(n.container,n.$theme),n.$theme=e?e.cssClass:null,n.$theme&&i.addCssClass(n.container,n.$theme),e&&e.isDark?i.addCssClass(n.container,"ace_dark"):i.removeCssClass(n.container,"ace_dark"),n.$size&&(n.$size.width=0,n.onResize())}var n=this;this.$themeValue=t;if(!t||typeof t=="string"){var r=t||"ace/theme/textmate",s;try{s=e(r)}catch(o){}if(s)return u(s);n._loadTheme(r,function(){e([r],function(e){if(n.$themeValue!==t)return;u(e)})})}else u(t)},this.getTheme=function(){return this.$themeValue},this.setStyle=function(t){i.addCssClass(this.container,t)},this.unsetStyle=function(t){i.removeCssClass(this.container,t)},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(g.prototype),t.VirtualRenderer=g}),define("ace/worker/worker_client",["require","exports","module","../lib/oop","../lib/event_emitter","../config"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/event_emitter").EventEmitter,s=e("../config"),o=function(t,n,r){this.changeListener=this.changeListener.bind(this);if(s.get("packaged"))this.$worker=new Worker(s.moduleUrl(n,"worker"));else{var i;typeof e.supports!="undefined"&&e.supports.indexOf("ucjs2-pinf-0")>=0?i=e.nameToUrl("ace/worker/worker_sourcemint"):(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),i=this.$normalizePath(e.toUrl("ace/worker/worker",null,"_"))),this.$worker=new Worker(i);var o={};for(var u=0;u<t.length;u++){var a=t[u],f=this.$normalizePath(e.toUrl(a,null,"_").replace(/.js(\?.*)?$/,""));o[a]=f}}this.$worker.postMessage({init:!0,tlns:o,module:n,classname:r}),this.callbackId=1,this.callbacks={};var l=this;this.$worker.onerror=function(e){throw window.console&&console.log&&console.log(e),e},this.$worker.onmessage=function(e){var t=e.data;switch(t.type){case"log":window.console&&console.log&&console.log(t.data);break;case"event":l._emit(t.name,{data:t.data});break;case"call":var n=l.callbacks[t.id];n&&(n(t.data),delete l.callbacks[t.id])}}};(function(){r.implement(this,i),this.$normalizePath=function(e){return e=e.replace(/^[a-z]+:\/\/[^\/]+/,""),e=location.protocol+"//"+location.host+(e.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+e.replace(/^[\/]+/,""),e},this.terminate=function(){this._emit("terminate",{}),this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){e.range={start:e.data.range.start,end:e.data.range.end},this.emit("change",e)}}).call(o.prototype),t.WorkerClient=o}),define("ace/theme/textmate",["require","exports","module","ace/requirejs/text!./textmate.css","../lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("ace/requirejs/text!./textmate.css");var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("ace/ace",["require","exports","module","./lib/fixoldbrowsers","./lib/dom","./lib/event","./editor","./edit_session","./undomanager","./virtual_renderer","./multi_select","./worker/worker_client","./keyboard/hash_handler","./keyboard/state_handler","./placeholder","./config","./theme/textmate"],function(e,t,n){e("./lib/fixoldbrowsers");var r=e("./lib/dom"),i=e("./lib/event"),s=e("./editor").Editor,o=e("./edit_session").EditSession,u=e("./undomanager").UndoManager,a=e("./virtual_renderer").VirtualRenderer,f=e("./multi_select").MultiSelect;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./keyboard/state_handler"),e("./placeholder"),t.config=e("./config"),t.edit=function(t){typeof t=="string"&&(t=document.getElementById(t));if(t.env&&t.env.editor instanceof s)return t.env.editor;var n=new o(r.getInnerText(t));n.setUndoManager(new u),t.innerHTML="";var l=new s(new a(t,e("./theme/textmate")));new f(l),l.setSession(n);var c={};return c.document=n,c.editor=l,l.resize(),i.addListener(window,"resize",function(){l.resize()}),t.env=c,l.env=c,l}}),define("ace/mode/quirrel_highlight_rules",["require","exports","module","../lib/oop","../lib/lang","./text_highlight_rules"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/lang"),s=e("./text_highlight_rules").TextHighlightRules,o=function(){var e=i.arrayToMap("difference|else|solve|if|import|intersect|new|then|union|where|with".split("|")),t=i.arrayToMap("true|false|null".split("|")),n=i.arrayToMap("count|distinct|load|max|mean|geometricMean|sumSq|variance|median|min|mode|stdDev|sum".split("|")),r=[{token:"comment",regex:"--.*$"},{token:"comment",regex:"\\(-",merge:!0,next:"comment"},{token:"string",regex:'"(?:[^\n\r\\\\"]|\\\\.)*"'},{token:"constant.numeric",regex:"[0-9]+(?:\\\\.[0-9]+)?(?:[eE][0-9]+)?"},{token:"variable",regex:"'[a-zA-Z_0-9]['a-zA-Z_0-9]*\\b"},{token:"string",regex:"/(?:/[a-zA-Z_0-9-]+)+\\b"},{token:"keyword.operator",regex:"~|:=|\\+|\\/|\\-|\\*|&|\\||<|>|<=|=>|!=|<>|=|!|neg\\b"},{token:function(r){return e.hasOwnProperty(r)?"keyword":t.hasOwnProperty(r)?"constant.language":n.hasOwnProperty(r)?"support.function":"identifier"},regex:"([a-zA-Z]['a-zA-Z_0-9]*|_['a-zA-Z_0-9]+)\\b"},{token:"invalid",regex:"//"},{token:"identifier",regex:"\\{",next:"object-start"},{token:"identifier",regex:"`(?:[^`\\\\]|\\\\.)+`"}];this.$rules={start:r,comment:[{token:"comment",regex:".*?-\\)",next:"start"},{token:"comment",merge:!0,regex:".+"}],"object-start":[{token:"entity.name.function",regex:'(?:[a-zA-Z_][a-zA-Z_0-9]*|`(?:[^`\\\\]|\\\\.)+`|"(?:[^"\\\\]|\\\\.)+"):',next:"object-contents"},{token:"identifier",regex:"\\}",next:"start"}],"object-contents":r.concat([{token:"identifier",regex:",",next:"object-start"},{token:"identifier",regex:"\\}",next:"start"}])}};r.inherits(o,s),t.QuirrelHighlightRules=o}),define("ace/mode/quirrel",["require","exports","module","../lib/oop","./text","../tokenizer","./quirrel_highlight_rules","../range"],function(e,t,n){var r=e("../lib/oop"),i=e("./text").Mode,s=e("../tokenizer").Tokenizer,o=e("./quirrel_highlight_rules").QuirrelHighlightRules,u=e("../range").Range,a=function(){this.$tokenizer=new s((new o).getRules())};r.inherits(a,i),function(){this.toggleCommentLines=function(e,t,n,r){var i=!0,s=[],o=/^(\s*)--/;for(var a=n;a<=r;a++)if(!o.test(t.getLine(a))){i=!1;break}if(i){var f=new u(0,0,0,0);for(var a=n;a<=r;a++){var l=t.getLine(a),c=l.match(o);f.start.row=a,f.end.row=a,f.end.column=c[0].length,t.replace(f,c[1])}}else t.indentRows(n,r,"--")}}.call(a.prototype),t.Mode=a}),define("app/editor/editor.ace",["require","ace/ace","app/util/ui","ace/mode/quirrel"],function(e,t,n){return function(r,i){function a(){$(s).trigger("execute",s.get())}function f(){$(s).trigger("execute",u.session.getTextRange(u.getSelectionRange()))}function h(e){l.css({display:"block",position:"absolute",right:"25px",bottom:e?"10px":"25px",zIndex:100}),c.css({display:"block",position:"absolute",right:"100px",bottom:e?"10px":"25px",zIndex:100}),e?(l.find(".ui-icon-circle-triangle-e").removeClass("ui-icon-circle-triangle-e").addClass("ui-icon-circle-triangle-s"),c.find(".ui-icon-circle-triangle-e").removeClass("ui-icon-circle-triangle-e").addClass("ui-icon-circle-triangle-s")):(l.find(".ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-e"),c.find(".ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-e"))}var s,o,u=t.edit($(r).get(0));u.commands.addCommand({bindKey:{win:"Shift-Return",mac:"Shift-Return|Command-Return",sender:"editor|cli"},exec:a}),u.setShowPrintMargin(!1),o=u.getSession(),o.setUseWrapMode(!0),o.setMode(new(e("ace/mode/quirrel").Mode)),o.getSelection().on("changeCursor",function(){$(s).trigger("changeCursor",u.getCursorPosition())}),o.getSelection().on("changeSelection",function(e){$(s).trigger("changeSelection",u.getSelection()),u.getSelection().isEmpty()?c.hide():c.show()}),o.on("change",function(){function t(){$(s).trigger("change",s.get())}var e;return function(){clearInterval(e),e=setTimeout(t,250)}}());var l=n.button(r,{label:"run",text:!0,icons:{primary:"ui-icon-circle-triangle-s"},handler:a}),c=n.button(r,{label:"run selected",text:!0,icons:{primary:"ui-icon-circle-triangle-s"},handler:f});return h(i),c.hide(),s={get:function(){return o.getValue()},set:function(e){o.setValue(e)},setTabSize:function(e){if(e===o.getTabSize())return;o.setTabSize(e),$(s).trigger("tabSizeChanged",e)},setUseSoftTabs:function(e){if(e===o.getUseSoftTabs())return;o.setUseSoftTabs(e),$(s).trigger("useSoftTabsChanged",e)},getTabSize:function(){return o.getTabSize()},getUseSoftTabs:function(e){return o.getUseSoftTabs()},setTheme:function(t){var n="ace/theme/"+t;e([n],function(){u.setTheme(n)})},resize:function(){u.resize()},engine:function(){return"ace"},focus:function(){u.focus()},highlightSyntax:function(e,t,n,r){function i(){o.setAnnotations([]),o.removeListener("change",i)}o.setAnnotations([{row:e,column:t,text:n,type:r}]),o.on("change",i)},setCursorPosition:function(e,t){u.navigateTo(e,t),u.focus()},triggerExecute:a,orientButton:h},s}}),define("app/editorsync",[],function(){return function(e,t,n){function r(e,n){t.setCode(""+n)}function i(t,n){e.set(""+n)}$(t).on("deactivated",function(n,s){t.monitor.unbind(t.getKey(s)+".code",i),$(e).off("change",r),t.setCode(e.get(),s)}),$(t).on("activated",function(n,s){e.set(""+t.getCode(s)),$(e).on("change",r),e.focus(),t.monitor.bind(t.getKey(s)+".code",i)})}}),define("app/util/jsonmodel",[],function(){function e(t,n,r,i,s,o){if("undefined"==typeof r)return"[undefined]";if(r===null)return"[null]";if(r instanceof Array){var u=[];for(var a=0;a<r.length;a++)u.push(e(t,n,r[a],i,s,!0));return u.join("; ")}if("object"==typeof r){var u=[];for(var f in r)if(r.hasOwnProperty(f)){var l=f+": "+e(t,n,r[f],i,s,!0);u.push(l)}return u.join(", ")}return r===""?"[empty]":isNaN(r)?(r=r.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),'"'+r.replace(/"/g,'\\"')+'"'):r}function i(e){try{return ReportGrid.date.parse(e),!0}catch(t){return!1}}function s(e,t){var n=t-e;return n>=94608e6?"year":n>=80352e5?"month":n>=6048e5?"day":"minute"}var t=new Date,n=+(new Date(t.getFullYear()-10,t.getMonth(),t.getDay(),0,0,0)),r=+(new Date(t.getFullYear()+10,t.getMonth(),t.getDay(),0,0,0));return{create:function(t){var o=t[0],u=[];if("object"==typeof o)for(var a in o){var f=o[a];if(!o.hasOwnProperty(a)||a==="#id")continue;var l={id:a,name:a,field:a,sortable:!0,formatter:e,pgvalue:!1,type:typeof f,multivalue:f instanceof Array||"object"===this.type};if(!l.multivalue){l.field.match(/time|date|created/i)&&(l.type==="number"&&f>n&&f<r||l.type==="string"&&null!==i(f))&&(l.subtype="datetime");if(l.subtype==="datetime"&&t.length>1){t.sort(function(e,t){return ReportGrid.compare(e[a],t[a])});try{var c=l.type==="number"?t[0][a]:ReportGrid.date.parse(t[0][a]),h=l.type==="number"?t[t.length-1][a]:ReportGrid.date.parse(t[t.length-1][a]);l.periodicity=s(c,h)}catch(p){}}}u.push(l)}else u.push({id:"value",name:"Value",field:"value",pgvalue:!0,sortable:!0,multivalue:!1});return u},find:function(e,t){for(var n=0;n<e.length;n++)if(e[n].field===t)return e[n];return null},axis:function(e,t){var n=this.find(e,t);if(!n)return null;var r={type:t};return n.subtype==="datetime"&&n.periodicity&&(r.type="time:"+n.periodicity,r.transformer=function(e){if(n.type==="number")for(var t=0;t<e.length;t++)e[t][r.type]=e[t][n.field];else for(var t=0;t<e.length;t++)e[t][r.type]=ReportGrid.date.parse(e[t][n.field]);return e}),r}}}),function(e){e.fn.drag=function(t,n,r){var i=typeof t=="string"?t:"",s=e.isFunction(t)?t:e.isFunction(n)?n:null;return i.indexOf("drag")!==0&&(i="drag"+i),r=(t==s?n:r)||{},s?this.bind(i,r,s):this.trigger(i)};var t=e.event,n=t.special,r=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",livekey:"livedrag",add:function(n){var s=e.data(this,r.datakey),o=n.data||{};s.related+=1,!s.live&&n.selector&&(s.live=!0,t.add(this,"draginit."+r.livekey,r.delegate)),e.each(r.defaults,function(e){o[e]!==undefined&&(s[e]=o[e])})},remove:function(){e.data(this,r.datakey).related-=1},setup:function(){if(!e.data(this,r.datakey)){var n=e.extend({related:0},r.defaults);e.data(this,r.datakey,n),t.add(this,"mousedown",r.init,n),this.attachEvent&&this.attachEvent("ondragstart",r.dontstart)}},teardown:function(){e.data(this,r.datakey).related||(e.removeData(this,r.datakey),t.remove(this,"mousedown",r.init),t.remove(this,"draginit",r.delegate),r.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",r.dontstart))},init:function(s){var o=s.data,u;if(!(o.which>0&&s.which!=o.which)&&!e(s.target).is(o.not))if(!o.handle||!!e(s.target).closest(o.handle,s.currentTarget).length){o.propagates=1,o.interactions=[r.interaction(this,o)],o.target=s.target,o.pageX=s.pageX,o.pageY=s.pageY,o.dragging=null,u=r.hijack(s,"draginit",o);if(o.propagates)return(u=r.flatten(u))&&u.length&&(o.interactions=[],e.each(u,function(){o.interactions.push(r.interaction(this,o))})),o.propagates=o.interactions.length,o.drop!==!1&&n.drop&&n.drop.handler(s,o),r.textselect(!1),t.add(document,"mousemove mouseup",r.handler,o),!1}},interaction:function(t,n){return{drag:t,callback:new r.callback,droppable:[],offset:e(t)[n.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(e){var s=e.data;switch(e.type){case!s.dragging&&"mousemove":if(Math.pow(e.pageX-s.pageX,2)+Math.pow(e.pageY-s.pageY,2)<Math.pow(s.distance,2))break;e.target=s.target,r.hijack(e,"dragstart",s),s.propagates&&(s.dragging=!0);case"mousemove":if(s.dragging){r.hijack(e,"drag",s);if(s.propagates){s.drop!==!1&&n.drop&&n.drop.handler(e,s);break}e.type="mouseup"};case"mouseup":t.remove(document,"mousemove mouseup",r.handler),s.dragging&&(s.drop!==!1&&n.drop&&n.drop.handler(e,s),r.hijack(e,"dragend",s)),r.textselect(!0),s.click===!1&&s.dragging&&(jQuery.event.triggered=!0,setTimeout(function(){jQuery.event.triggered=!1},20),s.dragging=!1)}},delegate:function(n){var s=[],o,u=e.data(this,"events")||{};return e.each(u.live||[],function(u,l){l.preType.indexOf("drag")===0&&(o=e(n.target).closest(l.selector,n.currentTarget)[0])&&(t.add(o,l.origType+"."+r.livekey,l.origHandler,l.data),e.inArray(o,s)<0&&s.push(o))}),s.length?e(s).bind("dragend."+r.livekey,function(){t.remove(this,"."+r.livekey)}):!1},hijack:function(n,s,o,u,a){if(o){var l={event:n.originalEvent,type:n.type},h=s.indexOf("drop")?"drag":"drop",p,d=u||0,v,m;u=isNaN(u)?o.interactions.length:u,n.type=s,n.originalEvent=null,o.results=[];do if(v=o.interactions[d])if(s==="dragend"||!v.cancelled)m=r.properties(n,o,v),v.results=[],e(a||v[h]||o.droppable).each(function(u,a){p=(m.target=a)?t.handle.call(a,n,m):null,p===!1?(h=="drag"&&(v.cancelled=!0,o.propagates-=1),s=="drop"&&(v[h][u]=null)):s=="dropinit"&&v.droppable.push(r.element(p)||a),s=="dragstart"&&(v.proxy=e(r.element(p)||v.drag)[0]),v.results.push(p),delete n.result;if(s!=="dropinit")return p}),o.results[d]=r.flatten(v.results),s=="dropinit"&&(v.droppable=r.flatten(v.droppable)),s=="dragstart"&&!v.cancelled&&m.update();while(++d<u);return n.type=l.type,n.originalEvent=l.event,r.flatten(o.results)}},properties:function(e,t,n){var i=n.callback;return i.drag=n.drag,i.proxy=n.proxy||n.drag,i.startX=t.pageX,i.startY=t.pageY,i.deltaX=e.pageX-t.pageX,i.deltaY=e.pageY-t.pageY,i.originalX=n.offset.left,i.originalY=n.offset.top,i.offsetX=e.pageX-(t.pageX-i.originalX),i.offsetY=e.pageY-(t.pageY-i.originalY),i.drop=r.flatten((n.drop||[]).slice()),i.available=r.flatten((n.droppable||[]).slice()),i},element:function(e){if(e&&(e.jquery||e.nodeType==1))return e},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?r.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",r.dontstart).attr("unselectable",t?"off":"on").css("MozUserSelect",t?"":"none")},dontstart:function(){return!1},callback:function(){}};r.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,function(e){n.drop.locate(this,e)})}},n.draginit=n.dragstart=n.dragend=r}(jQuery),define("libs/jquery/slickgrid/jquery.event.drag-2.0.min",function(){}),function(e){function t(){var e=!1,t=!1;this.stopPropagation=function(){e=!0},this.isPropagationStopped=function(){return e},this.stopImmediatePropagation=function(){t=!0},this.isImmediatePropagationStopped=function(){return t}}function n(){var e=[];this.subscribe=function(t){e.push(t)},this.unsubscribe=function(t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},this.notify=function(n,r,i){r=r||new t,i=i||this;var s;for(var o=0;o<e.length&&!r.isPropagationStopped()&&!r.isImmediatePropagationStopped();o++)s=e[o].call(i,r,n);return s}}function r(){var e=[];this.subscribe=function(t,n){return e.push({event:t,handler:n}),t.subscribe(n),this},this.unsubscribe=function(t,n){var r=e.length;while(r--)if(e[r].event===t&&e[r].handler===n){e.splice(r,1),t.unsubscribe(n);return}return this},this.unsubscribeAll=function(){var t=e.length;while(t--)e[t].event.unsubscribe(e[t].handler);return e=[],this}}function i(e,t,n,r){n===undefined&&r===undefined&&(n=e,r=t),this.fromRow=Math.min(e,n),this.fromCell=Math.min(t,r),this.toRow=Math.max(e,n),this.toCell=Math.max(t,r),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(e,t){return e>=this.fromRow&&e<=this.toRow&&t>=this.fromCell&&t<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}function s(){this.__nonDataRow=!0}function o(){this.__group=!0,this.__updated=!1,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.totals=null}function u(){this.__groupTotals=!0,this.group=null}function a(){var e=null;this.isActive=function(t){return t?e===t:e!==null},this.activate=function(t){if(t===e)return;if(e!==null)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!t.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!t.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";e=t},this.deactivate=function(t){if(e!==t)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";e=null},this.commitCurrentEdit=function(){return e?e.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){return e?e.cancelCurrentEdit():!0}}e.extend(!0,window,{Slick:{Event:n,EventData:t,EventHandler:r,Range:i,NonDataRow:s,Group:o,GroupTotals:u,EditorLock:a,GlobalEditorLock
:new a}}),o.prototype=new s,o.prototype.equals=function(e){return this.value===e.value&&this.count===e.count&&this.collapsed===e.collapsed},u.prototype=new s}(jQuery),define("libs/jquery/slickgrid/slick.core",function(){});if(typeof jQuery=="undefined")throw"SlickGrid requires jquery module to be loaded";if(!jQuery.fn.drag)throw"SlickGrid requires jquery.event.drag module to be loaded";if(typeof Slick=="undefined")throw"slick.core.js not loaded";(function($){function SlickGrid(container,data,columns,options){function init(){$container=$(container);if($container.length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),columnDefaults.width=options.defaultColumnWidth,columnsById={};for(var e=0;e<columns.length;e++){var t=columns[e]=$.extend({},columnDefaults,columns[e]);columnsById[t.id]=e}if(options.enableColumnReorder&&!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller),$headers.width(getHeadersWidth()),$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller),$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),$viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),$canvas=$("<div class='grid-canvas' />").appendTo($viewport),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,viewportW=parseFloat($.css($container[0],"width",!0)),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.bind("selectstart.ui",function(e){return $(e.target).is("input,textarea")}),updateColumnCaches(),createColumnHeaders(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.bind("resize.slickgrid",resizeCanvas),$viewport.bind("scroll.slickgrid",handleScroll),$headerScroller.bind("contextmenu.slickgrid",handleHeaderContextMenu).bind("click.slickgrid",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave),$focusSink.bind("keydown.slickgrid",handleKeyDown),$canvas.bind("keydown.slickgrid",handleKeyDown).bind("click.slickgrid",handleClick).bind("dblclick.slickgrid",handleDblClick).bind("contextmenu.slickgrid",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave))}function registerPlugin(e){plugins.unshift(e),e.init(self)}function unregisterPlugin(e){for(var t=plugins.length;t>=0;t--)if(plugins[t]===e){plugins[t].destroy&&plugins[t].destroy(),plugins.splice(t,1);break}}function setSelectionModel(e){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),selectionModel=e,selectionModel&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var e=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t}function getHeadersWidth(){var e=0;for(var t=0,n=columns.length;t<n;t++){var r=columns[t].width;e+=r}return e+=scrollbarDimensions.width,Math.max(e,viewportW)+1e3}function getCanvasWidth(){var e=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,t=0,n=columns.length;while(n--)t+=columns[n].width;return options.fullWidthRows?Math.max(t,e):t}function updateCanvasWidth(e){var t=canvasWidth;canvasWidth=getCanvasWidth(),canvasWidth!=t&&($canvas.width(canvasWidth),$headerRow.width(canvasWidth),$headers.width(getHeadersWidth()),viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width),(canvasWidth!=t||e)&&applyColumnWidths()}function disableSelection(e){e&&e.jquery&&e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){var e=1e6,t=$.browser.mozilla?6e6:1e9,n=$("<div style='display:none' />").appendTo(document.body);for(;;){var r=e*2;n.css("height",r);if(r>t||n.height()!==r)break;e=r}return n.remove(),e}function bindAncestorScrollEvents(){var e=$canvas[0];while((e=e.parentNode)!=document.body&&e!=null)(e==$viewport[0]||e.scrollWidth!=e.clientWidth||e.scrollHeight!=e.clientHeight)&&$(e).bind("scroll.slickgrid",handleActiveCellPositionChange)}function unbindAncestorScrollEvents(){$canvas.parents().unbind("scroll.slickgrid")}function updateColumnHeader(e,t,n){if(!initialized)return;var r=getColumnIndex(e),i=columns[r],s=$headers.children().eq(r);s&&(t!==undefined&&(columns[r].name=t),n!==undefined&&(columns[r].toolTip=n),trigger(self.onBeforeHeaderDestroy,{headerNode:s[0],column:i}),s.attr("title",n||"").children().eq(0).html(t),trigger(self.onHeaderRendered,{headerNode:s[0],column:i}))}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(e){var t=getColumnIndex(e),n=$headerRow.children().eq(t);return n&&n[0]}function createColumnHeaders(){function e(){$(this).addClass("ui-state-hover")}function t(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var e=$(this).data("column");e&&trigger(self.onBeforeHeaderDestroy,{headerNode:this,column:e})}),$headers.empty(),$headers.width(getHeadersWidth()),$headerRow.empty();for(var n=0;n<columns.length;n++){var r=columns[n],i=$("<div class='ui-state-default slick-header-column' id='"+uid+r.id+"' />").html("<span class='slick-column-name'>"+r.name+"</span>").width(r.width-headerColumnWidthDiff).attr("title",r.toolTip||"").data("column",r).addClass(r.headerCssClass||"").appendTo($headers);(options.enableColumnReorder||r.sortable)&&i.hover(e,t),r.sortable&&i.append("<span class='slick-sort-indicator' />"),trigger(self.onHeaderRendered,{headerNode:i[0],column:r}),options.showHeaderRow&&$("<div class='ui-state-default slick-headerrow-column l"+n+" r"+n+"'></div>").appendTo($headerRow)}options.showHeaderRow&&$("<div style='display:block;height:1px;width:10000px;position:absolute;top:0;left:0;'></div>").appendTo($headerRowScroller),setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){$headers.click(function(e){e.metaKey=e.metaKey||e.ctrlKey;if($(e.target).hasClass("slick-resizable-handle"))return;var t=$(e.target).closest(".slick-header-column");if(!t.length)return;var n=t.data("column");if(n.sortable){if(!getEditorLock().commitCurrentEdit())return;var r=null,i=0;for(;i<sortColumns.length;i++)if(sortColumns[i].columnId==n.id){r=sortColumns[i],r.sortAsc=!r.sortAsc;break}if(e.metaKey&&options.multiColumnSort)r&&sortColumns.splice(i,1);else{if(!e.shiftKey&&!e.metaKey||!options.multiColumnSort)sortColumns=[];r?sortColumns.length==0&&sortColumns.push(r):(r={columnId:n.id,sortAsc:!0},sortColumns.push(r))}setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(e){return{sortCol:columns[getColumnIndex(e.columnId)],sortAsc:e.sortAsc}})},e):trigger(self.onSort,{multiColumnSort:!1,sortCol:n,sortAsc:r.sortAsc},e)}})}function setupColumnReorder(){$headers.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,start:function(e,t){$(t.helper).addClass("slick-header-column-active")},beforeStop:function(e,t){$(t.helper).removeClass("slick-header-column-active")},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var t=$headers.sortable("toArray"),n=[];for(var r=0;r<t.length;r++)n.push(columns[getColumnIndex(t[r].replace(uid,""))]);setColumns(n),trigger(self.onColumnsReordered,{}),e.stopPropagation(),setupColumnResize()}})}function setupColumnResize(){var e,t,n,r,i,s,o,u,a;i=$headers.children(),i.find(".slick-resizable-handle").remove(),i.each(function(e,t){columns[e].resizable&&(u===undefined&&(u=e),a=e)});if(u===undefined)return;i.each(function(f,l){if(f<u||options.forceFitColumns&&f>=a)return;e=$(l),$("<div class='slick-resizable-handle' />").appendTo(l).bind("dragstart",function(e,u){if(!getEditorLock().commitCurrentEdit())return!1;r=e.pageX,$(this).parent().addClass("slick-header-column-active");var a=null,l=null;i.each(function(e,t){columns[e].previousWidth=$(t).outerWidth()});if(options.forceFitColumns){a=0,l=0;for(t=f+1;t<i.length;t++)n=columns[t],n.resizable&&(l!==null&&(n.maxWidth?l+=n.maxWidth-n.previousWidth:l=null),a+=n.previousWidth-Math.max(n.minWidth||0,absoluteColumnMinWidth))}var h=0,p=0;for(t=0;t<=f;t++)n=columns[t],n.resizable&&(p!==null&&(n.maxWidth?p+=n.maxWidth-n.previousWidth:p=null),h+=n.previousWidth-Math.max(n.minWidth||0,absoluteColumnMinWidth));a===null&&(a=1e5),h===null&&(h=1e5),l===null&&(l=1e5),p===null&&(p=1e5),o=r+Math.min(a,p),s=r-Math.min(h,l)}).bind("drag",function(e,u){var a,l=Math.min(o,Math.max(s,e.pageX))-r,h;if(l<0){h=l;for(t=f;t>=0;t--)n=columns[t],n.resizable&&(a=Math.max(n.minWidth||0,absoluteColumnMinWidth),h&&n.previousWidth+h<a?(h+=n.previousWidth-a,n.width=a):(n.width=n.previousWidth+h,h=0));if(options.forceFitColumns){h=-l;for(t=f+1;t<i.length;t++)n=columns[t],n.resizable&&(h&&n.maxWidth&&n.maxWidth-n.previousWidth<h?(h-=n.maxWidth-n.previousWidth,n.width=n.maxWidth):(n.width=n.previousWidth+h,h=0))}}else{h=l;for(t=f;t>=0;t--)n=columns[t],n.resizable&&(h&&n.maxWidth&&n.maxWidth-n.previousWidth<h?(h-=n.maxWidth-n.previousWidth,n.width=n.maxWidth):(n.width=n.previousWidth+h,h=0));if(options.forceFitColumns){h=-l;for(t=f+1;t<i.length;t++)n=columns[t],n.resizable&&(a=Math.max(n.minWidth||0,absoluteColumnMinWidth),h&&n.previousWidth+h<a?(h+=n.previousWidth-a,n.width=a):(n.width=n.previousWidth+h,h=0))}}applyColumnHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths()}).bind("dragend",function(e,r){var s;$(this).parent().removeClass("slick-header-column-active");for(t=0;t<i.length;t++)n=columns[t],s=$(i[t]).outerWidth(),n.previousWidth!==s&&n.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{})})})}function getVBoxDelta(e){var t=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],n=0;return $.each(t,function(t,r){n+=parseFloat(e.css(r))||0}),n}function measureCellPaddingAndBorder(){var e,t=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];e=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,$.each(t,function(t,n){headerColumnWidthDiff+=parseFloat(e.css(n))||0}),$.each(n,function(t,n){headerColumnHeightDiff+=parseFloat(e.css(n))||0}),e.remove();var r=$("<div class='slick-row' />").appendTo($canvas);e=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r),cellWidthDiff=cellHeightDiff=0,$.each(t,function(t,n){cellWidthDiff+=parseFloat(e.css(n))||0}),$.each(n,function(t,n){cellHeightDiff+=parseFloat(e.css(n))||0}),r.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var e=options.rowHeight-cellHeightDiff,t=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+e+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"];for(var n=0;n<columns.length;n++)t.push("."+uid+" .l"+n+" { }"),t.push("."+uid+" .r"+n+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=t.join(" "):$style[0].appendChild(document.createTextNode(t.join(" ")))}function getColumnCssRules(e){if(!stylesheet){var t=document.styleSheets;for(var n=0;n<t.length;n++)if((t[n].ownerNode||t[n].owningElement)==$style[0]){stylesheet=t[n];break}if(!stylesheet)throw new Error("Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];var r=stylesheet.cssRules||stylesheet.rules,i,s;for(var n=0;n<r.length;n++){var o=r[n].selectorText;if(i=/\.l\d+/.exec(o))s=parseInt(i[0].substr(2,i[0].length-2),10),columnCssRulesL[s]=r[n];else if(i=/\.r\d+/.exec(o))s=parseInt(i[0].substr(2,i[0].length-2),10),columnCssRulesR[s]=r[n]}}return{left:columnCssRulesL[e],right:columnCssRulesR[e]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});var e=plugins.length;while(e--)unregisterPlugin(plugins[e]);options.enableColumnReorder&&$headers.sortable&&$headers.sortable("destroy"),unbindAncestorScrollEvents(),$container.unbind(".slickgrid"),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function trigger(e,t,n){return n=n||new Slick.EventData,t=t||{},t.grid=self,e.notify(t,n,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(e){return columnsById[e]}function autosizeColumns(){var e,t,n=[],r=0,i=0,s,o=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(e=0;e<columns.length;e++)t=columns[e],n.push(t.width),i+=t.width,t.resizable&&(r+=t.width-Math.max(t.minWidth,absoluteColumnMinWidth));s=i;while(i>o&&r){var u=(i-o)/r;for(e=0;e<columns.length&&i>o;e++){t=columns[e];var a=n[e];if(!t.resizable||a<=t.minWidth||a<=absoluteColumnMinWidth)continue;var f=Math.max(t.minWidth,absoluteColumnMinWidth),l=Math.floor(u*(a-f))||1;l=Math.min(l,a-f),i-=l,r-=l,n[e]-=l}if(s==i)break;s=i}s=i;while(i<o){var c=o/i;for(e=0;e<columns.length&&i<o;e++){t=columns[e];if(!t.resizable||t.maxWidth<=t.width)continue;var h=Math.min(Math.floor(c*t.width)-t.width,t.maxWidth-t.width||1e6)||1;i+=h,n[e]+=h}if(s==i)break;s=i}var p=!1;for(e=0;e<columns.length;e++)columns[e].rerenderOnResize&&columns[e].width!=n[e]&&(p=!0),columns[e].width=n[e];applyColumnHeaderWidths(),updateCanvasWidth(!0),p&&(invalidateAllRows(),render())}function applyColumnHeaderWidths(){if(!initialized)return;var e;for(var t=0,n=$headers.children(),r=n.length;t<r;t++)e=$(n[t]),e.width()!==columns[t].width-headerColumnWidthDiff&&e.width(columns[t].width-headerColumnWidthDiff);updateColumnCaches()}function applyColumnWidths(){var e=0,t,n;for(var r=0;r<columns.length;r++)t=columns[r].width,n=getColumnCssRules(r),n.left.style.left=e+"px",n.right.style.right=canvasWidth-e-t+"px",e+=columns[r].width}function setSortColumn(e,t){setSortColumns([{columnId:e,sortAsc:t}])}function setSortColumns(e){sortColumns=e;var t=$headers.children();t.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),$.each(sortColumns,function(e,n){n.sortAsc==null&&(n.sortAsc=!0);var r=getColumnIndex(n.columnId);r!=null&&t.eq(r).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(n.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(e,t){selectedRows=[];var n={};for(var r=0;r<t.length;r++)for(var i=t[r].fromRow;i<=t[r].toRow;i++){n[i]||selectedRows.push(i),n[i]={};for(var s=t[r].fromCell;s<=t[r].toCell;s++)canCellBeSelected(i,s)&&(n[i][columns[s].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,n),trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];var e=0;for(var t=0,n=columns.length;t<n;t++)columnPosLeft[t]=e,columnPosRight[t]=e+columns[t].width,e+=columns[t].width}function setColumns(e){columns=e,columnsById={};for(var t=0;t<columns.length;t++){var n=columns[t]=$.extend({},columnDefaults,columns[t]);columnsById[n.id]=t}updateColumnCaches(),initialized&&(invalidateAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeCanvas(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(e){if(!getEditorLock().commitCurrentEdit())return;makeActiveCellNormal(),options.enableAddRow!==e.enableAddRow&&invalidateRow(getDataLength()),options=$.extend(options,e),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),render()}function setData(e,t){data=e,invalidateAllRows(),updateRowCount(),t&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data.length}function getDataItem(e){return data.getItem?data.getItem(e):data[e]}function getTopPanel(){return $topPanel[0]}function showTopPanel(){options.showTopPanel=!0,$topPanelScroller.slideDown("fast",resizeCanvas)}function hideTopPanel(){options.showTopPanel=!1,$topPanelScroller.slideUp("fast",resizeCanvas)}function showHeaderRowColumns(){options.showHeaderRow=!0,$headerRowScroller.slideDown("fast",resizeCanvas)}function hideHeaderRowColumns(){options.showHeaderRow=!1,$headerRowScroller.slideUp("fast",resizeCanvas)}function scrollTo(e){e=Math.max(e,0),e=Math.min(e,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var t=offset;page=Math.min(n-1,Math.floor(e/ph)),offset=Math.round(page*cj);var r=e-offset;if(offset!=t){var i=getVisibleRange(r);cleanupRows(i),updateRowPositions()}prevScrollTop!=r&&(vScrollDir=prevScrollTop+t<r+offset?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=r,trigger(self.onViewportChanged,{}))}function defaultFormatter(e,t,n,r,i){return n==null?"":n.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(e,t){var n=data.getItemMetadata&&data.getItemMetadata(e),r=n&&n.columns&&(n.columns[t.id]||n.columns[getColumnIndex(t.id)]);return r&&r.formatter||n&&n.formatter||t.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(t)||options.defaultFormatter}function getEditor(e,t){var n=columns[t],r=data.getItemMetadata&&data.getItemMetadata(e),i=r&&r.columns;return i&&i[n.id]&&i[n.id].editor!==undefined?i[n.id].editor:i&&i[t]&&i[t].editor!==undefined?i[t].editor:n.editor||options.editorFactory&&options.editorFactory.getEditor(n)}function getDataItemValueForColumn(e,t){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(e,t):e[t.field]}function appendRowHtml(e,t,n){var r=rowsCache[t],i=getDataItem(t),s=t<getDataLength()&&!i,o,u="slick-row"+(s?" loading":"")+(t%2==1?" odd":" even"),a=data.getItemMetadata&&data.getItemMetadata(t);a&&a.cssClasses&&(u+=" "+a.cssClasses),e.push("<div class='ui-widget-content "+u+"' style='top:"+(options.rowHeight*t-offset)+"px'>");var f,l;for(var c=0,h=columns.length;c<h;c++){l=columns[c],f=1;if(a&&a.columns){var p=a.columns[l.id]||a.columns[c];f=p&&p.colspan||1,f==="*"&&(f=h-c)}if(columnPosRight[Math.min(h-1,c+f-1)]>n.leftPx){if(columnPosLeft[c]>n.rightPx)break;appendCellHtml(e,t,c,f)}f>1&&(c+=f-1)}e.push("</div>")}function appendCellHtml(e,t,n,r){var i=columns[n],s=getDataItem(t),o="slick-cell l"+n+" r"+Math.min(columns.length-1,n+r-1)+(i.cssClass?" "+i.cssClass:"");t===activeRow&&n===activeCell&&(o+=" active");for(var u in cellCssClasses)cellCssClasses[u][t]&&cellCssClasses[u][t][i.id]&&(o+=" "+cellCssClasses[u][t][i.id]);e.push("<div class='"+o+"'>");if(s){var a=getDataItemValueForColumn(s,i);e.push(getFormatter(t,i)(t,n,a,i,s))}e.push("</div>"),rowsCache[t].cellRenderQueue.push(n),rowsCache[t].cellColSpans[n]=r}function cleanupRows(e){for(var t in rowsCache)(t=parseInt(t,10))!==activeRow&&(t<e.top||t>e.bottom)&&removeRowFromCache(t)}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){currentEditor&&makeActiveCellNormal();for(var e in rowsCache)removeRowFromCache(e)}function removeRowFromCache(e){var t=rowsCache[e];if(!t)return;$canvas[0].removeChild(t.rowNode),delete rowsCache[e],delete postProcessedRows[e],renderedRows--,counter_rows_removed++}function invalidateRows(e){var t,n;if(!e||!e.length)return;vScrollDir=0;for(t=0,n=e.length;t<n;t++)currentEditor&&activeRow===e[t]&&makeActiveCellNormal(),rowsCache[e[t]]&&removeRowFromCache(e[t])}function invalidateRow(e){invalidateRows([e])}function updateCell(e,t){var n=getCellNode(e,t);if(!n)return;var r=columns[t],i=getDataItem(e);currentEditor&&activeRow===e&&activeCell===t?currentEditor.loadValue(i):(n.innerHTML=i?getFormatter(e,r)(e,t,getDataItemValueForColumn(i,r),r,i):"",invalidatePostProcessingResults(e))}function updateRow(e){var t=rowsCache[e];if(!t)return;ensureCellNodesInRowsCache(e);for(var n in t.cellNodesByColumnIdx){n|=0;var r=columns[n],i=getDataItem(e),s=t.cellNodesByColumnIdx[n];e===activeRow&&n===activeCell&&currentEditor?currentEditor.loadValue(i):i?s.innerHTML=getFormatter(e,r)(e,n,getDataItemValueForColumn(i,r),r,i):s.innerHTML=""}invalidatePostProcessingResults(e)}function getViewportHeight(){return parseFloat($.css($container[0],"height",!0))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){if(!initialized)return;options.autoHeight?viewportH=options.rowHeight*(getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0)):viewportH=getViewportHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportW=parseFloat($.css($container[0],"width",!0)),$viewport.height(viewportH),options.forceFitColumns&&autosizeColumns(),updateRowCount(),handleScroll(),render()}function updateRowCount(){if(!initialized)return;numberOfRows=getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var e=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&numberOfRows*options.rowHeight>viewportH;var t=options.enableAddRow?getDataLength():getDataLength()-1;for(var r in rowsCache)r>=t&&removeRowFromCache(r);var i=h;th=Math.max(options.rowHeight*numberOfRows,viewportH-scrollbarDimensions.height),th<maxSupportedCssHeight?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==i&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var s=scrollTop+offset<=th-viewportH;th==0||scrollTop==0?page=offset=0:s?scrollTo(scrollTop+offset):scrollTo(th-viewportH),h!=i&&options.autoHeight&&resizeCanvas(),options.forceFitColumns&&e!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}function getVisibleRange(e,t){return e==null&&(e=scrollTop),t==null&&(t=scrollLeft),{top:Math.floor((e+offset)/options.rowHeight),bottom:Math.ceil((e+offset+viewportH)/options.rowHeight),leftPx:t,rightPx:t+viewportW}}function getRenderedRange(e,t){var n=getVisibleRange(e,t),r=Math.round(viewportH/options.rowHeight),i=3;return vScrollDir==-1?(n.top-=r,n.bottom+=i):vScrollDir==1?(n.top-=i,n.bottom+=r):(n.top-=i,n.bottom+=i),n.top=Math.max(0,n.top),n.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,n.bottom),n.leftPx-=viewportW,n.rightPx+=viewportW,n.leftPx=Math.max(0,n.leftPx),n.rightPx=Math.min(canvasWidth,n.rightPx),n}function ensureCellNodesInRowsCache(e){var t=rowsCache[e];if(t&&t.cellRenderQueue.length){var n=t.rowNode.lastChild;while(t.cellRenderQueue.length){var r=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[r]=n,n=n.previousSibling}}}function cleanUpCells(e,t){var n=0,r=rowsCache[t],i=[];for(var s in r.cellNodesByColumnIdx){if(!r.cellNodesByColumnIdx.hasOwnProperty(s))continue;s|=0;var o=r.cellColSpans[s];(columnPosLeft[s]>e.rightPx||columnPosRight[Math.min(columns.length-1,s+o-1)]<e.leftPx)&&(t!=activeRow||s!=activeCell)&&i.push(s)}var u;while((u=i.pop())!=null)r.rowNode.removeChild(r.cellNodesByColumnIdx[u]),delete r.cellColSpans[u],delete r.cellNodesByColumnIdx[u],postProcessedRows[t]&&delete postProcessedRows[t][u],n++}function cleanUpAndRenderCells(e){var t,n=[],r=[],i,s=0,o;for(var u=e.top;u<=e.bottom;u++){t=rowsCache[u];if(!t)continue;ensureCellNodesInRowsCache(u),cleanUpCells(e,u),i=0;var a=data.getItemMetadata&&data.getItemMetadata(u);a=a&&a.columns;for(var f=0,l=columns.length;f<l;f++){if(columnPosLeft[f]>e.rightPx)break;if((o=t.cellColSpans[f])!=null){f+=o>1?o-1:0;continue}o=1;if(a){var c=a[columns[f].id]||a[f];o=c&&c.colspan||1,o==="*"&&(o=l-f)}columnPosRight[Math.min(l-1,f+o-1)]>e.leftPx&&(appendCellHtml(n,u,f,o),i++),f+=o>1?o-1:0}i&&(s+=i,r.push(u))}if(!n.length)return;var h=document.createElement("div");h.innerHTML=n.join("");var p,d;while((p=r.pop())!=null){t=rowsCache[p];var v;while((v=t.cellRenderQueue.pop())!=null)d=h.lastChild,t.rowNode.appendChild(d),t.cellNodesByColumnIdx[v]=d}}function renderRows(e){var t=$canvas[0],n=[],r=[],i=!1;for(var s=e.top;s<=e.bottom;s++){if(rowsCache[s])continue;renderedRows++,r.push(s),rowsCache[s]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(n,s,e),activeCellNode&&activeRow===s&&(i=!0),counter_rows_rendered++}if(!r.length)return;var o=document.createElement("div");o.innerHTML=n.join("");for(var s=0,u=r.length;s<u;s++)rowsCache[r[s]].rowNode=t.appendChild(o.firstChild);i&&(activeCellNode=getCellNode(activeRow,activeCell))}function startPostProcessing(){if(!options.enableAsyncPostRender)return;clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay)}function invalidatePostProcessingResults(e){delete postProcessedRows[e],postProcessFromRow=Math.min(postProcessFromRow,e),postProcessToRow=Math.max(postProcessToRow,e),startPostProcessing()}function updateRowPositions(){for(var e in rowsCache)rowsCache[e].rowNode.style.top=e*options.rowHeight-offset+"px"}function render(){if(!initialized)return;var e=getVisibleRange(),t=getRenderedRange();cleanupRows(t),lastRenderedScrollLeft!=scrollLeft&&cleanUpAndRenderCells(t),renderRows(t),postProcessFromRow=e.top,postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,e.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,h_render=null}function handleScroll(){scrollTop=$viewport[0].scrollTop,scrollLeft=$viewport[0].scrollLeft;var e=Math.abs(scrollTop-prevScrollTop),t=Math.abs(scrollLeft-prevScrollLeft);t&&(prevScrollLeft=scrollLeft,$headerScroller[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScroller[0].scrollLeft=scrollLeft);if(e){vScrollDir=prevScrollTop<scrollTop?1:-1,prevScrollTop=scrollTop;if(e<viewportH)scrollTo(scrollTop+offset);else{var r=offset;page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),r!=offset&&invalidateAllRows()}}if(t||e){h_render&&clearTimeout(h_render);if(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20)Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW?render():h_render=setTimeout(render,50),trigger(self.onViewportChanged,{})}trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){while(postProcessFromRow<=postProcessToRow){var e=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,t=rowsCache[e];if(!t||e>=getDataLength())continue;postProcessedRows[e]||(postProcessedRows[e]={}),ensureCellNodesInRowsCache(e);for(var n in t.cellNodesByColumnIdx){if(!t.cellNodesByColumnIdx.hasOwnProperty(n))continue;n|=0;var r=columns[n];if(r.asyncPostRender&&!postProcessedRows[e][n]){var i=t.cellNodesByColumnIdx[n];i&&r.asyncPostRender(i,postProcessFromRow,getDataItem(e),r),postProcessedRows[e][n]=!0}}h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}function updateCellCssStylesOnRenderedRows(e,t){var n,r,i,s;for(var o in rowsCache){s=t&&t[o],i=e&&e[o];if(s)for(r in s)if(!i||s[r]!=i[r])n=getCellNode(o,getColumnIndex(r)),n&&$(n).removeClass(s[r]);if(i)for(r in i)if(!s||s[r]!=i[r])n=getCellNode(o,getColumnIndex(r)),n&&$(n).addClass(i[r])}}function addCellCssStyles(e,t){if(cellCssClasses[e])throw"addCellCssStyles: cell CSS hash with key '"+e+"' already exists.";cellCssClasses[e]=t,updateCellCssStylesOnRenderedRows(t,null),trigger(self.onCellCssStylesChanged,{key:e,hash:t})}function removeCellCssStyles(e){if(!cellCssClasses[e])return;updateCellCssStylesOnRenderedRows(null,cellCssClasses[e]),delete cellCssClasses[e],trigger(self.onCellCssStylesChanged,{key:e,hash:null})}function setCellCssStyles(e,t){var n=cellCssClasses[e];cellCssClasses[e]=t,updateCellCssStylesOnRenderedRows(t,n),trigger(self.onCellCssStylesChanged,{key:e,hash:t})}function getCellCssStyles(e){return cellCssClasses[e]}function flashCell(e,t,n){n=n||100;if(rowsCache[e]){var r=$(getCellNode(e,t));function i(e){if(!e)return;setTimeout(function(){r.queue(function(){r.toggleClass(options.cellFlashingCssClass).dequeue(),i(e-1)})},n)}i(4)}}function handleDragInit(e,t){var n=getCellFromEvent(e);return!n||!cellExists(n.row,n.cell)?!1:(retval=trigger(self.onDragInit,t,e),e.isImmediatePropagationStopped()?retval:!1)}function handleDragStart(e,t){var n=getCellFromEvent(e);if(!n||!cellExists(n.row,n.cell))return!1;var r=trigger(self.onDragStart,t,e);return e.isImmediatePropagationStopped()?r:!1}function handleDrag(e,t){return trigger(self.onDrag,t,e)}function handleDragEnd(e,t){trigger(self.onDragEnd,t,e)}function handleKeyDown(e){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},e);var t=e.isImmediatePropagationStopped();if(!t)if(!e.shiftKey&&!e.altKey&&!e.ctrlKey)if(e.which==27){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else if(e.which==37)navigateLeft();else if(e.which==39)navigateRight();else if(e.which==38)navigateUp();else if(e.which==40)navigateDown();else if(e.which==9)navigateNext();else{if(e.which!=13)return;options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable())}else{if(!(e.which==9&&e.shiftKey&&!e.ctrlKey&&!e.altKey))return;navigatePrev()}e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(n){}}function handleClick(e){currentEditor||e.target!=document.activeElement&&setFocus();var t=getCellFromEvent(e);if(!t||currentEditor!==null&&activeRow==t.row&&activeCell==t.cell)return;trigger(self.onClick,{row:t.row,cell:t.cell},e);if(e.isImmediatePropagationStopped())return;(activeCell!=t.cell||activeRow!=t.row)&&canCellBeActive(t.row,t.cell)&&(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit())&&(scrollRowIntoView(t.row,!1),setActiveCellInternal(getCellNode(t.row,t.cell),t.row===getDataLength()||options.autoEdit))}function handleContextMenu(e){var t=$(e.target).closest(".slick-cell",$canvas);if(t.length===0)return;if(activeCellNode===t[0]&&currentEditor!==null)return;trigger(self.onContextMenu,{},e)}function handleDblClick(e){var t=getCellFromEvent(e);if(!t||currentEditor!==null&&activeRow==t.row&&activeCell==t.cell)return;trigger(self.onDblClick,{row:t.row,cell:t.cell},e);if(e.isImmediatePropagationStopped
())return;options.editable&&gotoCell(t.row,t.cell,!0)}function handleHeaderMouseEnter(e){trigger(self.onHeaderMouseEnter,{column:$(this).data("column")},e)}function handleHeaderMouseLeave(e){trigger(self.onHeaderMouseLeave,{column:$(this).data("column")},e)}function handleHeaderContextMenu(e){var t=$(e.target).closest(".slick-header-column",".slick-header-columns"),n=t&&t.data("column");trigger(self.onHeaderContextMenu,{column:n},e)}function handleHeaderClick(e){var t=$(e.target).closest(".slick-header-column",".slick-header-columns"),n=t&&t.data("column");n&&trigger(self.onHeaderClick,{column:n},e)}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e)}function cellExists(e,t){return!(e<0||e>=getDataLength()||t<0||t>=columns.length)}function getCellFromPoint(e,t){var n=Math.floor((t+offset)/options.rowHeight),r=0,i=0;for(var s=0;s<columns.length&&i<e;s++)i+=columns[s].width,r++;return r<0&&(r=0),{row:n,cell:r-1}}function getCellFromNode(e){var t=/l\d+/.exec(e.className);if(!t)throw"getCellFromNode: cannot get cell - "+e.className;return parseInt(t[0].substr(1,t[0].length-1),10)}function getRowFromNode(e){for(var t in rowsCache)if(rowsCache[t].rowNode===e)return t|0;return null}function getCellFromEvent(e){var t=$(e.target).closest(".slick-cell",$canvas);if(!t.length)return null;var n=getRowFromNode(t[0].parentNode),r=getCellFromNode(t[0]);return n==null||r==null?null:{row:n,cell:r}}function getCellNodeBox(e,t){if(!cellExists(e,t))return null;var n=e*options.rowHeight-offset,r=n+options.rowHeight-1,i=0;for(var s=0;s<t;s++)i+=columns[s].width;var o=i+columns[t].width;return{top:n,left:i,bottom:r,right:o}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){$focusSink[0].focus()}function scrollCellIntoView(e,t){var n=getColspan(e,t),r=columnPosLeft[t],i=columnPosRight[t+(n>1?n-1:0)],s=scrollLeft+viewportW;r<scrollLeft?($viewport.scrollLeft(r),handleScroll(),render()):i>s&&($viewport.scrollLeft(Math.min(r,i-$viewport[0].clientWidth)),handleScroll(),render())}function scrollActiveCellIntoView(){activeRow!=null&&activeCell!=null&&scrollCellIntoView(activeRow,activeCell)}function setActiveCellInternal(e,t){activeCellNode!==null&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"));var n=activeCellNode!==e;activeCellNode=e,activeCellNode!=null?(activeRow=getRowFromNode(activeCellNode.parentNode),activeCell=activePosX=getCellFromNode(activeCellNode),$(activeCellNode).addClass("active"),options.editable&&t&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay):makeActiveCellEditable())):activeRow=activeCell=null,n&&trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}}function isCellPotentiallyEditable(e,t){return e<getDataLength()&&!getDataItem(e)?!1:columns[t].cannotTriggerInsert&&e>=getDataLength()?!1:getEditor(e,t)?!0:!1}function makeActiveCellNormal(){if(!currentEditor)return;trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null;if(activeCellNode){var e=getDataItem(activeRow);$(activeCellNode).removeClass("editable invalid");if(e){var t=columns[activeCell],n=getFormatter(activeRow,t);activeCellNode.innerHTML=n(activeRow,activeCell,getDataItemValueForColumn(e,t),t,getDataItem(activeRow)),invalidatePostProcessingResults(activeRow)}}$.browser.msie&&clearTextSelection(),getEditorLock().deactivate(editController)}function makeActiveCellEditable(e){if(!activeCellNode)return;if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell))return;var t=columns[activeCell],n=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:n,column:t})===!1){setFocus();return}getEditorLock().activate(editController),$(activeCellNode).addClass("editable"),e||(activeCellNode.innerHTML=""),currentEditor=new(e||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:t,item:n||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),n&&currentEditor.loadValue(n),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(e){var t={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:$(e).outerWidth(),height:$(e).outerHeight(),visible:!0};t.bottom=t.top+t.height,t.right=t.left+t.width;var n=e.offsetParent;while((e=e.parentNode)!=document.body)t.visible&&e.scrollHeight!=e.offsetHeight&&$(e).css("overflowY")!="visible"&&(t.visible=t.bottom>e.scrollTop&&t.top<e.scrollTop+e.clientHeight),t.visible&&e.scrollWidth!=e.offsetWidth&&$(e).css("overflowX")!="visible"&&(t.visible=t.right>e.scrollLeft&&t.left<e.scrollLeft+e.clientWidth),t.left-=e.scrollLeft,t.top-=e.scrollTop,e===n&&(t.left+=e.offsetLeft,t.top+=e.offsetTop,n=e.offsetParent),t.bottom=t.top+t.height,t.right=t.left+t.width;return t}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(!activeCellNode)return;trigger(self.onActiveCellPositionChanged,{});if(currentEditor){var e=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(e.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(e)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(e,t){var n=e*options.rowHeight,r=(e+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(e+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(t?n:r),render()):e*options.rowHeight<scrollTop+offset&&(scrollTo(t?r:n),render())}function scrollRowToTop(e){scrollTo(e*options.rowHeight),render()}function getColspan(e,t){var n=data.getItemMetadata&&data.getItemMetadata(e);if(!n||!n.columns)return 1;var r=n.columns[columns[t].id]||n.columns[t],i=r&&r.colspan;return i==="*"?i=columns.length-t:i=i||1,i}function findFirstFocusableCell(e){var t=0;while(t<columns.length){if(canCellBeActive(e,t))return t;t+=getColspan(e,t)}return null}function findLastFocusableCell(e){var t=0,n=null;while(t<columns.length)canCellBeActive(e,t)&&(n=t),t+=getColspan(e,t);return n}function gotoRight(e,t,n){if(t>=columns.length)return null;do t+=getColspan(e,t);while(t<columns.length&&!canCellBeActive(e,t));return t<columns.length?{row:e,cell:t,posX:t}:null}function gotoLeft(e,t,n){if(t<=0)return null;var r=findFirstFocusableCell(e);if(r===null||r>=t)return null;var i={row:e,cell:r,posX:r},s;for(;;){s=gotoRight(i.row,i.cell,i.posX);if(!s)return null;if(s.cell>=t)return i;i=s}}function gotoDown(e,t,n){var r;for(;;){if(++e>=getDataLength()+(options.enableAddRow?1:0))return null;r=t=0;while(t<=n)r=t,t+=getColspan(e,t);if(canCellBeActive(e,r))return{row:e,cell:r,posX:n}}}function gotoUp(e,t,n){var r;for(;;){if(--e<0)return null;r=t=0;while(t<=n)r=t,t+=getColspan(e,t);if(canCellBeActive(e,r))return{row:e,cell:r,posX:n}}}function gotoNext(e,t,n){var r=gotoRight(e,t,n);if(r)return r;var i=null;while(++e<getDataLength()+(options.enableAddRow?1:0)){i=findFirstFocusableCell(e);if(i!==null)return{row:e,cell:i,posX:i}}return null}function gotoPrev(e,t,n){var r,i;while(!r){r=gotoLeft(e,t,n);if(r)break;if(--e<0)return null;t=0,i=findLastFocusableCell(e),i!==null&&(r={row:e,cell:i,posX:i})}return r}function navigateRight(){navigate("right")}function navigateLeft(){navigate("left")}function navigateDown(){navigate("down")}function navigateUp(){navigate("up")}function navigateNext(){navigate("next")}function navigatePrev(){navigate("prev")}function navigate(e){if(!activeCellNode||!options.enableCellNavigation)return;if(!getEditorLock().commitCurrentEdit())return;setFocus();var t={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext},n=t[e],r=n(activeRow,activeCell,activePosX);if(r){var i=r.row==getDataLength();scrollRowIntoView(r.row,!i),scrollCellIntoView(r.row,r.cell),setActiveCellInternal(getCellNode(r.row,r.cell),i||options.autoEdit),activePosX=r.posX}else setActiveCellInternal(getCellNode(activeRow,activeCell),activeRow==getDataLength()||options.autoEdit)}function getCellNode(e,t){return rowsCache[e]?(ensureCellNodesInRowsCache(e),rowsCache[e].cellNodesByColumnIdx[t]):null}function setActiveCell(e,t){if(!initialized)return;if(e>getDataLength()||e<0||t>=columns.length||t<0)return;if(!options.enableCellNavigation)return;scrollRowIntoView(e,!1),scrollCellIntoView(e,t),setActiveCellInternal(getCellNode(e,t),!1)}function canCellBeActive(e,t){if(!options.enableCellNavigation||e>=getDataLength()+(options.enableAddRow?1:0)||e<0||t>=columns.length||t<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(e);if(n&&typeof n.focusable=="boolean")return n.focusable;var r=n&&n.columns;return r&&r[columns[t].id]&&typeof r[columns[t].id].focusable=="boolean"?r[columns[t].id].focusable:r&&r[t]&&typeof r[t].focusable=="boolean"?r[t].focusable:typeof columns[t].focusable=="boolean"?columns[t].focusable:!0}function canCellBeSelected(e,t){if(e>=getDataLength()||e<0||t>=columns.length||t<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(e);if(n&&typeof n.selectable=="boolean")return n.selectable;var r=n&&n.columns&&(n.columns[columns[t].id]||n.columns[t]);return r&&typeof r.selectable=="boolean"?r.selectable:typeof columns[t].selectable=="boolean"?columns[t].selectable:!0}function gotoCell(e,t,n){if(!initialized)return;if(!canCellBeActive(e,t))return;if(!getEditorLock().commitCurrentEdit())return;scrollRowIntoView(e,!1),scrollCellIntoView(e,t);var r=getCellNode(e,t);setActiveCellInternal(r,n||e===getDataLength()||options.autoEdit),currentEditor||setFocus()}function commitCurrentEdit(){var e=getDataItem(activeRow),t=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var n=currentEditor.validate();if(n.valid){if(activeRow<getDataLength()){var r={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(e,this.serializedValue),updateRow(this.row)},undo:function(){this.editor.applyValue(e,this.prevSerializedValue),updateRow(this.row)}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(e,t,r)):(r.execute(),makeActiveCellNormal()),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:e})}else{var i={};currentEditor.applyValue(i,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:i,column:t})}return!getEditorLock().isActive()}return $(activeCellNode).addClass("invalid"),$(activeCellNode).stop(!0,!0).effect("highlight",{color:"red"},300),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:n,row:activeRow,cell:activeCell,column:t}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(e){var t=[],n=columns.length-1;for(var r=0;r<e.length;r++)t.push(new Slick.Range(e[r],0,e[r],n));return t}function getSelectedRows(){if(!selectionModel)throw"Selection model is not set";return selectedRows}function setSelectedRows(e){if(!selectionModel)throw"Selection model is not set";selectionModel.setSelectedRanges(rowsToRanges(e))}var defaults={explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,fullWidthRows:!1,multiColumnSort:!1,defaultFormatter:defaultFormatter},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$headerScroller,$headers,$headerRow,$headerRowScroller,$topPanelScroller,$topPanel,$viewport,$canvas,$style,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,absoluteColumnMinWidth,numberOfRows=0,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],h_editorLoader=null,h_render=null,h_postrender=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,counter_rows_rendered=0,counter_rows_removed=0;this.debug=function(){var e="";e+="\ncounter_rows_rendered:  "+counter_rows_rendered,e+="\ncounter_rows_removed:  "+counter_rows_removed,e+="\nrenderedRows:  "+renderedRows,e+="\nnumVisibleRows:  "+numVisibleRows,e+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,e+="\nn(umber of pages):  "+n,e+="\n(current) page:  "+page,e+="\npage height (ph):  "+ph,e+="\nvScrollDir:  "+vScrollDir,alert(e)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.0",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderRendered:new Slick.Event,onBeforeHeaderDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,scrollCellIntoView:scrollCellIntoView,getCanvasNode:getCanvasNode,focus:setFocus,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,getTopPanel:getTopPanel,showTopPanel:showTopPanel,hideTopPanel:hideTopPanel,showHeaderRowColumns:showHeaderRowColumns,hideHeaderRowColumns:hideHeaderRowColumns,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions,maxSupportedCssHeight})(jQuery),define("libs/jquery/slickgrid/slick.grid",function(){}),function(e){function t(t){function j(){c=!0}function F(){c=!1,Mt()}function I(e){v=e}function q(e){g=e}function R(e){e=e||0;var t;for(var n=e,r=s.length;n<r;n++){t=s[n][i];if(t===undefined)throw"Each data element must implement a unique 'id' property";u[t]=n}}function U(){var e;for(var t=0,n=s.length;t<n;t++){e=s[t][i];if(e===undefined||u[e]!==t)throw"Each data element must implement a unique 'id' property"}}function z(){return s}function W(e,t){t!==undefined&&(i=t),s=y=e,u={},R(),U(),Mt()}function X(e){e.pageSize!=undefined&&(M=e.pageSize,_=M?Math.min(_,Math.max(0,Math.ceil(D/M)-1)):0),e.pageNum!=undefined&&(_=Math.min(e.pageNum,Math.max(0,Math.ceil(D/M)-1))),B.notify(V(),null,n),Mt()}function V(){var e=M?Math.max(1,Math.ceil(D/M)):1;return{pageSize:M,pageNum:_,totalRows:D,totalPages:e}}function J(e,t){h=t,d=e,p=null,t===!1&&s.reverse(),s.sort(e),t===!1&&s.reverse(),u={},R(),Mt()}function K(e,t){h=t,p=e,d=null;var n=Object.prototype.toString;Object.prototype.toString=typeof e=="function"?e:function(){return this[e]},t===!1&&s.reverse(),s.sort(),Object.prototype.toString=n,t===!1&&s.reverse(),u={},R(),Mt()}function Q(){d?J(d,h):p&&K(p,h)}function G(e){f=e,t.inlineFilters&&(b=Tt(),w=Nt()),Mt()}function Y(e,n,r){t.groupItemMetadataProvider||(t.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider),S=e,x=typeof S=="function",T=n,N=r,k={},C=[],Mt()}function Z(e,t){L=e,A=t!==undefined?t:A,O=[];var n=L.length;while(n--)O[n]=xt(L[n]);Mt()}function et(e){return s[e]}function tt(e){return u[e]}function nt(){if(!a){a={};for(var e=0,t=o.length;e<t;e++)a[o[e][i]]=e}}function rt(e){return nt(),a[e]}function it(e){return s[u[e]]}function st(e){var t=[];nt();for(var n=0;n<e.length;n++){var r=a[e[n]];r!=null&&(t[t.length]=r)}return t}function ot(e){var t=[];for(var n=0;n<e.length;n++)e[n]<o.length&&(t[t.length]=o[e[n]][i]);return t}function ut(e,t){if(u[e]===undefined||e!==t[i])throw"Invalid or non-matching id";s[u[e]]=t,l||(l={}),l[e]=!0,Mt()}function at(e,t){s.splice(e,0,t),R(e),Mt()}function ft(e){s.push(e),R(s.length-1),Mt()}function lt(e){var t=u[e];if(t===undefined)throw"Invalid id";delete u[e],s.splice(t,1),R(t),Mt()}function ct(){return o.length}function ht(e){return o[e]}function pt(e){var n=o[e];return n===undefined?null:n.__group?t.groupItemMetadataProvider.getGroupRowMetadata(n):n.__groupTotals?t.groupItemMetadataProvider.getTotalsRowMetadata(n):null}function dt(e){k[e]=!0,Mt()}function vt(e){delete k[e],Mt()}function mt(){return C}function gt(e){var t,n,r=[],i=[],s;for(var o=0,u=e.length;o<u;o++)s=e[o],n=x?S(s):s[S],n=n||0,t=i[n],t||(t=new Slick.Group,t.count=0,t.value=n,t.rows=[],r[r.length]=t,i[n]=t),t.rows[t.count++]=s;return r}function yt(e){if(e.collapsed&&!A)return;var t=new Slick.GroupTotals,n,r=L.length;while(r--)n=L[r],n.init(),O[r].call(n,e.rows),n.storeResult(t);t.group=e,e.totals=t}function bt(e){var t=e.length;while(t--)yt(e[t])}function wt(e){var t=e.length,n;while(t--)n=e[t],n.collapsed=n.value in k,n.title=T?T(n):n.value}function Et(e){var t=[],n=0,r;for(var i=0,s=e.length;i<s;i++){r=e[i],t[n++]=r;if(!r.collapsed)for(var o=0,u=r.rows.length;o<u;o++)t[n++]=r.rows[o];r.totals&&(!r.collapsed||A)&&(t[n++]=r.totals)}return t}function St(e){var t=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/,n=e.toString().match(t);return{params:n[1].split(","),body:n[2]}}function xt(e){var t=St(e.accumulate),n=new Function("_items","for (var "+t.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+t.params[0]+" = _items[_i]; "+t.body+"}");return n.displayName=n.name="compiledAccumulatorLoop",n}function Tt(){var e=St(f),t=e.body.replace(/return false[;}]/gi,"{ continue _coreloop; }").replace(/return true[;}]/gi,"{ _retval[_idx++] = $item$; continue _coreloop; }").replace(/return ([^;}]+?);/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }"),n=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");n=n.replace(/\$filter\$/gi,t),n=n.replace(/\$item\$/gi,e.params[0]),n=n.replace(/\$args\$/gi,e.params[1]);var r=new Function("_items,_args",n);return r.displayName=r.name="compiledFilter",r}function Nt(){var e=St(f),t=e.body.replace(/return false[;}]/gi,"{ continue _coreloop; }").replace(/return true[;}]/gi,"{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }").replace(/return ([^;}]+?);/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }"),n=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");n=n.replace(/\$filter\$/gi,t),n=n.replace(/\$item\$/gi,e.params[0]),n=n.replace(/\$args\$/gi,e.params[1]);var r=new Function("_items,_args,_cache",n);return r.displayName=r.name="compiledFilterWithCaching",r}function Ct(e,t){var n=[],r=0;for(var i=0,s=e.length;i<s;i++)f(e[i],t)&&(n[r++]=e[i]);return n}function kt(e,t,n){var r=[],i=0,s;for(var o=0,u=e.length;o<u;o++)s=e[o],n[o]?r[i++]=s:f(s,t)&&(r[i++]=s,n[o]=!0);return r}function Lt(e){if(f){var n=t.inlineFilters?b:Ct,r=t.inlineFilters?w:kt;v.isFilterNarrowing?y=n(y,g):v.isFilterExpanding?y=r(e,g,E):v.isFilterUnchanged||(y=n(e,g))}else y=M?e:e.concat();var i;return M?(y.length<_*M&&(_=Math.floor(y.length/M)),i=y.slice(M*_,M*_+M)):i=y,{totalRows:y.length,rows:i}}function At(e,t){var n,r,s,o=[],u=0,a=t.length;v&&v.ignoreDiffsBefore&&(u=Math.max(0,Math.min(t.length,v.ignoreDiffsBefore))),v&&v.ignoreDiffsAfter&&(a=Math.min(t.length,Math.max(0,v.ignoreDiffsAfter)));for(var f=u,c=e.length;f<a;f++)if(f>=c)o[o.length]=f;else{n=t[f],r=e[f];if(S&&(s=n.__nonDataRow||r.__nonDataRow)&&n.__group!==r.__group||n.__updated||n.__group&&!n.equals(r)||L&&s&&(n.__groupTotals||r.__groupTotals)||n[i]!=r[i]||l&&l[n[i]])o[o.length]=f}return o}function Ot(e){a=null;if(v.isFilterNarrowing!=m.isFilterNarrowing||v.isFilterExpanding!=m.isFilterExpanding)E=[];var t=Lt(e);D=t.totalRows;var n=t.rows;C=[],S!=null&&(C=gt(n),C.length&&(wt(C),L&&bt(C),C.sort(N),n=Et(C)));var r=At(o,n);return o=n,r}function Mt(){if(c)return;var e=o.length,t=D,r=Ot(s,f);M&&D<_*M&&(_=Math.max(0,Math.ceil(D/M)-1),r=Ot(s,f)),l=null,m=v,v={},t!=D&&B.notify(V(),null,n),e!=o.length&&P.notify({previous:e,current:o.length},null,n),r.length>0&&H.notify({rows:r},null,n)}function _t(e,t){var n=this,r=n.mapRowsToIds(e.getSelectedRows()),i;e.onSelectedRowsChanged.subscribe(function(t,s){if(i)return;r=n.mapRowsToIds(e.getSelectedRows())}),this.onRowsChanged.subscribe(function(s,o){if(r.length>0){i=!0;var u=n.mapIdsToRows(r);t||(r=n.mapRowsToIds(u)),e.setSelectedRows(u),i=!1}})}function Dt(e,t){function s(e){n={};for(var t in e){var r=o[t][i];n[r]=e[t]}}var n,r;s(e.getCellCssStyles(t)),e.onCellCssStylesChanged.subscribe(function(e,n){if(r)return;if(t!=n.key)return;n.hash&&s(n.hash)}),this.onRowsChanged.subscribe(function(i,s){if(n){r=!0,nt();var o={};for(var u in n){var f=a[u];f!=undefined&&(o[f]=n[u])}e.setCellCssStyles(t,o),r=!1}})}var n=this,r={groupItemMetadataProvider:null,inlineFilters:!1},i="id",s=[],o=[],u={},a=null,f=null,l=null,c=!1,h=!0,p,d,v={},m={},g,y=[],b,w,E=[],S,x,T,N,C=[],k={},L,A=!1,O,M=0,_=0,D=0,P=new Slick.Event,H=new Slick.Event,B=new Slick.Event;return t=e.extend(!0,{},r,t),{beginUpdate:j,endUpdate:F,setPagingOptions:X,getPagingInfo:V,getItems:z,setItems:W,setFilter:G,sort:J,fastSort:K,reSort:Q,groupBy:Y,setAggregators:Z,collapseGroup:dt,expandGroup:vt,getGroups:mt,getIdxById:tt,getRowById:rt,getItemById:it,getItemByIdx:et,mapRowsToIds:ot,mapIdsToRows:st,setRefreshHints:I,setFilterArgs:q,refresh:Mt,updateItem:ut,insertItem:at,addItem:ft,deleteItem:lt,syncGridSelection:_t,syncGridCellCssStyles:Dt,getLength:ct,getItem:ht,getItemMetadata:pt,onRowCountChanged:P,onRowsChanged:H,onPagingInfoChanged:B}}function n(e){this.field_=e,this.init=function(){this.count_=0,this.nonNullCount_=0,this.sum_=0},this.accumulate=function(e){var t=e[this.field_];this.count_++,t!=null&&t!=""&&t!=NaN&&(this.nonNullCount_++,this.sum_+=parseFloat(t))},this.storeResult=function(e){e.avg||(e.avg={}),this.nonNullCount_!=0&&(e.avg[this.field_]=this.sum_/this.nonNullCount_)}}function r(e){this.field_=e,this.init=function(){this.min_=null},this.accumulate=function(e){var t=e[this.field_];t!=null&&t!=""&&t!=NaN&&(this.min_==null||t<this.min_)&&(this.min_=t)},this.storeResult=function(e){e.min||(e.min={}),e.min[this.field_]=this.min_}}function i(e){this.field_=e,this.init=function(){this.max_=null},this.accumulate=function(e){var t=e[this.field_];t!=null&&t!=""&&t!=NaN&&(this.max_==null||t>this.max_)&&(this.max_=t)},this.storeResult=function(e){e.max||(e.max={}),e.max[this.field_]=this.max_}}function s(e){this.field_=e,this.init=function(){this.sum_=null},this.accumulate=function(e){var t=e[this.field_];t!=null&&t!=""&&t!=NaN&&(this.sum_+=parseFloat(t))},this.storeResult=function(e){e.sum||(e.sum={}),e.sum[this.field_]=this.sum_}}e.extend(!0,window,{Slick:{Data:{DataView:t,Aggregators:{Avg:n,Min:r,Max:i,Sum:s}}}})}(jQuery),define("libs/jquery/slickgrid/slick.dataview",function(){}),function(e){function t(t,n,r){function s(){t.onPagingInfoChanged.subscribe(function(e,t){p(t)}),h(),p(t.getPagingInfo())}function o(){var e=!Slick.GlobalEditorLock.commitCurrentEdit(),n=t.getPagingInfo(),r=n.totalPages-1;return{canGotoFirst:!e&&n.pageSize!=0&&n.pageNum>0,canGotoLast:!e&&n.pageSize!=0&&n.pageNum!=r,canGotoPrev:!e&&n.pageSize!=0&&n.pageNum>0,canGotoNext:!e&&n.pageSize!=0&&n.pageNum<r,pagingInfo:n}}function u(e){t.setRefreshHints({isFilterUnchanged:!0}),t.setPagingOptions({pageSize:e})}function a(){o().canGotoFirst&&t.setPagingOptions({pageNum:0})}function f(){var e=o();e.canGotoLast&&t.setPagingOptions({pageNum:e.pagingInfo.totalPages-1})}function l(){var e=o();e.canGotoPrev&&t.setPagingOptions({pageNum:e.pagingInfo.pageNum-1})}function c(){var e=o();e.canGotoNext&&t.setPagingOptions({pageNum:e.pagingInfo.pageNum+1})}function h(){r.empty();var t=e("<span class='slick-pager-nav' />").appendTo(r),s=e("<span class='slick-pager-settings' />").appendTo(r);i=e("<span class='slick-pager-status' />").appendTo(r),s.append("<span class='slick-pager-settings-expanded' style='display:none'>Show: <a data=0>All</a><a data='-1'>Auto</a><a data=25>25</a><a data=50>50</a><a data=100>100</a></span>"),s.find("a[data]").click(function(t){var r=e(t.target).attr("data");if(r!=undefined)if(r==-1){var i=n.getViewport();u(i.bottom-i.top)}else u(parseInt(r))});var o="<span class='ui-state-default ui-corner-all ui-icon-container'><span class='ui-icon ",h="' /></span>";e(o+"ui-icon-lightbulb"+h).click(function(){e(".slick-pager-settings-expanded").toggle()}).appendTo(s),e(o+"ui-icon-seek-first"+h).click(a).appendTo(t),e(o+"ui-icon-seek-prev"+h).click(l).appendTo(t),e(o+"ui-icon-seek-next"+h).click(c).appendTo(t),e(o+"ui-icon-seek-end"+h).click(f).appendTo(t),r.find(".ui-icon-container").hover(function(){e(this).toggleClass("ui-state-hover")}),r.children().wrapAll("<div class='slick-pager' />")}function p(e){var t=o();r.find(".slick-pager-nav span").removeClass("ui-state-disabled"),t.canGotoFirst||r.find(".ui-icon-seek-first").addClass("ui-state-disabled"),t.canGotoLast||r.find(".ui-icon-seek-end").addClass("ui-state-disabled"),t.canGotoNext||r.find(".ui-icon-seek-next").addClass("ui-state-disabled"),t.canGotoPrev||r.find(".ui-icon-seek-prev").addClass("ui-state-disabled"),e.pageSize==0?i.text("Showing all "+e.totalRows+" rows"):i.text("Showing page "+(e.pageNum+1)+" of "+e.totalPages)}var i;s()}e.extend(!0,window,{Slick:{Controls:{Pager:t}}})}(jQuery),define("libs/jquery/slickgrid/slick.pager",function(){}),function(e){function t(t,n,r){function u(){n.onHeaderContextMenu.subscribe(a),r=e.extend({},o,r),i=e("<span class='slick-columnpicker' style='display:none;position:absolute;z-index:20;' />").appendTo(document.body),i.bind("mouseleave",function(t){e(this).fadeOut(r.fadeSpeed)}),i.bind("click",f)}function a(o,u){o.preventDefault(),i.empty(),s=[];var a,f;for(var l=0;l<t.length;l++)a=e("<li />").appendTo(i),f=e("<input type='checkbox' />").data("column-id",t[l].id),s.push(f),n.getColumnIndex(t[l].id)!=null&&f.attr("checked","checked"),e("<label />").text(t[l].name).prepend(f).appendTo(a);e("<hr/>").appendTo(i),a=e("<li />").appendTo(i),f=e("<input type='checkbox' />").data("option","autoresize"),e("<label />").text("Force fit columns").prepend(f).appendTo(a),n.getOptions().forceFitColumns&&f.attr("checked","checked"),a=e("<li />").appendTo(i),f=e("<input type='checkbox' />").data("option","syncresize"),e("<label />").text("Synchronous resize").prepend(f).appendTo(a),n.getOptions().syncColumnCellResize&&f.attr("checked","checked"),i.css("top",o.pageY-10).css("left",o.pageX-10).fadeIn(r.fadeSpeed)}function f(r){if(e(r.target).data("option")=="autoresize"){r.target.checked?(n.setOptions({forceFitColumns:!0}),n.autosizeColumns()):n.setOptions({forceFitColumns:!1});return}if(e(r.target).data("option")=="syncresize"){r.target.checked?n.setOptions({syncColumnCellResize:!0}):n.setOptions({syncColumnCellResize:!1});return}if(e(r.target).is(":checkbox")){var i=[];e.each(s,function(n,r){e(this).is(":checked")&&i.push(t[n])});if(!i.length){e(r.target).attr("checked","checked");return}n.setColumns(i)}}var i,s,o={fadeSpeed:250};u()}e.extend(!0,window,{Slick:{Controls:{ColumnPicker:t}}})}(jQuery),define("libs/jquery/slickgrid/slick.columnpicker",function(){}),define("app/util/output-table",["app/util/jsonmodel","libs/jquery/slickgrid/jquery.event.drag-2.0.min","libs/jquery/ui/jquery.ui.sortable","libs/jquery/slickgrid/slick.core","libs/jquery/slickgrid/slick.grid","libs/jquery/slickgrid/slick.dataview","libs/jquery/slickgrid/slick.pager","libs/jquery/slickgrid/slick.columnpicker"],function(e){return function(){function a(e,t){var n=[];if(e.length!=1||!e[0].pgvalue)for(var r=0;r<t.length;r++){var i=$.extend({},t[r],{"#id":"#"+r});n.push(i)}else for(var r=0;r<t.length;r++)n.push({value:t[r],"#id":"#"+r});return n}function f(e,t){i.setItems([],"#id"),t&&t.table.sort&&c(e,t.table.sort),i.beginUpdate(),i.setItems(e,"#id");if(t&&t.table.pager&&("undefined"!=typeof t.table.pager.size||"undefined"!=typeof t.table.pager.pageNum)){var n={};t.table.pager.size&&(n.pageSize=t.table.pager.size),t.table.pager.page&&(n.pageNum=t.table.pager.page),i.setPagingOptions(n)}i.endUpdate()}function l(){clearInterval(this.killReducedResize),this.killReducedResize=setTimeout(function(){s&&s.resizeCanvas()},20)}function c(e,t){e.sort(function(e,n){for(var r=0,i=t.length;r<i;r++){var s=t[r].field,o=t[r].asc?1:-1,u=e[s],a=n[s],f=(u==a?0:u>a?1:-1)*o;if(f!=0)return f}return 0})}var t=20,n=$('<div class="ui-widget"><div class="pg-table" style="height:100%;width:100%"></div></div>'),r=n.find(".pg-table"),i=new Slick.Data.DataView,s,o={enableCellNavigation:!1,enableColumnReorder:!0,autoHeight:!1,forceFitColumns:!0,multiColumnSort:!0},u;i.setPagingOptions({pageSize:t}),i.onRowCountChanged.subscribe(function(e,t){if(!s)return;try{s.updateRowCount
()}catch(n){}s.render()}),i.onRowsChanged.subscribe(function(e,t){if(!s)return;s.invalidateRows(t.rows),s.render()});var h,p;return u={type:"table",name:"Table",panel:function(){return n},toolbar:function(){return $("<div></div>")},update:function(t,n){p=n,"undefined"==typeof p.table&&(p.table={pager:{}}),h&&i.onPagingInfoChanged.unsubscribe(h);try{s&&s.destroy()}catch(c){}var d=!t||t.length==0?[{id:"empty",name:"No Records Match Your Query",field:"empty"}]:e.create(t);t=a(d,t),s=new Slick.Grid(r,i,d,o),h=function(e,t){p.table.pager={size:t.pageSize,page:t.pageNum},$(u).trigger("optionsChanged",p)},p.table.sort&&s&&s.setSortColumns(p.table.sort.map(function(e){return{columnId:e.field,sortAsc:e.asc}})),s.onSort.subscribe(function(e,n){p.table.sort=n.sortCols.map(function(e){return{asc:e.sortAsc,field:e.sortCol.field}}),$(u).trigger("optionsChanged",p),f(t,p)}),new Slick.Controls.Pager(i,s,this.toolbar),f(t,p),i.onPagingInfoChanged.subscribe(h),l()},preferredDownloadFormat:function(){return"csv"},resize:l,paginationOptions:function(){var e=p&&p.table&&p.table.pager&&p.table.pager||{page:0,size:t},n=p&&p.table&&p.table.sort||null;return{skip:e.page*e.size,limit:e.size,sort:n}}}}}),define("app/util/output-json",["app/util/ui"],function(e){var t,n=$('<div class="ui-widget"><pre class="json ui-content"></pre></div>'),r=n.find(".json"),i=2,s,o,u;return t={type:"json",name:"Json",panel:function(){return n},update:function(e,t){e?u=e:e=u,o=t,o.json||(o.json={compact:!1});var n=o.json.compact?JSON.stringify(e):JSON.stringify(e,null,i);s.find('input[type="checkbox"]').attr("checked",o.json.compact).button("refresh"),r.text(n)},activate:function(){s||(s=$(this.toolbar).append("<div></div>").find("div:last"),e.checks(s,{label:"compact",handler:function(e){if(o.json.compact===e.checked)return;o.json.compact=e.checked,t.update(null,o),$(t).trigger("optionsChanged",o)}})),s.show()},deactivate:function(){s.hide()},preferredDownloadFormat:function(e){return"json"}}}),define("rtext!templates/panel.options.chart-output.html",[],function(){return'<div class="pg-description"></div>\n<div class="pg-selection ui-content ui-state-highlight ui-corner-all">\n    <label><span class="pg-label">X Axis:</span><select class="pg-x"></select></label>\n</div>\n<div class="pg-selection ui-content ui-state-highlight ui-corner-all">\n    <label><span class="pg-label">Y Axis:</span><select class="pg-y"></select></label>\n</div>\n<div class="pg-selection ui-content ui-state-highlight ui-corner-all">\n    <label><span class="pg-label">Segment On:</span><select class="pg-segment"></select></label>\n</div>\n<div class="pg-selection ui-content ui-state-highlight ui-corner-all">\n    <label><span class="pg-label">Max. Samples:</span><input type="number" step="1" min="1" class="pg-sample"></label>\n</div>\n<div class="pg-chart-logo">\n    <a href="http://reportgrid.com/" target="_blank"><img src="http://api.reportgrid.com/css/images/reportgrid-clear.png" title="Powered by ReportGrid" height="29" width="194"></a>\n</div>'}),function(){function yr(e,t){function n(){}n.prototype=e;var r=new n,i;for(i in t)r[i]=t[i];return r}function br(e){return e instanceof Array?function(){return Fr.iter(e)}:"function"==typeof e.iterator?wr(e,e.iterator):e.iterator}function wr(e,t){var n=function(){return n.method.apply(n.scope,arguments)};return n.scope=e,n.method=t,n}var e,t,n,r,i,s,o,u,a,f,l,c,h,p,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt,Yt,Zt,en,tn,nn,rn,sn,on,un,an,fn,ln,cn,hn,pn,dn,vn,mn,gn,yn,bn,wn,En,Sn,xn,Tn,Nn,Cn,kn,Ln,An,On,Mn,_n,Dn,Pn,Hn,Bn,jn,Fn,In,qn,Rn,Un,zn,Wn,Xn,Vn,$n,Jn,Kn,Qn,Gn,Yn,Zn,er,tr,nr,rr,ir,sr,or,ur,ar,fr,lr,cr,hr,pr,dr,vr,mr,gr,Er={},Sr=function(){return ar.__string_rec(this,"")},xr=function(){};Er.Arrays=xr,xr.__name__=["Arrays"],xr.addIf=function(e,t,n){return null!=t?t&&e.push(n):null!=n&&e.push(n),e},xr.add=function(e,t){return e.push(t),e},xr["delete"]=function(e,t){return Fr.remove(e,t),e},xr.removef=function(e,t){for(var n=-1,r=0,i=e.length;r<i;){var s=r++;if(t(e[s])){n=s;break}}return 0>n?!1:(e.splice(n,1),!0)},xr.deletef=function(e,t){return xr.removef(e,t),e},xr.filter=function(e,t){for(var n=[],r=0;r<e.length;){var i=e[r];++r,t(i)&&n.push(i)}return n},xr.min=function(e,t){if(0==e.length)return null;if(null==t)for(var n=e[0],r=0,i=_r.comparef(n),s=1,o=e.length;s<o;){var u=s++;0<i(n,e[u])&&(n=e[r=u])}else{n=t(e[0]),r=0,s=1;for(o=e.length;s<o;)if(u=s++,n>(i=t(e[u])))n=i,r=u}return e[r]},xr.floatMin=function(e,t){if(0==e.length)return Math.NaN;for(var n=t(e[0]),r,i=1,s=e.length;i<s;)if(r=i++,n>(r=t(e[r])))n=r;return n},xr.bounds=function(e,t){if(0==e.length)return null;if(null==t)for(var n=e[0],r=0,i=e[0],s=0,o=1,u=e.length;o<u;){var a=o++,f=_r.comparef(n);0<f(n,e[a])&&(n=e[r=a]),0>f(i,e[a])&&(i=e[s=a])}else{n=t(e[0]),r=0,f=t(e[0]),s=0,o=1;for(u=e.length;o<u;)if(a=o++,n>(i=t(e[a])))n=i,r=a;o=1;for(u=e.length;o<u;)if(a=o++,f<(n=t(e[a])))f=n,s=a}return[e[r],e[s]]},xr.boundsFloat=function(e,t){if(0==e.length)return null;for(var n=t(e[0]),r,i=t(e[0]),s=1,o=e.length;s<o;){var u=s++;n>(r=t(e[u]))&&(n=r),i<(r=t(e[u]))&&(i=r)}return[n,i]},xr.max=function(e,t){if(0==e.length)return null;if(null==t)for(var n=e[0],r=0,i=_r.comparef(n),s=1,o=e.length;s<o;){var u=s++;0>i(n,e[u])&&(n=e[r=u])}else{n=t(e[0]),r=0,s=1;for(o=e.length;s<o;)if(u=s++,n<(i=t(e[u])))n=i,r=u}return e[r]},xr.floatMax=function(e,t){if(0==e.length)return Math.NaN;for(var n=t(e[0]),r,i=1,s=e.length;i<s;)if(r=i++,n<(r=t(e[r])))n=r;return n},xr.flatten=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];++n,t=t.concat(r)}return t},xr.map=function(e,t){return e.map(t)},xr.reduce=function(e,t,n){return e.reduce(t,n)},xr.order=function(e,t){return e.sort(null==t?_r.compare:t),e},xr.orderMultiple=function(e,t,n){var r=!0,i;for(Fr.remove(n,e);r;)for(var r=!1,s=0,o=e.length-1;s<o;){var u=s++;if(0<t(e[u],e[u+1])){r=!0,i=e[u],e[u]=e[u+1],e[u+1]=i;for(var a=0;a<n.length;){var f=n[a];++a,i=f[u],f[u]=f[u+1],f[u+1]=i}}}},xr.split=function(e,t){null==t&&(t=function(e){return null==e});for(var n=[],r=[],i,s=0,o=e.length;s<o;){var u=s++;t(i=e[u],u)?r=[]:(0==r.length&&n.push(r),r.push(i))}return n},xr.exists=function(e,t,n){if(null!=n)for(var r=0;r<e.length;){var i=e[r];++r;if(n(i))return!0}else for(r=0;r<e.length;)if(i=e[r],++r,i==t)return!0;return!1},xr.format=function(e,t,n,r){n=xn.FormatParams.params(t,n,"J"),t=n.shift();switch(t){case"J":if(0==e.length)return null==n[1]?"[]":n[1];var t=null==n[2]?", ":n[2],i=null==n[3]?null:""==n[3]?null:Qr.parseInt(n[3]);if(null!=i&&i<e.length){var s=null==n[4]?" ...":n[4];return e.slice().splice(0,i).map(function(e){return _r.format(e,n[0],null,null,r)}).join(t)+s}return e.map(function(e){return _r.format(e,n[0],null,null,r)}).join(t);case"C":return zr.format(e.length,"I",[],r);default:throw"Unsupported array format: "+t}},xr.formatf=function(e,t,n){t=xn.FormatParams.params(e,t,"J"),e=t.shift();switch(e){case"J":return function(e){if(0==e.length)return null==t[1]?"[]":t[1];var r=null==t[2]?", ":t[2],i=null==t[3]?null:""==t[3]?null:Qr.parseInt(t[3]);if(null!=i&&i<e.length){var s=null==t[4]?" ...":t[4];return e.slice().splice(0,i).map(function(e){return _r.format(e,t[0],null,null,n)}).join(r)+s}return e.map(function(e){return _r.format(e,t[0],null,null,n)}).join(r)};case"C":var r=zr.formatf("I",[],n);return function(e){return r(e.length)};default:throw"Unsupported array format: "+e}},xr.interpolate=function(e,t,n,r){return xr.interpolatef(t,n,r)(e)},xr.interpolatef=function(e,t,n){for(var r=[],i=0,s=zr.min(e.length,t.length);i<s;)e[i]==t[i]?r.push(function(e){return function(){return e[0]}}([t[i]])):r.push(Hr.interpolatef(e[i],t[i],n)),i++;for(;i<t.length;)r.push(function(e){return function(){return e[0]}}([t[i]])),i++;return function(e){return r.map(function(t){return t(e)})}},xr.interpolateStrings=function(e,t,n,r){return xr.interpolateStringsf(t,n,r)(e)},xr.interpolateStringsf=function(e,t,n){for(var r=[],i=0,s=zr.min(e.length,t.length);i<s;)e[i]==t[i]?r.push(function(e){return function(){return e[0]}}([t[i]])):r.push(Zr.interpolatef(e[i],t[i],n)),i++;for(;i<t.length;)r.push(function(e){return function(){return e[0]}}([t[i]])),i++;return function(e){return r.map(function(t){return t(e)})}},xr.interpolateInts=function(e,t,n,r){return xr.interpolateIntsf(t,n,r)(e)},xr.interpolateIntsf=function(e,t,n){for(var r=[],i=0,s=zr.min(e.length,t.length);i<s;)e[i]==t[i]?r.push(function(e){return function(){return e[0]}}([t[i]])):r.push(zr.interpolatef(e[i],t[i],n)),i++;for(;i<t.length;)r.push(function(e){return function(){return e[0]}}([t[i]])),i++;return function(e){return r.map(function(t){return t(e)})}},xr.indexOf=function(e,t){return e.indexOf(t)},xr.every=function(e,t){return e.every(t)},xr.each=function(e,t){e.forEach(t)},xr.any=function(e,t){return Xr.any(Fr.iter(e),t)},xr.all=function(e,t){return Xr.all(Fr.iter(e),t)},xr.random=function(e){return e[Qr.random(e.length)]},xr.string=function(e){return"["+e.map(function(e){return _r.string(e)}).join(", ")+"]"},xr.last=function(e){return e[e.length-1]},xr.lastf=function(e,t){for(var n=e.length;0<=--n;)if(t(e[n]))return e[n];return null},xr.first=function(e){return e[0]},xr.firstf=function(e,t){for(var n=0;n<e.length;){var r=e[n];++n;if(t(r))return r}return null},xr.bisect=function(e,t,n,r){return null==n&&(n=0),xr.bisectRight(e,t,n,r)},xr.bisectRight=function(e,t,n,r){null==n&&(n=0),null==r&&(r=e.length);for(;n<r;){var i=n+r>>1;t<e[i]?r=i:n=i+1}return n},xr.bisectLeft=function(e,t,n,r){null==n&&(n=0),null==r&&(r=e.length);for(;n<r;){var i=n+r>>1;e[i]<t?n=i+1:r=i}return n},xr.nearest=function(e,t,n){for(var r=[],i=0,s=e.length;i<s;){var o=i++;r.push({i:o,v:Math.abs(n(e[o])-t)})}return r.sort(function(e,t){return Hr.compare(e.v,t.v)}),e[r[0].i]},xr.compare=function(e,t){var n;if(0!=(n=e.length-t.length))return n;for(var r=0,i=e.length;r<i;)if(n=r++,0!=(n=_r.compare(e[n],t[n])))return n;return 0},xr.product=function(e){if(0==e.length)return[];for(var e=e.slice(),t=[],n,r=0,i=e[0];r<i.length;){var s=i[r];++r,t.push([s])}i=1;for(r=e.length;i<r;){var o=i++;n=[];for(var u=0;u<t.length;){var a=t[u];++u;for(var f=0,l=e[o];f<l.length;)s=l[f],++f,n.push(a.slice().concat([s]))}t=n}return t},xr.rotate=function(e){if(0==e.length)return[];for(var t=[],n=0,r=e[0].length;n<r;){var i=n++;t[i]=[]}n=0;for(r=e.length;n<r;)for(var s=n++,o=0,u=e[0].length;o<u;)i=o++,t[i][s]=e[s][i];return t},xr.shuffle=function(e){for(var t=zr.range(e.length),n=[];0<t.length;){var r=Qr.random(t.length),i=t[r];t.splice(r,1),n.push(e[i])}return n},xr.scanf=function(e,t,n){null==n&&(n=!0);var r=0,i=[];if(n)for(var n=0,s=e.length;n<s;){var o=n++;i[o]=r+=t(e[o],o)}else{n=0;for(s=e.length;n<s;)o=n++,i[o]=t(e[o],o);r=i[i.length-1]}var u=function(){var t=null;return t=function(n,r,s){if(r==s)return e[r];var o=Math.floor((s-r)/2)+r;return n<i[o]?t(n,r,o):t(n,o+1,s)}}(this);return function(e){return 0>e||e>r?null:u(e,0,i.length-1)}};var Tr=function(){};Er.Bools=Tr,Tr.__name__=["Bools"],Tr.format=function(e,t,n,r){return Tr.formatf(t,n,r)(e)},Tr.formatf=function(e,t){var t=xn.FormatParams.params(e,t,"B"),n=t.shift();switch(n){case"B":return function(e){return e?"true":"false"};case"N":return function(e){return e?"1":"0"};case"R":if(2!=t.length)throw"bool format R requires 2 parameters";return function(e){return e?t[0]:t[1]};default:throw"Unsupported bool format: "+n}},Tr.interpolate=function(e,t,n,r){return Tr.interpolatef(t,n,r)(e)},Tr.interpolatef=function(e,t,n){if(e==t)return function(){return e};var r=Hr.interpolatef(0,1,n);return function(n){return.5>r(n)?e:t}},Tr.canParse=function(e){return e=e.toLowerCase(),"true"==e||"false"==e},Tr.parse=function(e){return"true"==e.toLowerCase()},Tr.compare=function(e,t){return e==t?0:e?-1:1};var Nr=function(e,t){this.length=e,this.b=t};Er.Bytes=Nr,Nr.__name__=["Bytes"],Nr.alloc=function(e){for(var t=[],n=0;n<e;)n++,t.push(0);return new Nr(e,t)},Nr.ofString=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=n++,i=Fr.cca(e,i);127>=i?t.push(i):(2047>=i?t.push(192|i>>6):(65535>=i?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|i>>12&63)),t.push(128|i>>6&63)),t.push(128|i&63))}return new Nr(t.length,t)},Nr.ofStringData=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=n++;t.push(Fr.cca(e,i))}return new Nr(t.length,t)},Nr.ofData=function(e){return new Nr(e.length,e)},Nr.ofHex=function(e){e=Yr.stripWhite(e),e=Yr.replaceRecurse(e,":","").toLowerCase(),Yr.startsWith(e,"0x")&&(e=Fr.substr(e,2,null)),1==(e.length&1)&&(e="0"+e);for(var t=new Cr,n=e.length/2|0,r=0;r<n;){var i=r++,i=Fr.substr(e,2*i,2);t.b.push(Qr.parseInt("0x"+i))}return t.getBytes()},Nr.prototype={toHex:function(e,t,n){null==t&&(t=0),null==e&&(e=""),null==n&&(n=this.length-t);for(var n=this.sub(t,n),t=new Gr,n=n.length,r=!0,i=0;i<n;){var s=i++;r?r=!1:t.b+=Qr.string(e),t.b+=Qr.string(Yr.hex(this.b[s],2).toLowerCase())}return t=Yr.rtrim(t.b),""==e&&0!=t.length%2&&(t="0"+t),t},getData:function(){return this.b},toString:function(){return this.readString(0,this.length)},readString:function(e,t){if(0>e||0>t||e+t>this.length)throw new hr.OutsideBoundsException;for(var n="",r=this.b,i=String.fromCharCode,s=e,o=e+t;s<o;){var u=r[s++];if(128>u){if(0==u)break;n+=i(u)}else if(224>u)n+=i((u&63)<<6|r[s++]&127);else if(240>u)var a=r[s++],n=n+i((u&31)<<12|(a&127)<<6|r[s++]&127);else var a=r[s++],f=r[s++],n=n+i((u&15)<<18|(a&127)<<12|f<<6&127|r[s++]&127)}return n},compare:function(e){for(var t=this.b,n=e.b,r=this.length<e.length?this.length:e.length,i=0;i<r;){var s=i++;if(t[s]!=n[s])return t[s]-n[s]}return this.length-e.length},sub:function(e,t){null==t&&(t=this.length-e),e+t>this.length&&(t=this.length-e);if(0>e||0>t)throw new hr.OutsideBoundsException;return new Nr(t,this.b.slice(e,e+t))},blit:function(e,t,n,r){null==r&&(r=t.length-n),n+r>t.length&&(r=t.length-n);if(0>e||0>n||0>r||e+r>this.length||n+r>t.length)throw new hr.OutsideBoundsException;var i=this.b,t=t.b;if(i==t&&e>n)for(var s=r;0<s;)s--,i[s+e]=t[s+n];else for(var o=0;o<r;)s=o++,i[s+e]=t[s+n]},set:function(e,t){this.b[e]=t&255},get:function(e){return this.b[e]},b:null,length:null,__class__:Nr};var Cr=function(){this.b=[]};Er.BytesBuffer=Cr,Cr.__name__=["BytesBuffer"],Cr.prototype={writeBytes:function(e,t,n){this.addBytes(e,t,n)},writeByte:function(e){this.b.push(e)},getBytes:function(){var e=new Nr(this.b.length,this.b);return this.b=null,e},addBytes:function(e,t,n){if(0>t||0>n||t+n>e.length)throw new hr.OutsideBoundsException;for(var e=e.b,r=t,t=t+n;r<t;)n=r++,this.b.push(e[n])},add:function(e){for(var t=e.b,n=0,e=e.length;n<e;){var r=n++;this.b.push(t[r])}},addByte:function(e){this.b.push(e)},b:null,__class__:Cr};var kr=function(){};Er.BytesUtil=kr,kr.__name__=["BytesUtil"],kr.byteArrayToBytes=function(e,t){for(var n=new Cr,r=0;r<e.length;){var i=e[r];++r;if(255<i||0>i)throw"Value out of range";n.b.push(i)}return null!=t&&0<t?kr.nullPad(n.getBytes(),t):n.getBytes()},kr.byteToHex=function(e){return Yr.hex(e&255,2).toLowerCase()},kr.byte32ToHex=function(e){return Yr.hex(e&255,2).toLowerCase()},kr.bytesToInt32LE=function(e){return Ir.unpackLE(kr.nullPad(e,4))},kr.cleanHexFormat=function(e){return e=Yr.replace(e,":",""),e=e.split("|").join(""),e=(new Or("([\\s]*)","g")).replace(e,""),Yr.startsWith(e,"0x")&&(e=Fr.substr(e,2,null)),1==(e.length&1)&&(e="0"+e),e.toLowerCase()},kr.encodeToBase=function(e,t){return(new Xn(Nr.ofString(t))).encodeBytes(e)},kr.eq=function(e,t){if(e.length!=t.length)return!1;for(var n=e.length,r=0;r<n;){var i=r++;if(e.b[i]!=t.b[i])return!1}return!0},kr.hexDump=function(e,t){return kr.toHex(e,t)},kr.int32ToBytesLE=function(e){return Ir.packLE(e)},kr.int32ArrayToBytes=function(e,t){for(var n=new Cr,r=0;r<e.length;){var i=e[r];++r,i&=-1;if(255<i||0>i)throw"Value out of range";n.b.push(i)}return null!=t&&0<t?kr.nullPad(n.getBytes(),t):n.getBytes()},kr.intArrayToBytes=function(e,t){for(var n=new Cr,r=0;r<e.length;){var i=e[r];++r;if(255<i||0>i)throw"Value out of range";n.b.push(i)}return null!=t&&0<t?kr.nullPad(n.getBytes(),t):n.getBytes()},kr.nullBytes=function(e){for(var t=Nr.alloc(e),n=0;n<e;){var r=n++;t.b[r]=0}return t},kr.nullPad=function(e,t){var n=t-e.length%t;if(n==t)return e;var r=new Cr;r.add(e);for(var i=0;i<n;)i++,r.b.push(0);return r.getBytes()},kr.ofIntArray=function(e){for(var t=new Cr,n=0,r=e.length;n<r;){var i=n++;t.b.push(kr.cleanValue(e[i]))}return t.getBytes()},kr.ofHex=function(e){for(var e=kr.cleanHexFormat(e),t=new Cr,n=e.length/2|0,r=0;r<n;){var i=r++,i=Fr.substr(e,2*i,2),i=Qr.parseInt("0x"+i);if(255<i)throw"error";t.b.push(i)}return t.getBytes()},kr.toHex=function(e,t){null==t&&(t=" ");for(var n=new Gr,r=e.length,i=!0,s=0;s<r;){var o=s++;i?i=!1:n.b+=Qr.string(t),n.b+=Qr.string(Yr.hex(e.b[o],2).toLowerCase())}return Yr.rtrim(n.b)},kr.unNullPad=function(e){for(var t=e.length-1;0<t--&&0==e.b[t];);if(0==t&&0==e.b[0])return(new Cr).getBytes();t++;var n=Nr.alloc(t);return n.blit(0,e,0,t),n},kr.cleanValue=function(e){if(0>e){if(-128>e)throw"not a byte";e=e&255|128}if(255<e)throw"not a byte";return e};var Lr=function(){};Er.Constants=Lr,Lr.__name__=["Constants"];var Ar=function(){};Er.DateTools=Ar,Ar.__name__=["DateTools"],Ar.__format_get=function(e,t){return function(n){switch(t){case"%":n="%";break;case"a":n=Ar.WEEKDAYS_ABBREV[e.getDay()];break;case"b":n=Ar.MONTHS_ABBREV[e.getMonth()];break;case"C":n=Yr.lpad(Qr.string(e.getFullYear()/100|0),"0",2);break;case"d":n=Yr.lpad(Qr.string(e.getDate()),"0",2);break;case"D":n=Ar.__format(e,"%m/%d/%y");break;case"e":n=Qr.string(e.getDate());break;case"H":case"k":n=Yr.lpad(Qr.string(e.getHours()),"H"==t?"0":" ",2);break;case"I":case"l":n=function(){var n=e.getHours()%12;return Yr.lpad(Qr.string(0==n?12:n),"I"==t?"0":" ",2)}(n);break;case"m":n=Yr.lpad(Qr.string(e.getMonth()+1),"0",2);break;case"M":n=Yr.lpad(Qr.string(e.getMinutes()),"0",2);break;case"n":n="\n";break;case"p":n=11<e.getHours()?"PM":"AM";break;case"r":n=Ar.__format(e,"%I:%M:%S %p");break;case"R":n=Ar.__format(e,"%H:%M");break;case"s":n=Qr.string(e.getTime()/1e3|0);break;case"S":n=Yr.lpad(Qr.string(e.getSeconds()),"0",2);break;case"t":n="	";break;case"T":n=Ar.__format(e,"%H:%M:%S");break;case"u":n=function(){var t=e.getDay();return 0==t?"7":Qr.string(t)}(n);break;case"w":n=Qr.string(e.getDay());break;case"y":n=Yr.lpad(Qr.string(e.getFullYear()%100),"0",2);break;case"Y":n=Qr.string(e.getFullYear());break;case"z":n=function(){var t=e.getTimezoneOffset(),n=Qr.string(Math.abs(Math.floor(100*(t/60)))|0),t=0>t?!0:!1,n=Yr.lpad(n,"0",4);return t?"-"+n:"+"+n}(n);break;default:throw"Date.format %"+t+"- not implemented yet."}return n}(this)},Ar.__format=function(e,t){for(var n=new Gr,r=0;;){var i=t.indexOf("%",r);if(0>i)break;n.b+=Fr.substr(t,r,i-r),n.b+=Qr.string(Ar.__format_get(e,Fr.substr(t,i+1,1))),r=i+2}return n.b+=Fr.substr(t,r,t.length-r),n.b},Ar.format=function(e,t){return Ar.__format(e,t)},Ar.delta=function(e,t){var n=new Date;return n.setTime(e.getTime()+t),n},Ar.getMonthDays=function(e){var t=e.getMonth(),e=e.getFullYear();return 1!=t?Ar.DAYS_OF_MONTH[t]:0==e%4&&0!=e%100||0==e%400?29:28},Ar.seconds=function(e){return 1e3*e},Ar.minutes=function(e){return 6e4*e},Ar.hours=function(e){return 36e5*e},Ar.days=function(e){return 864e5*e},Ar.parse=function(e){var t=e/1e3,n=t/60,r=n/60;return{ms:e%1e3,seconds:t%60|0,minutes:n%60|0,hours:r%24|0,days:r/24|0}},Ar.make=function(e){return e.ms+1e3*(e.seconds+60*(e.minutes+60*(e.hours+24*e.days)))};var Or=function(e,t){t=t.split("u").join(""),this.r=RegExp(e,t)};Er.EReg=Or,Or.__name__=["EReg"],Or.prototype={customReplace:function(e,t){for(var n=new Gr;this.match(e);)n.b+=Qr.string(this.matchedLeft()),n.b+=Qr.string(t(this)),e=this.matchedRight();return n.b+=Qr.string(e),n.b},replace:function(e,t){return e.replace(this.r,t)},split:function(e){return e.replace(this.r,"#__delim__#").split("#__delim__#")},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matchedRight:function(){if(null==this.r.m)throw"No string matched";if(null==this.r.r){var e=this.r.m.index+this.r.m[0].length;return this.r.s.substr(e,this.r.s.length-e)}return this.r.r},matchedLeft:function(){if(null==this.r.m)throw"No string matched";return null==this.r.l?this.r.s.substr(0,this.r.m.index):this.r.l},matched:function(e){if(null!=this.r.m&&0<=e&&e<this.r.m.length)return e=this.r.m[e],e;throw"EReg::matched"},match:function(e){return this.r.m=this.r.exec(e),this.r.s=e,this.r.l=RegExp.leftContext,this.r.r=RegExp.rightContext,null!=this.r.m},r:null,__class__:Or};var Mr=function(){};Er.Dates=Mr,Mr.__name__=["Dates"],Mr.format=function(e,t,n,r){return Mr.formatf(t,n,r)(e)},Mr.formatf=function(e,t,n){t=xn.FormatParams.params(e,t,"D"),e=t.shift();switch(e){case"D":return function(e){return xn.FormatDate.date(e,n)};case"DS":return function(e){return xn.FormatDate.dateShort(e,n)};case"DST":return function(e){return xn.FormatDate.dateShort(e,n)+" "+xn.FormatDate.time(e,n)};case"DSTS":return function(e){return xn.FormatDate.dateShort(e,n)+" "+xn.FormatDate.timeShort(e,n)};case"DTS":return function(e){return xn.FormatDate.date(e,n)+" "+xn.FormatDate.timeShort(e,n)};case"Y":return function(e){return xn.FormatDate.year(e,n)};case"YM":return function(e){return xn.FormatDate.yearMonth(e,n)};case"M":return function(e){return xn.FormatDate.month(e,n)};case"MN":return function(e){return xn.FormatDate.monthName(e,n)};case"MS":return function(e){return xn.FormatDate.monthNameShort(e,n)};case"MD":return function(e){return xn.FormatDate.monthDay(e,n)};case"WD":return function(e){return xn.FormatDate.weekDay(e,n)};case"WDN":return function(e){return xn.FormatDate.weekDayName(e,n)};case"WDS":return function(e){return xn.FormatDate.weekDayNameShort(e,n)};case"R":return function(e){return xn.FormatDate.dateRfc(e,n)};case"DT":return function(e){return xn.FormatDate.dateTime(e,n)};case"U":return function(e){return xn.FormatDate.universal(e,n)};case"S":return function(e){return xn.FormatDate.sortable(e,n)};case"T":return function(e){return xn.FormatDate.time(e,n)};case"TS":return function(e){return xn.FormatDate.timeShort(e,n)};case"C":var r=t[0];return null==r?function(e){return xn.FormatDate.date(e,n)}:function(e){return xn.FormatDate.format(r,e,n,null!=t[1]?"true"==t[1]:!0)};default:throw new Tn.Error("Unsupported date format: {0}",null,e,{fileName:"Dates.hx",lineNumber:71,className:"Dates",methodName:"formatf"})}},Mr.interpolate=function(e,t,n,r){return Mr.interpolatef(t,n,r)(e)},Mr.interpolatef=function(e,t,n){var r=Hr.interpolatef(e.getTime(),t.getTime(),n);return function(e){var t=new Date;return t.setTime(r(e)),t}},Mr.snap=function(e,t,n){null==n&&(n=0);if(0>n)switch(t){case"second":return 1e3*Math.floor(e/1e3);case"minute":return 6e4*Math.floor(e/6e4);case"hour":return 36e5*Math.floor(e/36e5);case"day":return t=function(){var t=new Date;return t.setTime(e),t}(this),(new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0)).getTime();case"week":return 6048e5*Math.floor(e/6048e5);case"month":return t=function(){var t=new Date;return t.setTime(e),t}(this),(new Date(t.getFullYear(),t.getMonth(),1,0,0,0)).getTime();case"year":return t=function(){var t=new Date;return t.setTime(e),t}(this),(new Date(t.getFullYear(),0,1,0,0,0)).getTime();default:return 0}else if(0<n)switch(t){case"second":return 1e3*Math.ceil(e/1e3);case"minute":return 6e4*Math.ceil(e/6e4);case"hour":return 36e5*Math.ceil(e/36e5);case"day":return t=function(){var t=new Date;return t.setTime(e),t}(this),(new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,0,0,0)).getTime();case"week":return 6048e5*Math.ceil(e/6048e5);case"month":return t=function(){var t=new Date;return t.setTime(e),t}(this),(new Date(t.getFullYear(),t.getMonth()+1,1,0,0,0)).getTime();case"year":return t=function(){var t=new Date;return t.setTime(e),t}(this),(new Date(t.getFullYear()+1,0,1,0,0,0)).getTime();default:return 0}else switch(t){case"second":return 1e3*Math.round(e/1e3);case"minute":return 6e4*Math.round(e/6e4);case"hour":return 36e5*Math.round(e/36e5);case"day":return t=function(){var t=new Date;return t.setTime(e),t}(this),n=12<=t.getHours()?1:0,(new Date(t.getFullYear(),t.getMonth(),t.getDate()+n,0,0,0)).getTime();case"week":return 6048e5*Math.round(e/6048e5);case"month":return t=function(){var t=new Date;return t.setTime(e),t}(this),n=t.getDate()>Math.round(Ar.getMonthDays(t)/2)?1:0,(new Date(t.getFullYear(),t.getMonth()+n,1,0,0,0)).getTime();case"year":return t=function(){var t=new Date;return t.setTime(e),t}(this),n=e>(new Date(t.getFullYear(),6,2,0,0,0)).getTime()?1:0,(new Date(t.getFullYear()+n,0,1,0,0,0)).getTime();default:return 0}},Mr.snapToWeekDay=function(e,t){var n=new Date;n.setTime(e);var n=n.getDay(),r=0;switch(t.toLowerCase()){case"sunday":r=0;break;case"monday":r=1;break;case"tuesday":r=2;break;case"wednesday":r=3;break;case"thursday":r=4;break;case"friday":r=5;break;case"saturday":r=6;break;default:throw new Tn.Error("unknown week day '{0}'",null,t,{fileName:"Dates.hx",lineNumber:186,className:"Dates",methodName:"snapToWeekDay"})}return e-864e5*((n-r)%7)},Mr.canParse=function(e){return Mr._reparse.match(e)},Mr.parse=function(e){var e=e.split("."),t=Fr.strDate(Yr.replace(e[0],"T"," "));if(1<e.length){var n=new Date;n.setTime(t.getTime()+Qr.parseInt(e[1])),t=n}return t},Mr.compare=function(e,t){return Hr.compare(e.getTime(),t.getTime())};var _r=function(){};Er.Dynamics=_r,_r.__name__=["Dynamics"],_r.format=function(e,t,n,r,i){return _r.formatf(t,n,r,i)(e)},_r.formatf=function(e,t,n,r){return null==n&&(n="null"),function(i){var s=ti["typeof"](i);switch(s[1]){case 0:return n;case 1:return zr.format(i,e,t,r);case 2:return Hr.format(i,e,t,r);case 3:return Tr.format(i,e,t,r);case 6:return s=s[2],s==String?Zr.formatOne(i,e,t,r):s==Array?xr.format(i,e,t,r):s==Date?Mr.format(i,e,t,r):Jr.format(i,e,t,r);case 4:return Jr.format(i,e,t,r);case 5:return"function()";default:throw new Tn.Error("Unsupported type format: {0}",null,ti["typeof"](i),{fileName:"Dynamics.hx",lineNumber:44,className:"Dynamics",methodName:"formatf"})}}},_r.interpolate=function(e,t,n,r){return _r.interpolatef(t,n,r)(e)},_r.interpolatef=function(e,t,n){var r=ti["typeof"](e),i=ti["typeof"](t);if((!ar.__instanceof(e,us)&&!ar.__instanceof(e,ss)||!ar.__instanceof(t,us)&&!ar.__instanceof(t,ss))&&!ti.enumEq(r,i))throw new Tn.Error("arguments a ({0}) and b ({0}) have different types",[e,t],null,{fileName:"Dynamics.hx",lineNumber:59,className:"Dynamics",methodName:"interpolatef"});switch(r[1]){case 0:return function(){return null};case 1:return ar.__instanceof(t,ss)?zr.interpolatef(e,t,n):Hr.interpolatef(e,t,n);case 2:return Hr.interpolatef(e,t,n);case 3:return Tr.interpolatef(e,t,n);case 4:return Jr.interpolatef(e,t,n);case 6:switch(r=ti.getClassName(r[2]),r){case"String":return Zr.interpolatef(e,t,n);case"Date":return Mr.interpolatef(e,t,n);default:throw new Tn.Error("cannot interpolate on instances of {0}",null,r,{fileName:"Dynamics.hx",lineNumber:77,className:"Dynamics",methodName:"interpolatef"})};default:throw new Tn.Error("cannot interpolate on functions/enums/unknown",null,null,{fileName:"Dynamics.hx",lineNumber:79,className:"Dynamics",methodName:"interpolatef"})}},_r.string=function(e){var t=ti["typeof"](e);switch(t[1]){case 0:return"null";case 1:return zr.format(e);case 2:return Hr.format(e);case 3:return Tr.format(e);case 4:for(var t=Kr.fields(e),n=[],r=0;r<t.length;){var i=t[r];++r,n.push(i+" : "+_r.string(Kr.field(e,i)))}return"{"+n.join(", ")+"}";case 6:switch(ti.getClassName(t[2])){case"Array":return xr.string(e);case"String":return 0>e.indexOf('"')?'"'+e+'"':0>e.indexOf("'")?"'"+e+"'":'"'+Yr.replace(e,'"','\\"')+'"';case"Date":return Mr.format(e);default:return Qr.string(e)};case 7:return Pr.string(e);case 8:return"<unknown>";case 5:return"<function>"}},_r.compare=function(e,t){if(null==e&&null==t)return 0;if(null==e)return-1;if(null==t)return 1;var n=ti["typeof"](e);switch(n[1]){case 1:case 2:return e<t?-1:e>t?1:0;case 3:return e==t?0:e?-1:1;case 4:return Jr.compare(e,t);case 6:switch(ti.getClassName(n[2])){case"Array":return xr.compare(e,t);case"String":return Zr.compare(e,t);case"Date":return Hr.compare(e.getTime(),t.getTime());default:return Zr.compare(Qr.string(e),Qr.string(t))};case 7:return Pr.compare(e,t);default:return 0}},_r.comparef=function(e){e=ti["typeof"](e);switch(e[1]){case 1:case 2:return Hr.compare;case 3:return Tr.compare;case 4:return Jr.compare;case 6:switch(ti.getClassName(e[2])){case"Array":return xr.compare;case"String":return Zr.compare;case"Date":return Mr.compare;default:return function(e,t){return Zr.compare(Qr.string(e),Qr.string(t))}};case 7:return Pr.compare;default:return _r.compare}},_r.clone=function(e,t){null==t&&(t=!1);var n=ti["typeof"](e);switch(n[1]){case 0:return null;case 1:case 2:case 3:case 7:case 8:case 5:return e;case 4:var r={};return Jr.copyTo(e,r),r;case 6:switch(n=n[2],ti.getClassName(n)){case"Array":r=[];for(n=0;n<e.length;){var i=e[n];++n,r.push(_r.clone(i))}return r;case"String":case"Date":return e;default:if(t){r=ti.createEmptyInstance(n),n=0;for(i=Kr.fields(e);n<i.length;){var s=i[n];++n,r[s]=_r.clone(Kr.field(e,s))}return r}return e}}},_r.same=function(e,t){var n=ni.typeName(e),r=ni.typeName(t);if(n!=r)return!1;n=ti["typeof"](e);switch(n[1]){case 2:return Hr.equals(e,t);case 0:case 1:case 3:return e==t;case 5:return Kr.compareMethods(e,t);case 6:n=ti.getClassName(n[2]),r=ti.getClassName(ti.getClass(t));if(n!=r||ar.__instanceof(e,String)&&e!=t)return!1;if(ar.__instanceof(e,Array)){var r=e,i=t;if(r.length!=i.length)return!1;for(var s=0,n=r.length;s<n;){var o=s++;if(!_r.same(r[o],i[o]))return!1}return!0}if(ar.__instanceof(e,Date))return e.getTime()==t.getTime();if(ar.__instanceof(e,Br)||ar.__instanceof(e,qr)){r=Xr.array(e.keys()),n=Xr.array(t.keys());if(r.length!=n.length)return!1;for(n=0;n<r.length;)if(s=r[n],++n,!t.exists(s)||!_r.same(e.get(s),t.get(s)))return!1;return!0}n=!1;if((n=Xr.isIterator(e))||Wr.isIterable(e)){r=n?Xr.array(e):Xr.array(br(e)()),i=n?Xr.array(t):Xr.array(br(t)());if(r.length!=i.length)return!1;s=0;for(n=r.length;s<n;)if(o=s++,!_r.same(r[o],i[o]))return!1;return!0}o=ti.getInstanceFields(ti.getClass(e));for(n=0;n<o.length;)if(s=o[n],++n,r=Kr.field(e,s),!Kr.isFunction(r)&&(i=Kr.field(t,s),!_r.same(r,i)))return!1;return!0;case 7:n=ti.getEnumName(n[2]),r=ti.getEnum(t),r=ti.getEnumName(r);if(n!=r||e[1]!=t[1])return!1;r=e.slice(2),i=t.slice(2),s=0;for(n=r.length;s<n;)if(o=s++,!_r.same(r[o],i[o]))return!1;return!0;case 4:for(var o=Kr.fields(e),u=Kr.fields(t),n=0;n<o.length;){s=o[n],++n,Fr.remove(u,s);if(!Kr.hasField(t,s))return!1;r=Kr.field(e,s);if(!Kr.isFunction(r)&&(i=Kr.field(t,s),!_r.same(r,i)))return!1}if(0<u.length)return!1;if((n=Xr.isIterator(e))||Wr.isIterable(e)){if(n&&!Xr.isIterator(t)||!n&&!Wr.isIterable(t))return!1;r=n?Xr.array(e):Xr.array(br(e)()),i=n?Xr.array(t):Xr.array(br(t)());if(r.length!=i.length)return!1;s=0;for(n=r.length;s<n;)if(o=s++,!_r.same(r[o],i[o]))return!1}return!0;case 8:throw"Unable to compare two unknown types"}throw new Tn.Error("Unable to compare values: {0} and {1}",[e,t],null,{fileName:"Dynamics.hx",lineNumber:368,className:"Dynamics",methodName:"same"})},_r.number=function(e){return Number(e)};var Dr=function(){};Er.DynamicsT=Dr,Dr.__name__=["DynamicsT"],Dr.toHash=function(e){var t=new Br;return Dr.copyToHash(e,t)},Dr.copyToHash=function(e,t){for(var n=0,r=Kr.fields(e);n<r.length;){var i=r[n];++n,t.set(i,Kr.field(e,i))}return t};var Pr=function(){};Er.Enums=Pr,Pr.__name__=["Enums"],Pr.string=function(e){for(var t=e[0],n=[],r=0,e=e.slice(2);r<e.length;){var i=e[r];++r,n.push(_r.string(i))}return t+(0==n.length?"":"("+n.join(", ")+")")},Pr.compare=function(e,t){var n;return 0!=(n=e[1]-t[1])?n:xr.compare(e.slice(2),t.slice(2))};var Hr=function(){};Er.Floats=Hr,Hr.__name__=["Floats"],Hr.normalize=function(e){return 0>e?0:1<e?1:e},Hr.clamp=function(e,t,n){return e<t?t:e>n?n:e},Hr.clampSym=function(e,t){return e<-t?-t:e>t?t:e},Hr.range=function(e,t,n,r){null==r&&(r=!1),null==n&&(n=1),null==t&&(t=e,e=0);if((t-e)/n==Math.POSITIVE_INFINITY)throw new Tn.Error("infinite range",null,null,{fileName:"Floats.hx",lineNumber:50,className:"Floats",methodName:"range"});var i=[],s=-1;if(r)if(0>n)for(;(r=e+n*++s)>=t;)i.push(r);else for(;(r=e+n*++s)<=t;)i.push(r);else if(0>n)for(;(r=e+n*++s)>t;)i.push(r);else for(;(r=e+n*++s)<t;)i.push(r);return i},Hr.sign=function(e){return 0>e?-1:1},Hr.abs=function(e){return 0>e?-e:e},Hr.min=function(e,t){return e<t?e:t},Hr.max=function(e,t){return e>t?e:t},Hr.wrap=function(e,t,n){return n=n-t+1,e<t&&(e+=n*((t-e)/n+1)),t+(e-t)%n},Hr.circularWrap=function(e,t){return e%=t,0>e&&(e+=t),e},Hr.interpolate=function(e,t,n,r){return null==n&&(n=1),null==
t&&(t=0),null==r&&(r=Nn.Equations.linear),t+r(e)*(n-t)},Hr.interpolatef=function(e,t,n){null==t&&(t=1),null==e&&(e=0),null==n&&(n=Nn.Equations.linear);var r=t-e;return function(t){return e+n(t)*r}},Hr.interpolateClampf=function(e,t,n){return null==n&&(n=Nn.Equations.linear),function(r,i){var s=i-r;return function(i){return r+n(Hr.clamp(i,e,t))*s}}},Hr.format=function(e,t,n,r){return Hr.formatf(t,n,r)(e)},Hr.formatf=function(e,t,n){var t=xn.FormatParams.params(e,t,"D"),e=t.shift(),r=0<t.length?Qr.parseInt(t[0]):null;switch(e){case"D":return function(e){return xn.FormatNumber.decimal(e,r,n)};case"I":return function(e){return xn.FormatNumber["int"](e,n)};case"C":var i=1<t.length?t[1]:null;return function(e){return xn.FormatNumber.currency(e,i,r,n)};case"P":return function(e){return xn.FormatNumber.percent(e,r,n)};case"M":return function(e){return xn.FormatNumber.permille(e,r,n)};default:throw new Tn.Error("Unsupported number format: {0}",null,e,{fileName:"Floats.hx",lineNumber:152,className:"Floats",methodName:"formatf"})}},Hr.canParse=function(e,t){return null==t&&(t=!1),t?Hr._reparseStrict.match(e):Hr._reparse.match(e)},Hr.parse=function(e){return"+"==Fr.substr(e,0,1)&&(e=Fr.substr(e,1,null)),Qr.parseFloat(e)},Hr.compare=function(e,t){return e<t?-1:e>t?1:0},Hr.isNumeric=function(e){return ar.__instanceof(e,us)||ar.__instanceof(e,ss)},Hr.equals=function(e,t,n){return null==n&&(n=1e-5),Math.isNaN(e)?Math.isNaN(t):Math.isNaN(t)?!1:!Math.isFinite(e)&&!Math.isFinite(t)?0<e==0<t:Math.abs(t-e)<n},Hr.uninterpolatef=function(e,t){return t=1/(t-e),function(n){return(n-e)*t}},Hr.uninterpolateClampf=function(e,t){return t=1/(t-e),function(n){return Hr.clamp((n-e)*t,0,1)}},Hr.round=function(e,t){return null==t&&(t=2),e*=Math.pow(10,t),Math.round(e)/Math.pow(10,t)};var Br=function(){this.h={}};Er.Hash=Br,Br.__name__=["Hash"],Br.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},keys:function(){var e=[],t;for(t in this.h)this.h.hasOwnProperty(t)&&e.push(t.substr(1));return Fr.iter(e)},remove:function(e){return e="$"+e,this.h.hasOwnProperty(e)?(delete this.h[e],!0):!1},exists:function(e){return this.h.hasOwnProperty("$"+e)},get:function(e){return this.h["$"+e]},set:function(e,t){this.h["$"+e]=t},h:null,__class__:Br};var jr=function(){};Er.Hashes=jr,jr.__name__=["Hashes"],jr.entries=function(e){for(var t=[],n=e.keys();n.hasNext();){var r=n.next();t.push({key:r,value:e.get(r)})}return t},jr.toDynamic=function(e){for(var t={},n=e.keys();n.hasNext();){var r=n.next();t[r]=e.get(r)}return t},jr.importObject=function(e,t){return Dr.copyToHash(t,e)},jr.copyTo=function(e,t){for(var n=e.keys();n.hasNext();){var r=n.next();t.set(r,e.get(r))}return t},jr.clone=function(e){var t=new Br;return jr.copyTo(e,t),t},jr.arrayOfKeys=function(e){return Xr.array(e.keys())},jr.setOfKeys=function(e){for(var t=new Cn.Set,e=e.keys();e.hasNext();){var n=e.next();t.add(n)}return t},jr.empty=function(e){return 0==jr.count(e)},jr.count=function(e){for(var t=0,e=e.iterator();e.hasNext();)e.next(),t++;return t},jr.mergef=function(e,t,n){for(var r=t.keys();r.hasNext();){var i=r.next(),s=t.get(i);if(e.exists(i)){var o=e.get(i);e.set(i,n(i,o,s))}else e.set(i,s)}},jr.merge=function(e,t){jr.mergef(e,t,function(e,t,n){return n})},jr.clear=function(e){e.h={},null!=e.h.__proto__&&(e.h.__proto__=null,delete e.h.__proto__)};var Fr=function(){};Er.HxOverrides=Fr,Fr.__name__=["HxOverrides"],Fr.dateStr=function(e){var t=e.getMonth()+1,n=e.getDate(),r=e.getHours(),i=e.getMinutes(),s=e.getSeconds();return e.getFullYear()+"-"+(10>t?"0"+t:""+t)+"-"+(10>n?"0"+n:""+n)+" "+(10>r?"0"+r:""+r)+":"+(10>i?"0"+i:""+i)+":"+(10>s?"0"+s:""+s)},Fr.strDate=function(e){switch(e.length){case 8:var e=e.split(":"),t=new Date;return t.setTime(0),t.setUTCHours(e[0]),t.setUTCMinutes(e[1]),t.setUTCSeconds(e[2]),t;case 10:return e=e.split("-"),new Date(e[0],e[1]-1,e[2],0,0,0);case 19:return e=e.split(" "),t=e[0].split("-"),e=e[1].split(":"),new Date(t[0],t[1]-1,t[2],e[0],e[1],e[2]);default:throw"Invalid date format : "+e}},Fr.cca=function(e,t){var n=e.charCodeAt(t);return n!=n?void 0:n},Fr.substr=function(e,t,n){return null!=t&&0!=t&&null!=n&&0>n?"":(null==n&&(n=e.length),0>t?(t=e.length+t,0>t&&(t=0)):0>n&&(n=e.length+n-t),e.substr(t,n))},Fr.remove=function(e,t){for(var n=0,r=e.length;n<r;){if(e[n]==t)return e.splice(n,1),!0;n++}return!1},Fr.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ir=function(){};Er.I32=Ir,Ir.__name__=["I32"],Ir.B4=function(e){return e>>>24&-1},Ir.B3=function(e){return e>>>16&255},Ir.B2=function(e){return e>>>8&255},Ir.B1=function(e){return e&255},Ir.abs=function(e){return Math.abs(e)|0},Ir.add=function(e,t){return e+t},Ir.alphaFromArgb=function(e){return e>>>24&-1},Ir.and=function(e,t){return e&t},Ir.baseEncode=function(e,t){if(2>t||36<t)throw"radix out of range";for(var n="",r=Math.abs(e)|0;;){var i=r%t,n="0123456789abcdefghijklmnopqrstuvwxyz".charAt(i&-1)+n,r=(r-i)/t|0;if(0==r)break}return 0>e?"-"+n:n},Ir.complement=function(e){return~e},Ir.compare=function(e,t){return e-t},Ir.div=function(e,t){return e/t|0},Ir.encodeBE=function(e){var t=new Cr;return t.b.push(e>>>24&-1),t.b.push(e>>>16&255),t.b.push(e>>>8&255),t.b.push(e&255),t.getBytes()},Ir.encodeLE=function(e){var t=new Cr;return t.b.push(e&255),t.b.push(e>>>8&255),t.b.push(e>>>16&255),t.b.push(e>>>24&-1),t.getBytes()},Ir.decodeBE=function(e,t){null==t&&(t=0);var n=e.b[t+3],r=e.b[t+2],i=e.b[t+1],s=e.b[t];return n+(r<<8)+(i<<16)+(s<<24)},Ir.decodeLE=function(e,t){null==t&&(t=0);var n=e.b[t],r=e.b[t+1],i=e.b[t+2],s=e.b[t+3];return n+(r<<8)+(i<<16)+(s<<24)},Ir.eq=function(e,t){return e==t},Ir.gt=function(e,t){return e>t},Ir.gteq=function(e,t){return e>=t},Ir.lt=function(e,t){return e<t},Ir.lteq=function(e,t){return e<=t},Ir.make=function(e,t){return(e<<16)+t},Ir.makeColor=function(e,t){return e<<24|t&16777215},Ir.mod=function(e,t){return e%t},Ir.mul=function(e,t){return e*t},Ir.neg=function(e){return-e},Ir.ofInt=function(e){return e},Ir.or=function(e,t){return e|t},Ir.packBE=function(e){for(var t=new Cr,n=0,r=e.length;n<r;){var i=n++;t.b.push(e[i]>>>24&-1),t.b.push(e[i]>>>16&255),t.b.push(e[i]>>>8&255),t.b.push(e[i]&255)}return t.getBytes()},Ir.packLE=function(e){for(var t=new Cr,n=0,r=e.length;n<r;){var i=n++;t.b.push(e[i]&255),t.b.push(e[i]>>>8&255),t.b.push(e[i]>>>16&255),t.b.push(e[i]>>>24&-1)}return t.getBytes()},Ir.rgbFromArgb=function(e){return e&16777215},Ir.sub=function(e,t){return e-t},Ir.shl=function(e,t){return e<<t},Ir.shr=function(e,t){return e>>t},Ir.toColor=function(e){return{alpha:e>>>24&-1,color:e&16777215}},Ir.toFloat=function(e){return 1*e},Ir.toInt=function(e){return e&-1},Ir.toNativeArray=function(e){return e},Ir.unpackLE=function(e){if(null==e||0==e.length)return[];if(0!=e.length%4)throw"Buffer not multiple of 4 bytes";for(var t=[],n=0,r=0,i=e.length;n<i;)t[r]=Ir.decodeLE(e,n),n+=4,r++;return t},Ir.unpackBE=function(e){if(null==e||0==e.length)return[];if(0!=e.length%4)throw"Buffer not multiple of 4 bytes";for(var t=[],n=0,r=0;n<e.length;)t[r]=Ir.decodeBE(e,n),n+=4,r++;return t},Ir.ushr=function(e,t){return e>>>t},Ir.xor=function(e,t){return e^t};var qr=function(){this.h={}};Er.IntHash=qr,qr.__name__=["IntHash"],qr.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref[this.it.next()]}}},keys:function(){var e=[],t;for(t in this.h)this.h.hasOwnProperty(t)&&e.push(t|0);return Fr.iter(e)},remove:function(e){return this.h.hasOwnProperty(e)?(delete this.h[e],!0):!1},exists:function(e){return this.h.hasOwnProperty(e)},get:function(e){return this.h[e]},set:function(e,t){this.h[e]=t},h:null,__class__:qr};var Rr=function(){};Er.IntHashes=Rr,Rr.__name__=["IntHashes"],Rr.empty=function(e){return 0==Rr.count(e)},Rr.count=function(e){for(var t=0,e=e.iterator();e.hasNext();)e.next(),t++;return t},Rr.clear=function(e){e.h={},null!=e.h.__proto__&&(e.h.__proto__=null,delete e.h.__proto__)};var Ur=function(e,t){this.min=e,this.max=t};Er.IntIter=Ur,Ur.__name__=["IntIter"],Ur.prototype={max:null,min:null,__class__:Ur};var zr=function(){};Er.Ints=zr,zr.__name__=["Ints"],zr.range=function(e,t,n){null==n&&(n=1),null==t&&(t=e,e=0);if((t-e)/n==Math.POSITIVE_INFINITY)throw new Tn.Error("infinite range",null,null,{fileName:"Ints.hx",lineNumber:19,className:"Ints",methodName:"range"});var r=[],i=-1,s;if(0>n)for(;(s=e+n*++i)>t;)r.push(s);else for(;(s=e+n*++i)<t;)r.push(s);return r},zr.sign=function(e){return 0>e?-1:1},zr.abs=function(e){return 0>e?-e:e},zr.min=function(e,t){return e<t?e:t},zr.max=function(e,t){return e>t?e:t},zr.wrap=function(e,t,n){return Math.round(Hr.wrap(e,t,n))},zr.clamp=function(e,t,n){return e<t?t:e>n?n:e},zr.clampSym=function(e,t){return e<-t?-t:e>t?t:e},zr.interpolate=function(e,t,n,r){return null==n&&(n=100),null==t&&(t=0),null==r&&(r=Nn.Equations.linear),Math.round(t+r(e)*(n-t))},zr.interpolatef=function(e,t,n){null==t&&(t=1),null==e&&(e=0),null==n&&(n=Nn.Equations.linear);var r=t-e;return function(t){return Math.round(e+n(t)*r)}},zr.format=function(e,t,n,r){return zr.formatf(t,n,r)(e)},zr.formatf=function(e,t,n){return Hr.formatf(null,xn.FormatParams.params(e,t,"I"),n)},zr.canParse=function(e){return zr._reparse.match(e)},zr.parse=function(e){return"+"==Fr.substr(e,0,1)&&(e=Fr.substr(e,1,null)),Qr.parseInt(e)},zr.compare=function(e,t){return e-t};var Wr=function(){};Er.Iterables=Wr,Wr.__name__=["Iterables"],Wr.count=function(e){return Xr.count(br(e)())},Wr.indexOf=function(e,t,n){return Xr.indexOf(br(e)(),t,n)},Wr.contains=function(e,t,n){return Xr.contains(br(e)(),t,n)},Wr.array=function(e){return Xr.array(br(e)())},Wr.join=function(e,t){return null==t&&(t=", "),Xr.array(br(e)()).join(t)},Wr.map=function(e,t){return Xr.map(br(e)(),t)},Wr.each=function(e,t){return Xr.each(br(e)(),t)},Wr.filter=function(e,t){return Xr.filter(br(e)(),t)},Wr.reduce=function(e,t,n){return Xr.reduce(br(e)(),t,n)},Wr.random=function(e){return xr.random(Xr.array(br(e)()))},Wr.any=function(e,t){return Xr.any(br(e)(),t)},Wr.all=function(e,t){return Xr.all(br(e)(),t)},Wr.last=function(e){return Xr.last(br(e)())},Wr.lastf=function(e,t){return Xr.lastf(br(e)(),t)},Wr.first=function(e){return br(e)().next()},Wr.firstf=function(e,t){return Xr.firstf(br(e)(),t)},Wr.order=function(e,t){return xr.order(Xr.array(br(e)()),t)},Wr.isIterable=function(e){var t=Kr.isObject(e)&&null==ti.getClass(e)?Kr.fields(e):ti.getInstanceFields(ti.getClass(e));return Vr.has(t,"iterator")?Kr.isFunction(Kr.field(e,"iterator")):!1};var Xr=function(){};Er.Iterators=Xr,Xr.__name__=["Iterators"],Xr.count=function(e){for(var t=0;e.hasNext();)e.next(),t++;return t},Xr.indexOf=function(e,t,n){null==n&&(n=function(e){return t==e});for(var r=0;e.hasNext();){var i=e.next();if(n(i))return r;r++}return-1},Xr.contains=function(e,t,n){for(null==n&&(n=function(e){return t==e});e.hasNext();){var r=e.next();if(n(r))return!0}return!1},Xr.array=function(e){for(var t=[];e.hasNext();){var n=e.next();t.push(n)}return t},Xr.join=function(e,t){return null==t&&(t=", "),Xr.array(e).join(t)},Xr.map=function(e,t){for(var n=[],r=0;e.hasNext();){var i=e.next();n.push(t(i,r++))}return n},Xr.each=function(e,t){for(var n=0;e.hasNext();){var r=e.next();t(r,n++)}},Xr.filter=function(e,t){for(var n=[];e.hasNext();){var r=e.next();t(r)&&n.push(r)}return n},Xr.reduce=function(e,t,n){for(var r=0;e.hasNext();)var i=e.next(),n=t(n,i,r++);return n},Xr.random=function(e){return xr.random(Xr.array(e))},Xr.any=function(e,t){for(;e.hasNext();){var n=e.next();if(t(n))return!0}return!1},Xr.all=function(e,t){for(;e.hasNext();){var n=e.next();if(!t(n))return!1}return!0},Xr.last=function(e){for(var t=null;e.hasNext();)t=e.next();return t},Xr.lastf=function(e,t){var n=Xr.array(e);return n.reverse(),xr.lastf(n,t)},Xr.first=function(e){return e.next()},Xr.firstf=function(e,t){for(;e.hasNext();){var n=e.next();if(t(n))return n}return null},Xr.order=function(e,t){return xr.order(Xr.array(e),t)},Xr.isIterator=function(e){var t=Kr.isObject(e)&&null==ti.getClass(e)?Kr.fields(e):ti.getInstanceFields(ti.getClass(e));return!Vr.has(t,"next")||!Vr.has(t,"hasNext")?!1:Kr.isFunction(Kr.field(e,"next"))&&Kr.isFunction(Kr.field(e,"hasNext"))};var Vr=function(){};Er.Lambda=Vr,Vr.__name__=["Lambda"],Vr.has=function(e,t,n){if(null==n){for(n=br(e)();n.hasNext();)if(e=n.next(),e==t)return!0}else for(var r=br(e)();r.hasNext();)if(e=r.next(),n(e,t))return!0;return!1};var $r=function(){};Er.List=$r,$r.__name__=["List"],$r.prototype={iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var e=this.h[0];return this.h=this.h[1],e}}},h:null,__class__:$r};var Jr=function(){};Er.Objects=Jr,Jr.__name__=["Objects"],Jr.field=function(e,t,n){return Kr.hasField(e,t)?Kr.field(e,t):n},Jr.keys=function(e){return Kr.fields(e)},Jr.values=function(e){for(var t=[],n=0,r=Kr.fields(e);n<r.length;){var i=r[n];++n,t.push(Kr.field(e,i))}return t},Jr.entries=function(e){for(var t=[],n=0,r=Kr.fields(e);n<r.length;){var i=r[n];++n,t.push({key:i,value:Kr.field(e,i)})}return t},Jr.each=function(e,t){for(var n=0,r=Kr.fields(e);n<r.length;){var i=r[n];++n,t(i,Kr.field(e,i))}},Jr.map=function(e,t){for(var n=[],r=0,i=Kr.fields(e);r<i.length;){var s=i[r];++r,n.push(t(s,Kr.field(e,s)))}return n},Jr["with"]=function(e,t){return t(e),e},Jr.toHash=function(e){var t=new Br;return Jr.copyToHash(e,t)},Jr.copyToHash=function(e,t){for(var n=0,r=Kr.fields(e);n<r.length;){var i=r[n];++n,t.set(i,Kr.field(e,i))}return t},Jr.interpolate=function(e,t,n,r){return Jr.interpolatef(t,n,r)(e)},Jr.interpolatef=function(e,t){for(var n={},r={},i=Kr.fields(e),s=0;s<i.length;){var o=i[s];++s;if(Kr.hasField(t,o)){var u=Kr.field(e,o);n[o]=_r.interpolatef(u,Kr.field(t,o))}else r[o]=Kr.field(e,o)}i=Kr.fields(t);for(s=0;s<i.length;)o=i[s],++s,Kr.hasField(e,o)||(r[o]=Kr.field(t,o));return function(e){for(var t=0,i=Kr.fields(n);t<i.length;){var s=i[t];++t,r[s]=Kr.field(n,s).apply(n,[e])}return r}},Jr.copyTo=function(e,t){for(var n=0,r=Kr.fields(e);n<r.length;){var i=r[n];++n;var s=_r.clone(Kr.field(e,i)),o=Kr.field(t,i);Kr.isObject(s)&&null==ti.getClass(s)&&Kr.isObject(o)&&null==ti.getClass(o)?Jr.copyTo(s,o):t[i]=s}return t},Jr.clone=function(e){return Jr.copyTo(e,{})},Jr.mergef=function(e,t,n){for(var r=0,i=Kr.fields(t);r<i.length;){var s=i[r];++r;var o=Kr.field(t,s);if(Kr.hasField(e,s)){var u=Kr.field(e,s);e[s]=n(s,u,o)}else e[s]=o}},Jr.merge=function(e,t){Jr.mergef(e,t,function(e,t,n){return n})},Jr._flatten=function(e,t,n,r,i){for(var s=0,o=Kr.fields(e);s<o.length;){var u=o[s];++s;var a=Jr.clone(t),f=Kr.field(e,u);a.fields.push(u),Kr.isObject(f)&&null==ti.getClass(f)&&(0==r||i+1<r)?Jr._flatten(f,a,n,r,i+1):(a.value=f,n.push(a))}},Jr.flatten=function(e,t){null==t&&(t=0);for(var n=[],r=0,i=Kr.fields(e);r<i.length;){var s=i[r];++r;var o=Kr.field(e,s);Kr.isObject(o)&&null==ti.getClass(o)&&1!=t?Jr._flatten(o,{fields:[s],value:null},n,t,1):n.push({fields:[s],value:o})}return n},Jr.compare=function(e,t){var n,r;if(0!=(n=xr.compare(r=Kr.fields(e),Kr.fields(t))))return n;for(var i=0;i<r.length;)if(n=r[i],++i,0!=(n=_r.compare(Kr.field(e,n),Kr.field(t,n))))return n;return 0},Jr.addFields=function(e,t,n){for(var r=0,i=t.length;r<i;){var s=r++;Jr.addField(e,t[s],n[s])}return e},Jr.addField=function(e,t,n){return e[t]=n,e},Jr.format=function(e,t,n,r){return Jr.formatf(t,n,r)(e)},Jr.formatf=function(e,t,n){t=xn.FormatParams.params(e,t,"R"),e=t.shift();switch(e){case"O":return function(e){return Qr.string(e)};case"R":return function(e){for(var t=[],r=0,i=Kr.fields(e);r<i.length;){var s=i[r];++r,t.push(s+":"+_r.format(Kr.field(e,s),null,null,null,n))}return"{"+t.join(",")+"}"};default:throw new Tn.Error("Unsupported number format: {0}",null,e,{fileName:"Objects.hx",lineNumber:242,className:"Objects",methodName:"formatf"})}};var Kr=function(){};Er.Reflect=Kr,Kr.__name__=["Reflect"],Kr.hasField=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Kr.field=function(e,t){var n=null;try{n=e[t]}catch(r){}return n},Kr.fields=function(e){var t=[];if(null!=e){var n=Object.prototype.hasOwnProperty,r;for(r in e)n.call(e,r)&&t.push(r)}return t},Kr.isFunction=function(e){return"function"==typeof e&&!e.__name__&&!e.__ename__},Kr.compareMethods=function(e,t){return e==t?!0:!Kr.isFunction(e)||!Kr.isFunction(t)?!1:e.scope==t.scope&&e.method==t.method&&null!=e.method},Kr.isObject=function(e){if(null==e)return!1;var t=typeof e;return"string"==t||"object"==t&&!e.__enum__||"function"==t&&(e.__name__||e.__ename__)},Kr.deleteField=function(e,t){return Kr.hasField(e,t)?(delete e[t],!0):!1},Kr.makeVarArgs=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e(t)}};var Qr=function(){};Er.Std=Qr,Qr.__name__=["Std"],Qr.string=function(e){return ar.__string_rec(e,"")},Qr.parseInt=function(e){var t=parseInt(e,10);return 0==t&&(120==Fr.cca(e,1)||88==Fr.cca(e,1))&&(t=parseInt(e)),isNaN(t)?null:t},Qr.parseFloat=function(e){return parseFloat(e)},Qr.random=function(e){return 0>=e?0:Math.floor(Math.random()*e)};var Gr=function(){this.b=""};Er.StringBuf=Gr,Gr.__name__=["StringBuf"],Gr.prototype={toString:function(){return this.b},addSub:function(e,t,n){this.b+=Fr.substr(e,t,n)},addChar:function(e){this.b+=String.fromCharCode(e)},add:function(e){this.b+=Qr.string(e)},b:null,__class__:Gr};var Yr=function(){};Er.StringTools=Yr,Yr.__name__=["StringTools"],Yr.urlEncode=function(e){return encodeURIComponent(e)},Yr.urlDecode=function(e){return decodeURIComponent(e.split("+").join(" "))},Yr.htmlEscape=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},Yr.htmlUnescape=function(e){return e.split("&gt;").join(">").split("&lt;").join("<").split("&amp;").join("&")},Yr.startsWith=function(e,t){return e.length>=t.length&&Fr.substr(e,0,t.length)==t},Yr.endsWith=function(e,t){var n=t.length,r=e.length;return r>=n&&Fr.substr(e,r-n,n)==t},Yr.isSpace=function(e,t){var n=Fr.cca(e,t);return 9<=n&&13>=n||32==n},Yr.ltrim=function(e){for(var t=e.length,n=0;n<t&&Yr.isSpace(e,n);)n++;return 0<n?Fr.substr(e,n,t-n):e},Yr.rtrim=function(e){for(var t=e.length,n=0;n<t&&Yr.isSpace(e,t-n-1);)n++;return 0<n?Fr.substr(e,0,t-n):e},Yr.trim=function(e){return Yr.ltrim(Yr.rtrim(e))},Yr.rpad=function(e,t,n){for(var r=e.length,i=t.length;r<n;)n-r<i?(e+=Fr.substr(t,0,n-r),r=n):(e+=t,r+=i);return e},Yr.lpad=function(e,t,n){var r="",i=e.length;if(i>=n)return e;for(var s=t.length;i<n;)n-i<s?(r+=Fr.substr(t,0,n-i),i=n):(r+=t,i+=s);return r+e},Yr.replace=function(e,t,n){return e.split(t).join(n)},Yr.hex=function(e,t){var n="";do n="0123456789ABCDEF".charAt(e&15)+n,e>>>=4;while(0<e);if(null!=t)for(;n.length<t;)n="0"+n;return n},Yr.fastCodeAt=function(e,t){return Fr.cca(e,t)},Yr.isEOF=function(e){return e!=e},Yr.replaceRecurse=function(e,t,n){if(0==t.length)return Yr.replace(e,t,n);if(0<=n.indexOf(t))throw"Infinite recursion";for(var e=e.toString(),r=0,i=e.length;r!=i;)r=e.length,Yr.replace(e,t,n),i=e.length;return e},Yr.stripWhite=function(e){for(var t=e.length,n=0,r=new Gr;n<t;)Yr.isSpace(e,n)||(r.b+=Qr.string(e.charAt(n))),n++;return r.b},Yr.isNum=function(e,t){var n=Fr.cca(e,t);return 48<=n&&57>=n},Yr.isAlpha=function(e,t){var n=Fr.cca(e,t);return 65<=n&&90>=n||97<=n&&122>=n},Yr.num=function(e,t){var n=Fr.cca(e,t);return 0<n?(n-=48,0>n||9<n?null:n):null},Yr.splitLines=function(e){for(var e=e.split("\n"),t=0,n=e.length;t<n;){var r=t++,i=e[r];"\r"==Fr.substr(i,-1,1)&&(e[r]=Fr.substr(i,0,-1))}return e};var Zr=function(){};Er.Strings=Zr,Zr.__name__=["Strings"],Zr.format=function(e,t,n,r){return null==n&&(n="null"),null==t||0==t.length?e:Zr.formatf(e,n,r)(t)},Zr.formatf=function(e,t,n){null==t&&(t="null");for(var r=[];;){if(!Zr._reFormat.match(e)){r.push(function(){return function(){return e}}());break}var i=Qr.parseInt(Zr._reFormat.matched(1)),s=Zr._reFormat.matched(2);""==s&&(s=null);for(var o=null,u=[],a=3;20>a;){o=a++,o=Zr._reFormat.matched(o);if(null==o||""==o)break;u.push(xn.FormatParams.cleanQuotes(o))}a=[Zr._reFormat.matchedLeft()],r.push(function(e){return function(){return e[0]}}(a)),s=[_r.formatf(s,u,t,n)],r.push(function(){return function(e,t){return function(){return function(n){return e(t,n)}}()}}()(function(e){return function(t,n){return e[0](n[t])}}(s),i)),e=Zr._reFormat.matchedRight()}return function(e){return null==e&&(e=[]),r.map(function(t){return t(e)}).join("")}},Zr.formatOne=function(e,t,n,r){return Zr.formatOnef(t,n,r)(e)},Zr.formatOnef=function(e,t){var t=xn.FormatParams.params(e,t,"S"),n=t.shift();switch(n){case"S":return function(e){return e};case"T":return n=1>t.length?20:Qr.parseInt(t[0]),Zr.ellipsisf(n,2>t.length?"...":t[1]);case"PR":var r=1>t.length?10:Qr.parseInt(t[0]),i=2>t.length?" ":t[1];return function(e){return Yr.rpad(e,i,r)};case"PL":var s=1>t.length?10:Qr.parseInt(t[0]),o=2>t.length?" ":t[1];return function(e){return Yr.lpad(e,o,s)};default:throw"Unsupported string format: "+n}},Zr.upTo=function(e,t){var n=e.indexOf(t);return 0>n?e:Fr.substr(e,0,n)},Zr.startFrom=function(e,t){var n=e.indexOf(t);return 0>n?e:Fr.substr(e,n+t.length,null)},Zr.rtrim=function(e,t){for(var n=e.length;0<n;){var r=Fr.substr(e,n-1,1);if(0>t.indexOf(r))break;n--}return Fr.substr(e,0,n)},Zr.ltrim=function(e,t){for(var n=0;n<e.length;){var r=Fr.substr(e,n,1);if(0>t.indexOf(r))break;n++}return Fr.substr(e,n,null)},Zr.trim=function(e,t){return Zr.rtrim(Zr.ltrim(e,t),t)},Zr.collapse=function(e){return Zr._reCollapse.replace(Yr.trim(e)," ")},Zr.ucfirst=function(e){return null==e?null:e.charAt(0).toUpperCase()+Fr.substr(e,1,null)},Zr.lcfirst=function(e){return null==e?null:e.charAt(0).toLowerCase()+Fr.substr(e,1,null)},Zr.empty=function(e){return null==e||""==e},Zr.isAlphaNum=function(e){return null==e?!1:Zr.__alphaNumPattern.match(e)},Zr.digitsOnly=function(e){return null==e?!1:Zr.__digitsPattern.match(e)},Zr.ucwords=function(e){return Zr.__ucwordsPattern.customReplace(null==e?null:e.charAt(0).toUpperCase()+Fr.substr(e,1,null),Zr.__upperMatch)},Zr.ucwordsws=function(e){return Zr.__ucwordswsPattern.customReplace(null==e?null:e.charAt(0).toUpperCase()+Fr.substr(e,1,null),Zr.__upperMatch)},Zr.__upperMatch=function(e){return e.matched(0).toUpperCase()},Zr.humanize=function(e){return Yr.replace(Zr.underscore(e),"_"," ")},Zr.capitalize=function(e){return Fr.substr(e,0,1).toUpperCase()+Fr.substr(e,1,null)},Zr.succ=function(e){return Fr.substr(e,0,-1)+String.fromCharCode(Fr.cca(Fr.substr(e,-1,null),0)+1)},Zr.underscore=function(e){return e=(new Or("::","g")).replace(e,"/"),e=(new Or("([A-Z]+)([A-Z][a-z])","g")).replace(e,"$1_$2"),e=(new Or("([a-z\\d])([A-Z])","g")).replace(e,"$1_$2"),e=(new Or("-","g")).replace(e,"_"),e.toLowerCase()},Zr.dasherize=function(e){return Yr.replace(e,"_","-")},Zr.repeat=function(e,t){for(var n=[],r=0;r<t;)r++,n.push(e);return n.join("")},Zr.wrapColumns=function(e,t,n,r){null==r&&(r="\n"),null==n&&(n=""),null==t&&(t=78);for(var e=Zr._reSplitWC.split(e),i=[],s=0;s<e.length;){var o=e[s];++s,i.push(Zr._wrapColumns(Yr.trim(Zr._reReduceWS.replace(o," ")),t,n,r))}return i.join(r)},Zr._wrapColumns=function(e,t,n,r){for(var i=[],s=0,o=e.length,u=n.length,t=t-u;;){if(s+t>=o-u){i.push(Fr.substr(e,s,null));break}for(var a=0;!Yr.isSpace(e,s+t-a)&&a<t;)a++;if(a==t){for(a=0;!Yr.isSpace(e,s+t+a)&&s+t+a<o;)a++;i.push(Fr.substr(e,s,t+a)),s+=t+a+1}else i.push(Fr.substr(e,s,t-a)),s+=t-a+1}return n+i.join(r+n)},Zr.stripTags=function(e){return Zr._reStripTags.replace(e,"")},Zr.interpolate=function(e,t,n,r){return Zr.interpolatef(t,n,r)(e)},Zr.interpolatef=function(e,t,n){var r=function(e,t,n){for(;Zr._reInterpolateNumber.match(e);)e=Zr._reInterpolateNumber.matchedLeft(),Zr.empty(e)||(t.push(e),n.push(null)),t.push(null),n.push(Qr.parseFloat(Zr._reInterpolateNumber.matched(0))),e=Zr._reInterpolateNumber.matchedRight();Zr.empty(e)||(t.push(e),n.push(null))},i=function(e){var e=""+e,t=e.indexOf(".");return 0>t?0:e.length-t-1},s=[],o=[],u=[],a=[];r(e,s,o),r(t,u,a);for(var f=[],e=0,t=zr.min(s.length,u.length);e<t&&s[e]==u[e];){if(null==s[e])if(o[e]==a[e])f.push(function(e){return function(){return e[0]}}([""+o[e]]));else{var r=[Hr.interpolatef(o[e],a[e],n)],l=[Math.pow(10,zr.max(i(o[e]),i(a[e])))];f.push(function(e,t){return function(n){return""+Math.round(t[0](n)*e[0])/e[0]}}(l,r))}else f.push(function(e){return function(){return e[0]}}([s[e]]));e++}for(var c="";e<u.length;)c=null!=u[e]?c+u[e]:c+a[e],e++;return""!=c&&f.push(function(){return c}),function(e){return f.map(function(t){return t(e)}).join("")}},Zr.interpolateChars=function(e,t,n,r){return Zr.interpolateCharsf(t,n,r)(e)},Zr.interpolateCharsf=function(e,t){for(var n=e.split(""),r=t.split("");n.length>r.length;)r.splice(0,0," ");for(;r.length>n.length;)n.splice(0,0," ");for(var i=[],s=0,o=n.length;s<o;){var u=s++;i[u]=Zr.interpolateCharf(n[u],r[u])}return function(e){for(var t=[],n=0,r=i.length;n<r;){var s=n++;t[s]=i[s](e)}return Yr.trim(t.join(""))}},Zr.interpolateChar=function(e,t,n,r){return Zr.interpolateCharf(t,n,r)(e)},Zr.interpolateCharf=function(e,t,n){(new Or("^\\d","")).match(t)&&" "==e&&(e="0");var r=new Or("^[^a-zA-Z0-9]","");r.match(t)&&" "==e&&(e=r.matched(0));var e=Fr.cca(e,0),t=Fr.cca(t,0),i=zr.interpolatef(e,t,n);return function(e){return String.fromCharCode(i(e))}},Zr.ellipsis=function(e,t,n){return null==n&&(n="..."),null==t&&(t=20),e.length>t?Fr.substr(e,0,zr.max(n.length,t-n.length))+n:e},Zr.ellipsisf=function(e,t){return null==t&&(t="..."),null==e&&(e=20),function(n){return n.length>e?Fr.substr(n,0,zr.max(t.length,e-t.length))+t:n}},Zr.compare=function(e,t){return e<t?-1:e>t?1:0};var ei={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(","),TNull:["TNull",0]};ei.TNull.toString=Sr,ei.TNull.__enum__=ei,ei.TInt=["TInt",1],ei.TInt.toString=Sr,ei.TInt.__enum__=ei,ei.TFloat=["TFloat",2],ei.TFloat.toString=Sr,ei.TFloat.__enum__=ei,ei.TBool=["TBool",3],ei.TBool.toString=Sr,ei.TBool.__enum__=ei,ei.TObject=["TObject",4],ei.TObject.toString=Sr,ei.TObject.__enum__=ei,ei.TFunction=["TFunction",5],ei.TFunction.toString=Sr,ei.TFunction.__enum__=ei,ei.TClass=function(e){return e=["TClass",6,e],e.__enum__=ei,e.toString=Sr,e},ei.TEnum=function(e){return e=["TEnum",7,e],e.__enum__=ei,e.toString=Sr,e},ei.TUnknown=["TUnknown",8],ei.TUnknown.toString=Sr,ei.TUnknown.__enum__=ei;var ti=function(){};Er.Type=ti,ti.__name__=["Type"],ti.getClass=function(e){return null==e?null:e.__class__},ti.getEnum=function(e){return null==e?null:e.__enum__},ti.getSuperClass=function(e){return e.__super__},ti.getClassName=function(e){return e.__name__.join(".")},ti.getEnumName=function(e){return e.__ename__.join(".")},ti.resolveClass=function(e){return e=Er[e],null==e||!e.__name__?null:e},ti.createInstance=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);default:throw"Too many arguments"}},ti.createEmptyInstance=function(e){function t(){}return t.prototype=e.prototype,new t},ti.createEnum=function(e,t,n){var r=Kr.field(e,t);if(null==r)throw"No such constructor "+t;if(Kr.isFunction(r)){if(null==n)throw"Constructor "+t+" need parameters";return r.apply(e,n)}if(null!=n&&0!=n.length)throw"Constructor "+t+" does not need parameters";return r},ti.getInstanceFields=function(e){var t=[],n;for(n in e.prototype)t.push(n);return Fr.remove(t,"__class__"),Fr.remove(t,"__properties__"),t},ti["typeof"]=function(e){switch(typeof e){case"boolean":return ei.TBool;case"string":return ei.TClass(String);case"number":return Math.ceil(e)==e%2147483648?ei.TInt:ei.TFloat;case"object":if(null==e)return ei.TNull;var t=e.__enum__;if(null!=t)return ei.TEnum(t);return e=e.__class__,null!=e?ei.TClass(e):ei.TObject;case"function":return e.__name__||e.__ename__?ei.TObject:ei.TFunction;case"undefined":return ei.TNull;default:return ei.TUnknown}},ti.enumEq=function(e,t){if(e==t)return!0;try{if(e[0]!=t[0])return!1;for(var n=2,r=e.length;n<r;){var i=n++;if(!ti.enumEq(e[i],t[i]))return!1}var s=e.__enum__;if(s!=t.__enum__||null==s)return!1}catch(o){return!1}return!0};var ni=function(){};Er.Types=ni,ni.__name__=["Types"],ni.className=function(e){return ti.getClassName(ti.getClass(e)).split(".").pop()},ni.fullName=function(e){return ti.getClassName(ti.getClass(e))},ni.typeName=function(e){var t,e=ti["typeof"](e);switch(e[1]){case 0:t="null";break;case 1:t="Int";break;case 2:t="Float";break;case 3:t="Bool";break;case 5:t="function";break;case 6:t=ti.getClassName(e[2]);break;case 7:t=ti.getEnumName(e[2]);break;case 4:t="Object";break;case 8:t="Unknown"}return t},ni.hasSuperClass=function(e,t){for(;null!=e;){if(e==t)return!0;e=ti.getSuperClass(e)}return!1},ni.isAnonymous=function(e){return Kr.isObject(e)&&null==ti.getClass(e)},ni.as=function(e,t){return ar.__instanceof(e,t)?e:null},ni.ifIs=function(e,t,n){return ar.__instanceof(e,t)&&n(e),e},ni.of=function(e,t){return ar.__instanceof(t,e)?t:null},ni.sameType=function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;var n=ti["typeof"](t);switch(n[1]){case 6:return ar.__instanceof(e,n[2]);case 7:return ar.__instanceof(e,n[2]);default:return ti["typeof"](e)==n}},ni.isPrimitive=function(e){var t,e=ti["typeof"](e);switch(e[1]){case 0:case 1:case 2:case 3:t=!0;break;case 5:case 7:case 4:case 8:t=!1;break;case 6:t="String"==ti.getClassName(e[2])}return t},hr=void 0,pr=void 0,dr=void 0,vr=void 0,mr=void 0,gr=void 0,pr={IBlockCipher:function(){}},Er["chx.crypt.IBlockCipher"]=pr.IBlockCipher,pr.IBlockCipher.__name__=["chx","crypt","IBlockCipher"],pr.IBlockCipher.prototype={decryptBlock:null,encryptBlock:null,blockSize:null,__class__:pr.IBlockCipher},pr.IPad=function(){},Er["chx.crypt.IPad"]=pr.IPad,pr.IPad.__name__=["chx","crypt","IPad"],pr.IPad.prototype={getBytesReadPerBlock:null,blockOverhead:null,calcNumBlocks:null,isBlockPad:null,unpad:null,pad:null,blockSize:null,__class__:pr.IPad},pr.PadPkcs1Type1=function(e){this.blockSize=e,this.setPadCount(8),this.typeByte=1,this.setPadByte(255)},Er["chx.crypt.PadPkcs1Type1"]=pr.PadPkcs1Type1,pr.PadPkcs1Type1.__name__=["chx","crypt","PadPkcs1Type1"],pr.PadPkcs1Type1.__interfaces__=[pr.IPad],pr.PadPkcs1Type1.prototype={setPadByte:function(e){return this.padByte=e&255,e},getPadByte:function(){return this.padByte},setBlockSize:function(e){this.blockSize=e,this.textSize=e-3-this.padCount;if(0>=this.textSize)throw"Block size "+e+" to small for Pkcs1 with padCount "+this.padCount;return e},setPadCount:function(e){if(e+3>=this.blockSize)throw"Internal padding size exceeds crypt block size";return this.padCount=e,this.textSize=this.blockSize-3-this.padCount,e},blockOverhead:function(){return 3+this.padCount},isBlockPad:function(){return!0},calcNumBlocks:function(e){return Math.ceil(e/this.textSize)},unpad:function(e){for(var t=0,n=new Cr;t<e.length;){for(;t<e.length&&0==e.b[t];)++t;if(0>e.length-t-3-this.padCount)throw"Unexpected short message";if(e.b[t]!=this.typeByte)throw"Expected marker "+this.typeByte+" at position "+t+" ["+kr.hexDump(e)+"]";if(++t>=e.length)break;for(;t<e.length&&0!=e.b[t];)++t;t++;for(var r=0;t<e.length&&r++<this.textSize;)n.b.push(e.b[t++])}return n.getBytes()},pad:function(e){if(e.length>this.textSize)throw"Unable to pad block: provided buffer is "+e.length+" max is "+this.textSize;var t=new Cr;t.b.push(0),t.b.push(this.typeByte);for(var n=this.blockSize-e.length-3;0<n--;)t.b.push(this.getPadByte());return t.b.push(0),t.add(e),t.getBytes()},getBytesReadPerBlock:function(){return this.textSize},typeByte:null,padCount:null,padByte:null,textSize:null,blockSize:null,__class__:pr.PadPkcs1Type1,__properties__:{set_blockSize:"setBlockSize",set_padByte:"setPadByte",get_padByte:"getPadByte"}},pr.PadPkcs1Type2=function(e){pr.PadPkcs1Type1.call(this,e),this.typeByte=2,this.rng=new qn.Random},Er["chx.crypt.PadPkcs1Type2"]=pr.PadPkcs1Type2,pr.PadPkcs1Type2.__name__=["chx","crypt","PadPkcs1Type2"],pr.PadPkcs1Type2.__interfaces__=[pr.IPad],pr.PadPkcs1Type2.__super__=pr.PadPkcs1Type1,pr.PadPkcs1Type2.prototype=yr(pr.PadPkcs1Type1.prototype,{getPadByte:function(){for(var e=0;0==e;)e=this.rng.next();return e},rng:null,__class__:pr.PadPkcs1Type2}),pr.RSAEncrypt=function(e,t){this.init(),null!=e&&this.setPublic(e,t)},Er["chx.crypt.RSAEncrypt"]=pr.RSAEncrypt,pr.RSAEncrypt.__name__=["chx","crypt","RSAEncrypt"],pr.RSAEncrypt.__interfaces__=[pr.IBlockCipher],pr.RSAEncrypt.prototype={toString
:function(){var e=new Gr;return e.b+="Public:\n",e.b+=Qr.string("N:	"+this.n.toHex()+"\n"),e.b+=Qr.string("E:	"+Rn.ofInt(this.e).toHex()+"\n"),e.b},__getBlockSize:function(){return null==this.n?0:this.n.bitLength()+7>>3},doPublic:function(e){return e.modPowInt(this.e,this.n)},doBufferDecrypt:function(e,t,n){for(var r=this.__getBlockSize(),i=r-11,s=0,o=new Cr;s<e.length;){s+r>e.length&&(r=e.length-s);var u=Rn.ofBytes(e.sub(s,r),!0),u=t(u);if(null==u)return null;u=n.unpad(u.toBytesUnsigned());if(u.length>i)throw"block text length error";o.add(u),s+=r}return o.getBytes()},doBufferEncrypt:function(e,t,n){for(var r=this.__getBlockSize()-11,i=0,s=new Cr;i<e.length;){i+r>e.length&&(r=e.length-i);var o=Rn.ofBytes(n.pad(e.sub(i,r)),!0),o=t(o).toBytesUnsigned();0!=(o.length&1)&&s.b.push(0),s.add(o),i+=r}return s.getBytes()},verify:function(e){return this.doBufferDecrypt(e,wr(this,this.doPublic),new pr.PadPkcs1Type1(this.__getBlockSize()))},setPublic:function(e,t){this.init();if(null==e||0==e.length)throw new hr.NullPointerException("nHex not set: "+e);if(null==t||0==t.length)throw new hr.NullPointerException("eHex not set: "+t);var n=kr.cleanHexFormat(e);this.n=Rn.ofString(n,16);if(null==this.n)throw 2;n=Qr.parseInt("0x"+kr.cleanHexFormat(t));if(null==n||0==n)throw 3;this.e=n},encyptText:function(e){return kr.toHex(this.encrypt(Nr.ofString(e)),":")},encryptBlock:function(e){var t=this.__getBlockSize();if(e.length!=t)throw"bad block size";for(var e=this.doPublic(Rn.ofBytes(e,!0)).toBytesUnsigned(),n=e.length,r=0;n>t;){if(0!=e.b[r])throw new hr.FatalException("encoded length was "+e.length);r++,n--}0!=r&&(e=e.sub(r,n));if(e.length<t){r=new Cr,n=t-e.length;for(t=0;t<n;)t++,r.b.push(0);r.addBytes(e,0,e.length),e=r.getBytes()}return e},encrypt:function(e){return this.doBufferEncrypt(e,wr(this,this.doPublic),new pr.PadPkcs1Type2(this.__getBlockSize()))},decryptBlock:function(){throw"Not a private key"},init:function(){this.n=null,this.e=0},blockSize:null,e:null,n:null,__class__:pr.RSAEncrypt,__properties__:{get_blockSize:"__getBlockSize"}},pr.RSA=function(e,t,n){pr.RSAEncrypt.call(this,null,null),this.init(),null!=e&&this.setPrivate(e,t,n)},Er["chx.crypt.RSA"]=pr.RSA,pr.RSA.__name__=["chx","crypt","RSA"],pr.RSA.__interfaces__=[pr.IBlockCipher],pr.RSA.generate=function(e,t){var n=new qn.Random,r=new pr.RSA,i=e>>1;r.e=Qr.parseInt(Yr.startsWith(t,"0x")?t:"0x"+t);for(var s=Rn.ofInt(r.e);;){r.p=Rn.randomPrime(e-i,s,10,!0,n),r.q=Rn.randomPrime(i,s,10,!0,n);if(0>=r.p.compare(r.q)){var o=r.p;r.p=r.q,r.q=o}var o=r.p.sub(Rn.getONE()),u=r.q.sub(Rn.getONE()),a=o.mul(u);if(0==a.gcd(s).compare(Rn.getONE())){r.n=r.p.mul(r.q),r.d=s.modInverse(a),r.dmp1=r.d.mod(o),r.dmq1=r.d.mod(u),r.coeff=r.q.modInverse(r.p);break}}return r},pr.RSA.__super__=pr.RSAEncrypt,pr.RSA.prototype=yr(pr.RSAEncrypt.prototype,{toString:function(){var e=new Gr;return e.b+=Qr.string(pr.RSAEncrypt.prototype.toString.call(this)),e.b+="Private:\n",e.b+=Qr.string("D:	"+this.d.toHex()+"\n"),null!=this.p&&(e.b+=Qr.string("P:	"+this.p.toHex()+"\n")),null!=this.q&&(e.b+=Qr.string("Q:	"+this.q.toHex()+"\n")),null!=this.dmp1&&(e.b+=Qr.string("DMP1:	"+this.dmp1.toHex()+"\n")),null!=this.dmq1&&(e.b+=Qr.string("DMQ1:	"+this.dmq1.toHex()+"\n")),null!=this.coeff&&(e.b+=Qr.string("COEFF:	"+this.coeff.toHex()+"\n")),e.b},doPrivate:function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),e=e.mod(this.q).modPow(this.dmq1,this.q);0>t.compare(e);)t=t.add(this.p);return t.sub(e).mul(this.coeff).mod(this.p).mul(this.q).add(e)},recalcCRT:function(){null!=this.p&&null!=this.q&&(null==this.dmp1&&(this.dmp1=this.d.mod(this.p.sub(Rn.getONE()))),null==this.dmq1&&(this.dmq1=this.d.mod(this.q.sub(Rn.getONE()))),null==this.coeff&&(this.coeff=this.q.modInverse(this.p)))},setPrivateEx:function(e,t,n,r,i,s,o,u){this.init(),this.setPrivate(e,t,n);if(null==r||null==i)throw"Invalid RSA private key ex";this.p=Rn.ofString(kr.cleanHexFormat(r),16),this.q=Rn.ofString(kr.cleanHexFormat(i),16),this.coeff=this.dmq1=this.dmp1=null,null!=s&&(this.dmp1=Rn.ofString(kr.cleanHexFormat(s),16)),null!=o&&(this.dmq1=Rn.ofString(kr.cleanHexFormat(o),16)),null!=u&&(this.coeff=Rn.ofString(kr.cleanHexFormat(u),16)),this.recalcCRT()},setPrivate:function(e,t,n){this.init(),pr.RSAEncrypt.prototype.setPublic.call(this,e,t);if(!(null!=n&&0<n.length))throw"Invalid RSA private key";e=kr.cleanHexFormat(n),this.d=Rn.ofString(e,16)},sign:function(e){return this.doBufferEncrypt(e,wr(this,this.doPrivate),new pr.PadPkcs1Type1(this.__getBlockSize()))},decryptText:function(e){return this.decrypt(kr.ofHex(kr.cleanHexFormat(e)))},decryptBlock:function(e){e=this.doPrivate(Rn.ofBytes(e,!0));if(null==e)throw"doPrivate error";e=e.toBytesUnsigned();if(e.length<this.__getBlockSize()){for(var t=Nr.alloc(this.__getBlockSize()),n=0,r=this.__getBlockSize()-e.length+1;n<r;){var i=n++;t.b[i]=0}t.blit(this.__getBlockSize()-e.length,e,0,e.length),e=t}else for(;e.length>this.__getBlockSize();){t=e.length-this.__getBlockSize();for(r=0;r<t;)if(i=r++,0!=e.b[i])throw"decryptBlock length error";e=e.sub(t,this.__getBlockSize())}return e},decrypt:function(e){return this.doBufferDecrypt(e,wr(this,this.doPrivate),new pr.PadPkcs1Type2(this.__getBlockSize()))},init:function(){pr.RSAEncrypt.prototype.init.call(this),this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null},coeff:null,dmq1:null,dmp1:null,q:null,p:null,d:null,__class__:pr.RSA}),dr={Base64:function(){}},Er["chx.formats.Base64"]=dr.Base64,dr.Base64.__name__=["chx","formats","Base64"],dr.Base64.encode=function(e){var t;switch(e.length%3){case 1:t="==";break;case 2:t="=";break;case 0:t=""}return null==dr.Base64.enc&&(dr.Base64.enc=new Xn(Nr.ofString("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"))),dr.Base64.enc.encodeBytes(e).toString()+t},dr.Base64.decode=function(e){e=Yr.stripWhite(e),e=Yr.replace(e,"=",""),null==dr.Base64.enc&&(dr.Base64.enc=new Xn(Nr.ofString("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")));var t;try{t=dr.Base64.enc.decodeBytes(Nr.ofString(e))}catch(n){t=null}return t},vr={Input:function(){}},Er["chx.io.Input"]=vr.Input,vr.Input.__name__=["chx","io","Input"],vr.Input.prototype={__setEndian:function(e){return this.bigEndian=e},__getBytesAvailable:function(){throw new hr.FatalException("Not implemented")},readMultiByteString:function(e,t){var n=t.toLowerCase();switch(n){case"latin1":break;case"us-ascii":break;default:throw new hr.UnsupportedException(n+" not supported")}return this.readString(e)},readUTF:function(){return this.readString(this.readUInt16())},readString:function(e){var t=Nr.alloc(e);return this.readFullBytes(t,0,e),t.toString()},readInt32:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte();return this.bigEndian?(e<<8|t)<<16|n<<8|r:(r<<8|n)<<16|t<<8|e},readUInt30:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte();if(64<=(this.bigEndian?e:r))throw new hr.OverflowException;return this.bigEndian?r|n<<8|t<<16|e<<24:e|t<<8|n<<16|r<<24},readInt31:function(){var e,t,n,r;this.bigEndian?(r=this.readByte(),n=this.readByte(),t=this.readByte(),e=this.readByte()):(e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte());if(0==(r&128)!=(0==(r&64)))throw new hr.OverflowException;return e|t<<8|n<<16|r<<24},readUInt24:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte();return this.bigEndian?n|t<<8|e<<16:e|t<<8|n<<16},readInt24:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),e=this.bigEndian?n|t<<8|e<<16:e|t<<8|n<<16;return 0!=(e&8388608)?e-16777216:e},readUInt16:function(){var e=this.readByte(),t=this.readByte();return this.bigEndian?t|e<<8:e|t<<8},readInt16:function(){var e=this.readByte(),t=this.readByte(),e=this.bigEndian?t|e<<8:e|t<<8;return 0!=(e&32768)?e-65536:e},readUInt8:function(){return this.readByte()},readInt8:function(){var e=this.readByte();return 128<=e?e-256:e},readDouble:function(){return Un.bytesToFloat(this.read(8),this.bigEndian)},readFloat:function(){return Un.bytesToFloat(this.read(4),this.bigEndian)},readLine:function(){var e=new Gr,t,n;try{for(;10!=(t=this.readByte());)e.b+=String.fromCharCode(t);n=e.b,13==Fr.cca(n,n.length-1)&&(n=Fr.substr(n,0,-1))}catch(r){if(!ar.__instanceof(r,hr.EofException))throw r;if(n=e.b,0==n.length)throw r}return n},readUntil:function(e){for(var t=new Gr,n;(n=this.readByte())!=e;)t.b+=String.fromCharCode(n);return t.b},read:function(e){for(var t=Nr.alloc(e),n=0;0<e;){var r=this.readBytes(t,n,e);if(0==r)throw new hr.BlockedException;n+=r,e-=r}return t},readFullBytes:function(e,t,n){for(;0<n;)var r=this.readBytes(e,t,n),t=t+r,n=n-r},readAll:function(e){null==e&&(e=16384);var t=Nr.alloc(e),n=new Cr;try{for(;;){var r=this.readBytes(t,0,e);if(0==r)throw new hr.BlockedException;n.addBytes(t,0,r)}}catch(i){if(!ar.__instanceof(i,hr.EofException))throw i}return n.getBytes()},close:function(){},isEof:function(){throw new hr.UnsupportedException("Not implemented for this input type")},readBytes:function(e,t,n){var r=n,i=e.b;if(0>t||0>n||t+n>e.length)throw new hr.OutsideBoundsException;for(;0<r;)i[t]=this.readByte(),t++,r--;return n},readByte:function(){throw new hr.FatalException("Not implemented")},bigEndian:null,bytesAvailable:null,__class__:vr.Input,__properties__:{get_bytesAvailable:"__getBytesAvailable",set_bigEndian:"__setEndian"}},vr.BytesInput=function(e,t,n){null==t&&(t=0),null==n&&(n=e.length-t);if(0>t||0>n||t+n>e.length)throw new hr.OutsideBoundsException;this.b=e.b,this.pos=t,this.len=n,this.__setEndian(!1)},Er["chx.io.BytesInput"]=vr.BytesInput,vr.BytesInput.__name__=["chx","io","BytesInput"],vr.BytesInput.__super__=vr.Input,vr.BytesInput.prototype=yr(vr.Input.prototype,{getPosition:function(){return this.pos},setPosition:function(e){return this.len+=this.getPosition()-e,this.pos=e},peek:function(e){null==e&&(e=this.getPosition());var t=this.getPosition();return this.setPosition(e),e=this.readByte(),this.setPosition(t),e},__getBytesAvailable:function(){return 0<=this.len?this.len:0},readBytes:function(e,t,n){if(0>t||0>n||t+n>e.length)throw new hr.OutsideBoundsException;if(0==this.len&&0<n)throw new hr.EofException;this.len<n&&(n=this.len);for(var r=this.b,e=e.b,i=0;i<n;){var s=i++;e[t+s]=r[this.pos+s]}return this.pos+=n,this.len-=n,n},readByte:function(){if(0==this.len)throw new hr.EofException;return this.len--,this.b[this.pos++]},getBytesCopy:function(){var e=this.getPosition(),t=null,t=Nr.ofData(this.b.slice(0,this.b.length));return this.setPosition(e),t},len:null,pos:null,b:null,__class__:vr.BytesInput,__properties__:yr(vr.Input.prototype.__properties__,{set_position:"setPosition",get_position:"getPosition"})}),vr.Output=function(){},Er["chx.io.Output"]=vr.Output,vr.Output.__name__=["chx","io","Output"],vr.Output.prototype={toString:function(){return ti.getClassName(ti.getClass(this))},printf:function(e,t,n){return null==n&&(n=!1),e=mr.Sprintf.format(e,t),n?this.writeUTF(e):this.writeString(e),this},writeUTF:function(e){if(65535<e.length)throw new hr.OverflowException;return this.writeUInt16(e.length),this.writeString(e),this},writeString:function(e){return e=Nr.ofString(e),this.writeFullBytes(e,0,e.length),this},writeInput:function(e,t){null==t&&(t=4096);var n=Nr.alloc(t);try{for(;;){var r=e.readBytes(n,0,t);if(0==r)throw new hr.BlockedException;for(var i=0;0<r;){var s=this.writeBytes(n,i,r);if(0==s)throw new hr.BlockedException;i+=s,r-=s}}}catch(o){if(!ar.__instanceof(o,hr.EofException))throw o}return this},prepare:function(){return this},writeInt32:function(e){return this.bigEndian?(this.writeByte(Vn.toInt(e>>>24)),this.writeByte(Vn.toInt(e>>>16)&255),this.writeByte(Vn.toInt(e>>>8)&255),this.writeByte(Vn.toInt(e&255))):(this.writeByte(Vn.toInt(e&255)),this.writeByte(Vn.toInt(e>>>8)&255),this.writeByte(Vn.toInt(e>>>16)&255),this.writeByte(Vn.toInt(e>>>24))),this},writeUInt30:function(e){if(0>e||1073741824<=e)throw new hr.OverflowException;return this.bigEndian?(this.writeByte(e>>>24),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(e&255)):(this.writeByte(e&255),this.writeByte(e>>8&255),this.writeByte(e>>16&255),this.writeByte(e>>>24)),this},writeInt31:function(e){if(-1073741824>e||1073741824<=e)throw new hr.OverflowException;return this.bigEndian?(this.writeByte(e>>>24),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(e&255)):(this.writeByte(e&255),this.writeByte(e>>8&255),this.writeByte(e>>16&255),this.writeByte(e>>>24)),this},writeUInt24:function(e){if(0>e||16777216<=e)throw new hr.OverflowException;return this.bigEndian?(this.writeByte(e>>16),this.writeByte(e>>8&255),this.writeByte(e&255)):(this.writeByte(e&255),this.writeByte(e>>8&255),this.writeByte(e>>16)),this},writeInt24:function(e){if(-8388608>e||8388608<=e)throw new hr.OverflowException;return this.writeUInt24(e&16777215),this},writeUInt16:function(e){if(0>e||65536<=e)throw new hr.OverflowException;return this.bigEndian?(this.writeByte(e>>8),this.writeByte(e&255)):(this.writeByte(e&255),this.writeByte(e>>8)),this},writeInt16:function(e){if(-32768>e||32768<=e)throw new hr.OverflowException;return this.writeUInt16(e&65535),this},writeUInt8:function(e){return this.writeByte(e)},writeInt8:function(e){if(-128>e||128<=e)throw new hr.OverflowException;return this.writeByte(e&255),this},writeDouble:function(e){return this.write(Un.doubleToBytes(e,this.bigEndian)),this},writeFloat:function(e){return this.write(Un.floatToBytes(e,this.bigEndian)),this},writeFullBytes:function(e,t,n){for(;0<n;)var r=this.writeBytes(e,t,n),t=t+r,n=n-r;return this},write:function(e){for(var t=e.length,n=0;0<t;){var r=this.writeBytes(e,n,t);if(0==r)throw new hr.BlockedException;n+=r,t-=r}return this},setBigEndian:function(e){return this.bigEndian=e},close:function(){},flush:function(){return this},writeBytes:function(e,t,n){var r=n,i=e.b;if(0>t||0>n||t+n>e.length)throw new hr.OutsideBoundsException;for(;0<r;)this.writeByte(i[t]),t++,r--;return n},writeByte:function(){throw new hr.FatalException("Not implemented")},lock:null,bigEndian:null,__class__:vr.Output,__properties__:{set_bigEndian:"setBigEndian"}},vr.BytesOutput=function(){this.b=new Cr},Er["chx.io.BytesOutput"]=vr.BytesOutput,vr.BytesOutput.__name__=["chx","io","BytesOutput"],vr.BytesOutput.__super__=vr.Output,vr.BytesOutput.prototype=yr(vr.Output.prototype,{getBytes:function(){return this.b.getBytes()},writeBytes:function(e,t,n){return this.b.addBytes(e,t,n),n},writeByte:function(e){return this.b.b.push(e),this},b:null,__class__:vr.BytesOutput}),hr={Exception:function(e,t){this.message=e,this.cause=t}},Er["chx.lang.Exception"]=hr.Exception,hr.Exception.__name__=["chx","lang","Exception"],hr.Exception.prototype={toString:function(){return ti.getClassName(ti.getClass(this))+"("+(null==this.message?"":this.message+")")},cause:null,message:null,__class__:hr.Exception},hr.IOException=function(e,t){hr.Exception.call(this,e,t)},Er["chx.lang.IOException"]=hr.IOException,hr.IOException.__name__=["chx","lang","IOException"],hr.IOException.__super__=hr.Exception,hr.IOException.prototype=yr(hr.Exception.prototype,{__class__:hr.IOException}),hr.BlockedException=function(e,t){hr.IOException.call(this,e,t)},Er["chx.lang.BlockedException"]=hr.BlockedException,hr.BlockedException.__name__=["chx","lang","BlockedException"],hr.BlockedException.__super__=hr.IOException,hr.BlockedException.prototype=yr(hr.IOException.prototype,{__class__:hr.BlockedException}),hr.EofException=function(e,t){hr.IOException.call(this,e,t)},Er["chx.lang.EofException"]=hr.EofException,hr.EofException.__name__=["chx","lang","EofException"],hr.EofException.__super__=hr.IOException,hr.EofException.prototype=yr(hr.IOException.prototype,{toString:function(){return"EOF"},__class__:hr.EofException}),hr.FatalException=function(e,t){this.message=e,this.cause=t},Er["chx.lang.FatalException"]=hr.FatalException,hr.FatalException.__name__=["chx","lang","FatalException"],hr.FatalException.prototype={toString:function(){return ti.getClassName(ti.getClass(this))+"("+(null==this.message?"":this.message+")")},cause:null,message:null,__class__:hr.FatalException},hr.NullPointerException=function(e,t){hr.Exception.call(this,e,t)},Er["chx.lang.NullPointerException"]=hr.NullPointerException,hr.NullPointerException.__name__=["chx","lang","NullPointerException"],hr.NullPointerException.__super__=hr.Exception,hr.NullPointerException.prototype=yr(hr.Exception.prototype,{__class__:hr.NullPointerException}),hr.OutsideBoundsException=function(e,t){hr.Exception.call(this,e,t)},Er["chx.lang.OutsideBoundsException"]=hr.OutsideBoundsException,hr.OutsideBoundsException.__name__=["chx","lang","OutsideBoundsException"],hr.OutsideBoundsException.__super__=hr.Exception,hr.OutsideBoundsException.prototype=yr(hr.Exception.prototype,{__class__:hr.OutsideBoundsException}),hr.OverflowException=function(e,t){hr.Exception.call(this,e,t)},Er["chx.lang.OverflowException"]=hr.OverflowException,hr.OverflowException.__name__=["chx","lang","OverflowException"],hr.OverflowException.__super__=hr.Exception,hr.OverflowException.prototype=yr(hr.Exception.prototype,{__class__:hr.OverflowException}),hr.UnsupportedException=function(e,t){hr.Exception.call(this,e,t)},Er["chx.lang.UnsupportedException"]=hr.UnsupportedException,hr.UnsupportedException.__name__=["chx","lang","UnsupportedException"],hr.UnsupportedException.__super__=hr.Exception,hr.UnsupportedException.prototype=yr(hr.Exception.prototype,{__class__:hr.UnsupportedException}),mr={Sprintf:function(){}},Er["chx.text.Sprintf"]=mr.Sprintf,mr.Sprintf.__name__=["chx","text","Sprintf"],mr.Sprintf.format=function(e,t){if(null==e)return"";null==t&&(t=[]);for(var n="",r=0,i=0,s=0,s=0,o=null,u=0,a=0,f=0,l=0,c;i<e.length;)if(s=e.indexOf("%",i),-1==s)n+=Fr.substr(e,i,null),i=e.length;else{n+=Fr.substr(e,i,s-i),c="** sprintf: invalid format at "+r+" **",u=f=l=0,a=-1,i=s+1;for(o=t[r++];ar.__instanceof(c,String)&&i<e.length;)switch(s=Fr.cca(e,i++),s){case 35:0==l?f|=16:c='** sprintf: "#" came too late **';break;case 45:0==l?f|=2:c='** sprintf: "-" came too late **';break;case 43:0==l?f|=4:c='** sprintf: "+" came too late **';break;case 32:0==l?f|=8:c='** sprintf: " " came too late **';break;case 46:2>l?(l=2,a=0):c='** sprintf: "." came too late **';break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:48==s&&0==l?f|=1:3==l?c="** sprintf: shouldn't have a digit after h,l,L **":2>l?(l=1,u=10*u+(s-48)):a=10*a+(s-48);break;case 100:case 105:c=!0,n+=mr.Sprintf.formatD(o,f,u,a);break;case 111:c=!0,n+=mr.Sprintf.formatO(o,f,u,a);break;case 120:case 88:c=!0,n+=mr.Sprintf.formatX(o,f,u,a,88==s);break;case 101:case 69:c=!0,n+=mr.Sprintf.formatE(o,f,u,a,69==s);break;case 102:c=!0,n+=mr.Sprintf.formatF(o,f,u,a);break;case 103:case 71:c=!0,n+=mr.Sprintf.formatG(o,f,u,a,71==s);break;case 99:case 67:case 115:case 83:if(99==s||67==s)a=1;c=!0,n+=mr.Sprintf.formatS(o,f,u,a);break;case 37:c=!0,n+="%",r--;break;default:c="** sprintf: "+Qr.string(s-48)+" not supported **"}1!=c&&mr.Sprintf.DEBUG&&(n+=Qr.string(c))}return n},mr.Sprintf.finish=function(e,t,n,r,i,s){null==s&&(s=""),null==s&&(s=""),0>t?s="-"+s:0!=(n&4)?s="+"+s:0!=(n&8)&&(s=" "+s),0==r&&-1<i&&(r=i,n|=1);for(;e.length+s.length<r;)0!=(n&2)?e+=" ":0!=(n&1)?e="0"+e:s=" "+s;return s+e},mr.Sprintf.number=function(e){return null==e?0:ar.__instanceof(e,String)?""==e?0:Qr.parseFloat(e):ar.__instanceof(e,us)?(Math.isNaN(e),e):ar.__instanceof(e,ss)?1*e:ar.__instanceof(e,as)?e?1:0:Math.NaN},mr.Sprintf.formatD=function(e,t,n,r){var i="",e=mr.Sprintf.number(e);if(0!=r||0!=e)i=Qr.string(Math.floor(Math.abs(e)));for(;i.length<r;)i="0"+i;return mr.Sprintf.finish(i,e,t,n,r)},mr.Sprintf.formatO=function(e,t,n,r){var i="",s="",e=mr.Sprintf.number(e);0!=r&&0!=e&&(i=e.toString(8));for(0!=(t&16)&&(s="0");i.length<r;)i="0"+i;return mr.Sprintf.finish(i,e,t,n,r,s)},mr.Sprintf.formatX=function(e,t,n,r,i){var s="",o="",e=mr.Sprintf.number(e);0!=r&&0!=e&&(s=e.toString(16));for(0!=(t&16)&&(o="0x");s.length<r;)s="0"+s;return i?(o=o.toUpperCase(),s=s.toUpperCase()):s=s.toLowerCase(),mr.Sprintf.finish(s,e,t,n,r,o)},mr.Sprintf.formatE=function(e,t,n,r,i){var s="",s=0,e=mr.Sprintf.number(e);if(1<Math.abs(e))for(;10<Math.abs(e);)e/=10,s++;else for(;1>Math.abs(e);)e*=10,s--;i=mr.Sprintf.format("%c%+.2d",[i?"E":"e",s]);if(0!=(t&2))for(s=mr.Sprintf.formatF(e,t,1,r)+i;s.length<n;)s+=" ";else s=mr.Sprintf.formatF(e,t,Math.max(n-i.length,0)|0,r)+s;return s},mr.Sprintf.formatF=function(e,t,n,r){var i="",s=i="";-1==r&&(r=6),e=Qr.string(e),-1==e.indexOf(".")?(i=Qr.string(Math.abs(mr.Sprintf.number(e))),s="0"):(i=Qr.string(Math.abs(mr.Sprintf.number(Fr.substr(e,0,e.indexOf("."))))),s=Fr.substr(e,e.indexOf(".")+1,null));if(0==mr.Sprintf.number(s))for(s="";s.length<r;)s+="0";else if(s.length>r&&(s=Math.round(Math.pow(10,r)*mr.Sprintf.number("0."+s)),Qr.string(s).length>r&&0!=s?(s="0",i=Qr.string((Math.abs(mr.Sprintf.number(i))+1)*(0<=mr.Sprintf.number(i)?1:-1))):s=Qr.string(s)),s.length<r)for(s=new String(s);s.length<r;)s+="0";return 0==r?0!=(t&16)&&(i+="."):i=i+"."+s,mr.Sprintf.finish(i,Qr.parseFloat(e),t,n,r,"")},mr.Sprintf.formatG=function(e,t,n,r,i){var s=mr.Sprintf.formatE(e,t,1,r,i),o=mr.Sprintf.formatF(e,t,1,r);return s.length<o.length?mr.Sprintf.formatE(e,t,n,r,i):mr.Sprintf.formatF(e,t,n,r)},mr.Sprintf.formatS=function(e,t,n,r){var i=Qr.string(e);return 0<r&&r<i.length&&(i=Fr.substr(i,0,r)),mr.Sprintf.finish(i,e,t&-30,n,r,"")},gr={Lock:function(){this.lock=1}},Er["chx.vm.Lock"]=gr.Lock,gr.Lock.__name__=["chx","vm","Lock"],gr.Lock.prototype={release:function(){this.lock--},wait:function(e){var t=!0,n=0;null==e&&(t=!1);for(t&&(n=(new Date).getTime()+e);0<this.lock;)if(t&&(new Date).getTime()>=n)return!1;return this.lock++,!0},lock:null,__class__:gr.Lock};var ri,ii,si,oi,ui,ai,fi,li,ci,hi,pi,di,vi,mi,gi,yi,bi,wi,Ei,Si,xi,Ti,Ni,Ci,ki,Li,Ai,Oi,Mi,_i,Di,Pi,Hi,Bi,ji,Fi,Ii,qi,Ri,Ui,zi,Wi,Xi,Vi,$i,Ji,Ki;ri=function(e){this.selection=e},Er["dhx.Access"]=ri,ri.__name__=["dhx","Access"],ri.getData=function(e){return Kr.field(e,"__dhx_data__")},ri.setData=function(e,t){e.__dhx_data__=t},ri.emptyHtmlDom=function(e){return{__dhx_data__:e}},ri.eventName=function(e){return"__dhx_on__"+e},ri.getEvent=function(e,t){return Kr.field(e,"__dhx_on__"+t)},ri.hasEvent=function(e,t){return null!=Kr.field(e,"__dhx_on__"+t)},ri.addEvent=function(e,t,n){e["__dhx_on__"+t]=n},ri.removeEvent=function(e,t){Kr.deleteField(e,"__dhx_on__"+t)},ri.setTransition=function(e,t){Kr.hasField(e,"__dhx_transition__")?Kr.field(e,"__dhx_transition__").owner=t:e.__dhx_transition__={owner:t}},ri.getTransition=function(e){return Kr.field(e,"__dhx_transition__")},ri.resetTransition=function(e){Kr.deleteField(e,"__dhx_transition__")},ri.prototype={_that:function(){return this.selection},selection:null,__class__:ri},ii=function(e,t){ri.call(this,t),this.name=e,this.qname=si.qualify(e)},Er["dhx.AccessAttribute"]=ii,ii.__name__=["dhx","AccessAttribute"],ii.__super__=ri,ii.prototype=yr(ri.prototype,{"float":function(e){var t=""+e;if(null==this.qname){var n=this.name;this.selection.eachNode(function(e){e.setAttribute(n,t)})}else{var r=this.qname;this.selection.eachNode(function(e){e.setAttributeNS(r.space,r.local,t)})}return this.selection},string:function(e){if(null==this.qname){var t=this.name;this.selection.eachNode(function(n){n.setAttribute(t,e)})}else{var n=this.qname;this.selection.eachNode(function(t){t.setAttributeNS(n.space,n.local,e)})}return this.selection},remove:function(){if(null==this.qname){var e=this.name;this.selection.eachNode(function(t){t.removeAttribute(e)})}else{var t=this.qname;this.selection.eachNode(function(e){e.removeAttributeNS(t.space,t.local)})}return this.selection},getFloat:function(){var e=this.get();return ii.refloat.match(e)?Qr.parseFloat(ii.refloat.matched(1)):Math.NaN},get:function(){var e=this.name,t=this.qname;return this.selection.firstNode(function(n){return null==t?n.getAttribute(e):n.getAttributeNS(t.space,t.local)})},qname:null,name:null,__class__:ii}),oi=function(e,t){ii.call(this,e,t)},Er["dhx.AccessDataAttribute"]=oi,oi.__name__=["dhx","AccessDataAttribute"],oi.__super__=ii,oi.prototype=yr(ii.prototype,{data:function(){return this.stringf(function(e){return""+Qr.string(e)})},floatf:function(e){if(null==this.qname){var t=this.name;this.selection.eachNode(function(n,r){var i=e(Kr.field(n,"__dhx_data__"),r);null==i?n.removeAttribute(t):n.setAttribute(t,""+i)})}else{var n=this.qname;this.selection.eachNode(function(r,i){var s=e(Kr.field(r,"__dhx_data__"),i);null==s?r.removeAttributeNS(t):r.setAttributeNS(n.space,n.local,""+s)})}return this.selection},stringf:function(e){if(null==this.qname){var t=this.name;this.selection.eachNode(function(n,r){var i=e(Kr.field(n,"__dhx_data__"),r);null==i?n.removeAttribute(t):n.setAttribute(t,i)})}else{var n=this.qname;this.selection.eachNode(function(r,i){var s=e(Kr.field(r,"__dhx_data__"),i);null==s?r.removeAttributeNS(t):r.setAttributeNS(n.space,n.local,s)})}return this.selection},__class__:oi}),ui=function(e){ri.call(this,e)},Er["dhx.AccessClassed"]=ui,ui.__name__=["dhx","AccessClassed"],ui.escapeERegChars=function(e){return ui._escapePattern.customReplace(e,function(e){return"\\"+e.matched(0)})},ui.getRe=function(e){return new Or("(^|\\s+)"+ui.escapeERegChars(e)+"(\\s+|$)","g")},ui.__super__=ri,ui.prototype=yr(ri.prototype,{get:function(){var e=this.selection.node(),t=e.classList;if(null!=t){for(var e=[],n=0,r=t.length;n<r;){var i=n++;e.push(t.item(i))}return e.join(" ")}return t=e.className,null!=t.baseVal?t.baseVal:t},_add:function(e,t){var n=t.classList;if(null!=n)n.add(e);else{var n=t.className,r=null!=n.baseVal,i=r?n.baseVal:n;(new Or("(^|\\s+)"+ui.escapeERegChars(e)+"(\\s+|$)","g")).match(i)||(i=Zr.collapse(i+" "+e),r?n.baseVal=i:t.className=i)}},add:function(e){return this.selection.eachNode(function(e,t){return function(n,r){return e(t,n,r)}}(wr(this,this._add),e)),this.selection},_remove:function(e,t){var n=t.classList;if(null!=n)n.remove(e);else{var n=t.className,r=null!=n.baseVal,i=r?n.baseVal:n,s=new Or("(^|\\s+)"+ui.escapeERegChars(e)+"(\\s+|$)","g"),i=Zr.collapse(s.replace(i," "));r?n.baseVal=i:t.className=i}},remove:function(e){return this.selection.eachNode(function(e,t){return function(n,r){return e(t,n,r)}}(wr(this,this._remove),e)),this.selection},exists:function(e){return this.selection.firstNode(function(t){var n=t.classList;if(null!=n)return n.contains(e);var t=t.className,n=new Or("(^|\\s+)"+ui.escapeERegChars(e)+"(\\s+|$)","g"),r=t.baseVal;return n.match(null!=r?r:t)})},toggle:function(e){return this.exists(e)?this.remove(e):this.add(e),this.selection},__class__:ui}),ai=function(e){ui.call(this,e)},Er["dhx.AccessDataClassed"]=ai,ai.__name__=["dhx","AccessDataClassed"],ai.__super__=ui,ai.prototype=yr(ui.prototype,{addf:function(e){var t=wr(this,this._add);return this.selection.eachNode(function(n,r){var i=e(Kr.field(n,"__dhx_data__"),r);null!=i&&t(i,n,r)}),this.selection},removef:function(e){var t=wr(this,this._remove);return this.selection.eachNode(function(n,r){var i=e(Kr.field(n,"__dhx_data__"),r);null!=i&&t(i,n,r)}),this.selection},__class__:ai}),fi=function(e){ri.call(this,e)},Er["dhx.AccessHtml"]=fi,fi.__name__=["dhx","AccessHtml"],fi.__super__=ri,fi.prototype=yr(ri.prototype,{"float":function(e){return this.selection.eachNode(function(t){t.innerHTML=""+e}),this.selection},clear:function(){return this.selection.eachNode(function(e){e.innerHTML=""}),this.selection},string:function(e){return this.selection.eachNode(function(t){t.innerHTML=e}),this.selection},get:function(){return this.selection.firstNode(function(e){return e.innerHTML})},__class__:fi}),li=function(e){fi.call(this,e)},Er["dhx.AccessDataHtml"]=li,li.__name__=["dhx","AccessDataHtml"],li.__super__=fi,li.prototype=yr(fi.prototype,{data:function(){return this.stringf(function(e){return""+Qr.string(e)})},floatf:function(e){return this.selection.eachNode(function(t,n){var r=e(Kr.field(t,"__dhx_data__"),n);t.innerHTML=null==r?"":""+r}),this.selection},stringf:function(e){return this.selection.eachNode(function(t,n){var r=e(Kr.field(t,"__dhx_data__"),n);null==r&&(r=""),t.innerHTML=r}),this.selection},__class__:li}),ci=function(e,t){ri.call(this,t),this.name=e},Er["dhx.AccessProperty"]=ci,ci.__name__=["dhx","AccessProperty"],ci.__super__=ri,ci.prototype=yr(ri.prototype,{"float":function(e){var t=""+e,n=this.name;return this.selection.eachNode(function(e){e[n]=t}),this.selection},string:function(e){var t=this.name;return this.selection.eachNode(function(n){n[t]=e}),this.selection},remove:function(){var e=this.name;return this.selection.eachNode(function(t){Kr.deleteField(t,e)}),this.selection},get:function(){var e=this.name;return this.selection.firstNode(function(t){return Kr.field(t,e)})},name:null,__class__:ci}),hi=function(e,t){ci.call(this,e,t)},Er["dhx.AccessDataProperty"]=hi,hi.__name__=["dhx","AccessDataProperty"],hi.__super__=ci,hi.prototype=yr(ci.prototype,{data:function(){return this.stringf(function(e){return""+Qr.string(e)})},floatf:function(e){var t=this.name;return this.selection.eachNode(function(n,r){var i=e(Kr.field(n,"__dhx_data__"),r);null==i?Kr.deleteField(n,t):n[t]=""+i}),this.selection},stringf:function(e){var t=this.name;return this.selection.eachNode(function(n,r){var i=e(Kr.field(n,"__dhx_data__"),r);null==i?Kr.deleteField(n,t):n[t]=i}),this.selection},__class__:hi}),pi=function(e,t){ri.call(this,t),this.name=e},Er["dhx.AccessStyle"]=pi,pi.__name__=["dhx","AccessStyle"],pi._getPropertyName=function(e){return"float"==e||"cssFloat"==e||"styleFloat"==e?null==fr.document.body.cssFloat?"styleFloat":"cssFloat":(0<=e.indexOf("-")&&(e=Zr.ucwords(e)),e)},pi.getComputedStyleValue=function(e,t){return pi.getComputedStyleValue="getComputedStyle"in window?function(e,t){return fr.window.getComputedStyle(e,null).getPropertyValue(t)}:function(e,t){var n=e.currentStyle;return null==Kr.field(n,t)&&(t=pi._getPropertyName(t)),null==Kr.field(n,t)?"":Kr.field(n,t)},pi.getComputedStyleValue(e,t)},pi.setStyleProperty=function(e,t,n,r){pi.setStyleProperty="setProperty"in e.style?function(e,t,n,r){e.style.setProperty(t,""+n,null==r?"":r)}:function(e,t,n,r){e=e.style,null==Kr.field(e,t)&&(t=pi._getPropertyName(t)),null!=r&&""!=r?e.cssText+=";"+Zr.dasherize(t)+":"+n+"!important;":e[t]=n},pi.setStyleProperty(e,t,n,r)},pi.removeStyleProperty=function(e){pi.removeStyleProperty="removeProperty"in e.style?function(e,t){e.style.removeProperty(t,value)}:function(e,t){var n=e.style;null==Kr.field(n,t)&&(t=pi._getPropertyName(t)),Kr.deleteField(n,t)}},pi.__super__=ri,pi.prototype=yr(ri.prototype,{color:function(e,t){var n=this,r=e.toRgbString();return this.selection.eachNode(function(e){pi.setStyleProperty(e,n.name,r,t)}),this.selection},"float":function(e,t){var n=this;return this.selection.eachNode(function(r){pi.setStyleProperty(r,n.name,e,t)}),this.selection},string:function(e,t){var n=this;return this.selection.eachNode(function(r){pi.setStyleProperty(r,n.name,e,t)}),this.selection},remove:function(){var e=this;return this.selection.eachNode(function(t){pi.removeStyleProperty(t,e.name)}),this.selection},getFloat:function(){var e=this.get();return pi.refloat.match(e)?Qr.parseFloat(pi.refloat.matched(1)):Math.NaN},get:function(){var e=this;return this.selection.firstNode(function(t){return pi.getComputedStyleValue(t,e.name)})},name:null,__class__:pi}),di=function(e,t){pi.call(this,e,t)},Er["dhx.AccessDataStyle"]=di,di.__name__=["dhx","AccessDataStyle"],di.__super__=pi,di.prototype=yr(pi.prototype,{data:function(){return this.stringf(function(e){return""+Qr.string(e)})},colorf:function(e,t){var n=this;return this.selection.eachNode(function(r,i){var s=e(Kr.field(r,"__dhx_data__"),i);null==s?pi.removeStyleProperty(r,n.name):pi.setStyleProperty(r,n.name,""+s.toRgbString(),t)}),this.selection},floatf:function(e,t){var n=this;return this.selection.eachNode(function(r,i){var s=e(Kr.field(r,"__dhx_data__"),i);null==s?pi.removeStyleProperty(r,n.name):pi.setStyleProperty(r,n.name,""+s,t)}),this.selection},stringf:function(e,t){var n=this;return this.selection.eachNode(function(r,i){var s=e(Kr.field(r,"__dhx_data__"),i);null==s?pi.removeStyleProperty(r,n.name):pi.setStyleProperty(r,n.name,s,t)}),this.selection},__class__:di}),vi=function(e){ri.call(this,e)},Er["dhx.AccessText"]=vi,vi.__name__=["dhx","AccessText"],vi.__super__=ri,vi.prototype=yr(ri.prototype,{floatNodef:function(e){return this.clear(),this.selection.eachNode(function(t,n){var r=e(t,n);null!=r&&(t.textContent=""+r)}),this.selection},stringNodef:function(e){return this.clear(),this.selection.eachNode(function(t,n){var r=e(t,n);null!=r&&(t.textContent=r)}),this.selection},"float":function(e){return this.clear(),this.selection.eachNode(function(t){t.textContent=""+e}),this.selection}
,clear:function(){return this.selection.eachNode(function(e){e.textContent=""}),this.selection},string:function(e){return this.clear(),this.selection.eachNode(function(t){t.textContent=e}),this.selection},get:function(){return this.selection.firstNode(function(e){return e.textContent})},__class__:vi}),mi=function(e){vi.call(this,e)},Er["dhx.AccessDataText"]=mi,mi.__name__=["dhx","AccessDataText"],mi.__super__=vi,mi.prototype=yr(vi.prototype,{data:function(){return this.stringf(function(e){return""+Qr.string(e)})},floatf:function(e){return this.clear(),this.selection.eachNode(function(t,n){var r=e(Kr.field(t,"__dhx_data__"),n);null!=r&&(t.textContent=""+r)}),this.selection},stringf:function(e){return this.clear(),this.selection.eachNode(function(t,n){var r=e(Kr.field(t,"__dhx_data__"),n);null!=r&&(t.textContent=r)}),this.selection},__class__:mi}),gi=function(e,t){this.transition=e,this.tweens=t},Er["dhx.AccessTween"]=gi,gi.__name__=["dhx","AccessTween"],gi.prototype={_that:function(){return this.transition},transitionFloatTweenf:function(e){return function(t,n,r){return Hr.interpolatef(r,e(t,n))}},transitionFloatTween:function(e){return function(t,n,r){return Hr.interpolatef(r,e)}},transitionCharsTweenf:function(e){return function(t,n,r){return Zr.interpolateCharsf(r,e(t,n))}},transitionCharsTween:function(e){return function(t,n,r){return Zr.interpolateCharsf(r,e)}},transitionStringTweenf:function(e){return function(t,n,r){return Zr.interpolatef(r,e(t,n))}},transitionStringTween:function(e){return function(t,n,r){return Zr.interpolatef(r,e)}},transitionColorTweenf:function(e){return function(t,n,r){return kn.Rgb.interpolatef(r,e(t,n))}},transitionColorTween:function(e){return function(t,n,r){return kn.Rgb.interpolatef(r,e)}},tweens:null,transition:null,__class__:gi},yi=function(e,t,n){gi.call(this,t,n),this.name=e,this.qname=si.qualify(e)},Er["dhx.AccessTweenAttribute"]=yi,yi.__name__=["dhx","AccessTweenAttribute"],yi.__super__=gi,yi.prototype=yr(gi.prototype,{floatTweenNodef:function(e){var t=this.name,n;return this.tweens.set("attr."+t,null==this.qname?function(n,r){var i=e(n,r,Qr.parseFloat(n.getAttribute(t)));return function(e){n.setAttribute(t,""+i(e))}}:function(n,r){var i=e(n,r,Qr.parseFloat(n.getAttributeNS(t.space,t.local)));return function(e){n.setAttributeNS(t.space,t.local,""+i(e))}}),this.transition},"float":function(e){return this.floatTweenNodef(this.transitionFloatTween(e))},floatNodef:function(e){return this.floatTweenNodef(this.transitionFloatTweenf(e))},stringTweenNodef:function(e){var t=this.name,n;return this.tweens.set("attr."+t,null==this.qname?function(n,r){var i=e(n,r,n.getAttribute(t));return function(e){n.setAttribute(t,i(e))}}:function(n,r){var i=e(n,r,n.getAttributeNS(t.space,t.local));return function(e){n.setAttributeNS(t.space,t.local,i(e))}}),this.transition},string:function(e){return this.stringTweenNodef(this.transitionStringTween(e))},stringNodef:function(e){return this.stringTweenNodef(this.transitionStringTweenf(e))},qname:null,name:null,__class__:yi}),bi=function(e,t,n){yi.call(this,e,t,n)},Er["dhx.AccessDataTweenAttribute"]=bi,bi.__name__=["dhx","AccessDataTweenAttribute"],bi.__super__=yi,bi.prototype=yr(yi.prototype,{floatTweenf:function(e){var t=this.name,n;return this.tweens.set("attr."+t,null==this.qname?function(n,r){var i=e(Kr.field(n,"__dhx_data__"),r,Qr.parseFloat(n.getAttribute(t)));return function(e){n.setAttribute(t,""+i(e))}}:function(n,r){var i=e(Kr.field(n,"__dhx_data__"),r,Qr.parseFloat(n.getAttributeNS(t.space,t.local)));return function(e){n.setAttributeNS(t.space,t.local,""+i(e))}}),this.transition},stringTweenf:function(e){var t=this.name,n;return this.tweens.set("attr."+t,null==this.qname?function(n,r){var i=e(Kr.field(n,"__dhx_data__"),r,n.getAttribute(t));return function(e){n.setAttribute(t,i(e))}}:function(n,r){var i=e(Kr.field(n,"__dhx_data__"),r,n.getAttributeNS(t.space,t.local));return function(e){n.setAttributeNS(t.space,t.local,i(e))}}),this.transition},floatf:function(e){return this.floatTweenNodef(this.transitionFloatTweenf(function(t,n){return e(Kr.field(t,"__dhx_data__"),n)}))},stringf:function(e){return this.stringTweenNodef(this.transitionStringTweenf(function(t,n){return e(Kr.field(t,"__dhx_data__"),n)}))},__class__:bi}),wi=function(e,t,n){gi.call(this,t,n),this.name=e},Er["dhx.AccessTweenStyle"]=wi,wi.__name__=["dhx","AccessTweenStyle"],wi.__super__=gi,wi.prototype=yr(gi.prototype,{colorTweenNodef:function(e,t){null==t&&(t=null);var n=this.name;return this.tweens.set("style."+n,function(r,i){var s=e(r,i,kn.Colors.parse(pi.getComputedStyleValue(r,n)));return function(e){pi.setStyleProperty(r,n,s(e).toRgbString(),t)}}),this.transition},color:function(e,t){return this.colorTweenNodef(this.transitionColorTween(kn.Colors.parse(e)),t)},colorNodef:function(e,t){return this.colorTweenNodef(this.transitionColorTweenf(e),t)},stringTweenNodef:function(e,t){null==t&&(t=null);var n=this.name;return this.tweens.set("style."+n,function(r,i){var s=e(r,i,pi.getComputedStyleValue(r,n));return function(e){pi.setStyleProperty(r,n,s(e),t)}}),this.transition},string:function(e,t){return this.stringTweenNodef(this.transitionStringTween(e),t)},stringNodef:function(e,t){return this.stringTweenNodef(this.transitionStringTweenf(e),t)},floatTweenNodef:function(e,t){var n=this.name;return this.tweens.set("style."+n,function(r,i){var s=e(r,i,Qr.parseFloat(pi.getComputedStyleValue(r,n)));return function(e){pi.setStyleProperty(r,n,""+s(e),t)}}),this.transition},"float":function(e,t){return this.floatTweenNodef(this.transitionFloatTween(e),t)},floatNodef:function(e,t){return this.floatTweenNodef(this.transitionFloatTweenf(e),t)},name:null,__class__:wi}),Ei=function(e,t,n){wi.call(this,e,t,n)},Er["dhx.AccessDataTweenStyle"]=Ei,Ei.__name__=["dhx","AccessDataTweenStyle"],Ei.__super__=wi,Ei.prototype=yr(wi.prototype,{colorTweenf:function(e,t){null==t&&(t=null);var n=this.name;return this.tweens.set("style."+n,function(r,i){var s=e(Kr.field(r,"__dhx_data__"),i,kn.Colors.parse(pi.getComputedStyleValue(r,n)));return function(e){pi.setStyleProperty(r,n,s(e).toRgbString(),t)}}),this.transition},colorf:function(e,t){return this.colorTweenNodef(this.transitionColorTweenf(function(t,n){return e(Kr.field(t,"__dhx_data__"),n)}),t)},stringTweenf:function(e,t){null==t&&(t=null);var n=this.name;return this.tweens.set("style."+n,function(r,i){var s=e(Kr.field(r,"__dhx_data__"),i,pi.getComputedStyleValue(r,n));return function(e){pi.setStyleProperty(r,n,s(e),t)}}),this.transition},stringf:function(e,t){return this.stringTweenNodef(this.transitionStringTweenf(function(t,n){return e(Kr.field(t,"__dhx_data__"),n)}),t)},floatTweenf:function(e,t){null==t&&(t=null);var n=this.name;return this.tweens.set("style."+n,function(r,i){var s=e(Kr.field(r,"__dhx_data__"),i,Qr.parseFloat(pi.getComputedStyleValue(r,n)));return function(e){pi.setStyleProperty(r,n,""+s(e),t)}}),this.transition},floatf:function(e,t){return this.floatTweenNodef(this.transitionFloatTweenf(function(t,n){return e(Kr.field(t,"__dhx_data__"),n)}),t)},__class__:Ei}),Si=function(e,t){gi.call(this,e,t)},Er["dhx.AccessTweenText"]=Si,Si.__name__=["dhx","AccessTweenText"],Si.__super__=gi,Si.prototype=yr(gi.prototype,{chars:function(e){return this.stringTweenNodef(this.transitionCharsTween(e))},charsNodef:function(e){return this.stringTweenNodef(this.transitionCharsTweenf(e))},stringTweenNodef:function(e){return this.tweens.set("text",function(t,n){var r=e(t,n,t.textContent);return function(e){t.textContent=r(e)}}),this.transition},string:function(e){return this.stringTweenNodef(this.transitionStringTween(e))},stringNodef:function(e){return this.stringTweenNodef(this.transitionStringTweenf(e))},__class__:Si}),xi=function(e,t){Si.call(this,e,t)},Er["dhx.AccessDataTweenText"]=xi,xi.__name__=["dhx","AccessDataTweenText"],xi.__super__=Si,xi.prototype=yr(Si.prototype,{stringTweenf:function(e){return this.tweens.set("text",function(t,n){var r=e(Kr.field(t,"__dhx_data__"),n,d.textContent);return function(e){d.textContent=r(e)}}),this.transition},charsf:function(e){return this.stringTweenNodef(this.transitionCharsTweenf(function(t,n){return e(Kr.field(t,"__dhx_data__"),n)}))},stringf:function(e){return this.stringTweenNodef(this.transitionStringTweenf(function(t,n){return e(Kr.field(t,"__dhx_data__"),n)}))},__class__:xi}),Ti={__ename__:["dhx","HostType"],__constructs__:"UnknownServer,NodeJs,IE,Firefox,Safari,Chrome,Opera,Unknown".split(","),UnknownServer:["UnknownServer",0]},Ti.UnknownServer.toString=Sr,Ti.UnknownServer.__enum__=Ti,Ti.NodeJs=["NodeJs",1],Ti.NodeJs.toString=Sr,Ti.NodeJs.__enum__=Ti,Ti.IE=function(e){return e=["IE",2,e],e.__enum__=Ti,e.toString=Sr,e},Ti.Firefox=function(e){return e=["Firefox",3,e],e.__enum__=Ti,e.toString=Sr,e},Ti.Safari=function(e){return e=["Safari",4,e],e.__enum__=Ti,e.toString=Sr,e},Ti.Chrome=function(e){return e=["Chrome",5,e],e.__enum__=Ti,e.toString=Sr,e},Ti.Opera=function(e){return e=["Opera",6,e],e.__enum__=Ti,e.toString=Sr,e},Ti.Unknown=function(e){return e=["Unknown",7,e],e.__enum__=Ti,e.toString=Sr,e},Ni={__ename__:["dhx","EnvironmentType"],__constructs__:["Mobile","Desktop","Server","UnknownEnvironment"],Mobile:["Mobile",0]},Ni.Mobile.toString=Sr,Ni.Mobile.__enum__=Ni,Ni.Desktop=["Desktop",1],Ni.Desktop.toString=Sr,Ni.Desktop.__enum__=Ni,Ni.Server=["Server",2],Ni.Server.toString=Sr,Ni.Server.__enum__=Ni,Ni.UnknownEnvironment=["UnknownEnvironment",3],Ni.UnknownEnvironment.toString=Sr,Ni.UnknownEnvironment.__enum__=Ni,Ci={__ename__:["dhx","OSType"],__constructs__:"Windows,IOs,Android,Mac,Linux,UnknownOs".split(",")},Ci.Windows=function(e){return e=["Windows",0,e],e.__enum__=Ci,e.toString=Sr,e},Ci.IOs=["IOs",1],Ci.IOs.toString=Sr,Ci.IOs.__enum__=Ci,Ci.Android=["Android",2],Ci.Android.toString=Sr,Ci.Android.__enum__=Ci,Ci.Mac=["Mac",3],Ci.Mac.toString=Sr,Ci.Mac.__enum__=Ci,Ci.Linux=["Linux",4],Ci.Linux.toString=Sr,Ci.Linux.__enum__=Ci,Ci.UnknownOs=["UnknownOs",5],Ci.UnknownOs.toString=Sr,Ci.UnknownOs.__enum__=Ci,ki=function(){},Er["dhx.ClientHost"]=ki,ki.__name__=["dhx","ClientHost"],ki.isIE=function(){var e;switch(ki.host[1]){case 2:e=!0;break;default:e=!1}return e},ki.hostVersion=function(){var e;e=ki.host;switch(e[1]){case 2:case 3:case 4:case 5:case 6:e=e[2];break;default:e=null}return e},ki.hostString=function(){var e;switch(ki.host[1]){case 0:e="unknown_server";break;case 7:e="unknown";break;case 1:e="nodejs";break;default:e=ki.host[0]}return e},ki.osString=function(){return ki.os[0]},ki.osVersion=function(){var e;e=ki.os;switch(e[1]){case 0:e=e[2];break;default:e=null}return e},ki.environmentString=function(){return ki.environment[0]},ki.userAgent=function(){return""+navigator.userAgent},ki.hasNavigator=function(){return"undefined"!=typeof navigator},ar=void 0,fr=void 0,lr=void 0,cr=void 0,fr=function(){},Er["js.Lib"]=fr,fr.__name__=["js","Lib"],fr.alert=function(e){alert(ar.__string_rec(e,""))},Li=function(e){this.nodes=e},Er["dhx.Group"]=Li,Li.__name__=["dhx","Group"],Li.merge=function(e,t){if(t.length!=e.length)throw"Group length not equal";for(var n=0,r=t.length;n<r;){var i=n++,s=e[i],i=t[i];if(s.parentNode!=i.parentNode)throw"parentNodes not the same!";if(s.nodes.length!=i.nodes.length)throw"node length mismatch!";for(var o=0,u=i.nodes.length;o<u;){var a=o++;null==i.nodes[a]&&(i.nodes[a]=s.nodes[a])}}return t},Li.prototype={sort:function(e){this.nodes.sort(e)},push:function(e){this.nodes.push(e)},count:function(){return this.nodes.length},get:function(e){return this.nodes[e]},iterator:function(){return Fr.iter(this.nodes)},each:function(e){for(var t=0,n=this.nodes.length;t<n;){var r=t++;null!=this.nodes[r]&&e(Li.current=this.nodes[r],r)}},nodes:null,parentNode:null,__class__:Li},Ai=function(e){this.groups=e},Er["dhx.BaseSelection"]=Ai,Ai.__name__=["dhx","BaseSelection"],Ai.listenerEnterLeave=function(e,t,n){var r=Oi.event.relatedTarget;null==r||Ai.isChild(t,r)||e(t,n)},Ai.isChild=function(e,t){if(t==e)return!1;for(;null!=t;)if(t=t.parentNode,t==e)return!0;return!1},Ai.addEvent=function(e,t,n,r){null!=e.addEventListener?Ai.addEvent=function(e,t,n,r){e.addEventListener(t,n,r)}:null!=e.attachEvent&&(Ai.addEvent=function(e,t,n){e.attachEvent(t,n)}),Ai.addEvent(e,t,n,r)},Ai.removeEvent=function(e,t,n,r){null!=e.removeEventListener?Ai.removeEvent=function(e,t,n){e.removeEventListener(t,Kr.field(e,"__dhx_on__"+n),!1)}:null!=e.attachEvent&&(Ai.removeEvent=function(e,t,n){e.detachEvent(t,Kr.field(e,"__dhx_on__"+n))}),Ai.removeEvent(e,t,n,r)},Ai.bindJoin=function(e,t,n,r,i,s){var o=t.nodes.length,u=n.length,a=[],f=[],l=[],c,h,p=new Br,d=[],v;h=n.length;for(var m=0;m<o;){var g=m++;c=t.nodes[g],v=e(Kr.field(c,"__dhx_data__"),g),p.exists(v)?f[h++]=c:p.set(v,c),d.push(v)}for(m=0;m<u;)g=m++,c=p.get(v=e(h=n[g],g)),null!=c?(c.__dhx_data__=h,a[g]=c,l[g]=f[g]=null):(c={__dhx_data__:h},l[g]=c,a[g]=f[g]=null),p.remove(v);for(m=0;m<o;)g=m++,p.exists(d[g])&&(f[g]=t.nodes[g]);e=new Li(l),e.parentNode=t.parentNode,i.push(e),i=new Li(a),i.parentNode=t.parentNode,r.push(i),r=new Li(f),r.parentNode=t.parentNode,s.push(r)},Ai.bind=function(e,t,n,r,i){var s=e.nodes.length,o=e.nodes.length,u=[],a=[],f=[],l,c;s>t.length&&(s=t.length),o<t.length&&(o=t.length);for(var h=0;h<s;){var p=h++;l=e.nodes[p],c=t[p],null!=l?(l.__dhx_data__=c,u[p]=l,f[p]=a[p]=null):(f[p]={__dhx_data__:c},u[p]=a[p]=null)}for(h=t.length;s<h;)p=s++,l={__dhx_data__:t[p]},f[p]=l,u[p]=a[p]=null;for(h=t.length;h<o;)p=h++,a[p]=e.nodes[p],f[p]=u[p]=null;t=new Li(f),t.parentNode=e.parentNode,r.push(t),r=new Li(u),r.parentNode=e.parentNode,n.push(r),n=new Li(a),n.parentNode=e.parentNode,i.push(n)},Ai.prototype={_selectAll:function(e){for(var t=[],n,r=0,i=this.groups;r<i.length;){n=i[r],++r;for(var s=Fr.iter(n.nodes);s.hasNext();){var o=s.next();null!=o&&(t.push(n=new Li(e(o))),n.parentNode=o)}}return this.createSelection(t)},_select:function(e){for(var t=[],n,r,i=0,s=this.groups;i<s.length;){r=s[i],++i,t.push(n=new Li([])),n.parentNode=r.parentNode;for(var o=Fr.iter(r.nodes);o.hasNext();){var u=o.next();if(null!=u){if(n.parentNode=u,n.nodes.push(r=e(u)),null!=r)r.__dhx_data__=Kr.field(u,"__dhx_data__")}else n.nodes.push(null)}}return this.createSelection(t)},createSelection:function(){throw"abstract method"},onNode:function(e,t,n){null==n&&(n=!1);var r=e.indexOf("."),i=0>r?e:Fr.substr(e,0,r);return("mouseenter"==i||"mouseleave"==i)&&!ki.isIE()&&(t=function(e,t){return function(n,r){return e(t,n,r)}}(Ai.listenerEnterLeave,t),i="mouseenter"==i?"mouseover":"mouseout"),this.eachNode(function(r,s){var o=function(e){var n=Oi.event;Oi.event=e;try{t(r,s)}catch(i){}Oi.event=n};null!=Kr.field(r,"__dhx_on__"+e)&&(Ai.removeEvent(r,i,e,n),Kr.deleteField(r,"__dhx_on__"+e)),null!=t&&(r["__dhx_on__"+e]=o,Ai.addEvent(r,i,o,n))})},mapNode:function(e){for(var t=[],n=0,r=this.groups;n<r.length;){var i=r[n];++n;for(var s=-1,i=Fr.iter(i.nodes);i.hasNext();){var o=i.next();null!=o&&t.push(e(o,++s))}}return t},filterNode:function(e){for(var t=[],n,r=0,i=this.groups;r<i.length;){var s=i[r];++r;var o=new Li(n=[]);o.parentNode=s.parentNode,t.push(o),o=-1;for(s=Fr.iter(s.nodes);s.hasNext();){var u=s.next();null!=u&&e(u,++o)&&n.push(u)}}return this.createSelection(t)},empty:function(){return null==this.firstNode(function(e){return e})},node:function(){return this.firstNode(function(e){return e})},firstNode:function(e){for(var t=0,n=this.groups;t<n.length;){var r=n[t];++t;for(r=Fr.iter(r.nodes);r.hasNext();){var i=r.next();if(null!=i)return e(i)}}return null},sortNode:function(e){for(var t=this.groups.length,n=0;n<t;){var r=this.groups[n++];r.nodes.sort(e);for(var i=r.nodes.length,s=r.nodes[0],o=1;o<i;){var u=o++,u=r.nodes[u];null!=u&&(null!=s&&s.parentNode.insertBefore(u,s.nextSibling),s=u)}}return this},insert:function(e,t,n){var r=si.qualify(e),i;return this._select(null==r?function(r){var i=fr.document.createElement(e);return r.insertBefore(i,null!=t?t:Oi.select(n).node()),i}:function(e){var i=fr.document.createElementNS(r.space,r.local);return e.insertBefore(i,null!=t?t:Oi.select(n).node()),i})},eachNode:function(e){for(var t=0,n=this.groups;t<n.length;){var r=n[t];++t,r.each(e)}return this},remove:function(){return this.eachNode(function(e){var t=e.parentNode;null!=t&&t.removeChild(e)})},append:function(e){var t=si.qualify(e),n;return this._select(null==t?function(t){var n=fr.document.createElement(e);return t.appendChild(n),n}:function(e){var n=fr.document.createElementNS(t.space,t.local);return e.appendChild(n),n})},_this:function(){return this},selectAll:function(e){return this._selectAll(function(t){return Oi.selectionEngine.selectAll(e,t)})},select:function(e){return this._select(function(t){return Oi.selectionEngine.select(e,t)})},groups:null,parentNode:null,__class__:Ai},Mi=function(e){Ai.call(this,e)},Er["dhx.UnboundSelection"]=Mi,Mi.__name__=["dhx","UnboundSelection"],Mi.__super__=Ai,Mi.prototype=yr(Ai.prototype,{selectAllData:function(e){return e=this.selectAll(e),new _i(e.groups)},data:function(e,t){var n=[],r=[],i=[];if(null==t)for(var s=0,o=this.groups;s<o.length;){var u=o[s];++s,Ai.bind(u,e,n,r,i)}else{s=0;for(o=this.groups;s<o.length;)u=o[s],++s,Ai.bindJoin(t,u,e,n,r,i)}return new Di(n,r,i)},transition:function(){return new Pi(this)},style:function(e){return new pi(e,this)},property:function(e){return new ci(e,this)},classed:function(){return new ui(this)},attr:function(e){return new ii(e,this)},text:function(){return new vi(this)},html:function(){return new fi(this)},__class__:Mi}),Hi=function(e){Mi.call(this,e)},Er["dhx.Selection"]=Hi,Hi.__name__=["dhx","Selection"],Hi.__properties__={get_currentNode:"get_currentNode",get_current:"get_current"},Hi.create=function(e){return new Hi(e)},Hi.get_current=function(){return Oi.selectNode(Li.current)},Hi.get_currentNode=function(){return Li.current},Hi.__super__=Mi,Hi.prototype=yr(Mi.prototype,{createSelection:function(e){return new Hi(e)},__class__:Hi}),Bi=function(){},Er["dhx.ISelectorEngine"]=Bi,Bi.__name__=["dhx","ISelectorEngine"],Bi.prototype={selectAll:null,select:null,__class__:Bi},ji=function(){},Er["dhx.NativeSelectorEngine"]=ji,ji.__name__=["dhx","NativeSelectorEngine"],ji.__interfaces__=[Bi],ji.supported=function(){return"undefined"!=typeof document.querySelector},ji.prototype={selectAll:function(e,t){null==t&&(t=fr.document);for(var n=t.querySelectorAll(e),r=[],i=0,s=n.length;i<s;){var o=i++;r.push(n[o])}return r},select:function(e,t){return null==t&&(t=fr.document),t.querySelector(e)},__class__:ji},Fi=function(){},Er["dhx.SizzleEngine"]=Fi,Fi.__name__=["dhx","SizzleEngine"],Fi.__interfaces__=[Bi],Fi.supported=function(){return null!=Fi.getSizzle()},Fi.getSizzle=function(){return"undefined"!=typeof Sizzle&&Sizzle||"undefined"!=typeof jQuery&&jQuery.find||"undefined"!=typeof $&&$.find},Fi.prototype={selectAll:function(e,t){return Ii.uniqueSort(Ii.select(e,t))},select:function(e,t){return Ii.select(e,t)[0]},__class__:Fi},Oi=function(){},Er["dhx.Dom"]=Oi,Oi.__name__=["dhx","Dom"],Oi.select=function(e){return Oi.doc.select(e)},Oi.selectAll=function(e){return Oi.doc.selectAll(e)},Oi.selectNode=function(e){return Hi.create([new Li([e])])},Oi.selectNodes=function(e){return Hi.create([new Li(e)])},Oi.selectNodeData=function(e){return _i.create([new Li([e])])},si=function(){},Er["dhx.Namespace"]=si,si.__name__=["dhx","Namespace"],si.qualify=function(e){var t=e.indexOf(":");if(0>t)return null;var n=si.prefix.get(Fr.substr(e,0,t));if(null==n)throw"unable to find a namespace for "+n;return new qi(n,Fr.substr(e,t+1,null))},qi=function(e,t){this.space=e,this.local=t},Er["dhx.NSQualifier"]=qi,qi.__name__=["dhx","NSQualifier"],qi.prototype={local:null,space:null,__class__:qi},Ri=function(e){Ai.call(this,e)},Er["dhx.BoundSelection"]=Ri,Ri.__name__=["dhx","BoundSelection"],Ri.__super__=Ai,Ri.prototype=yr(Ai.prototype,{on:function(e,t,n){return null==n&&(n=!1),this.onNode(e,null==t?null:function(e,n){t(Kr.field(e,"__dhx_data__"),n)},n)},first:function(e){return this.firstNode(function(t){return e(Kr.field(t,"__dhx_data__"))})},map:function(e){for(var t=[],n=0,r=this.groups;n<r.length;){var i=r[n];++n;for(var s=new Li([]),o=0,i=Fr.iter(i.nodes);i.hasNext();){var u=i.next();null!=u&&(u.__dhx_data__=e(Kr.field(u,"__dhx_data__"),o++)),s.nodes.push(u)}t.push(s)}return this.createSelection(t)},filter:function(e){return this.filterNode(function(t,n){return e(Kr.field(t,"__dhx_data__"),n)})},sort:function(e){return this.sortNode(function(t,n){return e(Kr.field(t,"__dhx_data__"),Kr.field(n,"__dhx_data__"))})},each:function(e){return this.eachNode(function(t,n){e(Kr.field(t,"__dhx_data__"),n)})},selfData:function(){return this.dataf(function(e){return e})},dataf:function(e,t){if(null==t)for(var n=[],r=[],i=[],s=0,o=0,u=this.groups;o<u.length;){var a=u[o];++o,Ai.bind(a,e(Kr.field(a.parentNode,"__dhx_data__"),s++),n,r,i)}else{n=[],r=[],i=[],o=s=0;for(u=this.groups;o<u.length;)a=u[o],++o,Ai.bindJoin(t,a,e(Kr.field(a.parentNode,"__dhx_data__"),s++),n,r,i)}return new Di(n,r,i)},data:function(e,t){var n=[],r=[],i=[];if(null==t)for(var s=0,o=this.groups;s<o.length;){var u=o[s];++s,Ai.bind(u,e,n,r,i)}else{s=0;for(o=this.groups;s<o.length;)u=o[s],++s,Ai.bindJoin(t,u,e,n,r,i)}return new Di(n,r,i)},transition:function(){return new Ui(this)},style:function(e){return new di(e,this)},property:function(e){return new hi(e,this)},classed:function(){return new ai(this)},attr:function(e){return new oi(e,this)},text:function(){return new mi(this)},html:function(){return new li(this)},__class__:Ri}),zi=function(e,t){Ri.call(this,e),this._choice=t},Er["dhx.UpdateSelection"]=zi,zi.__name__=["dhx","UpdateSelection"],zi.__super__=Ri,zi.prototype=yr(Ri.prototype,{exit:function(){return this._choice.exit()},enter:function(){return this._choice.enter()},update:function(){return this},createSelection:function(e){return new zi(e,this._choice)},_choice:null,__class__:zi}),Di=function(e,t,n){this._update=e,this._enter=t,this._exit=n,zi.call(this,this._update,this)},Er["dhx.DataChoice"]=Di,Di.__name__=["dhx","DataChoice"],Di.merge=function(e,t){Li.merge(e,t._update)},Di.__super__=zi,Di.prototype=yr(zi.prototype,{exit:function(){return new Wi(this._exit,this)},enter:function(){return new Xi(this._enter,this)},_exit:null,_enter:null,_update:null,__class__:Di}),_i=function(e){Ri.call(this,e)},Er["dhx.ResumeSelection"]=_i,_i.__name__=["dhx","ResumeSelection"],_i.create=function(e){return new _i(e)},_i.__super__=Ri,_i.prototype=yr(Ri.prototype,{createSelection:function(e){return new _i(e)},__class__:_i}),Xi=function(e,t){this.groups=e,this._choice=t},Er["dhx.PreEnterSelection"]=Xi,Xi.__name__=["dhx","PreEnterSelection"],Xi.prototype={_select:function(e){for(var t=[],n,r,i=0,s=this.groups;i<s.length;){var o=s[i];++i,t.push(n=new Li([])),n.parentNode=o.parentNode;for(var u=Fr.iter(o.nodes);u.hasNext();){var a=u.next();null!=a?(n.nodes.push(r=e(o.parentNode)),r.__dhx_data__=Kr.field(a,"__dhx_data__")):n.nodes.push(null)}}return Di.merge(t,this._choice),this.createSelection(t)},createSelection:function(e){return new Vi(e,this._choice)},insert:function(e,t,n){var r=si.qualify(e),i;return this._select(null==r?function(r){var i=fr.document.createElement(e),s=null!=t?t:Oi.selectNode(r).select(n).node();return r.insertBefore(i,s),i}:function(e){var i=fr.document.createElementNS(r.space,r.local),s=null!=t?t:Oi.selectNode(e).select(n).node();return e.insertBefore(i,s),i})},append:function(e){var t=si.qualify(e),n;return this._select(null==t?function(t){var n=fr.document.createElement(e);return t.appendChild(n),n}:function(e){var n=fr.document.createElementNS(t.space,t.local);return e.appendChild(n),n})},_choice:null,groups:null,__class__:Xi},Vi=function(e,t){Ri.call(this,e),this._choice=t},Er["dhx.EnterSelection"]=Vi,Vi.__name__=["dhx","EnterSelection"],Vi.__super__=Ri,Vi.prototype=yr(Ri.prototype,{update:function(){return this._choice.update()},exit:function(){return this._choice.exit()},createSelection:function(e){return new Vi(e,this._choice)},_choice:null,__class__:Vi}),Wi=function(e,t){Mi.call(this,e),this._choice=t},Er["dhx.ExitSelection"]=Wi,Wi.__name__=["dhx","ExitSelection"],Wi.__super__=Mi,Wi.prototype=yr(Mi.prototype,{update:function(){return this._choice.update()},enter:function(){return this._choice.enter()},createSelection:function(e){return new Wi(e,this._choice)},_choice:null,__class__:Wi}),$i=function(){},Er["dhx.Svg"]=$i,$i.__name__=["dhx","Svg"],$i.mouse=function(e){var t=(null!=e.ownerSVGElement?e.ownerSVGElement:e).createSVGPoint();if($i._usepage&&(fr.window.scrollX||fr.window.scrollY)){var n=Oi.selectNode(fr.document.body).append("svg:svg").style("position").string("absolute").style("top")["float"](0).style("left")["float"](0),r=n.node().getScreenCTM();$i._usepage=!r.f&&!r.e,n.remove()}return $i._usepage?(t.x=Oi.event.pageX,t.y=Oi.event.pageY):(t.x=Oi.event.clientX,t.y=Oi.event.clientY),t=t.matrixTransform(e.getScreenCTM().inverse()),[t.x,t.y]},Ji=function(){},Er["dhx.Timer"]=Ji,Ji.__name__=["dhx","Timer"],Ji.timer=function(e,t){null==t&&(t=0);var n=(new Date).getTime(),r=!1,i=Ji.queue;if(Math.isFinite(t)){for(;null!=i;){if(Kr.compareMethods(e,i.f)){i.then=n,i.delay=t,r=!0;break}i=i.next}r||(Ji.queue={f:e,then:n,delay:t,next:Ji.queue,flush:!1}),0==Ji.interval&&(Ji.timeout=clearTimeout(Ji.timeout),Ji.interval=1,window.requestAnimationFrame(Ji._step))}},Ji.step=function(){for(var e,t=(new Date).getTime(),n=Ji.queue;null!=n;)e=t-n.then,e>n.delay&&(n.flush=n.f(e)),n=n.next;e=Ji._flush()-t,24<e?(Math.isFinite(e)&&(clearTimeout(Ji.timeout),Ji.timeout=setTimeout(Ji._step,e)),Ji.interval=0):(Ji.interval=1,window.requestAnimationFrame(Ji._step))},Ji.flush=function(){for(var e,t=(new Date).getTime(),n=Ji.queue;null!=n;)e=t-n.then,0==n.delay&&(n.flush=n.f(e)),n=n.next;Ji._flush()},Ji._flush=function(){var e;for(var t=null,n=Ji.queue,r=Math.POSITIVE_INFINITY;null!=n;)n.flush?(e=null!=t?t.next=n.next:Ji.queue=n.next,n=e):(r=Math.min(r,n.then+n.delay),n=(t=n).next);return r},Ki=function(e){this.selection=e;var t=this._transitionId=0<Ki._inheritid?Ki._inheritid:++Ki._id;this._tweens=new Br,this._interpolators=[],this._remove=!1,this._stage=[],this._delay=[],this._duration=[],this._ease=Ki.DEFAULT_EASE,this._step=wr(this,this.step),e.eachNode(function(e){Kr.hasField(e,"__dhx_transition__")?Kr.field(e,"__dhx_transition__").owner=t:e.__dhx_transition__={owner:t}}),this.delay(null,0),this.duration(null,250)},Er["dhx.BaseTransition"]=Ki,Ki.__name__=["dhx","BaseTransition"],Ki.CUBIC_EQUATION=function(e){return Math.pow(e,3)},Ki.DEFAULT_EASE=function(e){return.5*(.5>e?Ki.CUBIC_EQUATION(2*e):2-Ki.CUBIC_EQUATION(2-2*e))},Ki.prototype={_this:function(){return this},createTransition:function(){throw"abstract method"},selectAll:function(e){var t,e=this.createTransition(this.selection.selectAll(e));e._ease=this._ease;var n=this._delay,r=this._duration;return t=-1,e.delay(function(e,r){return n[0<r?t:++t]}),t=-1,e.delay(function(e,n){return r[0<n?t:++t]}),e},select:function(e){var t,e=this.createTransition(this.selection.select(e));e._ease=this._ease;var n=this._delay,r=this._duration;return t=-1,e.delay(function(){return n[++t]}),t=-1,e.delay(function(){return r[++t]}),e},remove:function(e){return null==e&&(e=!0),this._remove=e,this._this()},ease:function(e){return this._ease=e,this._this()},duration:function(e,t){null==t&&(t=0);var n=-1,r=this;return null!=e?(this._durationMax=0,this.selection.eachNode(function(t,i){var s=r._duration[++n]=e(t,i);s>r._durationMax&&(r._durationMax=s)})):(this._durationMax=t,this.selection.eachNode(function(){r._duration[++n]=r._durationMax})),this._this()},delay:function(e,t){null==t&&(t=0);var n=Math.POSITIVE_INFINITY,r=-1,i=this;return null!=e?this.selection.eachNode(function(t,s){var o=i._delay[++r]=e(t,s);o<n&&(n=o)}):(n=t,this.selection.eachNode(function(){i._delay[++r]=n})),Ji.timer(this._step,n),this._this()},stop:function(){var e=-1,t=this;return this.selection.eachNode(function(n){t._stage[++e]=2,Kr.deleteField(n,"__dhx_transition__")}),this._this()},endNode:function(e){return this._end=e,this._this()},startNode:function(e){return this._start=e,this._this()},step:function(e){var t=!0,n=-1,r=this;return this.selection.eachNode(function(i,s){if(2!=r._stage[++n]){var o=(e-r._delay[n])/r._duration[n],u=Kr.field(i,"__dhx_transition__"),a,f=r._interpolators[n];if(1>o){if(t=!1,0>o)return}else o=1;if(null!=r._stage[n]){if(null==u||u.active!=r._transitionId){r._stage[n]=2;return}}else{if(null==u||u.active>r._transitionId){r._stage[n]=2;return}r._stage[n]=1,null!=r._start&&r._start(i,s),f=r._interpolators[n]=new Br,u.active=r._transitionId;for(a=r._tweens.keys();a.hasNext();){var l=a.next(),c=r._tweens.get(l);f.set(l,c(i,s))}}a=r._ease(o);for(c=r._tweens.keys();c.hasNext();)l=c.next(),f.get(l)(a);1==o&&(r._stage[n]=2,u.active==r._transitionId)&&(o=u.owner,o==r._transitionId&&(Kr.deleteField(i,"__dhx_transition__"),r._remove&&i.parentNode.removeChild(i)),Ki._inheritid=r._transitionId,null!=r._end&&r._end(i,s),Ki._inheritid=0,u.owner=o)}}),t},selection:null,_end:null,_start:null,_step:null,_ease:null,_durationMax:null,_duration:null,_delay:null,_stage:null,_remove:null,_interpolators:null,_tweens:null,_transitionId:null,__class__:Ki},Pi=function(e){Ki.call(this,e)},Er["dhx.UnboundTransition"]=Pi,Pi.__name__=["dhx","UnboundTransition"],Pi.__super__=Ki,Pi.prototype=yr(Ki.prototype,{createTransition:function(e){return new Pi(e)},attr:function(e){return new yi(e,this,this._tweens)},style:function(e){return new wi(e,this,this._tweens)},text:function(){return new Si(this,this._tweens)},__class__:Pi}),Ui=function(e){Ki.call(this,e)},Er["dhx.BoundTransition"]=Ui,Ui.__name__=["dhx","BoundTransition"],Ui.__super__=Ki,Ui.prototype=yr(Ki.prototype,{createTransition:function(e){return new Ui(e)},end:function(e){return this.endNode(function(t,n){e(Kr.field(t,"__dhx_data__"),n)})},start:function(e){return this.startNode(function(t,n){e(Kr.field(t,"__dhx_data__"),n)})},attr:function(e){return new bi(e,this,this._tweens)},style:function(e){return new Ei(e,this,this._tweens)},text:function(){return new xi(this,this._tweens)},__class__:Ui});var Qi,Gi,Yi,Zi;En={__ename__:["erazor","_Parser","ParseContext"],__constructs__:["literal","code"]},Sn=void 0,En.literal=["literal",0],En.literal.toString=Sr,En.literal.__enum__=En,En.code=["code",1],En.code.toString=Sr,En.code.__enum__=En,Sn={__ename__:["erazor","_Parser","ParseResult"],__constructs__:["keepGoing","doneIncludeCurrent","doneSkipCurrent"],keepGoing:["keepGoing",0]},Sn.keepGoing.toString=Sr,Sn.keepGoing.__enum__=Sn,Sn.doneIncludeCurrent=["doneIncludeCurrent",1],Sn.doneIncludeCurrent.toString=Sr,Sn.doneIncludeCurrent.__enum__=Sn,Sn.doneSkipCurrent=["doneSkipCurrent",2],Sn.doneSkipCurrent.toString=Sr,Sn.doneSkipCurrent.__enum__=Sn,Qi=function(){this.condMatch=new Or("^@(?:if|for|while)\\b",""),this.inConditionalMatch=new Or("^(?:\\}[\\s\r\n]*else if\\b|\\}[\\s\r\n]*else[\\s\r\n]*{)",""),this.variableChar=new Or("^[_\\w\\.]$","")},Er["erazor.Parser"]=Qi,Qi.__name__=["erazor","Parser"],Qi.prototype={parseWithPosition:function(e){this.pos=0;var t=[];this.bracketStack=[];for(this.conditionalStack=0;""!=e;){this.context=this.parseContext(e);var n=this.parseBlock(e);null!=n.block&&t.push(n),e=Fr.substr(e,n.length,null),this.pos+=n.length}if(0!=this.bracketStack.length)throw new wn(Qi.bracketMismatch,this.pos);return t},parse:function(e){this.pos=0;var t=[];this.bracketStack=[];for(this.conditionalStack=0;""!=e;){this.context=this.parseContext(e);var n=this.parseBlock(e);null!=n.block&&t.push(n.block),e=Fr.substr(e,n.length,null),this.pos+=n.length}if(0!=this.bracketStack.length)throw new wn(Qi.bracketMismatch,this.pos);return t},escapeLiteral:function(e){return Yr.replace(e,Qi.at+Qi.at,Qi.at)},parseLiteral:function(e){for(var t=e.length,n=-1;++n<t;)switch(e.charAt(n)){case Qi.at:if(t>n+1&&e.charAt(n+1)!=Qi.at)return{block:Gi.literal(this.escapeLiteral(Fr.substr(e,0,n))),length:n,start:this.pos};++n;break;case"}":if(!(0<this.bracketStack.length))throw new wn(Qi.bracketMismatch,this.pos);switch(this.bracketStack[this.bracketStack.length-1][1]){case 1:return{block:Gi.literal(this.escapeLiteral(Fr.substr(e,0,n))),length:n,start:this.pos};case 0:this.bracketStack.pop()}break;case"{":this.bracketStack.push(En.literal)}return{block:Gi.literal(this.escapeLiteral(e)),length:t,start:this.pos}},parseString:function(e,t,n){for(var r=!1,i=!1,s=-1;++s<e.length;){var o=e.charAt(s);if(!i&&!r){switch(t(o)[1]){case 1:return Fr.substr(e,0,s+1);case 2:return Fr.substr(e,0,s)}'"'==o?i=!0:"'"==o&&(r=!0)}else i&&'"'==o&&"\\"!=e.charAt(s-1)?i=!1:r&&"'"==o&&"\\"!=e.charAt(s-1)&&(r=!1)}if(n)throw new wn("Failed to find a closing delimiter: ",this.pos,Fr.substr(e,0,100));return e},parseCodeBlock:function(e){if(0<this.bracketStack.length&&"}"==this.peek(e)){if(this.inConditionalMatch.match(e))return e=
this.parseScriptPart(e,"","{"),{block:Gi.codeBlock(e),length:e.length,start:this.pos};var t;switch(this.bracketStack.pop()[1]){case 1:t=0>--this.conditionalStack;break;default:t=!0}if(t)throw new wn(Qi.bracketMismatch,this.pos);return{block:Gi.codeBlock("}"),length:1,start:this.pos}}if(this.condMatch.match(e))return this.bracketStack.push(En.code),++this.conditionalStack,this.parseConditional(e);if("@"==this.peek(e)&&this.isIdentifier(this.peek(e,1)))return this.parseVariable(e);t=this.peek(e,1);var e=this.parseScriptPart(Fr.substr(e,1,null),t,"{"==t?"}":")"),n=Yr.trim(Fr.substr(e,1,e.length-2));return"{"==t?{block:Gi.codeBlock(n),length:e.length+1,start:this.pos}:{block:Gi.printBlock(n),length:e.length+1,start:this.pos}},parseVariableChar:function(e){return this.variableChar.match(e)?Sn.keepGoing:Sn.doneSkipCurrent},parseVariable:function(e){var t="",n=null,n=null,e=Fr.substr(e,1,null);do{n=this.acceptIdentifier(e),e=Fr.substr(e,n.length,null),t+=n;for(n=this.peek(e);"("==n||"["==n;)n=this.acceptBracket(e,n),e=Fr.substr(e,n.length,null),t+=n,n=this.peek(e);if("."!=n||!this.isIdentifier(this.peek(e,1)))break;e=Fr.substr(e,1,null),t+="."}while(null!=n);return{block:Gi.printBlock(t),length:t.length+1,start:this.pos}},peek:function(e,t){return null==t&&(t=0),e.length>t?e.charAt(t):null},parseConditional:function(e){return e=this.parseScriptPart(e,"","{"),{block:Gi.codeBlock(Fr.substr(e,1,null)),length:e.length,start:this.pos}},parseBlock:function(e){return this.context==En.code?this.parseCodeBlock(e):this.parseLiteral(e)},acceptBracket:function(e,t){return this.parseScriptPart(e,t,"("==t?")":"]")},acceptIdentifier:function(e){var t=!0,n=this;return this.accept(e,function(e){return e=n.isIdentifier(e,t),t=!1,e},!1)},isIdentifier:function(e,t){return null==t&&(t=!0),t?"a"<=e&&"z">=e||"A"<=e&&"Z">=e||"_"==e:"a"<=e&&"z">=e||"A"<=e&&"Z">=e||"0"<=e&&"9">=e||"_"==e},accept:function(e,t,n){return this.parseString(e,function(e){return t(e)?Sn.keepGoing:Sn.doneSkipCurrent},n)},parseContext:function(e){if(this.peek(e)==Qi.at&&this.peek(e,1)!=Qi.at)return En.code;if(0<this.conditionalStack&&"}"==this.peek(e))switch(this.bracketStack[this.bracketStack.length-1][1]){case 1:return En.code}return En.literal},parseScriptPart:function(e,t,n){for(var r=!1,i=!1,s=""==t?1:0,o=-1;++o<e.length;){var u=e.charAt(o);if(!i&&!r)switch(u){case t:++s;break;case n:--s;if(0==s)return Fr.substr(e,0,o+1);if(0>s)throw new wn("Unbalanced braces for block: ",this.pos,Fr.substr(e,0,100));break;case'"':i=!0;break;case"'":r=!0}else i&&'"'==u&&"\\"!=e.charAt(o-1)?i=!1:r&&"'"==u&&"\\"!=e.charAt(o-1)&&(r=!1)}throw new wn("Failed to find a closing delimiter for the script block: ",this.pos,Fr.substr(e,0,100))},pos:null,conditionalStack:null,bracketStack:null,context:null,variableChar:null,inConditionalMatch:null,condMatch:null,__class__:Qi},Yi=function(e){this.context=e},Er["erazor.ScriptBuilder"]=Yi,Yi.__name__=["erazor","ScriptBuilder"],Yi.prototype={blockToString:function(e){switch(e[1]){case 0:return e=e[2],this.context+".add('"+Yr.replace(e,"'","\\'")+"');\n";case 1:return e=e[2],e+"\n";case 2:return e=e[2],this.context+".add("+e+");\n"}},build:function(e){for(var t=new Gr,n=0;n<e.length;){var r=e[n];++n,t.b+=Qr.string(this.blockToString(r))}return t.b},context:null,__class__:Yi},Gi={__ename__:["erazor","TBlock"],__constructs__:["literal","codeBlock","printBlock"]},Gi.literal=function(e){return e=["literal",0,e],e.__enum__=Gi,e.toString=Sr,e},Gi.codeBlock=function(e){return e=["codeBlock",1,e],e.__enum__=Gi,e.toString=Sr,e},Gi.printBlock=function(e){return e=["printBlock",2,e],e.__enum__=Gi,e.toString=Sr,e},Zi=function(e){this.template=e},Er["erazor.Template"]=Zi,Zi.__name__=["erazor","Template"],Zi.prototype={setInterpreterVars:function(e,t){if(ar.__instanceof(t,Br))for(var n=t.keys();n.hasNext();){var r=n.next();e.variables.set(r,t.get(r))}else for(var n=0,i=Kr.fields(t);n<i.length;)r=i[n],++n,e.variables.set(r,Kr.field(t,r))},execute:function(e){var t=new Gr,n=(new Qi).parse(this.template),n=(new Yi("__b__")).build(n),n=(new er).parseString(n),r=new bn;this.variables=r.variables;var i=[];return this.setInterpreterVars(r,e),r.variables.set("__b__",t),r.variables.set("__string_buf__",function(e){return i.push(e),new Gr}),r.variables.set("__restore_buf__",function(){return i.pop()}),r.execute(n),t.b},variables:null,template:null,__class__:Zi},wn=function(e,t,n){this.msg=e,this.pos=t,this.excerpt=n},Er["erazor.error.ParserError"]=wn,wn.__name__=["erazor","error","ParserError"],wn.prototype={toString:function(){var e=this.excerpt;if(null!=e){var t=e.indexOf("\n");-1!=t&&(e=Fr.substr(e,0,t))}return this.msg+" @ "+this.pos+(null!=e?' ( "'+e+'" )':"")},excerpt:null,pos:null,msg:null,__class__:wn},er=void 0,tr=void 0,nr=void 0,rr=void 0,ir=void 0,sr=void 0,or=void 0,ur=void 0,tr=function(){this.locals=new Br,this.declared=[],this.variables=new Br,this.variables.set("null",null),this.variables.set("true",!0),this.variables.set("false",!1),this.variables.set("trace",function(e){$n.trace(Qr.string(e),{fileName:"hscript",lineNumber:0})}),this.initOps()},Er["hscript.Interp"]=tr,tr.__name__=["hscript","Interp"],tr.prototype={cnew:function(e,t){return ti.createInstance(ti.resolveClass(e),t)},call:function(e,t,n){return t.apply(e,n)},set:function(e,t,n){if(null==e)throw nr.EInvalidAccess(t);return e[t]=n},get:function(e,t){if(null==e)throw nr.EInvalidAccess(t);return Kr.field(e,t)},forLoop:function(e,t,n){var r=this.declared.length;this.declared.push({n:e,old:this.locals.get(e)}),t=this.makeIterator(this.expr(t));try{for(;t.hasNext();){this.locals.set(e,{r:t.next()});try{this.expr(n)}catch(i){if(!ar.__instanceof(i,rr.Stop))throw i;switch(i[1]){case 0:throw"__break__";case 2:throw i}}}}catch(s){if("__break__"!=s)throw s}this.restore(r)},makeIterator:function(e){try{e=br(e)()}catch(t){}if(null==e.hasNext||null==e.next)throw nr.EInvalidIterator(e);return e},whileLoop:function(e,t){var n=this.declared.length;try{for(;1==this.expr(e);)try{this.expr(t)}catch(r){if(!ar.__instanceof(r,rr.Stop))throw r;switch(r[1]){case 0:throw"__break__";case 2:throw r}}}catch(i){if("__break__"!=i)throw i}this.restore(n)},expr:function(e){var t=e;switch(t[1]){case 0:t=t[2];switch(t[1]){case 0:var n=t[2];return n;case 1:return n=t[2];case 2:return t[2];case 3:return n=t[2]}break;case 1:e=t[2],t=this.locals.get(e);if(null!=t)return t.r;n=this.variables.get(e);if(null==n&&!this.variables.exists(e))throw nr.EUnknownVariable(e);return n;case 2:var e=t[4],r=t[2];this.declared.push({n:r,old:this.locals.get(r)}),this.locals.set(r,{r:null==e?null:this.expr(e)});break;case 3:return e=t[2],this.expr(e);case 4:for(var r=t[2],i=this.declared.length,n=null,t=0;t<r.length;)e=r[t],++t,n=this.expr(e);return this.restore(i),n;case 5:return n=t[3],e=t[2],this.get(this.expr(e),n);case 6:r=t[4],e=t[3],t=t[2],n=this.binops.get(t);if(null==n)throw nr.EInvalidOp(t);return n(e,r);case 7:switch(e=t[4],n=t[3],t=t[2],t){case"!":return 1!=this.expr(e);case"-":return-this.expr(e);case"++":return this.increment(e,n,1);case"--":return this.increment(e,n,-1);case"~":return~this.expr(e);default:throw nr.EInvalidOp(t)};case 8:n=t[3],e=t[2],i=[];for(t=0;t<n.length;)r=n[t],++t,i.push(this.expr(r));t=e;switch(t[1]){case 5:n=t[3],r=t[2],e=this.expr(r);if(null==e)throw nr.EInvalidAccess(n);return this.call(e,Kr.field(e,n),i);default:return this.call(null,this.expr(e),i)};case 9:return r=t[4],e=t[3],t=t[2],1==this.expr(t)?this.expr(e):null==r?null:this.expr(r);case 10:e=t[3],t=t[2],this.whileLoop(t,e);break;case 11:e=t[4],i=t[3],n=t[2],this.forLoop(n,i,e);break;case 12:throw rr.Stop.SBreak;case 13:throw rr.Stop.SContinue;case 15:throw e=t[2],rr.Stop.SReturn(null==e?null:this.expr(e));case 14:var e=t[4],s=t[3],o=t[2],u=this.duplicate(this.locals),a=this,t=Kr.makeVarArgs(function(e){if(e.length!=o.length)throw"Invalid number of parameters";var t=a.locals;a.locals=a.duplicate(u);for(var n=0,r=o.length;n<r;){var i=n++;a.locals.set(o[i].name,{r:e[i]})}e=null;try{e=a.exprReturn(s)}catch(f){throw a.locals=t,f}return a.locals=t,e});return null!=e&&this.variables.set(e,t),t;case 17:n=t[2],i=[];for(t=0;t<n.length;)e=n[t],++t,i.push(this.expr(e));return i;case 16:return n=t[3],e=t[2],this.expr(e)[this.expr(n)];case 18:n=t[3],r=t[2],i=[];for(t=0;t<n.length;)e=n[t],++t,i.push(this.expr(e));return this.cnew(r,i);case 19:throw e=t[2],this.expr(e);case 20:var f=t[5],r=t[3],e=t[2],i=this.declared.length;try{return n=this.expr(e),this.restore(i),n}catch(l){if(ar.__instanceof(l,rr.Stop))throw l;return e=l,this.restore(i),this.declared.push({n:r,old:this.locals.get(r)}),this.locals.set(r,{r:e}),n=this.expr(f),this.restore(i),n};case 21:e=t[2],i={};for(t=0;t<e.length;)n=e[t],++t,this.set(i,n.name,this.expr(n.e));return i;case 22:return r=t[4],e=t[3],t=t[2],1==this.expr(t)?this.expr(e):this.expr(r)}return null},restore:function(e){for(;this.declared.length>e;){var t=this.declared.pop();this.locals.set(t.n,t.old)}},duplicate:function(e){for(var t=new Br,n=e.keys();n.hasNext();){var r=n.next();t.set(r,e.get(r))}return t},exprReturn:function(e){try{return this.expr(e)}catch(t){if(!ar.__instanceof(t,rr.Stop))throw t;switch(t[1]){case 0:throw"Invalid break";case 1:throw"Invalid continue";case 2:return t[2]}}return null},execute:function(e){return this.locals=new Br,this.exprReturn(e)},increment:function(e,t,n){switch(e[1]){case 1:var r=e[2],e=this.locals.get(r),i=null==e?this.variables.get(r):e.r;return t?(i+=n,null==e?this.variables.set(r,i):e.r=i):null==e?this.variables.set(r,i+n):e.r=i+n,i;case 5:return r=e[3],e=e[2],e=this.expr(e),i=this.get(e,r),t?(i+=n,this.set(e,r,i)):this.set(e,r,i+n),i;case 16:return i=e[3],e=e[2],r=this.expr(e),e=this.expr(i),i=r[e],t?(i+=n,r[e]=i):r[e]=i+n,i;default:throw nr.EInvalidOp(0<n?"++":"--")}},evalAssignOp:function(e,t,n,r){switch(n[1]){case 1:var e=n[2],i=this.locals.get(e),t=t(this.expr(n),this.expr(r));null==i?this.variables.set(e,t):i.r=t;break;case 5:e=n[3],n=n[2],n=this.expr(n),t=t(this.get(n,e),this.expr(r)),t=this.set(n,e,t);break;case 16:e=n[3],n=n[2],n=this.expr(n),e=this.expr(e),t=t(n[e],this.expr(r)),n[e]=t;break;default:throw nr.EInvalidOp(e)}return t},assignOp:function(e,t){var n=this;this.binops.set(e,function(r,i){return n.evalAssignOp(e,t,r,i)})},assign:function(e,t){var n=this.expr(t);switch(e[1]){case 1:var r=e[2],i=this.locals.get(r);null==i?this.variables.set(r,n):i.r=n;break;case 5:i=e[3],r=e[2],n=this.set(this.expr(r),i,n);break;case 16:i=e[3],r=e[2],this.expr(r)[this.expr(i)]=n;break;default:throw nr.EInvalidOp("=")}return n},initOps:function(){var e=this;this.binops=new Br,this.binops.set("+",function(t,n){return e.expr(t)+e.expr(n)}),this.binops.set("-",function(t,n){return e.expr(t)-e.expr(n)}),this.binops.set("*",function(t,n){return e.expr(t)*e.expr(n)}),this.binops.set("/",function(t,n){return e.expr(t)/e.expr(n)}),this.binops.set("%",function(t,n){return e.expr(t)%e.expr(n)}),this.binops.set("&",function(t,n){return e.expr(t)&e.expr(n)}),this.binops.set("|",function(t,n){return e.expr(t)|e.expr(n)}),this.binops.set("^",function(t,n){return e.expr(t)^e.expr(n)}),this.binops.set("<<",function(t,n){return e.expr(t)<<e.expr(n)}),this.binops.set(">>",function(t,n){return e.expr(t)>>e.expr(n)}),this.binops.set(">>>",function(t,n){return e.expr(t)>>>e.expr(n)}),this.binops.set("==",function(t,n){return e.expr(t)==e.expr(n)}),this.binops.set("!=",function(t,n){return e.expr(t)!=e.expr(n)}),this.binops.set(">=",function(t,n){return e.expr(t)>=e.expr(n)}),this.binops.set("<=",function(t,n){return e.expr(t)<=e.expr(n)}),this.binops.set(">",function(t,n){return e.expr(t)>e.expr(n)}),this.binops.set("<",function(t,n){return e.expr(t)<e.expr(n)}),this.binops.set("||",function(t,n){return 1==e.expr(t)||1==e.expr(n)}),this.binops.set("&&",function(t,n){return 1==e.expr(t)&&1==e.expr(n)}),this.binops.set("=",wr(this,this.assign)),this.binops.set("...",function(t,n){return new Ur(e.expr(t),e.expr(n))}),this.assignOp("+=",function(e,t){return e+t}),this.assignOp("-=",function(e,t){return e-t}),this.assignOp("*=",function(e,t){return e*t}),this.assignOp("/=",function(e,t){return e/t}),this.assignOp("%=",function(e,t){return e%t}),this.assignOp("&=",function(e,t){return e&t}),this.assignOp("|=",function(e,t){return e|t}),this.assignOp("^=",function(e,t){return e^t}),this.assignOp("<<=",function(e,t){return e<<t}),this.assignOp(">>=",function(e,t){return e>>t}),this.assignOp(">>>=",function(e,t){return e>>>t})},declared:null,binops:null,locals:null,variables:null,__class__:tr},bn=function(){tr.call(this)},Er["erazor.hscript.EnhancedInterp"]=bn,bn.__name__=["erazor","hscript","EnhancedInterp"],bn.__super__=tr,bn.prototype=yr(tr.prototype,{call:function(e,t,n){return n=n.concat([null,null,null,null,null]),t.apply(e,n)},get:function(e,t){if(null==e)throw nr.EInvalidAccess(t);return Kr.field(e,t)},__class__:bn}),Xn=void 0,Vn=void 0,$n=void 0,Jn=void 0,Kn=void 0,Qn=void 0,Gn=void 0,Yn=void 0,Zn=void 0,Xn=function(e){for(var t=e.length,n=1;t>1<<n;)n++;if(8<n||t!=1<<n)throw"BaseCode : base length must be a power of two.";this.base=e,this.nbits=n},Er["haxe.BaseCode"]=Xn,Xn.__name__=["haxe","BaseCode"],Xn.encode=function(e,t){return(new Xn(Nr.ofString(t))).encodeString(e)},Xn.decode=function(e,t){return(new Xn(Nr.ofString(t))).decodeString(e)},Xn.prototype={decodeString:function(e){return this.decodeBytes(Nr.ofString(e)).toString()},encodeString:function(e){return this.encodeBytes(Nr.ofString(e)).toString()},decodeBytes:function(e){var t=this.nbits;null==this.tbl&&this.initTable();for(var n=this.tbl,r=e.length*t>>3,i=Nr.alloc(r),s=0,o=0,u=0,a=0;a<r;){for(;8>o;){var o=o+t,s=s<<t,f=n[e.b[u++]];if(-1==f)throw"BaseCode : invalid encoded char";s|=f}o-=8,i.b[a++]=s>>o&255}return i},initTable:function(){for(var e=[],t=0;256>t;){var n=t++;e[n]=-1}for(var r=0,t=this.base.length;r<t;)n=r++,e[this.base.b[n]]=n;this.tbl=e},encodeBytes:function(e){for(var t=this.nbits,n=this.base,r=8*e.length/t|0,i=Nr.alloc(r+(0==8*e.length%t?0:1)),s=0,o=0,u=(1<<t)-1,a=0,f=0;f<r;){for(;o<t;)o+=8,s<<=8,s|=e.b[a++];o-=t,i.b[f++]=n.b[s>>o&u]&255}return 0<o&&(i.b[f++]=n.b[s<<t-o&u]&255),i},tbl:null,nbits:null,base:null,__class__:Xn},Jn=function(e,t){this.elt=e,this.next=t},Er["haxe.FastCell"]=Jn,Jn.__name__=["haxe","FastCell"],Jn.prototype={next:null,elt:null,__class__:Jn},Kn=function(){},Er["haxe.FastList"]=Kn,Kn.__name__=["haxe","FastList"],Kn.prototype={pop:function(){var e=this.head;return null==e?null:(this.head=e.next,e.elt)},add:function(e){this.head=new Jn(e,this.head)},head:null,__class__:Kn},Qn=function(e){this.url=e,this.headers=new Br,this.params=new Br,this.async=!0},Er["haxe.Http"]=Qn,Qn.__name__=["haxe","Http"],Qn.prototype={onStatus:function(){},onError:function(){},onData:function(){},request:function(e){var t=this,n=new lr,r=function(){if(4==n.readyState){var e;try{e=n.status}catch(r){e=null}void 0==e&&(e=null),null!=e&&t.onStatus(e);if(null!=e&&200<=e&&400>e)t.onData(n.responseText);else switch(e){case null:case void 0:t.onError("Failed to connect or resolve host");break;case 12029:t.onError("Failed to connect to host");break;case 12007:t.onError("Unknown host");break;default:t.onError("Http Error #"+n.status)}}};this.async&&(n.onreadystatechange=r);var i=this.postData;if(null!=i)e=!0;else for(var s=this.params.keys();s.hasNext();)var o=s.next(),i=null==i?"":i+"&",i=i+(Yr.urlEncode(o)+"="+Yr.urlEncode(this.params.get(o)));try{if(e)n.open("POST",this.url,this.async);else if(null!=i){var u=1>=this.url.split("?").length;n.open("GET",this.url+(u?"?":"&")+i,this.async),i=null}else n.open("GET",this.url,this.async)}catch(a){this.onError(a.toString());return}null==this.headers.get("Content-Type")&&e&&null==this.postData&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(e=this.headers.keys();e.hasNext();)s=e.next(),n.setRequestHeader(s,this.headers.get(s));n.send(i),this.async||r()},setParameter:function(e,t){this.params.set(e,t)},setHeader:function(e,t){this.headers.set(e,t)},params:null,headers:null,postData:null,async:null,url:null,__class__:Qn},Vn=function(){},Er["haxe.Int32"]=Vn,Vn.__name__=["haxe","Int32"],Vn.toInt=function(e){if((e>>30&1)!=e>>>31)throw"Overflow "+Qr.string(e);return e},$n=function(){},Er["haxe.Log"]=$n,$n.__name__=["haxe","Log"],$n.trace=function(e,t){ar.__trace(e,t)},Gn=function(){},Er["haxe.Md5"]=Gn,Gn.__name__=["haxe","Md5"],Gn.encode=function(e){return(new Gn).doEncode(e)},Gn.prototype={doEncode:function(e){for(var e=this.str2blks(e),t=1732584193,n=-271733879,r=-1732584194,i=271733878,s=0;s<e.length;)var o=t,u=n,a=r,f=i,t=this.ff(t,n,r,i,e[s],7,-680876936),i=this.ff(i,t,n,r,e[s+1],12,-389564586),r=this.ff(r,i,t,n,e[s+2],17,606105819),n=this.ff(n,r,i,t,e[s+3],22,-1044525330),t=this.ff(t,n,r,i,e[s+4],7,-176418897),i=this.ff(i,t,n,r,e[s+5],12,1200080426),r=this.ff(r,i,t,n,e[s+6],17,-1473231341),n=this.ff(n,r,i,t,e[s+7],22,-45705983),t=this.ff(t,n,r,i,e[s+8],7,1770035416),i=this.ff(i,t,n,r,e[s+9],12,-1958414417),r=this.ff(r,i,t,n,e[s+10],17,-42063),n=this.ff(n,r,i,t,e[s+11],22,-1990404162),t=this.ff(t,n,r,i,e[s+12],7,1804603682),i=this.ff(i,t,n,r,e[s+13],12,-40341101),r=this.ff(r,i,t,n,e[s+14],17,-1502002290),n=this.ff(n,r,i,t,e[s+15],22,1236535329),t=this.gg(t,n,r,i,e[s+1],5,-165796510),i=this.gg(i,t,n,r,e[s+6],9,-1069501632),r=this.gg(r,i,t,n,e[s+11],14,643717713),n=this.gg(n,r,i,t,e[s],20,-373897302),t=this.gg(t,n,r,i,e[s+5],5,-701558691),i=this.gg(i,t,n,r,e[s+10],9,38016083),r=this.gg(r,i,t,n,e[s+15],14,-660478335),n=this.gg(n,r,i,t,e[s+4],20,-405537848),t=this.gg(t,n,r,i,e[s+9],5,568446438),i=this.gg(i,t,n,r,e[s+14],9,-1019803690),r=this.gg(r,i,t,n,e[s+3],14,-187363961),n=this.gg(n,r,i,t,e[s+8],20,1163531501),t=this.gg(t,n,r,i,e[s+13],5,-1444681467),i=this.gg(i,t,n,r,e[s+2],9,-51403784),r=this.gg(r,i,t,n,e[s+7],14,1735328473),n=this.gg(n,r,i,t,e[s+12],20,-1926607734),t=this.hh(t,n,r,i,e[s+5],4,-378558),i=this.hh(i,t,n,r,e[s+8],11,-2022574463),r=this.hh(r,i,t,n,e[s+11],16,1839030562),n=this.hh(n,r,i,t,e[s+14],23,-35309556),t=this.hh(t,n,r,i,e[s+1],4,-1530992060),i=this.hh(i,t,n,r,e[s+4],11,1272893353),r=this.hh(r,i,t,n,e[s+7],16,-155497632),n=this.hh(n,r,i,t,e[s+10],23,-1094730640),t=this.hh(t,n,r,i,e[s+13],4,681279174),i=this.hh(i,t,n,r,e[s],11,-358537222),r=this.hh(r,i,t,n,e[s+3],16,-722521979),n=this.hh(n,r,i,t,e[s+6],23,76029189),t=this.hh(t,n,r,i,e[s+9],4,-640364487),i=this.hh(i,t,n,r,e[s+12],11,-421815835),r=this.hh(r,i,t,n,e[s+15],16,530742520),n=this.hh(n,r,i,t,e[s+2],23,-995338651),t=this.ii(t,n,r,i,e[s],6,-198630844),i=this.ii(i,t,n,r,e[s+7],10,1126891415),r=this.ii(r,i,t,n,e[s+14],15,-1416354905),n=this.ii(n,r,i,t,e[s+5],21,-57434055),t=this.ii(t,n,r,i,e[s+12],6,1700485571),i=this.ii(i,t,n,r,e[s+3],10,-1894986606),r=this.ii(r,i,t,n,e[s+10],15,-1051523),n=this.ii(n,r,i,t,e[s+1],21,-2054922799),t=this.ii(t,n,r,i,e[s+8],6,1873313359),i=this.ii(i,t,n,r,e[s+15],10,-30611744),r=this.ii(r,i,t,n,e[s+6],15,-1560198380),n=this.ii(n,r,i,t,e[s+13],21,1309151649),t=this.ii(t,n,r,i,e[s+4],6,-145523070),i=this.ii(i,t,n,r,e[s+11],10,-1120210379),r=this.ii(r,i,t,n,e[s+2],15,718787259),n=this.ii(n,r,i,t,e[s+9],21,-343485551),t=this.addme(t,o),n=this.addme(n,u),r=this.addme(r,a),i=this.addme(i,f),s=s+16;return this.rhex(t)+this.rhex(n)+this.rhex(r)+this.rhex(i)},ii:function(e,t,n,r,i,s,o){return this.cmn(this.bitXOR(n,this.bitOR(t,~r)),e,t,i,s,o)},hh:function(e,t,n,r,i,s,o){return this.cmn(this.bitXOR(this.bitXOR(t,n),r),e,t,i,s,o)},gg:function(e,t,n,r,i,s,o){return this.cmn(this.bitOR(this.bitAND(t,r),this.bitAND(n,~r)),e,t,i,s,o)},ff:function(e,t,n,r,i,s,o){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(~t,r)),e,t,i,s,o)},cmn:function(e,t,n,r,i,s){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(r,s)),i),n)},rol:function(e,t){return e<<t|e>>>32-t},str2blks:function(e){for(var t=(e.length+8>>6)+1,n=[],r=16*t,i=0;i<r;){var s=i++;n[s]=0}for(s=0;s<e.length;)n[s>>2]|=Fr.cca(e,s)<<8*((8*e.length+s)%4),s++;return n[s>>2]|=128<<8*((8*e.length+s)%4),e=8*e.length,t=16*t-2,n[t]=e&255,n[t]|=(e>>>8&255)<<8,n[t]|=(e>>>16&255)<<16,n[t]|=(e>>>24&255)<<24,n},rhex:function(e){for(var t="",n=0;4>n;)var r=n++,t=t+("0123456789abcdef".charAt(e>>8*r+4&15)+"0123456789abcdef".charAt(e>>8*r&15));return t},addme:function(e,t){var n=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(n>>16)<<16|n&65535},bitAND:function(e,t){return(e>>>1&t>>>1)<<1|e&1&t&1},bitXOR:function(e,t){return(e>>>1^t>>>1)<<1|e&1^t&1},bitOR:function(e,t){return(e>>>1|t>>>1)<<1|e&1|t&1},__class__:Gn},Yn=function(e){var t=this;this.id=setInterval(function(){t.run()},e)},Er["haxe.Timer"]=Yn,Yn.__name__=["haxe","Timer"],Yn.delay=function(e,t){var n=new Yn(t);return n.run=function(){n.stop(),e()},n},Yn.prototype={run:function(){},stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},id:null,__class__:Yn},Zn={Bytes:function(e,t){this.length=e,this.b=t}},Er["haxe.io.Bytes"]=Zn.Bytes,Zn.Bytes.__name__=["haxe","io","Bytes"],Zn.Bytes.alloc=function(e){for(var t=[],n=0;n<e;)n++,t.push(0);return new Zn.Bytes(e,t)},Zn.Bytes.ofString=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=n++,i=Fr.cca(e,i);127>=i?t.push(i):(2047>=i?t.push(192|i>>6):(65535>=i?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|i>>12&63)),t.push(128|i>>6&63)),t.push(128|i&63))}return new Zn.Bytes(t.length,t)},Zn.Bytes.prototype={toString:function(){return this.readString(0,this.length)},readString:function(e,t){if(0>e||0>t||e+t>this.length)throw Zn.Error.OutsideBounds;for(var n="",r=this.b,i=String.fromCharCode,s=e,o=e+t;s<o;){var u=r[s++];if(128>u){if(0==u)break;n+=i(u)}else if(224>u)n+=i((u&63)<<6|r[s++]&127);else if(240>u)var a=r[s++],n=n+i((u&31)<<12|(a&127)<<6|r[s++]&127);else var a=r[s++],f=r[s++],n=n+i((u&15)<<18|(a&127)<<12|f<<6&127|r[s++]&127)}return n},b:null,length:null,__class__:Zn.Bytes},Zn.BytesBuffer=function(){this.b=[]},Er["haxe.io.BytesBuffer"]=Zn.BytesBuffer,Zn.BytesBuffer.__name__=["haxe","io","BytesBuffer"],Zn.BytesBuffer.prototype={getBytes:function(){var e=new Zn.Bytes(this.b.length,this.b);return this.b=null,e},b:null,__class__:Zn.BytesBuffer},Zn.Input=function(){},Er["haxe.io.Input"]=Zn.Input,Zn.Input.__name__=["haxe","io","Input"],Zn.Input.prototype={readString:function(e){var t=Zn.Bytes.alloc(e);return this.readFullBytes(t,0,e),t.toString()},readFullBytes:function(e,t,n){for(;0<n;)var r=this.readBytes(e,t,n),t=t+r,n=n-r},readBytes:function(e,t,n){var r=n,i=e.b;if(0>t||0>n||t+n>e.length)throw Zn.Error.OutsideBounds;for(;0<r;)i[t]=this.readByte(),t++,r--;return n},readByte:function(){throw"Not implemented"},__class__:Zn.Input},Zn.BytesInput=function(e,t,n){null==t&&(t=0),null==n&&(n=e.length-t);if(0>t||0>n||t+n>e.length)throw Zn.Error.OutsideBounds;this.b=e.b,this.pos=t,this.len=n},Er["haxe.io.BytesInput"]=Zn.BytesInput,Zn.BytesInput.__name__=["haxe","io","BytesInput"],Zn.BytesInput.__super__=Zn.Input,Zn.BytesInput.prototype=yr(Zn.Input.prototype,{readBytes:function(e,t,n){if(0>t||0>n||t+n>e.length)throw Zn.Error.OutsideBounds;if(0==this.len&&0<n)throw new Zn.Eof;this.len<n&&(n=this.len);for(var r=this.b,e=e.b,i=0;i<n;){var s=i++;e[t+s]=r[this.pos+s]}return this.pos+=n,this.len-=n,n},readByte:function(){if(0==this.len)throw new Zn.Eof;return this.len--,this.b[this.pos++]},len:null,pos:null,b:null,__class__:Zn.BytesInput}),Zn.Output=function(){},Er["haxe.io.Output"]=Zn.Output,Zn.Output.__name__=["haxe","io","Output"],Zn.BytesOutput=function(){this.b=new Zn.BytesBuffer},Er["haxe.io.BytesOutput"]=Zn.BytesOutput,Zn.BytesOutput.__name__=["haxe","io","BytesOutput"],Zn.BytesOutput.__super__=Zn.Output,Zn.BytesOutput.prototype=yr(Zn.Output.prototype,{getBytes:function(){return this.b.getBytes()},writeByte:function(e){this.b.b.push(e)},b:null,__class__:Zn.BytesOutput}),Zn.Eof=function(){},Er["haxe.io.Eof"]=Zn.Eof,Zn.Eof.__name__=["haxe","io","Eof"],Zn.Eof.prototype={__class__:Zn.Eof},Zn.Error={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]},Zn.Error.Blocked=["Blocked",0],Zn.Error.Blocked.toString=Sr,Zn.Error.Blocked.__enum__=Zn.Error,Zn.Error.Overflow=["Overflow",1],Zn.Error.Overflow.toString=Sr,Zn.Error.Overflow.__enum__=Zn.Error,Zn.Error.OutsideBounds=["OutsideBounds",2],Zn.Error.OutsideBounds.toString=Sr,Zn.Error.OutsideBounds.__enum__=Zn.Error,Zn.Error.Custom=function(e){return e=["Custom",3,e],e.__enum__=Zn.Error,e.toString=Sr,e},Zn.StringInput=function(e){Zn.BytesInput.call(this,Zn.Bytes.ofString(e))},Er["haxe.io.StringInput"]=Zn.StringInput,Zn.StringInput.__name__=["haxe","io","StringInput"],Zn.StringInput.__super__=Zn.BytesInput,Zn.StringInput.prototype=yr(Zn.BytesInput.prototype,{__class__:Zn.StringInput}),ir={__ename__:["hscript","Const"],__constructs__:["CInt","CFloat","CString","CInt32"]},ir.CInt=function(e){return e=["CInt",0,e],e.__enum__=ir,e.toString=Sr,e},ir.CFloat=function(e){return e=["CFloat",1,e],e.__enum__=ir,e.toString=Sr,e},ir.CString=function(e){return e=["CString",2,e],e.__enum__=ir,e.toString=Sr,e},ir.CInt32=function(e){return e=["CInt32",3,e],e.__enum__=ir,e.toString=Sr,e},sr={__ename__:["hscript","Expr"],__constructs__:"EConst,EIdent,EVar,EParent,EBlock,EField,EBinop,EUnop,ECall,EIf,EWhile,EFor,EBreak,EContinue,EFunction,EReturn,EArray,EArrayDecl,ENew,EThrow,ETry,EObject,ETernary".split(",")},sr.EConst=function(e){return e=["EConst",0,e],e.__enum__=sr,e.toString=Sr,e},sr.EIdent=function(e){return e=["EIdent",1,e],e.__enum__=sr,e.toString=Sr,e},sr.EVar=function(e,t,n){return e=["EVar",2,e,t,n],e.__enum__=sr,e.toString=Sr,e},sr.EParent=function(e){return e=["EParent",3,e],e.__enum__=sr,e.toString=Sr,e},sr.EBlock=function(e){return e=["EBlock",4,e],e.__enum__=sr,e.toString=Sr,e},sr.EField=function(e,t){var n=["EField",5,e,t];return n.__enum__=sr,n.toString=Sr,n},sr.EBinop=function(e,t,n){return e=["EBinop",6,e,t,n],e.__enum__=sr,e.toString=Sr,e},sr.EUnop=function(e,t,n){return e=["EUnop",7,e,t,n],e.__enum__=sr,e.toString=Sr,e},sr.ECall=function(e,t){var n=["ECall",8,e,t];return n.__enum__=sr,n.toString=Sr,n},sr.EIf=function(e,t,n){return e=["EIf",9,e,t,n],e.__enum__=sr,e.toString=Sr,e},sr.EWhile=function(e,t){var n=["EWhile",10,e,t];return n.__enum__=sr,n.toString=Sr,n},sr.EFor=function(e,t,n){return e=["EFor",11,e,t,n],e.__enum__=sr,e.toString=Sr,e},sr.EBreak=["EBreak",12],sr.EBreak.toString=Sr,sr.EBreak.__enum__=sr,sr.EContinue=["EContinue",13],sr.EContinue.toString=Sr,sr.EContinue.__enum__=sr,sr.EFunction=function(e,t,n,r){return e=["EFunction",14,e,t,n,r],e.__enum__=sr,e.toString=Sr,e},sr.EReturn=function(e){return e=["EReturn",15,e],e.__enum__=sr,e.toString=Sr,e},sr.EArray=function(e,t){var n=["EArray",16,e,t];return n.__enum__=sr,n.toString=Sr,n},sr.EArrayDecl=function(e){return e=["EArrayDecl",17,e],e.__enum__=sr,e.toString=Sr,e},sr.ENew=function(e,t){var n=["ENew",18,e,t];return n.__enum__=sr,n.toString=Sr,n},sr.EThrow=function(e){return e=["EThrow",19,e],e.__enum__=sr,e.toString=Sr,e},sr.ETry=function(e,t,n,r){return e=["ETry",20,e,t,n,r],e.__enum__=sr,e.toString=Sr,e},sr.EObject=function(e){return e=["EObject",21,e],e.__enum__=sr,e.toString=Sr,e},sr.ETernary=function(e,t,n){return e=["ETernary",22,e,t,n],e.__enum__=sr,e.toString=Sr,e},or={__ename__:["hscript","CType"],__constructs__:["CTPath","CTFun","CTAnon","CTParent"]},or.CTPath=function(e,t){var n=["CTPath",0,e,t];return n.__enum__=or,n.toString=Sr,n},or.CTFun=function(e,t){var n=["CTFun",1,e,t];return n.__enum__=or,n.toString=Sr,n},or.CTAnon=function(e){return e=["CTAnon",2,e],e.__enum__=or,e.toString=Sr,e},or.CTParent=function(e){return e=["CTParent",3,e],e.__enum__=or,e.toString=Sr,e},nr={__ename__:["hscript","Error"],__constructs__:"EInvalidChar,EUnexpected,EUnterminatedString,EUnterminatedComment,EUnknownVariable,EInvalidIterator,EInvalidOp,EInvalidAccess".split(",")},nr.EInvalidChar=function(e){return e=["EInvalidChar",0,e],e.__enum__=nr,e.toString=Sr,e},nr.EUnexpected=function(e){return e=["EUnexpected",1,e],e.__enum__=nr,e.toString=Sr,e},nr.EUnterminatedString=["EUnterminatedString",2],nr.EUnterminatedString.toString=Sr,nr.EUnterminatedString.__enum__=nr,nr.EUnterminatedComment=["EUnterminatedComment",3],nr.EUnterminatedComment.toString=Sr,nr.EUnterminatedComment.__enum__=nr,nr.EUnknownVariable=function(e){return e=["EUnknownVariable",4,e],e.__enum__=nr,e.toString=Sr,e},nr.EInvalidIterator=function(e){return e=["EInvalidIterator",5,e],e.__enum__=nr,e.toString=Sr,e},nr.EInvalidOp=function(e){return e=["EInvalidOp",6,e],e.__enum__=nr,e.toString=Sr,e},nr.EInvalidAccess=function(e){return e=["EInvalidAccess",7,e],e.__enum__=nr,e.toString=Sr,e},rr={Stop:{__ename__:["hscript","_Interp","Stop"],__constructs__:["SBreak","SContinue","SReturn"]}},rr.Stop.SBreak=["SBreak",0],rr.Stop.SBreak.toString=Sr,rr.Stop.SBreak.__enum__=rr.Stop,rr.Stop.SContinue=["SContinue",1],rr.Stop.SContinue.toString=Sr,rr.Stop.SContinue.__enum__=rr.Stop,rr.Stop.SReturn=function(e){return e=["SReturn",2,e],e.__enum__=rr.Stop,e.toString=Sr,e},ur={__ename__:["hscript","Token"],__constructs__:"TEof,TConst,TId,TOp,TPOpen,TPClose,TBrOpen,TBrClose,TDot,TComma,TSemicolon,TBkOpen,TBkClose,TQuestion,TDoubleDot".split(","),TEof:["TEof",0]},ur.TEof.toString=Sr,ur.TEof.__enum__=ur,ur.TConst=function(e){return e=["TConst",1,e],e.__enum__=ur,e.toString=Sr,e},ur.TId=function(e){return e=["TId",2,e],e.__enum__=ur,e.toString=Sr,e},ur.TOp=function(e){return e=["TOp",3,e],e.__enum__=ur,e.toString=Sr,e},ur.TPOpen=["TPOpen",4],ur.TPOpen.toString=Sr,ur.TPOpen.__enum__=ur,ur.TPClose=["TPClose",5],ur.TPClose.toString=Sr,ur.TPClose.__enum__=ur,ur.TBrOpen=["TBrOpen",6],ur.TBrOpen.toString=Sr,ur.TBrOpen.__enum__=ur,ur.TBrClose=["TBrClose",7],ur.TBrClose.toString=Sr,ur.TBrClose.__enum__=ur,ur.TDot=["TDot",8],ur.TDot.toString=Sr,ur.TDot.__enum__=ur,ur.TComma=["TComma",9],ur.TComma.toString=Sr,ur.TComma.__enum__=ur,ur.TSemicolon=["TSemicolon",10],ur.TSemicolon.toString=Sr,ur.TSemicolon.__enum__=ur,ur.TBkOpen=["TBkOpen",11],ur.TBkOpen.toString=Sr,ur.TBkOpen.__enum__=ur,ur.TBkClose=["TBkClose",12],ur.TBkClose.toString=Sr,ur.TBkClose.__enum__=ur,ur.TQuestion=["TQuestion",13],ur.TQuestion.toString=Sr,ur.TQuestion.__enum__=ur,ur.TDoubleDot=["TDoubleDot",14],ur.TDoubleDot.toString=Sr,ur.TDoubleDot.__enum__=ur,er=function(){this.line=1,this.opChars="+*/-=!><&|^%~",this.identChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";var e=[["%"],["*","/"],["+","-"],["<<",">>",">>>"],["|","&","^"],"==,!=,>,<,>=,<=".split(","),["..."],["&&"],["||"],"=,+=,-=,*=,/=,%=,<<=,>>=,>>>=,|=,&=,^=".split(",")];this.opPriority=new Br,this.opRightAssoc=new Br;for(var t=0,n=e.length;t<n;)for(var r=t++,i=0,s=e[r];i<s.length;){var o=s[i];++i,this.opPriority.set(o,r),9==r&&this.opRightAssoc.set(o,!0)}this.unops=new Br,n=0;for(t=["!","++","--","-","~"];n<t.length;)o=t[n],++n,this.unops.set(o,"++"==o||"--"==o)},Er["hscript.Parser"]=er,er.__name__=["hscript","Parser"],er.prototype={tokenString:function(e){var t;switch(e[1]){case 0:t="<eof>";break;case 1:t=this.constString(e[2]);break;case 2:t=e=e[2];break;case 3:t=e=e[2];break;case 4:t="(";break;case 5:t=")";break;case 6:t="{";break;case 7:t="}";break;case 8:t=".";break;case 9:t=",";break;case 10:t=";";break;case 11:t="[";break;case 12:t="]";break;case 13:t="?";break;case 14:t=":"}return t},constString:function(e){var t;switch(e[1]){case 0:e=e[2],t=Qr.string(e);break;case 1:t=Qr.string(e[2]);break;case 2:t=e[2];break;case 3:e=e[2],t=Qr.string(e)}return t},tokenComment:function(e,t){var n=Fr.cca(e,1),r=this.input;if(47==n){try{for(;10!=t&&13!=t;)t=r.readByte();this["char"]=t}catch(i){}return this.token()}if(42==n){n=this.line;try{for(;;){for(;42!=t;)10==t&&this.line++,t=r.readByte();t=r.readByte();if(47==t)break}}catch(s){throw this.line=n,nr.EUnterminatedComment}return this.token()}return this["char"]=t,ur.TOp(e)},token:function(){if(null!=this.tokens.head)return this.tokens.pop();var e;0>this["char"]?e=this.readChar():(e=this["char"],this["char"]=-1);for(;;){switch(e){case 0:return ur.TEof;case 32:case 9:case 13:break;case 10:this.line++;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:for(var t=1*(e-48),n=0;;)switch(e=this.readChar(),n*=10,e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:t=10*t+(e-48);break;case 46:if(0<n){if(10==n&&46==this.readChar())return this.tokens.add(ur.TOp("...")),e=t|0,ur.TConst(e==t?ir.CInt(e):ir.CFloat(t));this.invalidChar(e)}n=1;break;case 120:(0<t||0<n)&&this.invalidChar(e);for(var r=0;;)switch(e=this.readChar(),e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:r=(r<<4)+(e-48)|0;break;case 65:case 66:case 67:case 68:case 69:case 70:r=(r<<4)+(e-55)|0;break;case 97:case 98:case 99:case 100:case 101:case 102:r=(r<<4)+(e-87)|0;break;default:return this["char"]=e,e=function(e){var t;try{t=ir.CInt(function(){if((r>>30&1)!=r>>>31
)throw"Overflow "+Qr.string(r);return r}(e))}catch(n){t=ir.CInt32(r)}return t}(this),ur.TConst(e)}break;default:return this["char"]=e,e=t|0,ur.TConst(0<n?ir.CFloat(10*t/n):e==t?ir.CInt(e):ir.CFloat(t))}break;case 59:return ur.TSemicolon;case 40:return ur.TPOpen;case 41:return ur.TPClose;case 44:return ur.TComma;case 46:e=this.readChar();switch(e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:t=e-48;for(n=1;;)switch(e=this.readChar(),n*=10,e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:t=10*t+(e-48);break;default:return this["char"]=e,ur.TConst(ir.CFloat(t/n))}break;case 46:return e=this.readChar(),46!=e&&this.invalidChar(e),ur.TOp("...");default:return this["char"]=e,ur.TDot}break;case 123:return ur.TBrOpen;case 125:return ur.TBrClose;case 91:return ur.TBkOpen;case 93:return ur.TBkClose;case 39:return ur.TConst(ir.CString(this.readString(39)));case 34:return ur.TConst(ir.CString(this.readString(34)));case 63:return ur.TQuestion;case 58:return ur.TDoubleDot;default:if(this.ops[e])for(t=String.fromCharCode(e);;){e=this.readChar();if(!this.ops[e])return 47==Fr.cca(t,0)?this.tokenComment(t,e):(this["char"]=e,ur.TOp(t));t+=String.fromCharCode(e)}if(this.idents[e])for(t=String.fromCharCode(e);;){e=this.readChar();if(!this.idents[e])return this["char"]=e,ur.TId(t);t+=String.fromCharCode(e)}this.invalidChar(e)}e=this.readChar()}return null},readString:function(e){for(var t=0,n=new Zn.BytesOutput,r=!1,i=this.line,s=this.input;;){try{t=s.readByte()}catch(o){throw this.line=i,nr.EUnterminatedString}if(r)switch(r=!1,t){case 110:n.writeByte(10);break;case 114:n.writeByte(13);break;case 116:n.writeByte(9);break;case 39:case 34:case 92:n.writeByte(t);break;case 47:this.allowJSON?n.writeByte(t):this.invalidChar(t);break;case 117:if(!this.allowJSON)throw this.invalidChar(t);var u=null;try{u=s.readString(4)}catch(a){throw this.line=i,nr.EUnterminatedString}for(var f=0,l=0;4>l;){var c=l++,f=f<<4,c=Fr.cca(u,c);switch(c){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:f+=c-48;break;case 65:case 66:case 67:case 68:case 69:case 70:f+=c-55;break;case 97:case 98:case 99:case 100:case 101:case 102:f+=c-87;break;default:this.invalidChar(c)}}127>=f?n.writeByte(f):(2047>=f?n.writeByte(192|f>>6):(n.writeByte(224|f>>12),n.writeByte(128|f>>6&63)),n.writeByte(128|f&63));break;default:this.invalidChar(t)}else if(92==t)r=!0;else{if(t==e)break;10==t&&this.line++,n.writeByte(t)}}return n.getBytes().toString()},readChar:function(){var e;try{e=this.input.readByte()}catch(t){e=0}return e},incPos:function(){},parseExprList:function(e){var t=[],n=this.token();if(n==e)return t;this.tokens.add(n);try{for(;;)switch(t.push(this.parseExpr()),n=this.token(),n[1]){case 9:break;default:if(n==e)throw"__break__";this.unexpected(n)}}catch(r){if("__break__"!=r)throw r}return t},parseTypeNext:function(e){var t=this.token(),n=t;switch(n[1]){case 3:if("->"!=n[2])return this.tokens.add(t),e;break;default:return this.tokens.add(t),e}n=t=this.parseType();switch(n[1]){case 1:return n[2].unshift(e),t;default:return or.CTFun([e],t)}},parseType:function(){var e=this.token(),t=e;switch(t[1]){case 2:for(var n=[t[2]];;){e=this.token();if(e!=ur.TDot)break;t=e=this.token();switch(t[1]){case 2:n.push(t[2]);break;default:this.unexpected(e)}}var r=null,t=e;switch(t[1]){case 3:if("<"==t[2]){r=[];try{for(;;){r.push(this.parseType()),t=e=this.token();switch(t[1]){case 9:continue;case 3:if(">"==t[2])throw"__break__"}this.unexpected(e)}}catch(i){if("__break__"!=i)throw i}}break;default:this.tokens.add(e)}return this.parseTypeNext(or.CTPath(n,r));case 4:return e=this.parseType(),this.ensure(ur.TPClose),this.parseTypeNext(or.CTParent(e));case 6:n=[];try{for(;;)switch(t=e=this.token(),t[1]){case 7:throw"__break__";case 2:r=t[2],this.ensure(ur.TDoubleDot),n.push({name:r,t:this.parseType()}),e=this.token();switch(e[1]){case 9:break;case 7:throw"__break__";default:this.unexpected(e)}break;default:this.unexpected(e)}}catch(s){if("__break__"!=s)throw s}return this.parseTypeNext(or.CTAnon(n));default:return this.unexpected(e)}},parseExprNext:function(e){var t=this.token(),n=t;switch(n[1]){case 3:n=n[2];if(this.unops.get(n)){var r;if(!(r=this.isBlock(e)))switch(e[1]){case 3:r=!0;break;default:r=!1}return r?(this.tokens.add(t),e):this.parseExprNext(sr.EUnop(n,!1,e))}return this.makeBinop(n,e,this.parseExpr());case 8:t=this.token(),r=null,n=t;switch(n[1]){case 2:r=n[2];break;default:this.unexpected(t)}return this.parseExprNext(sr.EField(e,r));case 4:return this.parseExprNext(sr.ECall(e,this.parseExprList(ur.TPClose)));case 11:return t=this.parseExpr(),this.ensure(ur.TBkClose),this.parseExprNext(sr.EArray(e,t));case 13:return t=this.parseExpr(),this.ensure(ur.TDoubleDot),n=this.parseExpr(),sr.ETernary(e,t,n);default:return this.tokens.add(t),e}},parseStructure:function(e){return function(t){switch(e){case"if":t=function(e){var t=e.parseExpr(),n=e.parseExpr(),r=null,i=!1,s=e.token();return s==ur.TSemicolon&&(i=!0,s=e.token()),ti.enumEq(s,ur.TId("else"))?r=e.parseExpr():(e.tokens.add(s),i&&e.tokens.add(ur.TSemicolon)),sr.EIf(t,n,r)}(t);break;case"var":t=function(e){var t=e.token(),n=null,r=t;switch(r[1]){case 2:n=r[2];break;default:e.unexpected(t)}t=e.token(),r=null,t==ur.TDoubleDot&&e.allowTypes&&(r=e.parseType(),t=e.token());var i=null;return ti.enumEq(t,ur.TOp("="))?i=e.parseExpr():e.tokens.add(t),sr.EVar(n,r,i)}(t);break;case"while":t=function(e){var t=e.parseExpr(),e=e.parseExpr();return sr.EWhile(t,e)}(t);break;case"for":t=function(e){e.ensure(ur.TPOpen);var t=e.token(),n=null,r=t;switch(r[1]){case 2:n=r[2];break;default:e.unexpected(t)}return t=e.token(),ti.enumEq(t,ur.TId("in"))||e.unexpected(t),t=e.parseExpr(),e.ensure(ur.TPClose),e=e.parseExpr(),sr.EFor(n,t,e)}(t);break;case"break":t=sr.EBreak;break;case"continue":t=sr.EContinue;break;case"else":t=t.unexpected(ur.TId(e));break;case"function":t=function(e){var t=e.token(),n=null,r=t;switch(r[1]){case 2:n=t=r[2];break;default:e.tokens.add(t)}e.ensure(ur.TPOpen);var i=[],t=e.token();if(t!=ur.TPClose)for(var s=!0;s;){var o=null,r=t;switch(r[1]){case 2:o=t=r[2];break;default:e.unexpected(t)}t=e.token(),r=null,t==ur.TDoubleDot&&e.allowTypes&&(r=e.parseType(),t=e.token()),i.push({name:o,t:r});switch(t[1]){case 9:t=e.token();break;case 5:s=!1;break;default:e.unexpected(t)}}return s=null,e.allowTypes&&(t=e.token(),t!=ur.TDoubleDot?e.tokens.add(t):s=e.parseType()),e=e.parseExpr(),sr.EFunction(i,e,n,s)}(t);break;case"return":t=function(e){var t=e.token();return e.tokens.add(t),e=t==ur.TSemicolon?null:e.parseExpr(),sr.EReturn(e)}(t);break;case"new":t=function(e){var t=[],n=e.token(),r=n;switch(r[1]){case 2:n=r[2],t.push(n);break;default:e.unexpected(n)}for(var i=!0;i;)switch(n=e.token(),n[1]){case 8:r=n=e.token();switch(r[1]){case 2:n=r[2],t.push(n);break;default:e.unexpected(n)}break;case 4:i=!1;break;default:e.unexpected(n)}return e=e.parseExprList(ur.TPClose),sr.ENew(t.join("."),e)}(t);break;case"throw":t=function(e){return e=e.parseExpr(),sr.EThrow(e)}(t);break;case"try":t=function(e){var t=e.parseExpr(),n=e.token();ti.enumEq(n,ur.TId("catch"))||e.unexpected(n),e.ensure(ur.TPOpen);var n=e.token(),r;r=n;switch(r[1]){case 2:n=r[2];break;default:n=e.unexpected(n)}r=n,e.ensure(ur.TDoubleDot);var i=null;return e.allowTypes?i=e.parseType():(n=e.token(),ti.enumEq(n,ur.TId("Dynamic"))||e.unexpected(n)),e.ensure(ur.TPClose),e=e.parseExpr(),sr.ETry(t,r,i,e)}(t);break;default:t=null}return t}(this)},makeBinop:function(e,t,n){switch(n[1]){case 6:var r=n[4],i=n[3],s=n[2],e=this.opPriority.get(e)<=this.opPriority.get(s)&&!this.opRightAssoc.exists(e)?sr.EBinop(s,this.makeBinop(e,t,i),r):sr.EBinop(e,t,n);break;case 22:s=n[4],r=n[3],i=n[2],e=this.opRightAssoc.exists(e)?sr.EBinop(e,t,n):sr.ETernary(this.makeBinop(e,t,i),r,s);break;default:e=sr.EBinop(e,t,n)}return e},makeUnop:function(e,t){var n;switch(t[1]){case 6:n=t[4];var r=t[3];n=sr.EBinop(t[2],this.makeUnop(e,r),n);break;case 22:var i=t[4];n=t[3],r=t[2],n=sr.ETernary(this.makeUnop(e,r),n,i);break;default:n=sr.EUnop(e,!0,t)}return n},parseExpr:function(){var e=this.token(),t=e;switch(t[1]){case 2:return e=t[2],t=this.parseStructure(e),null==t&&(t=sr.EIdent(e)),this.parseExprNext(t);case 1:return t=t[2],this.parseExprNext(sr.EConst(t));case 4:return t=this.parseExpr(),this.ensure(ur.TPClose),this.parseExprNext(sr.EParent(t));case 6:t=e=this.token();switch(t[1]){case 7:return this.parseExprNext(sr.EObject([]));case 2:t=this.token(),this.tokens.add(t),this.tokens.add(e);switch(t[1]){case 14:return this.parseExprNext(this.parseObject(0))}break;case 1:t=t[2];if(this.allowJSON)switch(t[1]){case 2:t=this.token(),this.tokens.add(t),this.tokens.add(e);switch(t[1]){case 14:return this.parseExprNext(this.parseObject(0))}break;default:this.tokens.add(e)}else this.tokens.add(e);break;default:this.tokens.add(e)}for(t=[];;){t.push(this.parseFullExpr()),e=this.token();if(e==ur.TBrClose)break;this.tokens.add(e)}return sr.EBlock(t);case 3:return t=t[2],this.unops.exists(t)?this.makeUnop(t,this.parseExpr()):this.unexpected(e);case 11:t=[];for(e=this.token();e!=ur.TBkClose;)this.tokens.add(e),t.push(this.parseExpr()),e=this.token(),e==ur.TComma&&(e=this.token());return this.parseExprNext(sr.EArrayDecl(t));default:return this.unexpected(e)}},parseObject:function(){var e=[];try{for(;;){var t=this.token(),n=null,r=t;switch(r[1]){case 2:n=r[2];break;case 1:var i=r[2];this.allowJSON||this.unexpected(t),r=i;switch(r[1]){case 2:n=r[2];break;default:this.unexpected(t)}break;case 7:throw"__break__";default:this.unexpected(t)}this.ensure(ur.TDoubleDot),e.push({name:n,e:this.parseExpr()}),t=this.token();switch(t[1]){case 7:throw"__break__";case 9:break;default:this.unexpected(t)}}}catch(s){if("__break__"!=s)throw s}return this.parseExprNext(sr.EObject(e))},parseFullExpr:function(){var e=this.parseExpr(),t=this.token();return t!=ur.TSemicolon&&t!=ur.TEof&&(this.isBlock(e)?this.tokens.add(t):this.unexpected(t)),e},isBlock:function(e){switch(e[1]){case 4:case 21:e=!0;break;case 14:var t=e[3],e=this.isBlock(t);break;case 2:t=e[4],e=null!=t&&this.isBlock(t);break;case 9:var n=e[4],t=e[3],e=null!=n?this.isBlock(n):this.isBlock(t);break;case 6:t=e[4],e=this.isBlock(t);break;case 7:t=e[4],e=!e[3]&&this.isBlock(t);break;case 10:t=e[3],e=this.isBlock(t);break;case 11:t=e[4],e=this.isBlock(t);break;case 15:t=e[2],e=null!=t&&this.isBlock(t);break;default:e=!1}return e},mk:function(e){return e},pmax:function(){return 0},pmin:function(){return 0},expr:function(e){return e},ensure:function(e){var t=this.token();t!=e&&this.unexpected(t)},push:function(e){this.tokens.add(e)},unexpected:function(e){throw nr.EUnexpected(this.tokenString(e))},parse:function(e){this.tokens=new Kn,this["char"]=-1,this.input=e,this.ops=[],this.idents=[];for(var e=0,t=this.opChars.length;e<t;){var n=e++;this.ops[Fr.cca(this.opChars,n)]=!0}e=0;for(t=this.identChars.length;e<t;)n=e++,this.idents[Fr.cca(this.identChars,n)]=!0;for(e=[];;){t=this.token();if(t==ur.TEof)break;this.tokens.add(t),e.push(this.parseFullExpr())}return 1==e.length?e[0]:sr.EBlock(e)},parseString:function(e){return this.line=1,this.parse(new Zn.StringInput(e))},invalidChar:function(e){throw nr.EInvalidChar(e)},error:function(e){throw e},tokens:null,idents:null,ops:null,"char":null,input:null,allowTypes:null,allowJSON:null,unops:null,opRightAssoc:null,opPriority:null,identChars:null,opChars:null,line:null,__class__:er};var es,ts;es=function(){this.handlers=[]},Er["hxevents.Dispatcher"]=es,es.__name__=["hxevents","Dispatcher"],es.prototype={stop:function(){this._stop=!0},_stop:null,has:function(e){if(null==e)return 0<this.handlers.length;for(var t=0,n=this.handlers;t<n.length;){var r=n[t];++t;if(e==r)return!0}return!1},dispatchAndAutomate:function(e){this.dispatch(e),this.handlers=[],this.add=function(t){return t(e),t}},dispatch:function(e){for(var t=this.handlers.slice(),n=0;n<t.length;){var r=t[n];++n;if(1==this._stop){this._stop=!1;break}r(e)}},clear:function(){this.handlers=[]},remove:function(e){for(var t=0,n=this.handlers.length;t<n;){var r=t++;if(Kr.compareMethods(this.handlers[r],e))return this.handlers.splice(r,1)[0]}return null},addOnce:function(e){var t=this,n=null,n=function(r){t.remove(n),e(r)};return this.add(n),n},add:function(e){return this.handlers.push(e),e},handlers:null,__class__:es},ts=function(){this.handlers=[]},Er["hxevents.Notifier"]=ts,ts.__name__=["hxevents","Notifier"],ts.prototype={stop:function(){this._stop=!0},_stop:null,has:function(e){if(null==e)return 0<this.handlers.length;for(var t=0,n=this.handlers;t<n.length;){var r=n[t];++t;if(e==r)return!0}return!1},dispatchAndAutomate:function(){this.dispatch(),this.handlers=[],this.add=function(e){return e(),e}},dispatch:function(){for(var e=this.handlers.slice(),t=0;t<e.length;){var n=e[t];++t;if(1==this._stop){this._stop=!1;break}n()}},clear:function(){this.handlers=[]},remove:function(e){for(var t=0,n=this.handlers.length;t<n;){var r=t++;if(Kr.compareMethods(this.handlers[r],e))return this.handlers.splice(r,1)[0]}return null},addOnce:function(e){var t=this,n=null,n=function(){t.remove(n),e()};return this.add(n),n},add:function(e){return this.handlers.push(e),e},handlers:null,__class__:ts},ar=function(){},Er["js.Boot"]=ar,ar.__name__=["js","Boot"],ar.__unhtml=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},ar.__trace=function(e,t){var n=null!=t?t.fileName+":"+t.lineNumber+": ":"",n=n+ar.__string_rec(e,""),r;"undefined"!=typeof document&&null!=(r=document.getElementById("haxe:trace"))?r.innerHTML+=ar.__unhtml(n)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(n)},ar.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var n=typeof e;"function"==n&&(e.__name__||e.__ename__)&&(n="object");switch(n){case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];for(var n=e[0]+"(",t=t+"	",r=2,i=e.length;r<i;)var s=r++,n=2!=s?n+(","+ar.__string_rec(e[s],t)):n+ar.__string_rec(e[s],t);return n+")"}r=e.length,n="[",t+="	";for(i=0;i<r;)s=i++,n+=(0<s?",":"")+ar.__string_rec(e[s],t);return n+"]"}try{i=e.toString}catch(o){return"???"}if(null!=i&&i!=Object.toString&&(n=e.toString(),"[object Object]"!=n))return n;i=null,n="{\n",t+="	",r=null!=e.hasOwnProperty;for(i in e)if(!r||e.hasOwnProperty(i))"prototype"==i||"__class__"==i||"__super__"==i||"__interfaces__"==i||"__properties__"==i||(2!=n.length&&(n+=", \n"),n+=t+i+" : "+ar.__string_rec(e[i],t));return t=t.substring(1),n+("\n"+t+"}");case"function":return"<function>";case"string":return e;default:return""+e}},ar.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var n=e.__interfaces__;if(null!=n)for(var r=0,i=n.length;r<i;){var s=r++,s=n[s];if(s==t||ar.__interfLoop(s,t))return!0}return ar.__interfLoop(e.__super__,t)},ar.__instanceof=function(e,t){try{if(e instanceof t)return t==Array?null==e.__enum__:!0;if(ar.__interfLoop(e.__class__,t))return!0}catch(n){if(null==t)return!1}switch(t){case ss:return Math.ceil(e%2147483648)===e;case us:return"number"==typeof e;case as:return!0===e||!1===e;case String:return"string"==typeof e;case os:return!0;default:return null==e?!1:t==fs&&null!=e.__name__||t==ls&&null!=e.__ename__?!0:e.__enum__==t}},ar.__cast=function(e,t){if(ar.__instanceof(e,t))return e;throw"Cannot cast "+Qr.string(e)+" to "+Qr.string(t)},cr=function(){},Er["js.Scroll"]=cr,cr.__name__=["js","Scroll"],cr.getTop=function(){var e=window.pageYOffset;return"number"==typeof e||document.body&&(e=document.body.scrollTop)?e:document.documentElement.scrollTop},cr.getLeft=function(){var e=window.pageXOffset;return"number"==typeof e||document.body&&(e=document.body.scrollLeft)?e:document.documentElement.scrollLeft},qn=void 0,Rn=void 0,Un=void 0,zn=void 0,Wn=void 0,Rn=function(){(null==Rn.BI_RC||0==Rn.BI_RC.length)&&Rn.initBiRc();if(0==Rn.BI_RM.length)throw"BI_RM not initialized";this.chunks=[];switch(Rn.defaultAm){case 1:this.am=wr(this,this.am1);break;case 2:this.am=wr(this,this.am2);break;case 3:this.am=wr(this,this.am3);break;default:throw"am error"}},Er["math.BigInteger"]=Rn,Rn.__name__=["math","BigInteger"],Rn.__properties__={get_ONE:"getONE",get_ZERO:"getZERO"},Rn.initBiRc=function(){Rn.BI_RC=[];for(var e=Fr.cca("0",0),t=0;10>t;){var n=t++;Rn.BI_RC[e]=n,e++}e=Fr.cca("a",0);for(t=10;37>t;)n=t++,Rn.BI_RC[e]=n,e++;e=Fr.cca("A",0);for(t=10;37>t;)n=t++,Rn.BI_RC[e]=n,e++},Rn.getZERO=function(){return Rn.nbv(0)},Rn.getONE=function(){return Rn.nbv(1)},Rn.nbv=function(e){var t=Rn.nbi();return t.fromInt(e),t},Rn.nbi=function(){return new Rn},Rn.ofString=function(e,t){var n=Rn.nbi(),r=function(e,t){n.fromInt(0);for(var r=Math.floor(.6931471805599453*Rn.DB/Math.log(t)),i=Math.pow(t,r)|0,s=!1,o=0,u=0,a=0,f=e.length;a<f;){var l=a++,c=Rn.intAt(e,l);0>c?"-"==e.charAt(l)&&0==n.sign&&(s=!0):(u=t*u+c,++o>=r&&(n.dMultiply(i),n.dAddOffset(u,0),u=o=0))}return 0<o&&(n.dMultiply(Math.pow(t,o)|0),n.dAddOffset(u,0)),s&&Rn.getZERO().subTo(n,n),n};if(16==t)r=4;else{if(10==t)return r(e,t);if(256==t)r=8;else if(8==t)r=3;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return r(e,t);r=2}}n.t=0,n.sign=0;for(var i=e.length,s=!1,o=0;0<=--i;){var u=8==r?Fr.cca(e,i)&255:Rn.intAt(e,i);0>u?"-"==e.charAt(i)&&(s=!0):(s=!1,0==o?(n.chunks[n.t]=u,n.t++):o+r>Rn.DB?(n.chunks[n.t-1]|=(u&(1<<Rn.DB-o)-1)<<o,n.chunks[n.t]=u>>Rn.DB-o,n.t++):n.chunks[n.t-1]|=u<<o,o+=r,o>=Rn.DB&&(o-=Rn.DB))}return 8==r&&0!=(Fr.cca(e,0)&128)&&(n.sign=-1,0<o&&(n.chunks[n.t-1]|=(1<<Rn.DB-o)-1<<o)),n.clamp(),s&&Rn.getZERO().subTo(n,n),n},Rn.ofInt=function(e){var t=Rn.nbi();return t.fromInt(e),t},Rn.ofInt32=function(e){var t=Rn.nbi();return t.fromInt32(e),t},Rn.ofBytes=function(e,t,n,r){null==n&&(n=0),null==r&&(r=e.length-n);if(0==r)return Rn.getZERO();var i=Rn.nbi();i.sign=0,i.t=0;for(var s=n+r,o=0;--s>=n;){var u=s<r?e.b[s]&255:0;0==o?(i.chunks[i.t]=u,i.t++):o+8>Rn.DB?(i.chunks[i.t-1]|=(u&(1<<Rn.DB-o)-1)<<o,i.chunks[i.t]=u>>Rn.DB-o,i.t++):i.chunks[i.t-1]|=u<<o,o+=8,o>=Rn.DB&&(o-=Rn.DB)}return!t&&0!=(e.b[0]&128)&&(i.sign=-1,0<o&&(i.chunks[i.t-1]|=(1<<Rn.DB-o)-1<<o)),i.clamp(),i},Rn.random=function(e,t){null==t&&(t=new qn.Random);if(2>e)return Rn.ofInt(1);var n=(e>>3)+1,r=Nr.alloc(n),i=e&7;return t.nextBytes(r,0,n),0<i?(n=r.b[0],r.b[0]=n&(1<<i)-1&255):r.b[0]=0,Rn.ofString(kr.hexDump(r,""),16)},Rn.randomPrime=function(e,t,n,r,i){null==i&&(i=new qn.Random);for(1>n&&(n=1);;){var s=Rn.random(e,i);r&&(s.testBit(e-1)||s.bitwiseTo(Rn.getONE().shl(e-1),Rn.op_or,s)),s.isEven()&&s.dAddOffset(1,0),s.primify(e,1);if(0==s.sub(Rn.getONE()).gcd(t).compare(Rn.getONE())&&s.isProbablePrime(n))return s}return null},Rn.op_and=function(e,t){return e&t},Rn.op_or=function(e,t){return e|t},Rn.op_xor=function(e,t){return e^t},Rn.op_andnot=function(e,t){return e&~t},Rn.nbits=function(e){var t=1,n;return 0!=(n=e>>>16)&&(e=n,t+=16),0!=(n=e>>8)&&(e=n,t+=8),0!=(n=e>>4)&&(e=n,t+=4),0!=(n=e>>2)&&(e=n,t+=2),0!=e>>1&&(t+=1),t},Rn.cbit=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t},Rn.intAt=function(e,t){var n=Rn.BI_RC[Fr.cca(e,t)];return null==n?-1:n},Rn.int2charCode=function(e){return Fr.cca(Rn.BI_RM,e)},Rn.lbit=function(e){if(0==e)return-1;var t=0;return 0==(e&65535)&&(e>>=16,t+=16),0==(e&255)&&(e>>=8,t+=8),0==(e&15)&&(e>>=4,t+=4),0==(e&3)&&(e>>=2,t+=2),0==(e&1)&&++t,t},Rn.dumpBi=function(e){var t="sign: "+Qr.string(e.sign),t=t+(" t: "+e.t);return t+=Qr.string(e.chunks)},Rn.prototype={am3:function(e,t,n,r,i,s){for(var o=t&16383,t=t>>14;0<=--s;){var u=this.chunks[e]&16383,a=this.chunks[e]>>14;e++;var f=t*u+a*o,u=o*u+((f&16383)<<14)+n.chunks[r]+i,i=(u>>28)+(f>>14)+t*a;n.chunks[r]=u&268435455,r++}return i},am2:function(e,t,n,r,i,s){for(var o=t&32767,t=t>>15;0<=--s;){var u=this.chunks[e]&32767,a=this.chunks[e]>>15;e++;var f=t*u+a*o,u=o*u+((f&32767)<<15)+n.chunks[r]+(i&1073741823),i=(u>>>30)+(f>>>15)+t*a+(i>>>30);n.chunks[r]=u&1073741823,r++}return i},am1:function(e,t,n,r,i,s){for(;0<=--s;){var o=t*this.chunks[e]+n.chunks[r]+i;e++,i=Math.floor(o/67108864),n.chunks[r]=o&67108863,r++}return i},rShiftTo:function(e,t){t.sign=this.sign;var n=Math.floor(e/Rn.DB);if(n>=this.t)t.t=0;else{var r=e%Rn.DB,i=Rn.DB-r,s=(1<<r)-1;t.chunks[0]=this.chunks[n]>>r;for(var o=n+1,u=this.t;o<u;){var a=o++;t.chunks[a-n-1]|=(this.chunks[a]&s)<<i,t.chunks[a-n]=this.chunks[a]>>r}0<r&&(t.chunks[this.t-n-1]|=(this.sign&s)<<i),t.t=this.t-n,t.clamp()}},lShiftTo:function(e,t){for(var n=e%Rn.DB,r=Rn.DB-n,i=(1<<r)-1,s=Math.floor(e/Rn.DB),o=this.sign<<n&Rn.DM,u=this.t-1;0<=u;)t.chunks[u+s+1]=this.chunks[u]>>r|o,o=(this.chunks[u]&i)<<n,u--;for(u=s-1;0<=u;)t.chunks[u]=0,u--;t.chunks[s]=o,t.t=this.t+s+1,t.sign=this.sign,t.clamp()},millerRabin:function(e){var t=this.sub(Rn.getONE()),n=t.getLowestSetBit();if(0>=n)return!1;var r=t.shr(n),e=e+1>>1;e>Rn.lowprimes.length&&(e=Rn.lowprimes.length);for(var i=Rn.nbi(),s=0;s<e;){var o=s++;i.fromInt(Rn.lowprimes[o]),o=i.modPow(r,this);if(0!=o.compare(Rn.getONE())&&0!=o.compare(t)){for(var u=1;u++<n&&0!=o.compare(t);)if(o=o.modPowInt(2,this),0==o.compare(Rn.getONE()))return!1;if(0!=o.compare(t))return!1}}return!0},exp:function(e,t){if(2147483647<e||1>e)return Rn.getONE();var n=Rn.nbi(),r=Rn.nbi(),i=t.convert(this),s=Rn.nbits(e)-1;for(i.copyTo(n);0<=--s;)if(t.sqrTo(n,r),0<(e&1<<s))t.mulTo(r,i,n);else var o=n,n=r,r=o;return t.revert(n)},dMultiply:function(e){this.chunks[this.t]=this.am(0,e-1,this,0,0,this.t),this.t++,this.clamp()},chunkSize:function(e){return Math.floor(.6931471805599453*Rn.DB/Math.log(e))},changeBit:function(e,t){var n=Rn.getONE().shl(e);return this.bitwiseTo(n,t,n),n},bitwiseTo:function(e,t,n){for(var r,i=Math.min(e.t,this.t)|0,s=0;s<i;){var o=s++;n.chunks[o]=t(this.chunks[o],e.chunks[o])}if(e.t<this.t){r=e.sign&Rn.DM;for(s=this.t;i<s;)o=i++,n.chunks[o]=t(this.chunks[o],r);n.t=this.t}else{r=this.sign&Rn.DM;for(s=e.t;i<s;)o=i++,n.chunks[o]=t(r,e.chunks[o]);n.t=e.t}n.sign=t(this.sign,e.sign),n.clamp()},primify:function(e,t){for(;this.bitLength()>e;)this.subTo(Rn.getONE().shl(e-1),this);for(;!this.isProbablePrime(t);)for(this.dAddOffset(2,0);this.bitLength()>e;)this.subTo(Rn.getONE().shl(e-1),this)},isProbablePrime:function(e){var t,n=this.abs();if(1==n.t&&n.chunks[0]<=Rn.lowprimes[Rn.lowprimes.length-1]){e=0;for(t=Rn.lowprimes.length;e<t;){var r=e++;if(n.chunks[0]==Rn.lowprimes[r])return!0}return!1}if(n.isEven())return!1;for(t=1;t<Rn.lowprimes.length;){for(var r=Rn.lowprimes[t],i=t+1;i<Rn.lowprimes.length&&r<Rn.lplim;)r*=Rn.lowprimes[i],i++;for(r=n.modInt(r);t<i;){if(0==r%Rn.lowprimes[t])return!1;t++}}return n.millerRabin(e)},invDigit:function(){if(1>this.t)return 0;var e=this.chunks[0];if(0==(e&1))return 0;var t=e&3,t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%Rn.DV)%Rn.DV;return 0<t?Rn.DV-t:-t},drShiftTo:function(e,t){if(null!=t){for(var n=e;n<this.t;)t.chunks[n-e]=this.chunks[n],n++;t.t=Math.max(this.t-e,0)|0,t.sign=this.sign}},dlShiftTo:function(e,t){if(null!=t){for(var n=this.t-1;0<=n;)t.chunks[n+e]=this.chunks[n],n--;for(n=e-1;0<=n;)t.chunks[n]=0,n--;t.t=this.t+e,t.sign=this.sign}},dAddOffset:function(e,t){for(;this.t<=t;)this.chunks[this.t]=0,this.t++;for(this.chunks[t]+=e;this.chunks[t]>=Rn.DV;)this.chunks[t]-=Rn.DV,++t>=this.t&&(this.chunks[this.t]=0,this.t++),++this.chunks[t]},sigNum:function(){return 0>this.sign?-1:0>=this.t||1==this.t&&0>=this.chunks[0]?0:1},byteValue:function(){return 0==this.t?this.sign:this.chunks[0]<<24>>24},shortValue:function(){return 0==this.t?this.sign:this.chunks[0]<<16>>16},padTo:function(e){for(;this.t<e;)this.chunks[this.t]=0,this.t++},gcd:function(e){var t=0>this.sign?this.neg():this.clone(),e=0>e.sign?e.neg():e.clone();if(0>t.compare(e))var n=t,t=e,e=n;var n=t.getLowestSetBit(),r=e.getLowestSetBit();if(0>r)return t;n<r&&(r=n),0<r&&(t.rShiftTo(r,t),e.rShiftTo(r,e));for(;0<t.sigNum();)0<(n=t.getLowestSetBit())&&t.rShiftTo(n,t),0<(n=e.getLowestSetBit())&&e.rShiftTo(n,e),0<=t.compare(e)?(t.subTo(e,t),t.rShiftTo(1,t)):(e.subTo(t,e),e.rShiftTo(1,e));return 0<r&&e.lShiftTo(r,e),e},clone:function(){var e=Rn.nbi();return this.copyTo(e),e},clamp:function(){for(var e=this.sign&Rn.DM;0<this.t&&this.chunks[this.t-1]==e;)--this.t},subTo:function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t)|0;n<i;)r+=this.chunks[n]-e.chunks[n],t.chunks[n]=r&Rn.DM,n++,r>>=Rn.DB;if(e.t<this.t){for(r-=e.sign;n<this.t;)r+=this.chunks[n],t.chunks[n]=r&Rn.DM,n++,r>>=Rn.DB;r+=this.sign}else{for(r+=this.sign;n<e.t;)r-=e.chunks[n],t.chunks[n]=r&Rn.DM,n++,r>>=Rn.DB;r-=e.sign}t.sign=0>r?-1:0,-1>r?(t.chunks[n]=Rn.DV+r,n++):0<r&&(t.chunks[n]=r,n++),t.t=n,t.clamp()},squareTo:function(e){if(e==this)throw"can not squareTo self";for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e.chunks[n]=0;for(n=0;n<t.t-1;){var r=t.am(n,t.chunks[n],e,2*n,0,1);(e.chunks[n+t.t]+=t.am(n+1,2*t.chunks[n],e,2*n+1,r,t.t-n-1))>=Rn.DV&&(e.chunks[n+t.t]-=Rn.DV,e.chunks[n+t.t+1]=1),n++}0<e.t&&(t=t.am(n,t.chunks[n],e,2*n,0,1),e.chunks[e.t-1]+=t),e.sign=0,e.clamp()},multiplyUpperTo:function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.sign=0;0<=--r;)n.chunks[r]=0;for(var r=Math.max(t-this.t,0)|0,i=e.t;r<i;){var s=r++;n.chunks[this.t+s-t]=this.am(t-s,e.chunks[s],n,0,0,this.t+s-t)}n.clamp(),n.drShiftTo(1,n)},multiplyTo:function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;0<=--i;)t.chunks[i]=0;for(var i=0,s=r.t;i<s;){var o=i++;t.chunks[o+n.t]=n.am(0,r.chunks[o],t,o,0,n.t)}t.sign=0,t.clamp(),this.sign!=e.sign&&Rn.getZERO().subTo(t,t)},multiplyLowerTo:function(e,t,n){var r=Math.min(this.t+e.t,t)|0;n.sign=0;for(n.t=r;0<r;)--r,n.chunks[r]=0;for(var i=n.t-this.t;r<i;)n.chunks[r+this.t]=this.am(0,e.chunks[r],n,r,0,this.t),++r;for(i=Math.min(e.t,t)|0;r<i;)this.am(0,e.chunks[r],n,r,0,t-r),++r;n.clamp()},divRemTo:function(e,t,n){var r=e.abs();if(!(0>=r.t)){var i=this.abs();if(i.t<r.t)null!=t&&t.fromInt(0),null!=n&&this.copyTo(n);else{null==n&&(n=Rn.nbi());var s=Rn.nbi(),o=this.sign,e=e.sign,u=Rn.DB-Rn.nbits(r.chunks[r.t-1]);0<u?(i.lShiftTo(u,n),r.lShiftTo(u,s)):(i.copyTo(n),r.copyTo(s)),r=s.t,i=s.chunks[r-1];if(0!=i){var a=1*i*1*(1<<Rn.F1)+(1<r?1*(s.chunks[r-2]>>Rn.F2):0),f=Rn.FV/a,a=1*(1<<Rn.F1)/a,l=1*(1<<Rn.F2),c=n.t,h=c-r,p=null==t?Rn.nbi():t;s.dlShiftTo(h,p),0<=n.compare(p)&&(n.chunks[n.t]=1,n.t++,n.subTo(p,n)),Rn.getONE().dlShiftTo(r,p);for(p.subTo(s,s);s.t<r;)s.chunks[s.t]=0,s.t++;for(;0<=--h;){var d;d=n.chunks[--c]==i?Rn.DM:Math.floor(1*n.chunks[c]*f+(1*n.chunks[c-1]+l)*a),n.chunks[c]+=s.am(0,d,n,h,0,r);if(n.chunks[c]<d){s.dlShiftTo(h,p);for(n.subTo(p,n);n.chunks[c]<--d;)n.subTo(p,n)}}null!=t&&(n.drShiftTo(r,t),o!=e&&Rn.getZERO().subTo(t,t)),n.t=r,n.clamp(),0<u&&n.rShiftTo(u,n),0>o&&Rn.getZERO().subTo(n,n)}}}},copyTo:function(e){for(var t=0,n=this.chunks.length;t<n;){var r=t++;e.chunks[r]=this.chunks[r]}e.t=this.t,e.sign=this.sign},addTo:function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t)|0;n<i;)r+=this.chunks[n]+e.chunks[n],t.chunks[n]=r&Rn.DM,n++,r>>=Rn.DB;if(e.t<this.t){for(r+=e.sign;n<this.t;)r+=this.chunks[n],t.chunks[n]=r&Rn.DM,n++,r>>=Rn.DB;r+=this.sign}else{for(r+=this.sign;n<e.t;)r+=e.chunks[n],t.chunks[n]=r&Rn.DM,n++,r>>=Rn.DB;r+=e.sign}t.sign=0>r?-1:0,0<r?(t.chunks[n]=r,n++):-1>r&&(t.chunks[n]=Rn.DV+r,n++),t.t=n,t.clamp()},xor:function(e){var t=Rn.nbi();return this.bitwiseTo(e,Rn.op_xor,t),t},testBit:function(e){var t=Math.floor(e/Rn.DB);return t>=this.t?0!=this.sign:0!=(this.chunks[t]&1<<e%Rn.DB)},shr:function(e){var t=Rn.nbi();return 0>e?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},shl:function(e){var t=Rn.nbi();return 0>e?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},setBit:function(e){return this.changeBit(e,Rn.op_or)},or:function(e){var t=Rn.nbi();return this.bitwiseTo(e,Rn.op_or,t),t},not:function(){for(var e=Rn.nbi(),t=0,n=this.t;t<n;){var r=t++;e.chunks[r]=Rn.DM&~this.chunks[r]}return e.t=this.t,e.sign=~this.sign,e},getLowestSetBit:function(){for(var e=0,t=this.t;e<t;){var n=e++;if(0!=this.chunks[n])return n*Rn.DB+Rn.lbit(this.chunks[n])}return 0>this.sign?this.t*Rn.DB:-1},flipBit:function(e){return this.changeBit(e,Rn.op_xor)},clearBit:function(e){return this.changeBit(e,Rn.op_andnot)},complement:function(){return this.not()},bitLength:function(){return 0>=this.t?0:Rn.DB*(this.t-1)+Rn.nbits(this.chunks[this.t-1]^this.sign&Rn.DM)},bitCount:function(){for(var e=0,t=this.sign&Rn.DM,n=0,r=this.t;n<r;)var i=n++,e=e+Rn.cbit(this.chunks[i]^t);return e},andNot:function(e){var t=Rn.nbi();return this.bitwiseTo(e,Rn.op_andnot,t),t},and:function(e){var t=Rn.nbi();return this.bitwiseTo(e,Rn.op_and,t),t},sub:function(e){var t=Rn.nbi();return this.subTo(e,t),t},remainder:function(e){var t=Rn.nbi();return this.divRemTo(e,null,t),t},pow:function(e){return this.exp(e,new zn.Null)},neg:function(){var e=Rn.nbi();return Rn.getZERO().subTo(this,e),e},mul:function(e){var t=Rn.nbi();return this.multiplyTo(e,t),t},modPowInt:function(e,t){if(null==t)throw"m is null";var n;return n=256>e||t.isEven()?new zn.Classic(t):new zn.Montgomery(t),this.exp(e,n)},modPow:function(e,t){var n=e.bitLength(),r,i=Rn.nbv(1),s;if(0>=n)return i;r=18>n?1:48>n?3:144>n?4:768>n?5:6,s=8>n?new zn.Classic(t):t.isEven()?new zn.Barrett(t):new zn.Montgomery(t);var o=[],u=3,a=r-1,f=(1<<r)-1;o[1]=s.convert(this);if(1<r){n=Rn.nbi();for(s.sqrTo(o[1],n);u<=f;)o[u]=Rn.nbi(),s.mulTo(n,o[u-2],o[u]),u+=2}for(var l=e.t-1,c,h=!0,p=Rn.nbi(),n=Rn.nbits(e.chunks[l])-1;0<=l;){n>=a?c=e.chunks[l]>>n-a&f:(c=(e.chunks[l]&(1<<n+1)-1)<<a-n,0<l&&(c|=e.chunks[l-1]>>Rn.DB+n-a));for(u=r;0==(c&1);)c>>=1,--u;0>(n-=u)&&(n+=Rn.DB,--l);if(h)o[c].copyTo(i),h=!1;else{for(;1<u;)s.sqrTo(i,p),s.sqrTo(p,i),u-=2;0<u?s.sqrTo(i,p):(u=i,i=p,p=u),s.mulTo(p,o[c],i)}for(u=e.chunks[l];0<=l&&0==(u&1<<n);)s.sqrTo(i,p),u=i,i=p,p=u,0>--n&&(n=Rn.DB-1,--l),u=e.chunks[l]}return s.revert(i)},modInverse:function(e){var t=e.isEven();if(this.isEven()&&t||0==e.sigNum())return Rn.getZERO();for(var n=e.clone(),r=this.clone(),i=Rn.nbv(1),s=Rn.nbv(0),o=Rn.nbv(0),u=Rn.nbv(1);0!=n.sigNum();){for(;n.isEven();){n.rShiftTo(1,n);if(t){if(!i.isEven()||!s.isEven())i.addTo(this,i),s.subTo(e,s);i.rShiftTo(1,i)}else s.isEven()||s.subTo(e,s);s.rShiftTo(1,s)}for(;r.isEven();){r.rShiftTo(1,r);if(t){if(!o.isEven()||!u.isEven())o.addTo(this,o),u.subTo(e,u);o.rShiftTo(1,o)}else u.isEven()||u.subTo(e,u);u.rShiftTo(1,u)}0<=n.compare(r)?(n.subTo(r,n),t&&i.subTo(o,i),s.subTo(u,s)):(r.subTo(n,r),t&&o.subTo(i,o),u.subTo(s,u))}return 0!=r.compare(Rn.getONE())?Rn.getZERO():0<=u.compare(e)?u.sub(e):(0>u.sigNum()&&u.addTo(e,u),u)},modInt:function(e){if(0>=e)return 0;var t=Rn.DV%e,n=0>this.sign?e-1:0;if(0<this.t)if(0==t)n=this.chunks[0]%e;else for(var r=this.t-1;0<=r;)n=(t*n+this.chunks[r])%e,--r;return n},mod:function(e){var t=Rn.nbi();return this.abs().divRemTo(e,null,t),0>this.sign&&0<t.compare(Rn.getZERO())&&e.subTo(t,t),t},min:function(e){return 0>this.compare(e)?this:e},max:function(e){return 0<this.compare(e)?this:e},isEven:function(){return 0==(0<this.t?this.chunks[0]&1:this.sign)},eq:function(e){return 0==this.compare(e)},divideAndRemainder:function(e){var t=Rn.nbi(),n=Rn.nbi();return this.divRemTo(e,t,n),[t,n]},div:function(e){var t=Rn.nbi();return this.divRemTo(e,t,null),t},compare:function(e){var t=this.sign-e.sign;if(0!=t)return t;var n=this.t,t=n-e.t;if(0!=t)return t;for(;0<=--n;)if(t=this.chunks[n]-e.chunks[n],0!=t)return t;return 0},add:function(e){var t=Rn.nbi();return this.addTo(e,t),t},abs:function(){return 0>this.sign?this.neg():this},toRadix:function(e){null==e&&(e=10);if(2>e||36<e)throw new hr.UnsupportedException("invalid base for conversion");if(0==this.sigNum())return"0";var t=Math.floor(.6931471805599453*Rn.DB/Math.log(e)),t=Math.pow(e,t)|0,n=Rn.nbv(t),r=Rn.nbi(),i=Rn.nbi(),s="";for(this.divRemTo(n,r,i);0<r.sigNum();)s=Fr.substr(Ir.baseEncode(t+i.toInt32(),e),1,null)+s,r.divRemTo(n,r,i);return Ir.baseEncode(i.toInt32(),e)+s},toBytesUnsigned:function(){var e=new Cr,t=0,n=this.t,r=Rn.DB-n*Rn.DB%8,i=!1,s=0;if(0<n--){r<Rn.DB&&0<(t=this.chunks[n]>>r)&&(i=!0,e.b.push(t),s++);for(;0<=n;)8>r?(t=(this.chunks[n]&(1<<r)-1)<<8-r,t|=this.chunks[--n]>>(r+=Rn.DB-8)):(t=this.chunks[n]>>(r-=8)&255,0>=r&&(r+=Rn.DB,--n)),0<t&&(i=!0),i&&(e.b.push(t),s++)}return e.getBytes()},toBytes:function(){var e=this.t,t=[];t[0]=this.sign;var n=Rn.DB-e*Rn.DB%8,r,i=0;if(0<e--){n<Rn.DB&&(r=this.chunks[e]>>n)!=(this.sign&Rn.DM)>>n&&(t[i]=r|this.sign<<Rn.DB-n,i++);for(;0<=e;)if(8>n?(r=(this.chunks[e]&(1<<n)-1)<<8-n,--e,r|=this.chunks[e]>>(n+=Rn.DB-8)):(r=this.chunks[e]>>(n-=8)&255,0>=n&&(n+=Rn.DB,--e)),0!=(r&128)&&(r|=-256),0==i&&(this.sign&128)!=(r&128)&&++i,0<i||r!=this.sign)t[i]=r,i++}e=new Cr,n=0;for(r=t.length;n<r;)i=n++,e.b.push(t[i]);return e.getBytes()},toHex:function(){return this.toRadix(16).toString()},toString:function(){return this.toRadix(10).toString()},toInt32:function(){return this.toInt()},toInt:function(){if(0>this.sign){if(1==this.t)return this.chunks[0]-Rn.DV;if(0==this.t)return-1}else{if(1==this.t)return this.chunks[0];if(0==
this.t)return 0}return(this.chunks[1]&(1<<32-Rn.DB)-1)<<Rn.DB|this.chunks[0]},fromInt32:function(e){this.fromInt(e)},fromInt:function(e){this.t=1,this.chunks[0]=0,this.sign=0>e?-1:0,0<e?this.chunks[0]=e:-1>e?this.chunks[0]=e+Rn.DV:this.t=0},am:null,chunks:null,sign:null,t:null,__class__:Rn},Wn={Status:{__ename__:["math","_IEEE754","Status"],__constructs__:"Normal,Overflow,Underflow,Denormalized,Quiet,Signalling".split(",")}},Wn.Status.Normal=["Normal",0],Wn.Status.Normal.toString=Sr,Wn.Status.Normal.__enum__=Wn.Status,Wn.Status.Overflow=["Overflow",1],Wn.Status.Overflow.toString=Sr,Wn.Status.Overflow.__enum__=Wn.Status,Wn.Status.Underflow=["Underflow",2],Wn.Status.Underflow.toString=Sr,Wn.Status.Underflow.__enum__=Wn.Status,Wn.Status.Denormalized=["Denormalized",3],Wn.Status.Denormalized.toString=Sr,Wn.Status.Denormalized.__enum__=Wn.Status,Wn.Status.Quiet=["Quiet",4],Wn.Status.Quiet.toString=Sr,Wn.Status.Quiet.__enum__=Wn.Status,Wn.Status.Signalling=["Signalling",5],Wn.Status.Signalling.toString=Sr,Wn.Status.Signalling.__enum__=Wn.Status,Un=function(e){this.Size=e,this.BinaryPower=0,this.StatCond64=this.StatCond=Wn.Status.Normal,32==this.Size?(this.MaxExp=this.ExpBias=127,this.MinExp=-126,this.MinUnnormExp=-149):(this.Size=64,this.MaxExp=this.ExpBias=1023,this.MinExp=-1022,this.MinUnnormExp=-1074)},Er["math.IEEE754"]=Un,Un.__name__=["math","IEEE754"],Un.floatToBytes=function(e,t){null==t&&(t=!1);var n=new Un(32);return n.setEndian(t),n.rounding=!0,n.convert(e)},Un.doubleToBytes=function(e,t){null==t&&(t=!1);var n=new Un(64);return n.setEndian(t),n.rounding=!0,n.convert(e)},Un.bytesToFloat=function(e,t){null==t&&(t=!1);if(4!=e.length&&8!=e.length)throw"Bytes must be 4 or 8 bytes long";var n=new Un(4==e.length?32:64);return n.setEndian(t),n.rounding=!0,t?n.bytesToBin(e):n.bytesToBin(n.littleToBigEndian(e))},Un.splitFloat=function(e){var t={integral:0,decimal:0},n=Qr.string(e).toLowerCase(),r=n.indexOf("e"),i=0;return 0<=r?(i=Qr.parseInt(Fr.substr(n,r+1,null)),n=Fr.substr(n,0,r),r=n.indexOf("."),n=Yr.replace(n,".",""),0<i?(r+=i,r==n.length?t.integral=Qr.parseFloat(n):r>n.length?t.integral=e:(t.integral=Qr.parseFloat(Fr.substr(n,0,r)),t.decimal=Qr.parseFloat("0."+Fr.substr(n,r+1,null)))):(i+=r,0==i?t.decimal=Qr.parseFloat("0."+n):0>i?t.decimal=Qr.parseFloat("0."+n+"e"+Qr.string(i)):(t.integral=Qr.parseFloat(Fr.substr(n,0,i)),t.decimal=Qr.parseFloat("0."+Fr.substr(n,i,null)))),t):(r=n.indexOf("."),0<=r?(t.integral=Qr.parseFloat(Fr.substr(n,0,r)),t.decimal=Qr.parseFloat("0."+Fr.substr(n,r+1,null))):t.integral=Qr.parseFloat(n),t)},Un.prototype={numStrClipOff:function(e,t){var n="",r=e.toUpperCase(),i="",n="",s=0,o=0,u=r.indexOf("E");-1!=u?(s=u,i=Fr.substr(e,u+1,e.length),o=Qr.parseInt(i)):(s=e.length,o=0),-1==e.indexOf(".")&&(r=Fr.substr(e,0,s),r+=".",e.length!=s&&(r+=Fr.substr(e,u,e.length)),e=r,u+=1,s+=1);var r=e.indexOf("."),a=0;"-"==e.charAt(a)?(a++,n="-"):n="";for(var f=a,l=!1;f<s&&!l;){for(var c=1;10>c;){if(e.charAt(f)=="0123456789".charAt(c)){l=!0;break}c++}f++}f--,c=0,l?(c=r-f,0<c&&(c-=1),i="e"+(o+c)):f=a,o=s-f,r=Fr.substr(e,f,s),-1!=r.indexOf(".")&&(o-=1),l=o,t<o&&(l=t),r=Fr.substr(e,f,f+l+1);if(f!=a||-1==r.indexOf(".")){n+=Fr.substr(e,f,f+1);for(n=n+"."+Fr.substr(e,f+1,f+l);o<t;)n+="0",o+=1;n+=i}else{for(n=Fr.substr(e,0,a+l+1);o<t;)n+="0",o+=1;e.length!=s&&(n+=Fr.substr(e,u,e.length))}return n},Convert2Dec:function(){var e=Math.log(10),t=32==this.Size?9:12,n=0,r=0;this.BinaryPower<this.MinExp||this.BinaryPower>this.MaxExp?r=n=0:(n=-1,r=1);for(var i=t,s=this.Size;i<s;)var o=i++,r=r+(this.Result[o]|0)*Math.pow(2,n+t-o);return n=r*Math.pow(2,this.BinaryPower),32==this.Size?(t=8,0<r&&(e=Math.floor(Math.log(n)/e),n+=.5*Math.pow(10,e-t+1))):t=17,1==this.Result[0]&&(n=-n),n=Qr.parseFloat(this.numStrClipOff(Qr.string(n),t))},bytesToBin:function(e){this.initBuffers();for(var t=0,n=0,r=this,i=function(e,t){for(var n=0;4>n;){var i=n++,e=2*e;1<=e?(r.Result[t+i]=1,e-=1):r.Result[t+i]=0}};t<this.Size;)i(((e.b[n]&240)>>4)/16,t),t+=4,i((e.b[n]&15)/16,t),t+=4,n++;e=0,n=32==this.Size?9:12;for(t=1;t<n;)i=t++,e+=this.Result[i]*Math.pow(2,n-i-1)|0;this.BinaryPower=e-=this.ExpBias,t=1024-e,e>=this.MinExp&&e<=this.MaxExp&&(this.BinVal[t]=1,t++);var s=t,i=!1;0==this.Result[n]&&(i=!0),this.BinVal[t]=this.Result[n],n++,t++;for(var o=!0;n<this.Size&&2102>t;)1==this.Result[n]&&(o=!1),this.BinVal[t]=this.Result[n],n++,t++;for(;2102>s&&1!=this.BinVal[s];)s++;t=1024-s;if(e<this.MinExp)this.StatCond=-1078==t?Wn.Status.Normal:t<this.MinUnnormExp?Wn.Status.Underflow:Wn.Status.Denormalized;else if(e>this.MaxExp)return i&&o?(this.StatCond=Wn.Status.Overflow,1==this.Result[0]?Math.NEGATIVE_INFINITY:Math.POSITIVE_INFINITY):(this.StatCond=!i&&o&&1==this.Result[0]?Wn.Status.Quiet:i?Wn.Status.Signalling:Wn.Status.Quiet,Math.NaN);return this.Convert2Dec()},toBytes:function(){for(var e=32==this.Size?4:8,t=Nr.alloc(e),n=0,r=0;n<this.Size;){for(var i=0,s=0,o=0;4>o;)var u=o++,i=i+(Math.pow(2,3-u)|0)*this.Result[n+u];s=i<<4,i=0,n+=4;for(o=0;4>o;)u=o++,i+=(Math.pow(2,3-u)|0)*this.Result[n+u];s|=i,t.b[r++]=s&255,n+=4}if(!this.bigEndian){n=Nr.alloc(e),r=e-1;for(o=0;o<e;)u=o++,n.b[r]=t.b[u]&255,r--;t=n}return t},Convert2Bin:function(){var e=this.BinaryPower,t=0,n=0,r=n=t=0,i=32==this.Size?9:12,s=0;if(this.rounding&&this.StatCond64==Wn.Status.Normal){for(;2102>r&&1!=this.BinVal[r];)r++;1024-r>=this.MinExp?r++:(t=this.MinExp-1,r=1024-t),t=this.Size-1-i+r;if(1==this.BinVal[t+1]){n=0;if(1==this.BinVal[t])n=1;else for(s=t+2;0==n&&2102>s;)n=this.BinVal[s],s++;for(s=t;1==n&&0<=s;)0==this.BinVal[s]?(this.BinVal[s]=1,n=0):this.BinVal[s]=0,s--}r-=2,0>r&&(r=0)}for(;2102>r&&1!=this.BinVal[r];)r++;n=1024-r,this.StatCond64==Wn.Status.Normal?(t=n,t>=this.MinExp&&t<=this.MaxExp)?r++:t<this.MinExp&&(this.StatCond=-1078==n?Wn.Status.Normal:n<this.MinUnnormExp?Wn.Status.Underflow:Wn.Status.Denormalized,t=this.MinExp-1,r=1024-t):(t=e,r=1024-t,t>this.MaxExp?t=this.MaxExp+1:t<this.MinExp&&(t=this.MinExp-1));for(;i<this.Size&&2102>r;)this.Result[i]=this.BinVal[r],i++,r++;if(t>this.MaxExp||this.StatCond64!=Wn.Status.Normal){if(this.StatCond64==Wn.Status.Normal)return this.infinity(1==this.Result[0]);this.StatCond=this.StatCond64}r=32==this.Size?8:11,this.BinaryPower=t,t+=this.ExpBias;for(e=1*t;0!=e/2;)i=(e|0)%2,this.Result[r]=i,e=0==i?e/2:e/2-.5,r--,e=Un.splitFloat(10*e).integral/10;return this.toBytes()},convert:function(e){this.input=e,this.StatCond64=this.StatCond=Wn.Status.Normal;if(this.input==Math.POSITIVE_INFINITY)return this.infinity(!1);if(this.input==Math.NEGATIVE_INFINITY)return this.infinity(!0);if(Math.isNaN(this.input)){var e=new Cr,t=2;32==this.Size?(e.b.push(255),e.b.push(192)):(e.b.push(255),e.b.push(248),t=6);for(var n=0;n<t;)n++,e.b.push(0);return this.bufToEndian(e.getBytes())}this.BinaryPower=0,this.initBuffers(),this.Result[0]=0,0>this.input&&(this.Result[0]=1),e=Math.abs(this.input),t=Un.splitFloat(e),e=t.integral,t=t.decimal;for(n=1024;0!=e/2&&0<=n;){for(var r=e;2147483647<r;)r/=10;r=(r|0)%2,this.BinVal[n]=r,e=0==r?e/2:e/2-.5,e=Un.splitFloat(10*e).integral/10,n--}for(n=1025;0<t&&2102>n;)t*=2,1<=t?(this.BinVal[n]=1,t--):this.BinVal[n]=0,n++;for(n=0;2102>n&&1!=this.BinVal[n];)n++;return this.BinaryPower=1024-n,this.BinaryPower<this.MinExp&&(this.BinaryPower=this.MinExp-1),this.Convert2Bin()},infinity:function(e){if(e){var e=new Cr,t=2;32==this.Size?(e.b.push(255),e.b.push(128)):(e.b.push(255),e.b.push(240),t=6);var n=0}else e=new Cr,t=2,32==this.Size?(e.b.push(127),e.b.push(128)):(e.b.push(127),e.b.push(240),t=6),n=0;for(;n<t;)n++,e.b.push(0);return this.bufToEndian(e.getBytes())},bufToEndian:function(e){return this.bigEndian||(e=this.littleToBigEndian(e)),e},littleToBigEndian:function(e){for(var t=32==this.Size?4:8,n=Nr.alloc(t),r=t-1,i=0;i<t;){var s=i++;n.b[r]=e.b[s]&255,r--}return n},initBuffers:function(){this.BinVal=[];for(var e=0;2102>e;){var t=e++;this.BinVal[t]=0}this.Result=[];for(var n=0,e=this.Size;n<e;)t=n++,this.Result[t]=0},setEndian:function(e){return this.bigEndian=e},StatCond64:null,StatCond:null,Result:null,MinUnnormExp:null,MinExp:null,MaxExp:null,ExpBias:null,BinVal:null,BinaryPower:null,Size:null,rounding:null,input:null,bigEndian:null,__class__:Un,__properties__:{set_bigEndian:"setEndian"}},qn={IPrng:function(){}},Er["math.prng.IPrng"]=qn.IPrng,qn.IPrng.__name__=["math","prng","IPrng"],qn.IPrng.prototype={toString:null,next:null,init:null,size:null,__class__:qn.IPrng},qn.ArcFour=function(){this.j=this.i=0,this.S=[],this.setSize(256)},Er["math.prng.ArcFour"]=qn.ArcFour,qn.ArcFour.__name__=["math","prng","ArcFour"],qn.ArcFour.__interfaces__=[qn.IPrng],qn.ArcFour.prototype={toString:function(){return"ArcFour"},setSize:function(e){if(0!=e%4||32>e)throw"invalid size";return this.size=e},next:function(){if(0==this.S.length)throw"not initialized";var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},init:function(e){for(var t,n=0;256>n;)t=n++,this.S[t]=t;for(n=this.j=0;256>n;){var r=n++;this.j=this.j+this.S[r]+e[r%e.length]&255,t=this.S[r],this.S[r]=this.j,this.S[this.j]=t}this.j=this.i=0},size:null,S:null,j:null,i:null,__class__:qn.ArcFour},qn.Random=function(e){this.createState(e),this.initialized=!1},Er["math.prng.Random"]=qn.Random,qn.Random.__name__=["math","prng","Random"],qn.Random.prototype={createState:function(e){this.state=null==e?new qn.ArcFour:e;if(null==this.pool){this.pool=[];for(this.pptr=0;this.pptr<this.state.size;)e=Math.floor(65536*Math.random()),this.pool[this.pptr++]=e>>>8,this.pool[this.pptr++]=e&255;this.pptr=0,this.seedTime()}},seedTime:function(){this.seedInt(1e3*(new Date).getTime()|0)},seedInt:function(e){this.pool[this.pptr++]^=e&255,this.pool[this.pptr++]^=e>>8&255,this.pool[this.pptr++]^=e>>16&255,this.pool[this.pptr++]^=e>>24&255,this.pptr>=this.state.size&&(this.pptr-=this.state.size)},nextBytesStream:function(e,t){for(var n=0;n<t;)n++,e.writeUInt8(this.next())},nextBytes:function(e,t,n){for(var r=0;r<n;){var i=r++;e.b[t+i]=this.next()&255}},next:function(){if(0==this.initialized){this.createState(),this.state.init(this.pool);for(var e=0,t=this.pool.length;e<t;)this.pool[e++]=0;this.pptr=0,this.pool=[],this.initialized=!0}return this.state.next()},initialized:null,pptr:null,pool:null,state:null,__class__:qn.Random},zn={ModularReduction:function(){}},Er["math.reduction.ModularReduction"]=zn.ModularReduction,zn.ModularReduction.__name__=["math","reduction","ModularReduction"],zn.ModularReduction.prototype={sqrTo:null,mulTo:null,reduce:null,revert:null,convert:null,__class__:zn.ModularReduction},zn.Barrett=function(e){this.r2=Rn.nbi(),this.q3=Rn.nbi(),Rn.getONE().dlShiftTo(2*e.t,this.r2),this.mu=this.r2.div(e),this.m=e},Er["math.reduction.Barrett"]=zn.Barrett,zn.Barrett.__name__=["math","reduction","Barrett"],zn.Barrett.__interfaces__=[zn.ModularReduction],zn.Barrett.prototype={mulTo:function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},sqrTo:function(e,t){e.squareTo(t),this.reduce(t)},reduce:function(e){e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>e.compare(this.r2);)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compare(this.m);)e.subTo(this.m,e)},revert:function(e){return e},convert:function(e){if(0>e.sign||e.t>2*this.m.t)return e.mod(this.m);if(0>e.compare(this.m))return e;var t=Rn.nbi();return e.copyTo(t),this.reduce(t),t},q3:null,r2:null,mu:null,m:null,__class__:zn.Barrett},zn.Classic=function(e){this.m=e},Er["math.reduction.Classic"]=zn.Classic,zn.Classic.__name__=["math","reduction","Classic"],zn.Classic.__interfaces__=[zn.ModularReduction],zn.Classic.prototype={sqrTo:function(e,t){e.squareTo(t),this.reduce(t)},mulTo:function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},reduce:function(e){e.divRemTo(this.m,null,e)},revert:function(e){return e},convert:function(e){return 0>e.sign||0<=e.compare(this.m)?e.mod(this.m):e},m:null,__class__:zn.Classic},zn.Montgomery=function(e){this.m=e,this.mp=this.m.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<Rn.DB-15)-1,this.mt2=2*this.m.t},Er["math.reduction.Montgomery"]=zn.Montgomery,zn.Montgomery.__name__=["math","reduction","Montgomery"],zn.Montgomery.__interfaces__=[zn.ModularReduction],zn.Montgomery.prototype={sqrTo:function(e,t){e.squareTo(t),this.reduce(t)},mulTo:function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},reduce:function(e){e.padTo(this.mt2);for(var t=0;t<this.m.t;){var n=e.chunks[t]&32767,r=n*this.mpl+((n*this.mph+(e.chunks[t]>>15)*this.mpl&this.um)<<15)&Rn.DM,n=t+this.m.t;for(e.chunks[n]+=this.m.am(0,r,e,t,0,this.m.t);e.chunks[n]>=Rn.DV;)e.chunks[n]-=Rn.DV,e.chunks.length<n+2&&(e.chunks[n+1]=0),e.chunks[++n]++;t++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compare(this.m)&&e.subTo(this.m,e)},revert:function(e){var t=Rn.nbi();return e.copyTo(t),this.reduce(t),t},convert:function(e){var t=Rn.nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),0>e.sign&&0<t.compare(Rn.getZERO())&&this.m.subTo(t,t),t},um:null,mph:null,mpl:null,mp:null,mt2:null,m:null,__class__:zn.Montgomery},zn.Null=function(){},Er["math.reduction.Null"]=zn.Null,zn.Null.__name__=["math","reduction","Null"],zn.Null.__interfaces__=[zn.ModularReduction],zn.Null.prototype={reduce:function(){},sqrTo:function(e,t){e.squareTo(t)},mulTo:function(e,t,n){e.multiplyTo(t,n)},revert:function(e){return e},convert:function(e){return e},__class__:zn.Null};var ns;ns=function(){},Er["rg.RGConst"]=ns,ns.__name__=["rg","RGConst"],e=function(e){this.layouts=new Br,this.globalNotifier=e},t=void 0,n=void 0,Er["rg.app.charts.App"]=e,e.__name__=["rg","app","charts","App"],e.nextid=function(){return":RGVIZ-"+ ++e.lastid},e.supportsSvg=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},e.prototype={getLayout:function(e,t,n,r){var i=this.layouts.get(e);if(null!=i){if(!r)return i;i.destroy()}return r=Bt.feed(new jt,t),t=(new Lt).create(r,null==t.marginheight?0:t.marginheight,n),this.layouts.set(e,t),t},visualization:function(t,n){var r=this;e.chartsCounter++;var i=t.node(),s=i.id;null==s&&(i.id=s=e.nextid());var i=Bt.feed(new Ft,n),o=new Et(Bt.feed(new It,n).loader),u=(new At).createVariables(i.variables),a=Bt.feed(new qt,i.options),f=Bt.feed(new Rt,i.options),l=!e.supportsSvg()||a.forcelegacy,c=null,h=xr.filter(u,function(e){return ar.__instanceof(e,St)}),p=xr.filter(u,function(e){return ar.__instanceof(e,xt)});o.onLoad.addOnce(function(e){(new Tt).process(e,h),(new Nt).process(e,p)});if(!l){switch(Bt.feed(new Ut,i.options).kind[1]){case 1:s=this.getLayout(s,i.options,t,f.replace),c=(new Ot).create(f.type,s,i.options);break;case 0:f.replace&&t.selectAll("*").remove(),c=(new Mt).create(f.type,t,i.options)}c.setVariables(u,h,p),c.init(),null!=a.ready&&c.addReady(a.ready),o.onLoad.addOnce(function(e){c.feedData(e)})}var d=0,v=Bt.feed(new zt,n.options.download);if(l){var m=new bt(t,v.legacyservice);o.onLoad.addOnce(function(e){n.datapoints=e,m.display(n)})}if(!l&&(null!=v.position||null!=v.handler)){var g=new wt(c.container,v.service);null!=v.handler?c.addReadyOnce(function(){v.handler(wr(g,g.download))}):c.addReadyOnce(function(){new gt.DownloaderMenu(wr(g,g.download),v.position,v.formats,c.container),d=24})}return l||(!n.options.a&&"file://"!=document.location.href.substr(0,7)&&c.addReadyOnce(function(){gt.Logo.createLogo(c.container,d)}),c.addReadyOnce(function(){e.chartsLoaded++,e.chartsLoaded==e.chartsCounter&&r.globalNotifier.dispatch()})),Yn.delay(wr(o,o.load),0),c},globalNotifier:null,layouts:null,__class__:e},t=function(){},Er["rg.app.charts.JSBridge"]=t,t.__name__=["rg","app","charts","JSBridge"],t.log=function(e){(window.console&&window.console.warn||alert)(e)},t.getInternetExplorerVersion=function(){var e=-1;if("Microsoft Internet Explorer"==fr.window.navigator.appName){var t=fr.window.navigator.userAgent,n=new Or("MSIE ([0-9]{1,}[\\.0-9]{0,})","");null!=n.match(t)&&(e=Qr.parseFloat(n.matched(1)))}return e},t.main=function(){var r="undefined"==typeof ReportGrid?window.ReportGrid={}:ReportGrid,i=new ts,s=!1;i.addOnce(function(){s=!0}),r.charts={ready:function(e){s?e():i.add(e)}};var o=new e(i);r.chart=function(e,r,i){r=t.chartopt(r,i),r.options.a=!1,n.complete(r,function(n){try{o.visualization(t.select(e),n)}catch(r){ar.__instanceof(r,Tn.Error)?t.log(r.toString()):t.log(Qr.string(r))}})},r.barChart=function(e,t){return r.chart(e,t,"barchart")},r.funnelChart=function(e,t){return r.chart(e,t,"funnelchart")},r.geo=function(e,t){return r.chart(e,t,"geo")},r.heatGrid=function(e,t){return r.chart(e,t,"heatgrid")},r.leaderBoard=function(e,t){return r.chart(e,t,"leaderboard")},r.lineChart=function(e,t){return r.chart(e,t,"linechart")},r.pieChart=function(e,t){return r.chart(e,t,"piechart")},r.pivotTable=function(e,t){return r.chart(e,t,"pivottable")},r.sankey=function(e,t){return r.chart(e,t,"sankey")},r.scatterGraph=function(e,t){return r.chart(e,t,"scattergraph")},r.streamGraph=function(e,t){return r.chart(e,t,"streamgraph")},r.parseQueryParameters=st.parseQueryParameters,r.findScript=ot.findScript,r.format=_r.format,r.compare=_r.compare,r.dump=_r.string;var u=et.SymbolCache.cache;r.symbol=function(e,t){return u.get(e,null==t?100:t)},r.date={range:function(e,t,n){return ar.__instanceof(e,String)&&(e=Ln.DateParser.parse(e)),null==e&&(e=ut.defaultRange(n)[0]),ar.__instanceof(e,Date)&&(e=e.getTime()),ar.__instanceof(t,String)&&(t=Ln.DateParser.parse(t)),null==t&&(t=ut.defaultRange(n)[1]),ar.__instanceof(t,Date)&&(t=t.getTime()),ut.range(e,t,n)},formatPeriodicity:function(e,t){var n=ar.__instanceof(e,Date)?e.getTime():ar.__instanceof(e,us)?e:Ln.DateParser.parse(e).getTime();return ut.format(t,n)},parse:Ln.DateParser.parse,snap:Mr.snap},r.humanize=function(e){return ar.__instanceof(e,String)&&0<=e.indexOf("time:")?Fr.substr(e,e.indexOf("time:")+5,null):at.humanize(e)};var a=new Nn.Random(666);r.math={setRandomSeed:function(e){a=new Nn.Random(e)},random:function(){return((a.seed=16807*a.seed%2147483647)&1073741823)/1073741823}},r.query=null!=r.query?r.query:t.createQuery(),r.info=null!=r.info?r.info:{},r.info.charts={version:"1.5.4.8947"},r.getTooltip=function(){return gt.Tooltip.get_instance()}},t.createQuery=function(){for(var e=G.create(),t={},n=0,r=ti.getInstanceFields(ti.getClass(e));n<r.length;){var i=[r[n]];++n,"_"!=Fr.substr(i[0],0,1)&&Kr.isFunction(Kr.field(e,i[0]))&&(t[i[0]]=function(e){return function(){var t=G.create();return Kr.field(t,e[0]).apply(t,arguments)}}(i))}return t},t.select=function(e){var t=ar.__instanceof(e,String)?Oi.select(e):Oi.selectNode(e);if(t.empty())throw new Tn.Error("invalid container '{0}'",e,null,{fileName:"JSBridge.hx",lineNumber:194,className:"rg.app.charts.JSBridge",methodName:"select"});return t},t.opt=function(e){return null==e?{}:Jr.clone(e)},t.chartopt=function(e,n){return e=null==e?{}:Jr.clone(e),e.options=t.opt(e.options),e.options.visualization=null!=n?n:e.options.visualization,e},n=function(){},Er["rg.app.charts.MVPOptions"]=n,n.__name__=["rg","app","charts","MVPOptions"],n.a1=function(e,t){var r=ReportGrid.authCode,i=!1;null==r&&(r=ot.findScript("reportgrid-charts.js"),r=st.parseQueryParameters(r.src),r=Kr.field(r,"authCode"));if(null!=r){var r=new ft(r),s=[],o=fr.window.location.hostname;if((new Or("^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$","")).match(o))s.push(o);else{o=o.split("."),3==o.length&&"www"==o[0]&&o.shift();for(s.push(o.join("."));2<o.length;)o.shift();s.push("*."+o.join("."))}i=r.authorizeMany(s)}else i=gt.Logo.pageIsBranded();n.a1=function(e,t){e.options.a=i,t(e)},n.a1(e,t)},n.a2=function(e,t){var r=function(r){n.a2=null==r?function(e,t){t(e)}:function(e,t){e.options.a=r,t(e)},n.a2(e,t)},i=ReportGrid.token;e.options.a||null==i?r(null):i(function(e){r((0>=e.expires||e.expires>=(new Date).getTime())&&e.permissions.read)},function(){r(null)})},n.complete=function(e,t){var r=new lt(t);null==e.options&&(e.options={});var i=e.options;if(null!=i.download&&!ni.isAnonymous(i.download)){var s=i.download;Kr.deleteField(i,"download");if(1==s)i.download={position:"auto"};else{if(!ar.__instanceof(s,String))throw new Tn.Error("invalid value for download '{0}'",[s],null,{fileName:"MVPOptions.hx",lineNumber:118,className:"rg.app.charts.MVPOptions",methodName:"complete"});i.download={position:s}}}null!=i.map&&ni.isAnonymous(i.map)&&(i.map=[i.map]),r.addAction(n.a1),r.addAction(n.a2),r.addAction(function(e,t){var n=e.axes,r=!1;null==n&&(n=[]),e.axes=n=n.map(function(e){return ar.__instanceof(e,String)?{type:e}:e});for(var i=0,s=n.length;i<s;){var o=i++,u=n[o].variable;null==u?n[o].variable=!r&&o==n.length-1?"dependent":"independent":"dependent"==u&&(r=!0)}for(s=0;s<n.length;)if(r=n[s],++s,"dependent"!=r.variable)switch(e.options.visualization){case"barchart":case"pivottable":null==r.scalemode&&(r.scalemode="fit")}t(e)}),r.addAction(function(e,t){null==e.options.label&&(e.options.label={});switch(e.options.visualization){case"linechart":case"barchart":case"streamgraph":var n=e.axes[0].type;null==e.options.label.datapointover&&(e.options.label.datapointover=function(t,r){return(null!=e.options.segmenton?ct.formatValue(e.options.segmenton,t)+", ":"")+ct.formatValue(n,t)+": "+ct.formatValue(r.type,t)});break;case"scattergraph":case"heatgrid":var r=e.axes[0].type;null==e.options.label.datapointover&&(e.options.label.datapointover=function(e,t){return ct.formatValue(r,e)+": "+ct.formatValue(t.type,e)});break;case"geo":var i=e.axes[0].type,s=e.options.map;null==s[s.length-1].label&&(s[s.length-1].label={}),null==s[s.length-1].label.datapointover&&(s[s.length-1].label.datapointover=function(e,t){var n=ct.formatValue(i,e);return null==n?null:n+": "+ct.formatValue(t.type,e)});break;case"piechart":null==e.options.label.datapoint&&(e.options.label.datapoint=function(t,n){var r=Kr.field(t,n.type);return 1<e.axes.length?ct.formatValue(e.axes[0].type,t):0!=n.tot?Hr.format(Math.round(1e3*r/n.tot)/10,"P:1"):at.humanize(r)}),null==e.options.label.datapointover&&(e.options.label.datapointover=function(t,n){var r=Kr.field(t,n.type);return at.humanize(n.type)+": "+at.humanize(r)+(1<e.axes.length&&0!=n.tot?" ("+Hr.format(Math.round(1e3*r/n.tot)/10,"P:1")+")":"")});break;case"funnelchart":null==e.options.label.datapointover&&(e.options.label.datapointover=function(t,n){var r=Kr.field(t,n.type);return at.humanize(n.type)+": "+at.humanize(r)+(1<e.axes.length&&0!=n.tot?" ("+Hr.format(Math.round(1e3*r/n.tot)/10,"P:1")+")":"")});break;case"sankey":var s=e.axes,o=s[s.length-1].type;null==e.options.label.datapointover&&(e.options.label.datapointover=function(e,t){var n=Kr.field(e,o);return at.humanize(o)+": "+ct.formatValue(o,e)+"\n"+(0!=t.tot?Hr.format(Math.round(1e3*n/t.tot)/10,"P:1"):at.humanize(n))}),null==e.options.label.node&&(e.options.label.node=function(e){return null!=e?e.id:""}),null==e.options.label.datapoint&&(e.options.label.datapoint=function(e){return ct.formatValue(o,e)+"\n"+at.humanize(o)}),null==e.options.label.edge&&(e.options.label.edge=function(e){return Hr.format(100*e.edgeweight/e.nodeweight,"D:0")+"%"}),null==e.options.label.edgeover&&(e.options.label.edgeover=function(e){return Hr.format(e.edgeweight,"D:0")+"\n"+Hr.format(100*e.edgeweight/e.nodeweight,"D:0")+"%"})}t(e)}),r.execute(e)},_=function(){},D=void 0,P=void 0,H=void 0,B=void 0,j=void 0,F=void 0,I=void 0,q=void 0,R=void 0,U=void 0,z=void 0,W=void 0,X=void 0,V=void 0,J=void 0,K=void 0,Q=void 0,Er["rg.axis.IAxis"]=_,_.__name__=["rg","axis","IAxis"],_.prototype={createStats:null,min:null,max:null,ticks:null,scale:null,__class__:_},D=function(){},Er["rg.axis.IAxisDiscrete"]=D,D.__name__=["rg","axis","IAxisDiscrete"],D.__interfaces__=[_],D.prototype={range:null,scaleDistribution:null,__class__:D},P=function(){},Er["rg.axis.IAxisOrdinal"]=P,P.__name__=["rg","axis","IAxisOrdinal"],P.__interfaces__=[D],P.prototype={values:null,allTicks:null,last:null,first:null,__class__:P},H=function(){this.set_scaleDistribution(B.ScaleFit)},Er["rg.axis.AxisOrdinal"]=H,H.__name__=["rg","axis","AxisOrdinal"],H.__interfaces__=[P],H.prototype={createStats:function(e){return new j(e)},max:function(){return xr.last(this.values())},min:function(){return this.values()[0]},set_scaleDistribution:function(e){return this.scaleDistribution=e},allTicks:function(){var e=this,t=this.first(),n=this.last();return this.range(t,n).map(function(r){return e.toTickmark(t,n,r)})},values:function(){throw new Tn.AbstractMethod({fileName:"AxisOrdinal.hx",lineNumber:64,className:"rg.axis.AxisOrdinal",methodName:"values"})},last:function(){return xr.last(this.values())},first:function(){return this.values()[0]},scale:function(e,t,n){var r=this.values(),i=r.indexOf(e),s=r.indexOf(t),o=r.indexOf(n);if(0>i)throw new Tn.Error("the start bound '{0}' is not part of the values {1}",[e,r],null,{fileName:"AxisOrdinal.hx",lineNumber:54,className:"rg.axis.AxisOrdinal",methodName:"scale"});if(0>s)throw new Tn.Error("the end bound '{0}' is not part of the values {1}",[t,r],null,{fileName:"AxisOrdinal.hx",lineNumber:56,className:"rg.axis.AxisOrdinal",methodName:"scale"});if(0>o)throw new Tn.Error("the value '{0}' is not part of the values {1}",[n,r],null,{fileName:"AxisOrdinal.hx",lineNumber:58,className:"rg.axis.AxisOrdinal",methodName:"scale"});return F.distribute(this.scaleDistribution,o-i,s-i+1)},range:function(e,t){var n=this.values(),r=n.indexOf(e),i=n.indexOf(t);if(0>r)throw new Tn.Error("the start bound '{0}' is not part of the acceptable values {1}",[e,n],null,{fileName:"AxisOrdinal.hx",lineNumber:41,className:"rg.axis.AxisOrdinal",methodName:"range"});if(0>i)throw new Tn.Error("the end bound '{0}' is not part of the acceptable values {1}",[t,n],null,{fileName:"AxisOrdinal.hx",lineNumber:43,className:"rg.axis.AxisOrdinal",methodName:"range"});return n.slice(r,i+1)},ticks:function(e,t,n){return 0==n?[]:(e=I.fromArray(this.range(e,t),this.scaleDistribution),q.bound(e,n))},toTickmark:function(e,t,n){return e=this.range(e,t),new I(e.indexOf(n),e,null,this.scaleDistribution)},scaleDistribution:null,__class__:H,__properties__:{set_scaleDistribution:"set_scaleDistribution"}},R=function(e){H.call(this),this._values=e},Er["rg.axis.AxisOrdinalFixedValues"]=R,R.__name__=["rg","axis","AxisOrdinalFixedValues"],R.__super__=H,R.prototype=yr(H.prototype,{values:function(){return this._values},_values:null,__class__:R}),U=function(e){R.call(this,U.valuesByGroup(e)),this.groupBy=e},Er["rg.axis.AxisGroupByTime"]=U,U.__name__=["rg","axis","AxisGroupByTime"],U.valuesByGroup=function(e){return zr.range(U.defaultMin(e),U.defaultMax(e)+1)},U.defaultMin=function(e){switch(e){case"minute":case"hour":case"week":case"month":return 0;case"day":return 1;default:throw new Tn.Error("invalid periodicity '{0}' for groupBy min",null,e,{fileName:"AxisGroupByTime.hx",lineNumber:34,className:"rg.axis.AxisGroupByTime",methodName:"defaultMin"})}},U.defaultMax=function(e){switch(e){case"minute":return 59;case"hour":return 23;case"day":return 31;case"week":return 6;case"month":return 11;default:throw new Tn.Error("invalid periodicity '{0}' for groupBy max",null,e,{fileName:"AxisGroupByTime.hx",lineNumber:48,className:"rg.axis.AxisGroupByTime",methodName:"defaultMax"})}},U.__super__=R,U.prototype=yr(R.prototype,{groupBy:null,__class__:U}),z=function(){},Er["rg.axis.AxisNumeric"]=z,z.__name__=["rg","axis","AxisNumeric"],z.__interfaces__=[_],z._step=function(e,t){var n=Math.pow(10,Math.floor(Math.log(e/t)/2.302585092994046)),r=t/e*n;return.15>=r?n*=10:.35>=r?n*=5:.75>=r&&(n*=2),n},z.nice=function(e){return Math.pow(10,Math.round(Math.log(e)/2.302585092994046)-1)},z.niceMin=function(e,t){var n=Math.pow(10,Math.round(Math.log(e)/2.302585092994046)-1);return Math.floor(t/n)*n},z.niceMax=function(e,t){var n=Math.pow(10,Math.round(Math.log(e)/2.302585092994046)-1);return Math.ceil(t/n)*n},z.prototype={createStats:function(e){return new W(e)},max:function(e,t){if(null!=t.max)return t.max;var n=z.niceMax(e.max-e.min,e.max);return 0<n?n:0},min:function(e,t){if(null!=t.min)return t.min;var n=z.niceMin(e.max-e.min,e.min);return 0>n?n:0},ticks:function(e,t,n){var r=t-e,i;if(0==e%1&&0==t%1&&10>r&&1<=r)i=Hr.range(e,t+1,1),r=null;else{var s=z._step(r,5),r=z._step(r,20),r=0==r?[0]:Hr.range(e,t,r,!0);i=0==s?[0]:Hr.range(e,t,s,!0)}return q.bound(null==r?i.map(function(n){return new X(n,!0,(n-e)/(t-e))}):r.map(function(n){return new X(n,Fr.remove(i,n),(n-e)/(t-e))}),n)},scale:function(e,t,n){return e==t?e:Hr.uninterpolatef(e,t)(n)},__class__:z},V=function(e){H.call(this),this.variable=e},Er["rg.axis.AxisOrdinalStats"]=V,V.__name__=["rg","axis","AxisOrdinalStats"],V.__super__=H,V.prototype=yr(H.prototype,{values:function(){return this.variable.stats.values},variable:null,__class__:V}),J=function(e){this.periodicity=e,this.set_scaleDistribution(B.ScaleFill)},Er["rg.axis.AxisTime"]=J,J.__name__=["rg","axis","AxisTime"],J.__interfaces__=[D],J.prototype={createStats:function(e){return new W(e)},max:function(e){return e.max},min:function(e){return e.min},set_scaleDistribution:function(e){return this.scaleDistribution=e},scale:function(e,t,n){switch(this.scaleDistribution[1]){case 1:return(n-e)/(t-e);default:return e=this.range(e,t),F.distribute(this.scaleDistribution,e.indexOf(Mr.snap(n,this.periodicity)),e.length)}},range:function(e,t){return ut.range(e,t,this.periodicity)},ticks:function(e,t,n){var r=this,i=ut.unitsBetween(e,t,this.periodicity),s=this.range(e,t),e=s.map(function(e){return new K(e,s,r.isMajor(i,e),r.periodicity,r.scaleDistribution)});return q.bound(e,n)},isMajor:function(e,t){switch(this.periodicity){case"day":if(31>=e)return!0;return 121>e?(function(){var e=new Date;return e.setTime(t),e}(this).getDate(),ut.firstInSeries("month",t)||ut.firstInSeries("week",t)):ut.firstInSeries("month",t);case"week":return 31>e?!0:7>=function(){var e=new Date;return e.setTime(t),e}(this).getDate();default:var n=Kr.field(J.snapping,this.periodicity),r=ut.units(t,this.periodicity);if(null==n)return!0;for(var i=0;i<n.length;){var s=n[i];++i;if(!(e>s.to))return 0==r%s.s}return n=Kr.field(J.snapping,this.periodicity+"top"),null==n&&(n=1),0==r%n}},scaleDistribution:null,periodicity:null,__class__:J,__properties__:{set_scaleDistribution:"set_scaleDistribution"}},Q=function(){},Er["rg.axis.ITickmark"]=Q,Q.__name__=["rg","axis","ITickmark"],Q.prototype={label:null,value:null,major:null,delta:null,__class__:Q},B={__ename__:["rg","axis","ScaleDistribution"],__constructs__:["ScaleFit","ScaleFill","ScaleBefore","ScaleAfter"],ScaleFit:["ScaleFit",0]},B.ScaleFit.toString=Sr,B.ScaleFit.__enum__=B,B.ScaleFill=["ScaleFill",1],B.ScaleFill.toString=Sr,B.ScaleFill.__enum__=B,B.ScaleBefore=["ScaleBefore",2],B.ScaleBefore.toString=Sr,B.ScaleBefore.__enum__=B,B.ScaleAfter=["ScaleAfter",3],B.ScaleAfter.toString=Sr,B.ScaleAfter.__enum__=B,F=function(){},Er["rg.axis.ScaleDistributions"]=F,F.__name__=["rg","axis","ScaleDistributions"],F.distribute=function(e,t,n){switch(e[1]){case 0:return(t+.5)/n;case 1:return t/(n-1);case 2:return t/n;case 3:return(t+1)/n}},j=function(e,t){this.type=e,this.sortf=t,this.reset()},Er["rg.axis.Stats"]=j,j.__name__=["rg","axis","Stats"],j.prototype={addMany:function(e){for(e=br(e)();e.hasNext();){var t=e.next();this.count++,xr.exists(this.values,t)||this.values.push(t)}return null!=this.sortf&&this.values.sort(this.sortf),this.min=this.values[0],this.max=xr.last(this.values),this},add:function(e){return this.count++,xr.exists(this.values,e)?this:(this.values.push(e),null!=this.sortf&&this.values.sort(this.sortf),this.min=this.values[0],this.max=xr.last(this.values),this)},reset:function(){return this.max=this.min=null,this.count=0,this.values=[],this},type:null,sortf:null,values:null,count:null,max:null,min:null,__class__:j},W=function(e,t){null==t&&(t=Hr.compare),j.call(this,e,t)},Er["rg.axis.StatsNumeric"]=W,W.__name__=["rg","axis","StatsNumeric"],W.__super__=j,W.prototype=yr(j.prototype,{addMany:function(e){j.prototype.addMany.call(this,e);for(e=br(e)();e.hasNext();)this.tot+=e.next();return this},add:function(e){return j.prototype.add.call(this,e),this.tot+=e,this},reset:function(){return j.prototype.reset.call(this),this.tot=0,this},tot:null,__class__:W}),X=function(e,t,n){this.value=e,this.major=t,this.delta=n},Er["rg.axis.Tickmark"]=X,X.__name__=["rg","axis","Tickmark"],X.__interfaces__=[Q],X.prototype={toString:function(){return q.string(this)},get_label:function(){return at.humanize(this.get_value())},get_value:function(){return this.value},get_major:function(){return this.major},get_delta:function(){return this.delta},label:null,value:null,major:null,delta:null,__class__:X,__properties__:{get_delta:"get_delta",get_major:"get_major",get_value:"get_value",get_label:"get_label"}},I=function(e,t,n,r){null==n&&(n=!0),this
.pos=e,this.values=t,this.scaleDistribution=r,this.major=n},Er["rg.axis.TickmarkOrdinal"]=I,I.__name__=["rg","axis","TickmarkOrdinal"],I.__interfaces__=[Q],I.fromArray=function(e,t){return e.map(function(n,r){return new I(r,e,null,t)})},I.prototype={toString:function(){return q.string(this)},get_label:function(){return at.humanize(this.values[this.pos])},label:null,get_value:function(){return this.values[this.pos]},value:null,get_major:function(){return this.major},major:null,get_delta:function(){return F.distribute(this.scaleDistribution,this.pos,this.values.length)},delta:null,scaleDistribution:null,values:null,pos:null,__class__:I,__properties__:{get_delta:"get_delta",get_major:"get_major",get_value:"get_value",get_label:"get_label"}},K=function(e,t,n,r,i){I.call(this,t.indexOf(e),t,n,i),this.periodicity=r},Er["rg.axis.TickmarkTime"]=K,K.__name__=["rg","axis","TickmarkTime"],K.__super__=I,K.prototype=yr(I.prototype,{get_label:function(){return ut.smartFormat(this.periodicity,this.values[this.pos])},periodicity:null,__class__:K}),q=function(){},Er["rg.axis.Tickmarks"]=q,q.__name__=["rg","axis","Tickmarks"],q.bound=function(e,t){if(null==t||e.length<=(2>t?2:t))return e;var n=xr.filter(e,function(e){return e.get_major()});return n.length>t?q.reduce(n,t):(n=q.reduce(xr.filter(e,function(e){return!e.get_major()}),t-n.length).concat(n),n.sort(function(e,t){return Hr.compare(e.get_delta(),t.get_delta())}),n)},q.reduce=function(e,t){if(1==t)return[e[0]];if(2==t)return[e[e.length-1]];var n=e.length/t,r=[],i=0;do r.push(e[Math.round(n*i++)]);while(t>r.length);return r},q.string=function(e){return _r.string(e.get_value())+" ("+(e.get_major()?"Major":"minor")+", "+Hr.format(e.get_delta())+")"},q.forFloat=function(e,t,n,r){return new X(n,r,(n-e)/(t-e))},Et=function(e){if(null==e)throw new Tn.NullArgument("loader","invalid null argument '{0}' for method {1}.{2}()",{fileName:"DataLoader.hx",lineNumber:11,className:"rg.data.DataLoader",methodName:"new"});this.loader=e,this.onLoad=new es},St=void 0,xt=void 0,Tt=void 0,Nt=void 0,Ct=void 0,kt=void 0,Er["rg.data.DataLoader"]=Et,Et.__name__=["rg","data","DataLoader"],Et.prototype={load:function(){var e=this;this.loader(function(t){e.onLoad.dispatch(t)})},onLoad:null,loader:null,__class__:Et},Nt=function(){},Er["rg.data.DependentVariableProcessor"]=Nt,Nt.__name__=["rg","data","DependentVariableProcessor"],Nt.prototype={process:function(e,t){for(var n=0;n<t.length;){var r=t[n];++n;var i=ht.values(e,r.type);if(0!=i.length){null==r.axis&&r.setAxis((new _t).create(r.type,ar.__instanceof(i[0],us),r,null)),r.stats.addMany(i);var s;null!=r.scaleDistribution&&null!=(s=ni.as(r.axis,D))&&(s.set_scaleDistribution(r.scaleDistribution),r.scaleDistribution=null)}}},__class__:Nt},Tt=function(){},Er["rg.data.IndependentVariableProcessor"]=Tt,Tt.__name__=["rg","data","IndependentVariableProcessor"],Tt.prototype={process:function(e,t){for(var n=0;n<t.length;){var r=t[n];++n,r.stats.addMany(ht.values(e,r.type));var i;null!=r.scaleDistribution&&null!=(i=ni.as(r.axis,D))&&(i.set_scaleDistribution(r.scaleDistribution),r.scaleDistribution=null)}},__class__:Tt},Ct=function(e,t,n,r){this.on=e,this.transform=t,this.scale=n,this.values=r},Er["rg.data.Segmenter"]=Ct,Ct.__name__=["rg","data","Segmenter"],Ct.prototype={segment:function(e){var t=this,n;if(null==this.on)n=[e];else if(0<this.values.length){n=[];for(var r=0,i=this.values;r<i.length;){var s=[i[r]];++r,n.push(xr.filter(e,function(e){return function(n){return Kr.field(n,t.on)==e[0]}}(s)))}}else n=ht.partition(e,this.on);if(null!=this.scale){i=0;for(r=n.length;i<r;)e=i++,n[e]=this.scale(n[e])}if(null!=this.transform){n=xr.rotate(n),i=0;for(r=n.length;i<r;)e=i++,n[e]=this.transform(n[e]);n=xr.rotate(n)}return n},values:null,scale:null,transform:null,on:null,__class__:Ct},kt=function(e,t){this.type=e,this.scaleDistribution=t,this.meta={}},Er["rg.data.Variable"]=kt,kt.__name__=["rg","data","Variable"],kt.prototype={get_maxf:function(){if(null==this.maxf){if(null==this.axis)throw new Tn.Error("axis is null in '{0}' variable (required by max)",[this.type],null,{fileName:"Variable.hx",lineNumber:61,className:"rg.data.Variable",methodName:"get_maxf"});this.set_maxf((rs=this.axis,wr(rs,rs.max)))}return this.maxf},get_minf:function(){if(null==this.minf){if(null==this.axis)throw new Tn.Error("axis is null in '{0}' variable (required by min)",[this.type],null,{fileName:"Variable.hx",lineNumber:50,className:"rg.data.Variable",methodName:"get_minf"});this.set_minf((rs=this.axis,wr(rs,rs.min)))}return this.minf},set_maxf:function(e){return this.maxf=e},set_minf:function(e){return this.minf=e},max:function(){return this.get_maxf()(this.stats,this.meta)},min:function(){return this.get_minf()(this.stats,this.meta)},setAxis:function(e){this.axis=e,this.stats=null!=e?e.createStats(this.type):null},maxf:null,minf:null,meta:null,stats:null,axis:null,scaleDistribution:null,type:null,__class__:kt,__properties__:{set_minf:"set_minf",get_minf:"get_minf",set_maxf:"set_maxf",get_maxf:"get_maxf"}},xt=function(e,t){kt.call(this,e,t)},Er["rg.data.VariableDependent"]=xt,xt.__name__=["rg","data","VariableDependent"],xt.__super__=kt,xt.prototype=yr(kt.prototype,{__class__:xt}),St=function(e,t){kt.call(this,e,t)},Er["rg.data.VariableIndependent"]=St,St.__name__=["rg","data","VariableIndependent"],St.__super__=kt,St.prototype=yr(kt.prototype,{__class__:St}),_t=function(){},Lt=void 0,At=void 0,Ot=void 0,Mt=void 0,Dt=void 0,Pt=void 0,Ht=void 0,Er["rg.factory.FactoryAxis"]=_t,_t.__name__=["rg","factory","FactoryAxis"],_t.prototype={createDiscrete:function(e,t,n,r){return 0<=e.indexOf("time:")?null!=r?new U(Fr.substr(e,e.indexOf("time:")+5,null)):new J(Fr.substr(e,e.indexOf("time:")+5,null)):null!=n&&0<n.length?new R(n):new V(t)},create:function(e,t,n,r){return null!=r&&0<r.length?new R(r):1==t?new z:0==t?new V(n):null},__class__:_t},Dt=function(){},Er["rg.factory.FactoryGeoProjection"]=Dt,Dt.__name__=["rg","factory","FactoryGeoProjection"],Dt.prototype={create:function(e){switch(e.projection.toLowerCase()){case"mercator":var t=new An.Mercator;return null!=e.scale&&t.set_scale(e.scale),null!=e.translate?t.set_translate(e.translate):t.set_translate([0,0]),t;case"albers":return t=new An.Albers,null!=e.scale&&t.set_scale(e.scale),null!=e.translate?t.set_translate(e.translate):t.set_translate([0,0]),null!=e.origin&&t.set_origin(e.origin),null!=e.parallels&&t.set_parallels(e.parallels),t;case"albersusa":return t=new An.AlbersUsa,null!=e.scale&&t.set_scale(e.scale),null!=e.translate?t.set_translate(e.translate):t.set_translate([0,0]),t;case"azimuthal":return t=new An.Azimuthal,null!=e.scale&&t.set_scale(e.scale),null!=e.translate?t.set_translate(e.translate):t.set_translate([0,0]),null!=e.mode&&t.set_mode(e.mode),null!=e.origin&&t.set_origin(e.origin),t;default:throw new Tn.Error("the projection '{0}' does not exist or is not implemented",[e.projection],null,{fileName:"FactoryGeoProjection.hx",lineNumber:68,className:"rg.factory.FactoryGeoProjection",methodName:"create"})}},__class__:Dt},Mt=function(){},Er["rg.factory.FactoryHtmlVisualization"]=Mt,Mt.__name__=["rg","factory","FactoryHtmlVisualization"],Mt.prototype={create:function(e,t,n){switch(e){case"pivottable":return e=new m(t),e.info=Bt.feed(new Wt,n),e;case"leaderboard":return e=new g(t),e.info=Bt.feed(new Xt,n),e;default:throw new Tn.Error("unsupported visualization '{0}'",null,e,{fileName:"FactoryHtmlVisualization.hx",lineNumber:35,className:"rg.factory.FactoryHtmlVisualization",methodName:"create"})}},__class__:Mt},Lt=function(){},Er["rg.factory.FactoryLayout"]=Lt,Lt.__name__=["rg","factory","FactoryLayout"],Lt.size=function(e,t,n){var r,i=null==t.width?10<(r=e.node().clientWidth)?r:400:t.width,e=(null==t.height?10<(r=e.node().clientHeight)?r:300:t.height)-n;return{width:i,height:e}},Lt.prototype={create:function(e,t,n){var t=Lt.size(n,e,t),r=e.layout;null==r&&(r=y.layoutDefault.get(e.type));if(null==r)throw new Tn.Error("unable to find a suitable layout for '{0}'",null,e.type,{fileName:"FactoryLayout.hx",lineNumber:28,className:"rg.factory.FactoryLayout",methodName:"create"});return n=y.instantiateLayout(r,t.width,t.height,n),n.feedOptions(e),n},__class__:Lt},Ot=function(){},Er["rg.factory.FactorySvgVisualization"]=Ot,Ot.__name__=["rg","factory","FactorySvgVisualization"],Ot.prototype={create:function(e,t,n){switch(e){case"barchart":return e=new b(t),e.info=e.infoBar=Bt.feed(new Vt,n),e;case"funnelchart":return e=new w(t),e.info=Bt.feed(new $t,n),e;case"geo":return e=new E(t),e.info=Bt.feed(new Jt,n),e;case"heatgrid":return e=new S(t),e.info=e.infoHeatGrid=Bt.feed(new Kt,n),e;case"linechart":return e=new x(t),e.info=e.infoLine=Bt.feed(new Qt,n),e;case"piechart":return e=new T(t),e.info=Bt.feed(new Gt,n),e;case"sankey":return e=new N(t),e.info=Bt.feed(new Yt,n),e;case"scattergraph":return e=new C(t),e.info=e.infoScatter=Bt.feed(new Zt,n),e;case"streamgraph":return e=new k(t),e.info=e.infoStream=Bt.feed(new en,n),e;default:throw new Tn.Error("unsupported visualization type '{0}'",null,e,{fileName:"FactorySvgVisualization.hx",lineNumber:76,className:"rg.factory.FactorySvgVisualization",methodName:"create"})}},__class__:Ot},At=function(){this.independentFactory=new Pt,this.dependentFactory=new Ht},Er["rg.factory.FactoryVariable"]=At,At.__name__=["rg","factory","FactoryVariable"],At.prototype={createDependents:function(e){for(var t=[],n=0;n<e.length;){var r=e[n];++n;var i=void 0;switch(r.variableType[1]){case 2:i=!1;break;case 0:i=!1;break;default:i=!0}i||t.push(this.dependentFactory.create(r,null))}return t},createIndependents:function(e){for(var t=[],n=0;n<e.length;){var r=e[n];++n;var i=void 0;switch(r.variableType[1]){case 1:i=!1;break;case 0:i=!0;break;default:i=!0}i||t.push(this.independentFactory.create(r))}return t},createVariables:function(e){var t=this;return e.map(function(e){switch(e.variableType[1]){case 1:return t.independentFactory.create(e);case 2:return t.dependentFactory.create(e,null);case 0:return t.dependentFactory.create(e,null)}})},dependentFactory:null,independentFactory:null,__class__:At},Ht=function(){},Er["rg.factory.FactoryVariableDependent"]=Ht,Ht.__name__=["rg","factory","FactoryVariableDependent"],Ht.prototype={create:function(e,t){if(null==e.type)throw new Tn.Error("cannot create an axis if type is not specified",null,null,{fileName:"FactoryVariableDependent.hx",lineNumber:18,className:"rg.factory.FactoryVariableDependent",methodName:"create"});var n=new _t,r=new xt(e.type,e.scaleDistribution),n=n.create(e.type,t,r,e.values);return r.setAxis(n),r.set_minf(Pt.convertBound(n,e.min)),r.set_maxf(Pt.convertBound(n,e.max)),r},__class__:Ht},Pt=function(){},Er["rg.factory.FactoryVariableIndependent"]=Pt,Pt.__name__=["rg","factory","FactoryVariableIndependent"],Pt.convertBound=function(e,t){if(null==t||Kr.isFunction(t))return t;if(ar.__instanceof(e,J)){ar.__instanceof(t,Date)&&(t=ar.__cast(t,Date).getTime());if(ar.__instanceof(t,us))return function(){return t};if(ar.__instanceof(t,String))return function(){return Ln.DateParser.parse(t).getTime()};throw new Tn.Error("invalid value '{0}' for time bound",[t],null,{fileName:"FactoryVariableIndependent.hx",lineNumber:46,className:"rg.factory.FactoryVariableIndependent",methodName:"convertBound"})}return function(){return t}},Pt.prototype={create:function(e){if(null==e.type)return null;var t=new _t,n=new St(e.type,e.scaleDistribution),t=t.createDiscrete(e.type,n,e.values,e.groupBy);return n.setAxis(t),n.set_minf(Pt.convertBound(t,e.min)),n.set_maxf(Pt.convertBound(t,e.max)),n},__class__:Pt},l=function(){this.x=this.y=this.width=this.height=0},c=void 0,h=void 0,p=void 0,v=void 0,Er["rg.frame.Frame"]=l,l.__name__=["rg","frame","Frame"],l.prototype={toString:function(){return"[x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"]"},set_layout:function(e,t,n,r){if(this.x!=e||this.y!=t||this.width!=n||this.height!=r)this.x=e,this.y=t,this.width=n,this.height=r,this.change()},change:function(){},height:null,width:null,y:null,x:null,__class__:l},c={__ename__:["rg","frame","FrameLayout"],__constructs__:["Fill","FillPercent","FillRatio","Fixed","Floating"]},c.Fill=function(e,t,n,r){return e=["Fill",0,e,t,n,r],e.__enum__=c,e.toString=Sr,e},c.FillPercent=function(e,t,n,r,i){return e=["FillPercent",1,e,t,n,r,i],e.__enum__=c,e.toString=Sr,e},c.FillRatio=function(e,t,n){return e=["FillRatio",2,e,t,n],e.__enum__=c,e.toString=Sr,e},c.Fixed=function(e,t,n){return e=["Fixed",3,e,t,n],e.__enum__=c,e.toString=Sr,e},c.Floating=function(e,t,n,r){return e=["Floating",4,e,t,n,r],e.__enum__=c,e.toString=Sr,e},h={__ename__:["rg","frame","Orientation"],__constructs__:["Vertical","Horizontal"],Vertical:["Vertical",0]},h.Vertical.toString=Sr,h.Vertical.__enum__=h,h.Horizontal=["Horizontal",1],h.Horizontal.toString=Sr,h.Horizontal.__enum__=h,p=function(e,t,n){this.orientation=null==n?h.Vertical:n,this.children=[],this.width=e,this.height=t},Er["rg.frame.Stack"]=p,p.__name__=["rg","frame","Stack"],p.prototype={toString:function(){return"Stack [width: "+this.width+", height: "+this.height+", children: "+this.children.length+"]"},setSize:function(e,t){return this.width==e&&this.height==t?this:(this.width=e,this.height=t,this.reflow(),this)},get_length:function(){return this.children.length},reflow:function(){for(var e=function(e){var t;switch(e.orientation[1]){case 0:t=e.height;break;case 1:t=e.width}return t}(this),t=function(e){var t;switch(e.orientation[1]){case 0:t=e.width;break;case 1:t=e.height}return t}(this),n=0,r=[],i=[],s=0,o=0,u=0,a=this.children;u<a.length;){var f=a[u];++u,f=f.disposition;switch(f[1]){case 0:var l=f[5],c=f[4],h=f[3],f=f[2];null==c&&(c=0),null==l&&(l=e),n+=c+f+h,o+=i[s]=l-c,r.push(c+f+h);break;case 1:var l=f[6],c=f[5],p=f[4],h=f[3],f=f[2],p=Math.round(p*e);null!=c&&p<c&&(p=c),null!=l&&p>l&&(p=l),n+=p+f+h,r.push(p+f+h);break;case 2:l=f[4],h=f[3],f=f[2],null==l&&(l=1),p=Math.round(t*l),n+=p+f+h,r.push(p+f+h);break;case 3:p=f[4],h=f[3],f=f[2],n+=p+f+h,r.push(p+f+h);break;case 4:h=f[5],l=f[4],c=f[3],f=f[2],r.push(0)}s++}e-=n;if(0<e){u=s=0;for(a=this.children;u<a.length;){f=a[u],++u;switch(f.disposition[1]){case 0:p=Math.round(i[s]/o*e),r[s]+=p}s++}}i=s=0;switch(this.orientation[1]){case 0:u=0;for(a=this.children;u<a.length;){f=a[u],++u,t=f,f=f.disposition;switch(f[1]){case 4:h=f[5],l=f[4],c=f[3],f=f[2],t.set_layout(f,c,l,h);break;case 3:case 0:case 1:case 2:h=f[3],f=f[2],t.set_layout(0,i+f,this.width,r[s]-h-f)}i+=r[s++]}break;case 1:u=0;for(a=this.children;u<a.length;){f=a[u],++u,t=f,f=f.disposition;switch(f[1]){case 4:h=f[5],l=f[4],c=f[3],f=f[2],t.set_layout(f,c,l,h);break;case 3:case 0:case 1:case 2:h=f[3],f=f[2],t.set_layout(i+f,0,r[s]-h-f,this.height)}i+=r[s++]}}0>e&&this.moreSpaceRequired(n)},iterator:function(){return Fr.iter(this.children)},removeChild:function(e){return Fr.remove(this.children,e)?(e.set_parent(null),this.reflow(),!0):!1},addItems:function(e){for(var t=!1,e=br(e)();e.hasNext();){var n=e.next();null!=n&&(t=!0,this.children.push(n),n.set_parent(this))}return t&&this.reflow(),this},addItem:function(e){return null==e?this:(this.children.push(e),e.set_parent(this),this.reflow(),this)},insertItem:function(e,t){return null==t?this:e>=this.children.length?this.addItem(t):(0>e&&(e=0),this.children.splice(e,0,t),t.set_parent(this),this.reflow(),this)},moreSpaceRequired:function(){},length:null,orientation:null,height:null,width:null,children:null,__class__:p,__properties__:{get_length:"get_length"}},v=function(e){l.call(this),this.set_disposition(e)},Er["rg.frame.StackItem"]=v,v.__name__=["rg","frame","StackItem"],v.__super__=l,v.prototype=yr(l.prototype,{set_disposition:function(e){return this.disposition=e,null!=this.parent&&this.parent.reflow(),e},set_parent:function(e){return null!=this.parent&&this.parent.removeChild(this),this.parent=e},parent:null,disposition:null,__class__:v,__properties__:{set_disposition:"set_disposition"}}),yt={},gt=void 0,yt.Leadeboard=function(e){this.ready=new ts,this.container=e,this.animated=!0,this.animationDuration=1500,this.animationEase=Nn.Equations.elasticf(),this.animationDelay=150,this._created=0,this.displayGradient=!0,this.colorScale=this.useMax=!1},Er["rg.html.chart.Leadeboard"]=yt.Leadeboard,yt.Leadeboard.__name__=["rg","html","chart","Leadeboard"],yt.Leadeboard.prototype={id:function(e){return ht.id(e,[this.variableDependent.type])},lTitle:function(e){return this.labelDataPointOver(e,this.stats)},lDataPoint:function(e){return this.labelDataPoint(e,this.stats)},lValue:function(e){return this.labelValue(e,this.stats)},lRank:function(e,t){return this.labelRank(e,t,this.stats)},fadeIn:function(e,t){var n=this;Oi.selectNodeData(e).transition().ease(this.animationEase).duration(null,this.animationDuration).delay(null,this.animationDelay*(t-this._created)).attr("opacity")["float"](1).endNode(function(){n._created++})},onClick:function(e){this.click(e)},data:function(e){null!=this.sortDataPoint&&e.sort(this.sortDataPoint);if(null!=this.variableDependent.stats){this.stats=ar.__cast(this.variableDependent.stats,W);var e=this.list.selectAll("li").data(e,wr(this,this.id)),t=e.enter().append("li");t.attr("title").stringf(wr(this,this.lTitle)),t.append("div").attr("class").stringf(function(e,t){return 0==t%2?"rg_background fill-0":"rg_background"});var n=t.append("div").attr("class").string("rg_labels");if(null!=wr(this,this.labelRank)){var r=n.append("div").text().stringf(wr(this,this.lRank));this.colorScale?r.attr("class").stringf(function(e,t){return"rg_rank fill fill-"+t}):r.attr("class").string("rg_rank")}null!=wr(this,this.labelDataPoint)&&n.append("span").attr("class").string("rg_description color-0").text().stringf(wr(this,this.lDataPoint)),null!=wr(this,this.labelValue)&&n.append("span").attr("class").string("rg_value color-2").text().stringf(wr(this,this.lValue)),t.append("div").attr("class").string("clear"),this.displayBar&&(n=t.append("div").attr("class").string("rg_barpadding").append("div").attr("class").string("rg_barcontainer"),n.append("div").attr("class").string("rg_barback fill-0"),n.append("div").attr("class").string("rg_bar fill-0").style("width").stringf(wr(this,this.backgroundSize)),t.append("div").attr("class").string("clear")),null!=this.click&&t.on("click.user",wr(this,this.onClick)),this.animated?t.style("opacity")["float"](0).eachNode(wr(this,this.fadeIn)):t.style("opacity")["float"](1),this.animated?e.exit().transition().ease(this.animationEase).duration(null,this.animationDuration).style("opacity")["float"](0).remove():e.exit().remove(),this.ready.dispatch()}},backgroundSize:function(e){return 100*Kr.field(e,this.variableDependent.type)/(this.useMax?this.stats.max:this.stats.tot)+"%"},setVariables:function(e,t){this.variableDependent=t[0],this.variableIndependent=e[0]},init:function(){var e=this.container.append("div").attr("class").string("leaderboard");this.list=e.append("ul"),e.append("div").attr("class").string("clear")},labelValue:function(e,t){return ct.formatValue(t.type,e)},labelRank:function(e,t){return""+(t+1)},labelDataPointOver:function(e,t){return Hr.format(100*Kr.field(e,t.type)/(this.useMax?t.max:t.tot),"P:1")},labelDataPoint:function(e){return at.humanize(Kr.field(e,this.variableIndependent.type))},stats:null,_created:null,list:null,container:null,displayBar:null,ready:null,colorScale:null,useMax:null,displayGradient:null,sortDataPoint:null,click:null,animationEase:null,animationDelay:null,animationDuration:null,animated:null,variableDependent:null,variableIndependent:null,__class__:yt.Leadeboard},xn=void 0,Tn=void 0,Nn=void 0,Cn=void 0,kn=void 0,Ln=void 0,An=void 0,On=void 0,Mn=void 0,_n=void 0,Dn=void 0,Pn=void 0,Hn=void 0,Bn=void 0,jn=void 0,Fn=void 0,In=void 0,kn={Rgb:function(e,t,n){this.red=zr.clamp(e,0,255),this.green=zr.clamp(t,0,255),this.blue=zr.clamp(n,0,255)}},Er["thx.color.Rgb"]=kn.Rgb,kn.Rgb.__name__=["thx","color","Rgb"],kn.Rgb.fromFloats=function(e,t,n){return new kn.Rgb(zr.interpolate(e,0,255,null),zr.interpolate(t,0,255,null),zr.interpolate(n,0,255,null))},kn.Rgb.fromInt=function(e){return new kn.Rgb(e>>16&255,e>>8&255,e&255)},kn.Rgb.equals=function(e,t){return e.red==t.red&&e.green==t.green&&e.blue==t.blue},kn.Rgb.darker=function(e,t,n){return new kn.Rgb(zr.interpolate(t,e.red,0,n),zr.interpolate(t,e.green,0,n),zr.interpolate(t,e.blue,0,n))},kn.Rgb.lighter=function(e,t,n){return new kn.Rgb(zr.interpolate(t,e.red,255,n),zr.interpolate(t,e.green,255,n),zr.interpolate(t,e.blue,255,n))},kn.Rgb.interpolate=function(e,t,n,r){return new kn.Rgb(zr.interpolate(n,e.red,t.red,r),zr.interpolate(n,e.green,t.green,r),zr.interpolate(n,e.blue,t.blue,r))},kn.Rgb.interpolatef=function(e,t,n){var r=zr.interpolatef(e.red,t.red,n),i=zr.interpolatef(e.green,t.green,n),s=zr.interpolatef(e.blue,t.blue,n);return function(e){return new kn.Rgb(r(e),i(e),s(e))}},kn.Rgb.contrast=function(e){return e=kn.Hsl.toHsl(e),.5>e.lightness?new kn.Hsl(e.hue,e.saturation,e.lightness+.5):new kn.Hsl(e.hue,e.saturation,e.lightness-.5)},kn.Rgb.contrastBW=function(e){var t=kn.Grey.toGrey(e),e=kn.Hsl.toHsl(e);return.5>t.grey?new kn.Hsl(e.hue,e.saturation,1):new kn.Hsl(e.hue,e.saturation,0)},kn.Rgb.interpolateBrightness=function(e,t){return kn.Rgb.interpolateBrightnessf(t)(e)},kn.Rgb.interpolateBrightnessf=function(e){var t=zr.interpolatef(0,255,e);return function(e){return e=t(e),new kn.Rgb(e,e,e)}},kn.Rgb.interpolateHeat=function(e,t,n){return kn.Rgb.interpolateHeatf(t,n)(e)},kn.Rgb.interpolateHeatf=function(e,t){return kn.Rgb.interpolateStepsf([new kn.Rgb(0,0,0),null!=e?e:new kn.Rgb(255,127,0),new kn.Rgb(255,255,255)],t)},kn.Rgb.interpolateRainbow=function(e,t){return kn.Rgb.interpolateRainbowf(t)(e)},kn.Rgb.interpolateRainbowf=function(e){return kn.Rgb.interpolateStepsf([new kn.Rgb(0,0,255),new kn.Rgb(0,255,255),new kn.Rgb(0,255,0),new kn.Rgb(255,255,0),new kn.Rgb(255,0,0)],e)},kn.Rgb.interpolateStepsf=function(e,t){if(0>=e.length)throw new Tn.Error("invalid number of steps",null,null,{fileName:"Rgb.hx",lineNumber:164,className:"thx.color.Rgb",methodName:"interpolateStepsf"});if(1==e.length)return function(){return e[0]};if(2==e.length)return kn.Rgb.interpolatef(e[0],e[1],t);for(var n=e.length-1,r=1/n,i=[],s=0;s<n;){var o=s++;i[o]=kn.Rgb.interpolatef(e[o],e[o+1])}return function(e){0>e?e=0:1<e&&(e=1);var t=1==e?n-1:Math.floor(e/r);return i[t](n*(e-t*r))}},kn.Rgb.prototype={toString:function(){return this.toRgbString()},toRgbString:function(){return"rgb("+this.red+","+this.green+","+this.blue+")"},toCss:function(){return this.hex("#")},hex:function(e){return null==e&&(e=""),e+Yr.hex(this.red,2)+Yr.hex(this.green,2)+Yr.hex(this.blue,2)},"int":function(){return(this.red&255)<<16|(this.green&255)<<8|this.blue&255},red:null,green:null,blue:null,__class__:kn.Rgb},kn.Hsl=function(e,t,n){this.hue=e=Hr.circularWrap(e,360),this.saturation=t=Hr.normalize(t),this.lightness=n=Hr.normalize(n),kn.Rgb.call(this,zr.interpolate(kn.Hsl._c(e+120,t,n),0,255,null),zr.interpolate(kn.Hsl._c(e,t,n),0,255,null),zr.interpolate(kn.Hsl._c(e-120,t,n),0,255,null))},Er["thx.color.Hsl"]=kn.Hsl,kn.Hsl.__name__=["thx","color","Hsl"],kn.Hsl._c=function(e,t,n){return t=.5>=n?n*(1+t):n+t-n*t,n=2*n-t,e=Hr.circularWrap(e,360),60>e?n+(t-n)*e/60:180>e?t:240>e?n+(t-n)*(240-e)/60:n},kn.Hsl.toHsl=function(e){var t=e.red/255,n=e.green/255,r=e.blue/255,i=Hr.min(t<n?t:n,r),s=Hr.max(t>n?t:n,r),o=s-i,e=(s+i)/2;return 0==o?i=t=0:(i=.5>e?o/(s+i):o/(2-s-i),t=60*(t==s?(n-r)/o+(n<r?6:0):n==s?(r-t)/o+2:(t-n)/o+4)),new kn.Hsl(t,i,e)},kn.Hsl.equals=function(e,t){return e.hue==t.hue&&e.saturation==t.saturation&&e.lightness==t.lightness},kn.Hsl.darker=function(e,t,n){return new kn.Hsl(e.hue,e.saturation,Hr.interpolate(t,e.lightness,0,n))},kn.Hsl.lighter=function(e,t,n){return new kn.Hsl(e.hue,e.saturation,Hr.interpolate(t,e.lightness,1,n))},kn.Hsl.interpolate=function(e,t,n,r){return new kn.Hsl(Hr.interpolate(n,e.hue,t.hue,r),Hr.interpolate(n,e.saturation,t.saturation,r),Hr.interpolate(n,e.lightness,t.lightness,r))},kn.Hsl.interpolatef=function(e,t,n){return function(r){return new kn.Hsl(Hr.interpolate(r,e.hue,t.hue,n),Hr.interpolate(r,e.saturation,t.saturation,n),Hr.interpolate(r,e.lightness,t.lightness,n))}},kn.Hsl.__super__=kn.Rgb,kn.Hsl.prototype=yr(kn.Rgb.prototype,{toHslString:function(){return"hsl("+this.hue+","+100*this.saturation+"%,"+100*this.lightness+"%)"},lightness:null,saturation:null,hue:null,__class__:kn.Hsl}),Nn={Equations:function(){}},Er["thx.math.Equations"]=Nn.Equations,Nn.Equations.__name__=["thx","math","Equations"],Nn.Equations.linear=function(e){return e},Nn.Equations.polynomial=function(e,t){return Math.pow(e,t)},Nn.Equations.quadratic=function(e){return Nn.Equations.polynomial(e,2)},Nn.Equations.cubic=function(e){return Nn.Equations.polynomial(e,3)},Nn.Equations.sin=function(e){return 1-Math.cos(e*Math.PI/2)},Nn.Equations.exponential=function(e){return 0!=e?Math.pow(2,10*(e-1))-.001:0},Nn.Equations.circle=function(e){return 1-Math.sqrt(1-e*e)},Nn.Equations.elastic=function(e,t,n){var r;return null==n&&(n=.45),null==t?(t=1,r=n/4):r=n/(2*Math.PI)/Math.asin(1/t),1+t*Math.pow(2,10*-e)*Math.sin(2*(e-r)*Math.PI/n)},Nn.Equations.elasticf=function(e,t){var n;return null==t&&(t=.45),null==e?(e=1,n=t/4):n=t/(2*Math.PI)/Math.asin(1/e),function(r){return 1+e*Math.pow(2,10*-r)*Math.sin(2*(r-n)*Math.PI/t)}},Nn.Equations.back=function(e,t){return null==t&&(t=1.70158),e*e*((t+1)*e-t)},Nn.Equations.backf=function(e){return null==e&&(e=1.70158),function(t){return t*t*((e+1)*t-e)}},Nn.Equations.bounce=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},Nn.Equations.polynomialf=function(e){return function(t){Nn.Equations.polynomial(t,e)}},yt.PivotTable=function(e){this.ready=new ts,this.container=e,this.displayHeatMap=this.displayRowTotal=this.displayColumnTotal=!0,this.colorStart=yt.PivotTable.defaultColorStart,this.colorEnd=yt.PivotTable.defaultColorEnd,this.incolumns=1},Er["rg.html.chart.PivotTable"]=yt.PivotTable,yt.PivotTable.__name__=["rg","html","chart","PivotTable"],yt.PivotTable.prototype={range:function(e){return e.axis.range(e.min(),e.max())},transformData:function(e){for(var t=[],n=[],r=[],i=[],s=new W(null),o,u=0,a=zr.min(1,this.columnVariables.length);u<a;){var f=u++;o=this.columnVariables[f],t.push(o.type);for(var f=0,l=this.range(o);f<l.length;){var c=l[f];++f,r.push({values:[c],stats:null,type:o.type})}}u=1;for(a=this.columnVariables.length;u<a;){f=u++,o=this.columnVariables[f],t.push(o.type);for(var h=r.slice(),r=[],f=0;f<h.length;){var p=h[f];++f;for(var l=0,d=this.range(o);l<d.length;){c=d[l],++l;var v=Jr.clone(p);v.values.push(c),r.push(v)}}}for(var m,u=0,a=r.length;u<a;){f=u++,l=[r[f]],o=new W(null),l[0].stats=o,f=0;for(l=xr.filter(e,function(e){return function(n){for(var r=0,i=t.length;r<i;){var s=r++;m=t[s];if(0<=m.indexOf("time:")&&Mr.snap(Kr.field(n,m),Fr.substr(m,m.indexOf("time:")+5,null))==e[0].values[s]||Kr.field(n,m)==e[0].values[s])return!0}return!1}}(l));f<l.length;)h=l[f],++f,p=Kr.field(h,this.cellVariable.type),null!=p&&(o.add(p),s.add(p))}u=0;for(a=zr.min(1,this.rowVariables.length);u<a;){f=u++,o=this.rowVariables[f],n.push(o.type),f=0;for(l=this.range(o);f<l.length;)c=l[f],++f,i.push({values:[c],stats:null,cells:null})}u=1;for(a=this.rowVariables.length;u<a;){f=u++,o=this.rowVariables[f],n.push(o.type),h=i.slice(),i=[];for(f=0;f<h.length;){p=h[f],++f,l=0;for(d=this.range(o);l<d.length;)c=d[l],++l,v=Jr.clone(p),v.values.push(c),i.push(v)}}for(var g,u=0,a=i.length;u<a;){f=u++,o=[i[f]],o[0].stats=new W(null),o[0].cells=[],c=xr.filter(e,function(e){return function(t){for(var r=0,i=n.length;r<i;){var s=r++;g=n[s];if(0<=g.indexOf("time:")&&Mr.snap(Kr.field(t,g),Fr.substr(g,g.indexOf("time:")+5,null))!=e[0].values[s]||Kr.field(t,g)!=e[0].values[s])return!1}return!0}}(o)),l=0;for(f=r.length;l<f;)h=l++,h=[r[h]],0<=h[0].type.indexOf("time:")?(p=[ct.periodicity(h[0].type)],h=xr.firstf(c,function(e,n){return function(r){for(var i=0,s=n[0].values.length;i<s;){var o=i++;if(Mr.snap(Kr.field(r,t[o]),e[0])!=n[0].values[o])return!1}return!0}}(p,h))):h=xr.firstf(c,function(e){return function(n){for(var r=0,i=e[0].values.length;r<i;){var s=r++;if(Kr.field(n,t[s])!=e[0].values[s])return!1}return!0}}(h)),p=Kr.field(h,this.cellVariable.type),null==p?o[0].cells.push({}):(o[0].cells.push(h),o[0].stats.add(p))}return{column_headers:t,row_headers:n,columns:r,rows:i,stats:s}},destroy:function(){this.container.html().string("")},setVariables:function(e,t){this.cellVariable=t[0],this.columnVariables=[];for(var n=0,r=this.incolumns;n<r;){var i=n++;this.columnVariables.push(e[i])}this.rowVariables=[],n=this.incolumns;for(r=e.length;n<r;)i=n++,this.rowVariables.push(e[i])},init:function(){},prependSpacer:function(e,t){if(0!=e){var n=t.append("th").attr("class").string("spacer");1<e&&n.attr("colspan")["float"](e)}},buildValue:function(e,t,n,r){r=r.append("th").text().string(this.labelAxisValue(e,t)),1<n&&r.attr("colspan")["float"](n),n=["column value"],null!=this.valueclass&&(e=this.valueclass(e,t),null!=e&&n.push(e)),r.attr("class").string(n.join(" "))},formatDataPointOver:function(e){return this.labelDataPointOver(e,this.stats)},formatDataPoint:function(e){return this.labelDataPoint(e,this.stats)},formatTotalOver:function(e){return this.labelTotalOver(e,this.stats)},formatTotal:function(e){return this.labelTotal(e,this.stats)},onClick:function(e){this.click(e)},data:function(e){var e=this.transformData(e),t=this.container.append("table").classed().add("pivot-table"),n=t.append("thead"),r=0<e.rows.length?e.rows[0].values.length:0,i=kn.Rgb.interpolatef(this.colorStart,this.colorEnd);this.stats=e.stats;if(0<e.columns.length)for(var s=0,o=e.column_headers.length;s<o;){var u=s++,a=n.append("tr");this.prependSpacer(r,a);var a=a.append("th").text().string(this.labelAxis(e.column_headers[u])),f=["col-header"];if(null!=this.headerclass){var l=this.headerclass(e.column_headers[u]);null!=l&&f.push(l)}a.attr("class").string(f.join(" ")),1<e.columns.length&&a.attr("colspan")["float"](e.columns.length);var f=1,c=e.columns[0].values[u],a=n.append("tr");if(u==e.column_headers.length-1)for(var h=0,p=e.row_headers;h<p.length;){var d=p[h];++h;var v=a.append("th").text().string(this.labelAxis(d)),m=["row-header"];null!=this.headerclass&&(l=this.headerclass(d),null!=l&&m.push(l)),v.attr("class").string(m.join(" "))}else this.prependSpacer(r,a);p=1;for(h=e.columns.length;p<h;)v=p++,v=e.columns[v].values[u],c==v?f++:(this.buildValue(c,e.column_headers[u],f,a),f=1,c=v);null!=c&&this.buildValue(c,e.column_headers[u],f,a)}if(0==e.column_headers.length){a=n.append("tr"),o=0;for(s=e.row_headers;o<s.length;)d=s[o],++o,a.append("th").attr("class").string("row header").text().string(this.labelAxis(d))}n=t.append("tbody"),c=[],o=0;for(s=e.rows;o<s.length;){d=s[o],++o,a=n.append("tr"),m=d.values.length;for(h=0;h<m;){var u=h++,l=d.values[u],g=l==c[u];if(!g){c[u]=l;for(p=u+1;p<m;)v=p++,c[v]=null}v=a.append("th").text().string(g?"":this.labelAxisValue(l,e.row_headers[u])),f=["row value"],g&&f.push("empty"),null!=this.valueclass&&(u=this.valueclass(l,e.row_headers[u]),null!=u&&f.push(u)),v.attr("class").string(f.join(" "))}h=0;for(p=d.cells;h<p.length;)u=p[h],++h,v=a.append("td").text().string(this.formatDataPoint(u)).attr("title").string(this.formatDataPointOver(u)),null!=this.click&&v.onNode("click",function(e,t){return function(n,r){return e(t,n,r)}}(wr(this,this.onClick),u)),this.displayHeatMap&&!Math.isNaN(l=Kr.field(u,this.cellVariable.type)/e.stats.max)&&(f=i(l),v.style("color").color(kn.Rgb.contrastBW(f)).style("background-color").color(f)),f=[],null!=this.cellclass&&(u=this.cellclass(u,d.stats),null!=u&&f.push(u)),v.attr("class").string(f.join(" "));this.displayRowTotal&&1<e.columns.length&&(v=a.append("th").text().string(this.formatTotal(d.stats.tot)),h=this.formatTotalOver(d.stats.tot),null!=h&&v.attr("title").string(h),f=["row total"],null!=this.totalclass&&(u=this.totalclass(d.stats.tot,d.values),null!=u&&f.push(u)),v.attr("class").string(f.join(" ")))}s=t.append("tfoot");if(this.displayColumnTotal&&1<e.rows.length){a=s.append("tr"),this.prependSpacer(r,a),o=0;for(s=e.columns;o<s.length;)r=s[o],++o,h=this.formatTotalOver(r.stats.tot),v=a.append("th").text().string(this.formatTotal(r.stats.tot)),null!=h&&v.attr("title").string(h),f=["column total"],null!=this.totalclass&&(u=this.totalclass(r.stats.tot,r.values),null!=u&&f.push(u)),v.attr("class").string(f.join(" "));this.displayRowTotal&&1<e.columns.length&&(v=a.append("th").text().string(this.formatTotal(e.stats.tot)).attr("title").string(this.formatTotalOver(e.stats.tot)),f=["table total"],null!=this.totalclass&&(u=this.totalclass(e.stats.tot,[]),null!=u&&f.push(u)),v.attr("class").string(f.join(" ")))}this.ready.dispatch()},labelTotalOver
:function(e,t){return xn.FormatNumber.percent(100*e/t.tot,1)},labelTotal:function(e){return xn.FormatNumber["int"](e)},labelAxisValue:function(e,t){if(0<=t.indexOf("time:")){var n=Fr.substr(t,t.indexOf("time:")+5,null);return ut.format(n,e)}return at.humanize(e)},labelAxis:function(e){return at.humanize(e)},labelDataPointOver:function(e,t){var n=Kr.field(e,this.cellVariable.type);return Math.isNaN(n)?"0":xn.FormatNumber.percent(100*n/t.tot,1)},labelDataPoint:function(e){return e=Kr.field(e,this.cellVariable.type),Math.isNaN(e)?"0":xn.FormatNumber["int"](e)},stats:null,container:null,totalclass:null,headerclass:null,valueclass:null,cellclass:null,click:null,incolumns:null,cellVariable:null,rowVariables:null,columnVariables:null,ready:null,colorEnd:null,colorStart:null,displayHeatMap:null,displayRowTotal:null,displayColumnTotal:null,__class__:yt.PivotTable},gt={},gt.DownloaderMenu=function(e,t,n,r){this.handler=e,this.formats=null==n?gt.DownloaderMenu.DEFAULT_FORMATS:n,this.title=gt.DownloaderMenu.DEFAULT_TITLE,this.build(t,r)},Er["rg.html.widget.DownloaderMenu"]=gt.DownloaderMenu,gt.DownloaderMenu.__name__=["rg","html","widget","DownloaderMenu"],gt.DownloaderMenu.prototype={click:function(e){var t=this;this.menu.classed().add("downloading"),this.handler(e,this.backgroundColor,function(){return t.menu.classed().remove("downloading"),!0},function(e){t.menu.classed().remove("downloading"),fr.alert("ERROR: "+e)})},createMenu:function(e){this.menu=e.append("div").attr("class").string("rg menu"),e=this.menu.append("div").attr("class").string("options"),e.append("div").attr("class").string("title").html().string(this.title),e.append("ul").selectAll("li").data(this.formats).enter().append("li").on("click.download",wr(this,this.click)).html().stringf(function(e){return e})},build:function(e,t){this.createMenu(t);var n=this.menu.node();switch(e[1]){case 6:t.node().parentNode.insertBefore(n,t.node().nextSibling);break;case 5:t.node().parentNode.insertBefore(n,t.node());break;case 3:this.menu.classed().add("bottom").classed().add("left");break;case 4:this.menu.classed().add("bottom").classed().add("right");break;case 0:Oi.select(e[2]).node().appendChild(n);break;case 1:this.menu.classed().add("top").classed().add("left");break;case 2:this.menu.classed().add("top").classed().add("right")}},menu:null,backgroundColor:null,title:null,formats:null,handler:null,__class__:gt.DownloaderMenu},gt.DownloaderPosition={__ename__:["rg","html","widget","DownloaderPosition"],__constructs__:"ElementSelector,TopLeft,TopRight,BottomLeft,BottomRight,Before,After".split(",")},gt.DownloaderPosition.ElementSelector=function(e){return e=["ElementSelector",0,e],e.__enum__=gt.DownloaderPosition,e.toString=Sr,e},gt.DownloaderPosition.TopLeft=["TopLeft",1],gt.DownloaderPosition.TopLeft.toString=Sr,gt.DownloaderPosition.TopLeft.__enum__=gt.DownloaderPosition,gt.DownloaderPosition.TopRight=["TopRight",2],gt.DownloaderPosition.TopRight.toString=Sr,gt.DownloaderPosition.TopRight.__enum__=gt.DownloaderPosition,gt.DownloaderPosition.BottomLeft=["BottomLeft",3],gt.DownloaderPosition.BottomLeft.toString=Sr,gt.DownloaderPosition.BottomLeft.__enum__=gt.DownloaderPosition,gt.DownloaderPosition.BottomRight=["BottomRight",4],gt.DownloaderPosition.BottomRight.toString=Sr,gt.DownloaderPosition.BottomRight.__enum__=gt.DownloaderPosition,gt.DownloaderPosition.Before=["Before",5],gt.DownloaderPosition.Before.toString=Sr,gt.DownloaderPosition.Before.__enum__=gt.DownloaderPosition,gt.DownloaderPosition.After=["After",6],gt.DownloaderPosition.After.toString=Sr,gt.DownloaderPosition.After.__enum__=gt.DownloaderPosition,gt.DownloaderPositions=function(){},Er["rg.html.widget.DownloaderPositions"]=gt.DownloaderPositions,gt.DownloaderPositions.__name__=["rg","html","widget","DownloaderPositions"],gt.DownloaderPositions.parse=function(e){switch(e.toLowerCase()){case"topleft":return gt.DownloaderPosition.TopLeft;case"topright":case"auto":return gt.DownloaderPosition.TopRight;case"bottomleft":return gt.DownloaderPosition.BottomLeft;case"bottomright":return gt.DownloaderPosition.BottomRight;case"before":return gt.DownloaderPosition.Before;case"after":return gt.DownloaderPosition.After;default:return gt.DownloaderPosition.ElementSelector(e)}},gt.Logo=function(e,t){this.mapvalues=new Br,this.padRight=t,this.id=++gt.Logo._id,this.container=e,this.create(),(new Yn(5e3)).run=wr(this,this.live)},Er["rg.html.widget.Logo"]=gt.Logo,gt.Logo.__name__=["rg","html","widget","Logo"],gt.Logo.pageIsBranded=function(){for(var e=0,t=gt.Logo.getLogos();e<t.length;){var n=t[e];++e;if(!Oi.select('img[src="'+n+'"]').empty())return!0}return!1},gt.Logo.createLogo=function(e,t){var n=e.attr("id").get(),r=gt.Logo.registry.get(n);return null==r?gt.Logo.registry.set(n,r=new gt.Logo(e,t)):r.live(),r},gt.Logo.getLogo=function(){return gt.Logo.getLogos()[0]},gt.Logo.getLogos=function(){return"http://api.reportgrid.com/css/images/reportgrid-clear.png,http://api.reportgrid.com/css/images/reportgrid-cleart.png,http://api.reportgrid.com/css/images/reportgrid-dark.png,http://api.reportgrid.com/css/images/reportgrid-darkt.png,https://api.reportgrid.com/css/images/reportgrid-clear.png,https://api.reportgrid.com/css/images/reportgrid-cleart.png,https://api.reportgrid.com/css/images/reportgrid-dark.png,https://api.reportgrid.com/css/images/reportgrid-darkt.png".split(",")},gt.Logo.position=function(e){for(var t={x:e.offsetLeft||0,y:e.offsetTop||0};null!=(e=e.offsetParent);)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t},gt.Logo.prototype={updateImage:function(){this.setAttr(this.image,"src",gt.Logo.getLogo()),this.setAttr(this.image,"title","Powered by ReportGrid"),this.setAttr(this.image,"height","29"),this.setAttr(this.image,"width","194"),this.setStyle(this.image,"opacity","1"),this.setStyle(this.image,"border","none"),this.setStyle(this.image,"height","29px"),this.setStyle(this.image,"width","194px")},updateAnchor:function(){var e=fr.document.body;Oi.select("body :last-child").node()!=this.anchor.node()&&e.appendChild(this.anchor.node());var e=gt.Logo.position(this.frame.node()),t=this.frame.style("width").getFloat();this.setAttr(this.anchor,"title","Powered by ReportGrid"),this.setAttr(this.anchor,"href","http://www.reportgrid.com/charts/"),this.setStyle(this.anchor,"z-index","2147483647"),this.setStyle(this.anchor,"display","block"),this.setStyle(this.anchor,"opacity","1"),this.setStyle(this.anchor,"position","absolute"),this.setStyle(this.anchor,"height","29px"),this.setStyle(this.anchor,"width","194px"),this.setStyle(this.anchor,"top",e.y+"px"),this.setStyle(this.anchor,"left",e.x-194+t-this.padRight+"px")},setAttr:function(e,t,n){var r="attr:"+t+":"+n,i;null!=(i=this.mapvalues.get(r))&&i!=e.attr(t).get()?e.attr(t).string(i):null==i&&(e.attr(t).string(n),this.mapvalues.set(r,e.attr(t).get()))},setStyle:function(e,t,n){var r="style:"+t+":"+n,i;null!=(i=this.mapvalues.get(r))&&i!=e.style(t).get()?e.style(t).string(i,"important"):null==i&&(e.style(t).string(n,"important"),this.mapvalues.set(r,e.style(t).get()))},updateFrame:function(){this.setStyle(this.frame,"display","block"),this.setStyle(this.frame,"opacity","1"),this.setStyle(this.frame,"width","100%"),this.setStyle(this.frame,"height","29px"),this.setStyle(this.frame,"position","relative")},createImage:function(){this.image=this.anchor.append("img"),this.updateImage()},createAnchor:function(){this.anchor=Oi.select("body").append("a").attr("class").string("reportgridbrandanchor"+this.id).attr("target").string("_blank"),this.updateAnchor()},createFrame:function(){this.chartContainer=this.container.select("*"),this.frame=this.container.insert("div",this.chartContainer.node()).attr("class").string("reportgridbrandcontainer"),this.updateFrame()},create:function(){this.createFrame(),this.createAnchor(),this.createImage()},live:function(){this.container.select("div.reportgridbrandcontainer").empty()?this.createFrame():this.updateFrame(),Oi.select("body").select("a.reportgridbrandanchor"+this.id).empty()?this.createAnchor():this.updateAnchor(),this.anchor.select("img").empty()?this.createImage():this.updateImage()},padRight:null,mapvalues:null,id:null,image:null,anchor:null,frame:null,container:null,chartContainer:null,__class__:gt.Logo},gt.Tooltip=function(e){this.visible=!1,e=null==e?fr.document.body:e,this.tooltip=Oi.selectNode(e).append("div").style("display").string("none").style("position").string("absolute").style("opacity")["float"](0).style("left").string("0px").style("top").string("0px").attr("class").string("rg tooltip").style("z-index").string("1000000"),this._anchor=this.tooltip.append("div").style("display").string("block").style("position").string("absolute"),this.setAnchorClass(""),this.container=this.tooltip.append("div").style("position").string("relative").attr("class").string("rg_container"),this.background=this.container.append("div").style("display").string("block").style("position").string("static").append("div").style("z-index").string("-1").attr("class").string("rg_background").style("position").string("absolute").style("left").string("0").style("right").string("0").style("top").string("0").style("bottom").string("0"),this.content=this.container.append("div").attr("class").string("rg_content"),this.content.onNode("DOMSubtreeModified",wr(this,this.resize)),this.anchortype="bottomright",this.anchordistance=0},Er["rg.html.widget.Tooltip"]=gt.Tooltip,gt.Tooltip.__name__=["rg","html","widget","Tooltip"],gt.Tooltip.__properties__={get_instance:"get_instance"},gt.Tooltip.get_instance=function(){return null==gt.Tooltip.instance&&(gt.Tooltip.instance=new gt.Tooltip,ReportGrid.tooltip=gt.Tooltip.instance),gt.Tooltip.instance},gt.Tooltip.prototype={reanchor:function(){if(this.visible){var e=this.container.style("width").getFloat(),t=this.container.style("height").getFloat(),n=this.anchortype;switch(n){case"top":case"bottom":case"center":this.container.style("left").string(-e/2+"px");break;case"left":case"topleft":case"bottomleft":this.container.style("left").string(this.anchordistance+"px");break;case"right":case"topright":case"bottomright":this.container.style("left").string(-this.anchordistance-e+"px");break;default:throw new Tn.Error("invalid anchor point: {"+this.anchortype+"}",null,null,{fileName:"Tooltip.hx",lineNumber:157,className:"rg.html.widget.Tooltip",methodName:"reanchor"})}switch(n){case"top":case"topleft":case"topright":this.container.style("top").string(this.anchordistance+"px");break;case"left":case"center":case"right":this.container.style("top").string(-t/2+"px");break;case"bottom":case"bottomleft":case"bottomright":this.container.style("top").string(-this.anchordistance-t+"px")}}},resize:function(){this.reanchor()},setAnchorColor:function(e){this._anchor.style("background-color").string(e)},setAnchorClass:function(e){this._anchor.attr("class").string("rg_anchor "+e)},anchor:function(e,t){null==t&&(t=0);if(this.anchortype!=e||this.anchordistance!=t)this.anchortype=e,this.anchordistance=t,this.reanchor()},moveAt:function(e,t){this.tooltip.style("left").string(e+"px").style("top").string(t+"px")},showAt:function(e,t){this.moveAt(e,t),this.show()},hide:function(){this.visible&&(this.visible=!1,this.tooltip.style("opacity")["float"](0).style("display").string("none"))},show:function(){this.visible||(this.tooltip.style("display").string("block"),this.visible=!0,this.reanchor(),this.tooltip.style("opacity")["float"](1))},html:function(e){this.content.node().innerHTML=e,this.reanchor()},visible:null,anchordistance:null,anchortype:null,content:null,background:null,container:null,_anchor:null,tooltip:null,__class__:gt.Tooltip},Bt=function(){},jt=void 0,Ft=void 0,It=void 0,qt=void 0,Rt=void 0,Ut=void 0,zt=void 0,Wt=void 0,Xt=void 0,Vt=void 0,$t=void 0,Jt=void 0,Kt=void 0,Qt=void 0,Gt=void 0,Yt=void 0,Zt=void 0,en=void 0,tn=void 0,nn=void 0,rn=void 0,sn=void 0,on=void 0,un=void 0,an=void 0,fn=void 0,ln=void 0,cn=void 0,hn=void 0,pn=void 0,dn=void 0,vn=void 0,mn=void 0,gn=void 0,yn=void 0,Er["rg.info.Info"]=Bt,Bt.__name__=["rg","info","Info"],Bt.feed=function(e,t){if(null==t)return e;var n=ti.getClass(e),r=Kr.field(n,"filters");if(null==r)return e;for(var n=r.apply(n,[]),i,r=0;r<n.length;){var s=n[r];++r;if(Kr.hasField(t,s.name))switch(i=Kr.field(t,s.name),i=s.transformer.transform(i),i[1]){case 0:for(s=i[2].iterator();s.hasNext();)i=s.next(),e[i.name]=i.value;break;case 1:Bt.warn(s.name,i[2])}}return e},Bt.warn=function(e,t){Bt.warner("the parameter "+e+" has not been applied because: "+Qr.string(t))},tn=function(){this.animated=!1,this.duration=1500,this.delay=150,this.ease=Nn.Equations.elasticf()},Er["rg.info.InfoAnimation"]=tn,tn.__name__=["rg","info","InfoAnimation"],tn.filters=function(){return[nn.FilterDescription.toBool("animated"),nn.FilterDescription.toInt("duration"),nn.FilterDescription.toInt("delay"),nn.FilterDescription.toExpressionFunction("ease",["value"])]},tn.prototype={delay:null,ease:null,duration:null,animated:null,__class__:tn},rn=function(){this.animation=new tn,this.label=new sn,this.displayMinorTick=function(){return!0},this.displayMajorTick=function(){return!0},this.displayLabelTick=function(){return!0},this.displayAnchorLineTick=function(){return!1},this.displayMinorRule=function(){return!1},this.displayMajorRule=function(){return!1},this.displayAnchorLineRule=function(){return!1},this.labelOrientation=function(){return null},this.labelAnchor=function(){return null},this.labelAngle=function(){return null},this.lengthTickMinor=2,this.lengthTickMajor=5,this.paddingTickMajor=this.paddingTickMinor=1,this.paddingLabel=10},Er["rg.info.InfoCartesianChart"]=rn,rn.__name__=["rg","info","InfoCartesianChart"],rn.filters=function(){return[nn.FilterDescription.toInfo("animation",null,tn),nn.FilterDescription.toFunction("click"),nn.FilterDescription.toInfo("label",null,sn),nn.FilterDescription.toExpressionFunctionOrBool("displaytickmarks",["type"],["displayMinorTick","displayMajorTick","displayLabelTick"]),nn.FilterDescription.toExpressionFunctionOrBool("displaytickminor",["type"],["displayMinorTick"]),nn.FilterDescription.toExpressionFunctionOrBool("displaytickmajor",["type"],["displayMajorTick"]),nn.FilterDescription.toExpressionFunctionOrBool("displayticklabel",["type"],["displayLabelTick"]),nn.FilterDescription.toExpressionFunctionOrBool("displayanchorlinetick",["type"],["displayAnchorLineTick"]),nn.FilterDescription.toExpressionFunctionOrBool("displayrules",["type"],["displayMinorRule","displayMajorRule"]),nn.FilterDescription.toExpressionFunctionOrBool("displayruleminor",["type"],["displayMinorRule"]),nn.FilterDescription.toExpressionFunctionOrBool("displayrulemajor",["type"],["displayMajorRule"]),nn.FilterDescription.toExpressionFunctionOrBool("displayanchorlinerule",["type"],["displayAnchorLineRule"]),nn.FilterDescription.toFloat("lengthtick",["lengthTickMajor","lengthTickMinor"]),nn.FilterDescription.toFloat("lengthtickminor",["lengthTickMinor"]),nn.FilterDescription.toFloat("lengthtickmajor",["lengthTickMajor"]),nn.FilterDescription.toFloat("paddingtick",["paddingTickMajor","paddingTickMinor"]),nn.FilterDescription.toFloat("paddingtickminor",["paddingTickMinor"]),nn.FilterDescription.toFloat("paddingtickmajor",["paddingTickMajor"]),nn.FilterDescription.toFloat("paddingticklabel",["paddingLabel"]),nn.FilterDescription.toExpressionFunctionOrString("labelorientation",["type"],["labelOrientation"]),nn.FilterDescription.toExpressionFunctionOrString("labelanchor",["type"],["labelAnchor"]),nn.FilterDescription.toExpressionFunctionOrFloat("labelangle",["type"],["labelAngle"]),nn.FilterDescription.simplified("labelhorizontal",["labelAnchor"],function(e){return 0==e?function(){return"right"}:function(){return null}},nn.ReturnMessageIfNot.isBool),nn.FilterDescription.simplified("labelhorizontal",["labelAngle"],function(e){return 0==e?function(){return 0}:function(){return null}},nn.ReturnMessageIfNot.isBool)]},rn.prototype={paddingLabel:null,paddingTickMajor:null,paddingTickMinor:null,lengthTickMajor:null,lengthTickMinor:null,labelAngle:null,labelAnchor:null,labelOrientation:null,displayAnchorLineRule:null,displayMajorRule:null,displayMinorRule:null,displayAnchorLineTick:null,displayLabelTick:null,displayMajorTick:null,displayMinorTick:null,label:null,click:null,animation:null,__class__:rn},Vt=function(){rn.call(this),this.segment=new on,this.stacked=!0,this.effect=tt.GradientEffect.Gradient(1.25),this.barPadding=12,this.barPaddingAxis=4,this.barPaddingDataPoint=2,this.horizontal=!1},Er["rg.info.InfoBarChart"]=Vt,Vt.__name__=["rg","info","InfoBarChart"],Vt.filters=function(){return[nn.FilterDescription.toBool("stacked"),nn.FilterDescription.toBool("horizontal"),nn.FilterDescription.simplified("effect",null,tt.GradientEffects.parse,nn.ReturnMessageChainer.or(nn.ReturnMessageIfNot.isString,nn.ReturnMessageChainer.make(tt.GradientEffects.canParse,"invalid gradient effect: {0}"))),nn.FilterDescription.toFloat("barpadding",["barPadding"]),nn.FilterDescription.toFloat("barpaddingaxis",["barPaddingAxis"]),nn.FilterDescription.toFloat("barpaddingdatapoint",["barPaddingDataPoint"]),nn.FilterDescription.simplified("segmenton",["segment"],function(e){return Bt.feed(new on,{on:e})},nn.ReturnMessageIfNot.isString),nn.FilterDescription.toInfo("segment",null,on)].concat(rn.filters())},Vt.__super__=rn,Vt.prototype=yr(rn.prototype,{segment:null,horizontal:null,barPadding:null,barPaddingAxis:null,barPaddingDataPoint:null,effect:null,stacked:null,__class__:Vt}),It=function(){},Er["rg.info.InfoDataSource"]=It,It.__name__=["rg","info","InfoDataSource"],It.filters=function(){return[nn.FilterDescription.toDataFunctionFromArray("data",["loader"]),nn.FilterDescription.toDataFunctionFromArray("datapoints",["loader"]),nn.FilterDescription.toLoaderFunction("load",["loader"])]},It.prototype={loader:null,__class__:It},Ut=function(){},Er["rg.info.InfoDomType"]=Ut,Ut.__name__=["rg","info","InfoDomType"],Ut.filters=function(){return[nn.FilterDescription.custom("visualization",["kind"],function(e){var t=null==e?null:(""+Qr.string(e)).toLowerCase();return xr.exists(y.visualizations,t)?nn.TransformResult.Success(xr.exists(y.html,t)?un.Html:un.Svg):nn.TransformResult.Failure(new On.Message("'{0}' value is not a vailid visualization kind",[e]))})]},Ut.prototype={kind:null,__class__:Ut},un={__ename__:["rg","info","DomKind"],__constructs__:["Html","Svg"],Html:["Html",0]},un.Html.toString=Sr,un.Html.__enum__=un,un.Svg=["Svg",1],un.Svg.toString=Sr,un.Svg.__enum__=un,zt=function(){this.service=ns.SERVICE_RENDERING_STATIC,this.legacyservice=ns.LEGACY_RENDERING_STATIC,this.formats=["pdf","png","jpg","svg"]},Er["rg.info.InfoDownload"]=zt,zt.__name__=["rg","info","InfoDownload"],zt.filters=function(){return[nn.FilterDescription.toFunction("handler"),nn.FilterDescription.toStr("service"),nn.FilterDescription.toStr("legacyservice"),nn.FilterDescription.toArray("formats"),nn.FilterDescription.custom("position",null,function(e){return ar.__instanceof(e,String)||e.nodeName?nn.TransformResult.Success(gt.DownloaderPositions.parse(e)):nn.TransformResult.Failure(new On.Message("invalid downloader position: {0}",e))})]},zt.prototype={formats:null,position:null,legacyservice:null,service:null,handler:null,__class__:zt},$t=function(){this.animation=new tn,this.label=new an,this.padding=2.5,this.flatness=1,this.effect=tt.GradientEffect.Gradient(1.25),this.arrowSize=30},Er["rg.info.InfoFunnelChart"]=$t,$t.__name__=["rg","info","InfoFunnelChart"],$t.filters=function(){return[nn.FilterDescription.toInfo("animation",null,tn),nn.FilterDescription.toInfo("label",null,an),nn.FilterDescription.toExpressionFunction("sort",["a","b"],["sortDataPoint"]),nn.FilterDescription.toFunction("click"),nn.FilterDescription.toFloat("segmentpadding",["padding"]),nn.FilterDescription.toFloat("flatness"),nn.FilterDescription.custom("effect",null,function(e){return tt.GradientEffects.canParse(e)?nn.TransformResult.Success(tt.GradientEffects.parse(e)):nn.TransformResult.Failure(new On.Message("'{0}' is not a valid effect",e))}),nn.FilterDescription.toFloat("arrowsize",["arrowSize"])]},$t.prototype={arrowSize:null,effect:null,flatness:null,padding:null,click:null,sortDataPoint:null,label:null,animation:null,__class__:$t},qt=function(){this.forcelegacy=!1},Er["rg.info.InfoGeneral"]=qt,qt.__name__=["rg","info","InfoGeneral"],qt.filters=function(){return[nn.FilterDescription.toFunction("ready"),nn.FilterDescription.toBool("forcelegacy")]},qt.prototype={forcelegacy:null,ready:null,__class__:qt},Jt=function(){this.labelOutline=this.labelShadow=!1,this.label=new fn,this.map=[Bt.feed(new ln,{template:"world"})]},Er["rg.info.InfoGeo"]=Jt,Jt.__name__=["rg","info","InfoGeo"],Jt.filters=function(){return[nn.FilterDescription.toInfoArray("map",null,ln),nn.FilterDescription.toBool("labeloutline",["labelOutline"]),nn.FilterDescription.toBool("labelshadow",["labelShadow"])]},Jt.prototype={labelShadow:null,labelOutline:null,label:null,map:null,__class__:Jt},Kt=function(){rn.call(this),this.colorScaleMode=tt.ColorScaleMode.FromCssInterpolation()},Er["rg.info.InfoHeatGrid"]=Kt,Kt.__name__=["rg","info","InfoHeatGrid"],Kt.filters=function(){return[nn.FilterDescription.toBool("contour"),nn.FilterDescription.simplified("color",["colorScaleMode"],tt.ColorScaleModes.createFromDynamic,function(e){return tt.ColorScaleModes.canParse(e)?null:"value must be a a string or a function returning a string expressing a valid color scale mode"})].concat(rn.filters())},Kt.__super__=rn,Kt.prototype=yr(rn.prototype,{colorScaleMode:null,contour:null,__class__:Kt}),fn=function(){},Er["rg.info.InfoLabel"]=fn,fn.__name__=["rg","info","InfoLabel"],fn.filters=function(){return[nn.FilterDescription.toTemplateFunctionOrString("title",["axes","values"]),nn.FilterDescription.toTemplateFunction("datapoint",[null,"stats"]),nn.FilterDescription.toTemplateFunction("datapointover",[null,"stats"])]},fn.prototype={datapointover:null,datapoint:null,title:null,__class__:fn},sn=function(){fn.call(this)},Er["rg.info.InfoLabelAxis"]=sn,sn.__name__=["rg","info","InfoLabelAxis"],sn.filters=function(){return[nn.FilterDescription.toTemplateFunction("axis",["type"]),nn.FilterDescription.toTemplateFunction("tickmark",["value","type"])].concat(fn.filters())},sn.__super__=fn,sn.prototype=yr(fn.prototype,{tickmark:null,axis:null,__class__:sn}),an=function(){fn.call(this)},Er["rg.info.InfoLabelFunnel"]=an,an.__name__=["rg","info","InfoLabelFunnel"],an.filters=function(){return[nn.FilterDescription.toTemplateFunction("arrow",[null,"stats"])].concat(fn.filters())},an.__super__=fn,an.prototype=yr(fn.prototype,{arrow:null,__class__:an}),cn=function(){fn.call(this)},Er["rg.info.InfoLabelLeaderboard"]=cn,cn.__name__=["rg","info","InfoLabelLeaderboard"],cn.filters=function(){return[nn.FilterDescription.toTemplateFunctionOrNull("rank",[null,"index","stats"]),nn.FilterDescription.toTemplateFunctionOrNull("value",[null,"stats"])].concat(fn.filters())},cn.__super__=fn,cn.prototype=yr(fn.prototype,{value:null,rank:null,__class__:cn}),hn=function(){sn.call(this)},Er["rg.info.InfoLabelPivotTable"]=hn,hn.__name__=["rg","info","InfoLabelPivotTable"],hn.filters=function(){return[nn.FilterDescription.toTemplateFunction("total",["value","stats"]),nn.FilterDescription.toTemplateFunction("totalover",["value","stats"]),nn.FilterDescription.toTemplateFunction("axisvalue",["value","axis"])].concat(sn.filters())},hn.__super__=sn,hn.prototype=yr(sn.prototype,{axisvalue:null,totalover:null,total:null,__class__:hn}),pn=function(){fn.call(this)},Er["rg.info.InfoLabelSankey"]=pn,pn.__name__=["rg","info","InfoLabelSankey"],pn.filters=function(){return[nn.FilterDescription.toTemplateFunction("edge",[null,"stats"]),nn.FilterDescription.toTemplateFunction("edgeover",[null,"stats"]),nn.FilterDescription.toTemplateFunction("node",[null,"stats"])].concat(fn.filters())},pn.__super__=fn,pn.prototype=yr(fn.prototype,{node:null,edgeover:null,edge:null,__class__:pn}),jt=function(){this.main="main",this.titleOnTop=!0,this.scalePattern=r.ScalesAlternating,this.padding=new dn},Er["rg.info.InfoLayout"]=jt,jt.__name__=["rg","info","InfoLayout"],jt.filters=function(){return[nn.FilterDescription.custom("layout",null,function(e){var t=null==e?null:(""+Qr.string(e)).toLowerCase();return xr.exists(y.layouts,t)?nn.TransformResult.Success(t):nn.TransformResult.Failure(new On.Message("value '{0}' is not a valid visualization layout",[e]))}),nn.FilterDescription.toFloat("width"),nn.FilterDescription.toFloat("height"),nn.FilterDescription.custom("visualization",["type"],function(e){var t=null==e?null:(""+Qr.string(e)).toLowerCase();return xr.exists(y.svg,t)?nn.TransformResult.Success(t):nn.TransformResult.Failure(new On.Message("value '{0}' is not a valid visualization type",[e]))}),nn.FilterDescription.toStr("main"),nn.FilterDescription.toBool("titleontop",["titleOnTop"]),nn.FilterDescription.custom("yscaleposition",["scalePattern"],function(e){return ar.__instanceof(e,String)?nn.TransformResult.Success(function(){var t;switch(e){case"alt":case"alternate":case"alternating":t=r.ScalesAlternating;break;case"right":t=r.ScalesAfter;break;default:t=r.ScalesBefore}return t}(this)):nn.TransformResult.Failure(new On.Message("value '{0}' must be a string",[e]))}),nn.FilterDescription.toInfo("padding",null,dn)]},jt.prototype={padding:null,scalePattern:null,titleOnTop:null,main:null,type:null,height:null,width:null,layout:null,__class__:jt},Xt=function(){this.animation=new tn,this.label=new cn,this.usemax=!1,this.displaybar=!0,this.colorscale=!1},Er["rg.info.InfoLeaderboard"]=Xt,Xt.__name__=["rg","info","InfoLeaderboard"],Xt.filters=function(){return[nn.FilterDescription.toInfo("animation",null,tn,function(e){e.ease=Nn.Equations.linear}),nn.FilterDescription.toInfo("label",null,cn),nn.FilterDescription.toFunction("click"),nn.FilterDescription.toExpressionFunction("sort",["a","b"],["sortDataPoint"]),nn.FilterDescription.toBool("displaybar"),nn.FilterDescription.toBool("usemax"),nn.FilterDescription.toBool("colorscale")]},Xt.prototype={colorscale:null,displaybar:null,usemax:null,sortDataPoint:null,click:null,label:null,animation:null,__class__:Xt},Qt=function(){rn.call(this),this.segment=new on,this.effect=tt.LineEffect.Gradient(-1.2,2),this.interpolation=Mn.LineInterpolator.Linear,this.displayarea=!1,this.sensibleradius=100},Er["rg.info.InfoLineChart"]=Qt,Qt.__name__=["rg","info","InfoLineChart"],Qt.filters=function(){return[nn.FilterDescription.toExpressionFunctionOrString("symbol",[null,"stats"]),nn.FilterDescription.toExpressionFunctionOrString("symbolstyle",[null,"stats"],["symbolStyle"]),nn.FilterDescription.simplified("segmenton",["segment"],function(e){return Bt.feed(new on,{on:e})},nn.ReturnMessageIfNot.isString),nn.FilterDescription.toInfo("segment",null,on),nn.FilterDescription.toStr("y0property"),nn.FilterDescription.toBool("displayarea"),nn.FilterDescription.toInt("sensibleradius"),nn.FilterDescription.toTry("effect",null,tt.LineEffects.parse,"invalid effect string value '{0}'"),nn.FilterDescription.toTry("interpolation",null,function(e){return Mn.LineInterpolators.parse(e)},"invalid line interpolation string value '{0}'")].concat(rn.filters())},Qt.__super__=rn,Qt.prototype=yr(rn.prototype,{sensibleradius:null,segment:null,y0property:null,displayarea:null,symbolStyle:null,symbol:null,interpolation:null,effect:null,__class__:Qt}),ln=function(){this.property="location",this.type="geojson",this.colorScaleMode=tt.ColorScaleMode.FromCssInterpolation(),this.usejsonp=!0,this.radius=function(){return 10}},Er["rg.info.InfoMap"]=ln,ln.__name__=["rg","info","InfoMap"],ln.filters=function(){return[nn.FilterDescription.toStr("url"),nn.FilterDescription.toStr("type"),nn.FilterDescription.toFloat("scale"),nn.FilterDescription.toStr("projection"),nn.FilterDescription.toStr("classname"),nn.FilterDescription.toArray("translate"),nn.FilterDescription.toArray("origin"),nn.FilterDescription.toArray("parallels"),nn.FilterDescription.toTry("mode",null,function(e){return ti.createEnum(An.ProjectionMode,Zr.ucfirst(e.toLowerCase()),[])},"value is not a valid projection mode '{0}'"),nn.FilterDescription.toStrOrNull("property"),nn.FilterDescription.toBool("usejsonp"),new nn.FilterDescription("template",new vn),nn.FilterDescription.toInfo("label",null,fn),nn.FilterDescription.toFunction("click"),nn.FilterDescription.simplified("color",["colorScaleMode"],tt.ColorScaleModes.createFromDynamic,nn.ReturnMessageChainer.make(function(e){return ar.__instanceof(e,String)||Kr.isFunction(e)},"invalid color mode value '{0}'")),nn.FilterDescription.toExpressionFunctionOrFloat("radius",[null,"stats"]),new nn.FilterDescription("mapping",new mn)]},ln.prototype={mappingurl:null,mapping:null,usejsonp:null,colorScaleMode:null,radius:null,click:null,label:null,property:null,mode:null,parallels:null,origin:null,translate:null,classname:null,projection:null,scale:null,type:null,url:null,__class__:ln},nn={ITransformer:function(){}},Er["rg.info.filter.ITransformer"]=nn.ITransformer,nn.ITransformer.__name__=["rg","info","filter","ITransformer"],nn.ITransformer.prototype={transform:null,__class__:nn.ITransformer},mn=function(){},Er["rg.info.MapTransformer"]=mn,mn.__name__=["rg","info","MapTransformer"],mn.__interfaces__=[nn.ITransformer],mn.prototype={transform:function(e){return ar.__instanceof(e,String)?nn.TransformResult.Success(new nn.Pairs(["mappingurl"],[e])):Kr.isObject(e)&&null==ti.getClass(e)?nn.TransformResult.Success(new nn.Pairs(["mapping"],[e])):nn.TransformResult.Failure(new On.Message("value should be url string or an object",[e]))},__class__:mn},vn=function(){},Er["rg.info.TemplateTransformer"]=vn,vn.__name__=["rg","info","TemplateTransformer"],vn.__interfaces__=[nn.ITransformer],vn.prototype={transform:function(e){e=null==e?"":""+Qr.string(e);switch(e.toLowerCase()){case"world":case"world-countries":e=nn.TransformResult.Success(new nn.Pairs(["projection","url"],["mercator",ns.BASE_URL_GEOJSON+"world-countries.json.js"]));break;case"usa-states":e=nn.TransformResult.Success(new nn.Pairs(["projection","url"],["albersusa",ns.BASE_URL_GEOJSON+"usa-states.json.js"]));break;case"usa-state-centroids":e=nn.TransformResult.Success(new nn.Pairs(["projection","url"],["albersusa",ns.BASE_URL_GEOJSON+"usa-state-centroids.json.js"]));break;case"usa-counties":e=nn.TransformResult.Success(new nn.Pairs(["projection","url"],["albersusa",ns.BASE_URL_GEOJSON+"usa-counties.json.js"]));break;default:e=nn.TransformResult.Failure(new On.Message("{0} is not a valid map template",[e]))}return e},__class__:vn},dn=function(){},Er["rg.info.InfoPadding"]=dn,dn.__name__=["rg","info","InfoPadding"],dn.filters=function(){return[nn.FilterDescription.toInt("top"),nn.FilterDescription.toInt("bottom"),nn.FilterDescription.toInt("left"),nn.FilterDescription.toInt("right")]},dn.prototype={right:null,left:null,bottom:null,top:null,__class__:dn},Gt=function(){this.innerradius=0,this.labelradius=.45,this.labelorientation=nt.LabelOrientation.Aligned,this.outerradius=.9,this.overradius=.95,this.tooltipradius=.5,this.animation=new tn,this.label=new fn,this.effect=tt.GradientEffect.Gradient(1.2),this.dontfliplabel=!0},Er["rg.info.InfoPieChart"]=Gt,Gt.__name__=["rg","info","InfoPieChart"],Gt.filters=function(){return[nn.FilterDescription.toFloat("labelradius"),nn.FilterDescription.toBool("dontfliplabel"),nn.FilterDescription.toTry("labelorientation",null,nt.LabelOrientations.parse,"invalid orientation value '{0}'"),nn.FilterDescription.toFloat("innerradius"),nn.FilterDescription.toFloat("outerradius"),nn.FilterDescription.toFloat("overradius"),nn.FilterDescription.toFloat("tooltipradius"),nn.FilterDescription.toInfo("animation",null,tn),nn.FilterDescription.toInfo("label",null,fn),nn.FilterDescription.toExpressionFunction("sort",["a","b"],["sortDataPoint"]),nn.FilterDescription.toFunction("click"),nn.FilterDescription.simplified("effect",null,tt.GradientEffects.parse,nn.ReturnMessageChainer.or(nn.ReturnMessageIfNot.isString,nn.ReturnMessageChainer.make(tt.GradientEffects.canParse,"invalid gradient effect: {0}")))]},Gt.prototype={click:null,dontfliplabel:null,sortDataPoint:null,effect:null,label:null,animation:null,tooltipradius:null,overradius:null,outerradius:null,innerradius:null,labelorientation:null,labelradius:null,__class__:Gt},Wt=function(){this.label=new hn,this.heatmapColorStart=Wt.defaultStartColor,this.heatmapColorEnd=Wt.defaultEndColor,this.displayRowTotal=this.displayColumnTotal=this.displayHeatmap=!0,this.columnAxes=1},Er["rg.info.InfoPivotTable"]=Wt,Wt.__name__=["rg","info","InfoPivotTable"],Wt.filters=function(){return[nn.FilterDescription.toInt("columnaxes",["columnAxes"]),nn.FilterDescription.toBool("displayheatmap",["displayHeatmap"]),nn.FilterDescription.toBool("displaycolumntotal",["displayColumnTotal"]),nn.FilterDescription.toBool("displayrowtotal"
,["displayRowTotal"]),nn.FilterDescription.toTry("startcolor",["heatmapColorStart"],function(e){return kn.Hsl.toHsl(pt.parse(e,Wt.defaultStartColor.hex("#")))},"value is not a parsable color '{0}'"),nn.FilterDescription.toTry("endcolor",["heatmapColorEnd"],function(e){return kn.Hsl.toHsl(pt.parse(e,Wt.defaultEndColor.hex("#")))},"value is not a parsable color '{0}'"),nn.FilterDescription.toInfo("label",null,hn),nn.FilterDescription.toFunction("click"),nn.FilterDescription.toExpressionFunction("cellclass",[null,"stats"]),nn.FilterDescription.toExpressionFunction("valueclass",["value","header"]),nn.FilterDescription.toExpressionFunction("headerclass",["header"]),nn.FilterDescription.toExpressionFunction("totalclass",["value","values"])]},Wt.prototype={totalclass:null,headerclass:null,valueclass:null,cellclass:null,click:null,columnAxes:null,displayRowTotal:null,displayColumnTotal:null,displayHeatmap:null,heatmapColorEnd:null,heatmapColorStart:null,label:null,__class__:Wt},Yt=function(){this.label=new pn,this.idproperty="id",this.weightproperty="count",this.parentsproperty="parents",this.stackbackedges=!0,this.thinbackedges=!1},Er["rg.info.InfoSankey"]=Yt,Yt.__name__=["rg","info","InfoSankey"],Yt.filters=function(){return[nn.FilterDescription.toInfo("label",null,pn),nn.FilterDescription.toFloat("layerwidth",["layerWidth"]),nn.FilterDescription.toFloat("nodespacing",["nodeSpacing"]),nn.FilterDescription.toFloat("dummyspacing",["dummySpacing"]),nn.FilterDescription.toFloat("extrawidth",["extraWidth"]),nn.FilterDescription.toFloat("backedgespacing",["backEdgeSpacing"]),nn.FilterDescription.toFloat("extraheight",["extraHeight"]),nn.FilterDescription.toFloat("extraradius",["extraRadius"]),nn.FilterDescription.toFloat("imagewidth",["imageWidth"]),nn.FilterDescription.toFloat("imageheight",["imageHeight"]),nn.FilterDescription.toFloat("imagespacing",["imageSpacing"]),nn.FilterDescription.toFloat("labelnodespacing",["labelNodeSpacing"]),nn.FilterDescription.toExpressionFunction("imagepath",[null],["imagePath"]),nn.FilterDescription.toFunction("click",["click"]),nn.FilterDescription.toFunction("clickedge",["clickEdge"]),nn.FilterDescription.toObject("layoutmap"),nn.FilterDescription.toStr("layoutmethod"),nn.FilterDescription.toExpressionFunctionOrString("nodeclass",[null,"stats"]),nn.FilterDescription.toExpressionFunctionOrString("edgeclass",[null,"stats"]),nn.FilterDescription.toExpressionFunctionOrBool("displayentry",[null,"stats"]),nn.FilterDescription.toExpressionFunctionOrBool("displayexit",[null,"stats"]),nn.FilterDescription.toBool("stackbackedges"),nn.FilterDescription.toBool("thinbackedges")]},Yt.prototype={thinbackedges:null,stackbackedges:null,displayexit:null,displayentry:null,edgeclass:null,nodeclass:null,layoutmethod:null,clickEdge:null,click:null,layoutmap:null,imagePath:null,labelNodeSpacing:null,imageSpacing:null,imageHeight:null,imageWidth:null,extraRadius:null,extraHeight:null,backEdgeSpacing:null,extraWidth:null,dummySpacing:null,nodeSpacing:null,layerWidth:null,parentsproperty:null,weightproperty:null,idproperty:null,label:null,__class__:Yt},Zt=function(){rn.call(this),this.segment=new on,this.symbol=function(){return et.SymbolCache.cache.get("circle",16)}},Er["rg.info.InfoScatterGraph"]=Zt,Zt.__name__=["rg","info","InfoScatterGraph"],Zt.filters=function(){return[nn.FilterDescription.toExpressionFunctionOrString("symbol",[null,"stats"]),nn.FilterDescription.toTemplateFunction("symbolstyle",[null,"stats"],["symbolStyle"]),nn.FilterDescription.simplified("segmenton",["segment"],function(e){return Bt.feed(new on,{on:e})},nn.ReturnMessageIfNot.isString),nn.FilterDescription.toInfo("segment",null,on)].concat(rn.filters())},Zt.__super__=rn,Zt.prototype=yr(rn.prototype,{segment:null,symbolStyle:null,symbol:null,__class__:Zt}),on=function(){this.values=[]},Er["rg.info.InfoSegment"]=on,on.__name__=["rg","info","InfoSegment"],on.filters=function(){return[nn.FilterDescription.toStr("on"),nn.FilterDescription.toFunction("transform"),nn.FilterDescription.toFunction("scale"),nn.FilterDescription.toArray("values")]},on.prototype={values:null,scale:null,transform:null,on:null,__class__:on},en=function(){rn.call(this),this.segment=new on,this.interpolation=Mn.LineInterpolator.Cardinal(),this.effect=tt.StreamEffect.GradientVertical(1.25)},Er["rg.info.InfoStreamGraph"]=en,en.__name__=["rg","info","InfoStreamGraph"],en.filters=function(){return[nn.FilterDescription.toTry("interpolation",null,function(e){return Mn.LineInterpolators.parse(e)},"value is expected to be a valid interpolation string, it is '{0}'"),nn.FilterDescription.toTry("effect",null,function(e){return tt.StreamEffects.parse(e)},"value is expected to be a valid effect string, it is '{0}'"),nn.FilterDescription.simplified("segmenton",["segment"],function(e){return Bt.feed(new on,{on:e})},nn.ReturnMessageIfNot.isString),nn.FilterDescription.toInfo("segment",null,on)].concat(rn.filters())},en.__super__=rn,en.prototype=yr(rn.prototype,{segment:null,effect:null,interpolation:null,__class__:en}),gn=function(){this.variableType=yn.Unknown},Er["rg.info.InfoVariable"]=gn,gn.__name__=["rg","info","InfoVariable"],gn.filters=function(){return[nn.FilterDescription.toStr("type"),nn.FilterDescription.custom("view",["min"],function(e){return!ar.__instanceof(e,Array)||!gn.testViewValue(e[0])?nn.TransformResult.Failure(new On.Message("value is expected to be an array of two items but is '{0}'",[e])):nn.TransformResult.Success(e[0])}),nn.FilterDescription.custom("view",["max"],function(e){return!ar.__instanceof(e,Array)||!gn.testViewValue(e[1])?nn.TransformResult.Failure(new On.Message("value is expected to be an array of two items but is '{0}'",[e])):nn.TransformResult.Success(e[1])}),nn.FilterDescription.toArray("values"),nn.FilterDescription.custom("values",["min"],function(e){return ar.__instanceof(e,Array)?nn.TransformResult.Success(e[0]):nn.TransformResult.Failure(new On.Message("values is expected to be an array"))}),nn.FilterDescription.custom("values",["max"],function(e){return ar.__instanceof(e,Array)?(e=ar.__cast(e,Array),nn.TransformResult.Success(e[e.length-1])):nn.TransformResult.Failure(new On.Message("values is expected to be an array"))}),nn.FilterDescription.custom("groupby",["groupBy"],function(e){return!ar.__instanceof(e,String)||!ut.isValidGroupBy(e)?nn.TransformResult.Failure(new On.Message("value is expected to be a valid string periodicity but is '{0}'",[e])):nn.TransformResult.Success(e)}),nn.FilterDescription.custom("variable",["variableType"],function(e){var t=null==e?null:(""+Qr.string(e)).toLowerCase();return xr.exists(["independent","dependent"],t)?nn.TransformResult.Success(ti.createEnum(yn,Zr.ucfirst(t.toLowerCase()),[])):nn.TransformResult.Failure(new On.Message("value is expected to be an 'independent' or 'dependent' but is '{0}'",[e]))}),nn.FilterDescription.toTry("scalemode",["scaleDistribution"],function(e){return ti.createEnum(B,"Scale"+Zr.ucfirst((""+Qr.string(e)).toLowerCase()),[])},"value is expected to be a valid scale distribution value but is '{0}'")]},gn.testViewValue=function(e){return null==e||ni.isPrimitive(e)||ar.__instanceof(e,Date)||Kr.isFunction(e)},gn.__super__=Bt,gn.prototype=yr(Bt.prototype,{scaleDistribution:null,variableType:null,groupBy:null,values:null,max:null,min:null,type:null,__class__:gn}),yn={__ename__:["rg","info","VariableType"],__constructs__:["Unknown","Independent","Dependent"],Unknown:["Unknown",0]},yn.Unknown.toString=Sr,yn.Unknown.__enum__=yn,yn.Independent=["Independent",1],yn.Independent.toString=Sr,yn.Independent.__enum__=yn,yn.Dependent=["Dependent",2],yn.Dependent.toString=Sr,yn.Dependent.__enum__=yn,Ft=function(){},Er["rg.info.InfoVisualizationOption"]=Ft,Ft.__name__=["rg","info","InfoVisualizationOption"],Ft.filters=function(){return[nn.FilterDescription.toInfoArray("axes",["variables"],gn),nn.FilterDescription.toObject("options")]},Ft.prototype={options:null,variables:null,__class__:Ft},Rt=function(){this.replace=!0},Er["rg.info.InfoVisualizationType"]=Rt,Rt.__name__=["rg","info","InfoVisualizationType"],Rt.filters=function(){return[nn.FilterDescription.custom("visualization",["type"],function(e){var t=null==e?null:(""+Qr.string(e)).toLowerCase();return xr.exists(y.visualizations,t)?nn.TransformResult.Success(t):nn.TransformResult.Failure(new On.Message("invalid visualization type '{0}'",e))}),nn.FilterDescription.toBool("replace")]},Rt.prototype={type:null,replace:null,__class__:Rt},nn.EmptyTransformer=function(e){this.mapto=e},Er["rg.info.filter.EmptyTransformer"]=nn.EmptyTransformer,nn.EmptyTransformer.__name__=["rg","info","filter","EmptyTransformer"],nn.EmptyTransformer.__interfaces__=[nn.ITransformer],nn.EmptyTransformer.prototype={transform:function(e){return nn.TransformResult.Success(new nn.Pairs([this.mapto],[e]))},mapto:null,__class__:nn.EmptyTransformer},nn.FilterDescription=function(e,t){this.name=e,this.transformer=null==t?new nn.EmptyTransformer(e):t},Er["rg.info.filter.FilterDescription"]=nn.FilterDescription,nn.FilterDescription.__name__=["rg","info","filter","FilterDescription"],nn.FilterDescription.toBool=function(e,t){return nn.FilterDescription.pair(e,t,nn.TransformerBool.instance)},nn.FilterDescription.toInt=function(e,t){return nn.FilterDescription.pair(e,t,nn.TransformerInt.instance)},nn.FilterDescription.toFloat=function(e,t){return nn.FilterDescription.pair(e,t,nn.TransformerFloat.instance)},nn.FilterDescription.toStr=function(e,t){return nn.FilterDescription.pair(e,t,nn.TransformerString.instance)},nn.FilterDescription.toStrOrNull=function(e,t){return nn.FilterDescription.custom(e,t,function(e){return null==e?nn.TransformResult.Success(null):nn.TransformerString.instance.transform(e)})},nn.FilterDescription.toArray=function(e,t){return nn.FilterDescription.custom(e,t,function(e){return ar.__instanceof(e,Array)?nn.TransformResult.Success(e):nn.TransformResult.Failure(new On.Message("expected array but was '{0}'",e))})},nn.FilterDescription.toObject=function(e,t){return nn.FilterDescription.pair(e,t,nn.TransformerObject.instance)},nn.FilterDescription.toFunction=function(e,t){return nn.FilterDescription.pair(e,t,nn.TransformerFunction.instance)},nn.FilterDescription.toTemplateFunction=function(e,t,n){return nn.FilterDescription.pair(e,n,new nn.TransformerTemplateToFunction(t))},nn.FilterDescription.toExpressionFunction=function(e,t,n){return nn.FilterDescription.pair(e,n,new nn.TransformerExpressionToFunction(t))},nn.FilterDescription.toInfo=function(e,t,n,r){return nn.FilterDescription.simplified(e,t,function(e){var t=ti.createInstance(n,[]);return null!=r&&r(t),Bt.feed(t,e)},nn.ReturnMessageIfNot.isObject)},nn.FilterDescription.toInfoArray=function(e,t,n){return nn.FilterDescription.custom(e,t,function(e){if(!ar.__instanceof(e,Array)){if(!Kr.isObject(e)||null!=ti.getClass(e))return nn.TransformResult.Failure(new On.Message("value must be either an array of objects or an object but is {0}",[e]));e=[e]}return nn.TransformResult.Success(e.map(function(e){var t=ti.createInstance(n,[]);return Bt.feed(t,e)}))})},nn.FilterDescription.toTry=function(e,t,n,r){return nn.FilterDescription.custom(e,t,function(e){try{return nn.TransformResult.Success(n(e))}catch(t){return nn.TransformResult.Failure(new On.Message(r,[e]))}})},nn.FilterDescription.toDataFunctionFromArray=function(e,t){return nn.FilterDescription.custom(e,t,nn.TransformerChainer.onResult((rs=nn.TransformerArray.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(function(t){return t(e)})},function(){return nn.TransformResult.Failure(new On.Message("parameter must be an array of values"))}))},nn.FilterDescription.toLoaderFunction=function(e,t){return nn.FilterDescription.custom(e,t,nn.TransformerChainer.onResult((rs=nn.TransformerFunction.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(e)},function(e){var t=Kr.field(e,"execute");return null!=t&&Kr.isFunction(t)?nn.TransformResult.Success(function(n){t.apply(e,[n])}):nn.TransformResult.Failure(new On.Message("parameter must be an array of values"))}))},nn.FilterDescription.toFunctionOrBool=function(e,t){return nn.FilterDescription.custom(e,t,nn.TransformerChainer.onResult((rs=nn.TransformerFunction.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(e)},function(e){return nn.TransformerChainer.onResult((rs=nn.TransformerBool.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(function(){return e})},function(){return nn.TransformResult.Failure(new On.Message("parameter should be a boolean value or a function returning a boolean value"))})(e)}))},nn.FilterDescription.toExpressionFunctionOrBool=function(e,t,n){return nn.FilterDescription.custom(e,n,nn.TransformerChainer.onResult((rs=new nn.TransformerExpressionToFunction(t),wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(e)},function(e){return nn.TransformerChainer.onResult((rs=nn.TransformerBool.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(function(){return e})},function(){return nn.TransformResult.Failure(new On.Message("parameter should be a boolean value or a function returning a boolean value"))})(e)}))},nn.FilterDescription.toFunctionOrFloat=function(e,t){return nn.FilterDescription.custom(e,t,nn.TransformerChainer.onResult((rs=nn.TransformerFunction.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(e)},function(e){return nn.TransformerChainer.onResult((rs=nn.TransformerFloat.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(function(){return e})},function(){return nn.TransformResult.Failure(new On.Message("parameter should be a float value or a function returning a float value"))})(e)}))},nn.FilterDescription.toExpressionFunctionOrFloat=function(e,t,n){return nn.FilterDescription.custom(e,n,nn.TransformerChainer.onResult((rs=new nn.TransformerExpressionToFunction(t),wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(e)},function(e){return nn.TransformerChainer.onResult((rs=nn.TransformerFloat.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(function(){return e})},function(){return nn.TransformResult.Failure(new On.Message("parameter should be a float value or a function returning a float value"))})(e)}))},nn.FilterDescription.toFunctionOrNull=function(e,t){return nn.FilterDescription.custom(e,t,nn.TransformerChainer.onResult((rs=nn.TransformerFunction.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(e)},function(e){return null==e?nn.TransformResult.Success(null):nn.TransformResult.Failure(new On.Message("parameter should be a function or null"))}))},nn.FilterDescription.toExpressionFunctionOrNull=function(e,t,n){return nn.FilterDescription.custom(e,n,nn.TransformerChainer.onResult((rs=new nn.TransformerExpressionToFunction(t),wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(e)},function(e){return null==e?nn.TransformResult.Success(null):nn.TransformResult.Failure(new On.Message("parameter should be a function or null"))}))},nn.FilterDescription.toTemplateFunctionOrNull=function(e,t,n){return nn.FilterDescription.custom(e,n,nn.TransformerChainer.onResult((rs=new nn.TransformerTemplateToFunction(t),wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(e)},function(e){return null==e?nn.TransformResult.Success(null):nn.TransformResult.Failure(new On.Message("parameter should be a function or null"))}))},nn.FilterDescription.toFunctionOrString=function(e,t){return nn.FilterDescription.custom(e,t,nn.TransformerChainer.onResult((rs=nn.TransformerFunction.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(e)},function(e){return nn.TransformerChainer.onResult((rs=nn.TransformerString.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(function(){return e})},function(){return nn.TransformResult.Failure(new On.Message("parameter should be a string value or a function returning a string value"))})(e)}))},nn.FilterDescription.toExpressionFunctionOrString=function(e,t,n){return nn.FilterDescription.custom(e,n,nn.TransformerChainer.onResult((rs=new nn.TransformerExpressionToFunction(t),wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(e)},function(e){return nn.TransformerChainer.onResult((rs=nn.TransformerString.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(function(){return e})},function(){return nn.TransformResult.Failure(new On.Message("parameter should be a string value or a function returning a string value"))})(e)}))},nn.FilterDescription.toTemplateFunctionOrString=function(e,t,n){return nn.FilterDescription.custom(e,n,nn.TransformerChainer.onResult((rs=new nn.TransformerTemplateToFunction(t),wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(e)},function(e){return nn.TransformerChainer.onResult((rs=nn.TransformerString.instance,wr(rs,rs.transform)),function(e){return nn.TransformResult.Success(function(){return e})},function(){return nn.TransformResult.Failure(new On.Message("parameter should be a string value or a function returning a string value"))})(e)}))},nn.FilterDescription.custom=function(e,t,n){return nn.FilterDescription.pair(e,t,new nn.CustomTransformer(n))},nn.FilterDescription.simplified=function(e,t,n,r){return nn.FilterDescription.pair(e,t,nn.CustomTransformer.simplified(n,r))},nn.FilterDescription.pair=function(e,t,n){return null==t&&(t=[e]),new nn.FilterDescription(e,new nn.PairTransformer(t,n))},nn.FilterDescription.prototype={transformer:null,name:null,__class__:nn.FilterDescription},nn.CustomTransformer=function(e){this.transformer=e},Er["rg.info.filter.CustomTransformer"]=nn.CustomTransformer,nn.CustomTransformer.__name__=["rg","info","filter","CustomTransformer"],nn.CustomTransformer.__interfaces__=[nn.ITransformer],nn.CustomTransformer.simplified=function(e,t){return new nn.CustomTransformer(function(n){var r=t(n);return null==r?nn.TransformResult.Success(e(n)):nn.TransformResult.Failure(new On.Message(r,[n]))})},nn.CustomTransformer.prototype={transform:function(e){return this.transformer(e)},transformer:null,__class__:nn.CustomTransformer},nn.TransformerChainer=function(){},Er["rg.info.filter.TransformerChainer"]=nn.TransformerChainer,nn.TransformerChainer.__name__=["rg","info","filter","TransformerChainer"],nn.TransformerChainer.onResult=function(e,t,n){return function(r){var i=e(r);switch(i[1]){case 0:return t(i[2],r);case 1:return n(r,i[2])}}},nn.TransformerArray=function(){},Er["rg.info.filter.TransformerArray"]=nn.TransformerArray,nn.TransformerArray.__name__=["rg","info","filter","TransformerArray"],nn.TransformerArray.__interfaces__=[nn.ITransformer],nn.TransformerArray.prototype={transform:function(e){return ar.__instanceof(e,Array)?nn.TransformResult.Success(e):nn.TransformResult.Failure(new On.Message("value {0} is not an array",[e]))},__class__:nn.TransformerArray},nn.TransformerObject=function(){},Er["rg.info.filter.TransformerObject"]=nn.TransformerObject,nn.TransformerObject.__name__=["rg","info","filter","TransformerObject"],nn.TransformerObject.__interfaces__=[nn.ITransformer],nn.TransformerObject.prototype={transform:function(e){return Kr.isObject(e)&&null==ti.getClass(e)?nn.TransformResult.Success(e):nn.TransformResult.Failure(new On.Message("value {0} is not an object",[e]))},__class__:nn.TransformerObject},nn.TransformerString=function(){},Er["rg.info.filter.TransformerString"]=nn.TransformerString,nn.TransformerString.__name__=["rg","info","filter","TransformerString"],nn.TransformerString.__interfaces__=[nn.ITransformer],nn.TransformerString.prototype={transform:function(e){switch(ti["typeof"](e)[1]){case 3:return nn.TransformResult.Success(e?"true":"false");case 1:case 2:return nn.TransformResult.Success(""+Qr.string(e));case 6:return nn.TransformResult.Success(Qr.string(e));default:return nn.TransformResult.Failure(new On.Message("unable to tranform {0} into a string value",[e]))}},__class__:nn.TransformerString},nn.TransformerBool=function(){},Er["rg.info.filter.TransformerBool"]=nn.TransformerBool,nn.TransformerBool.__name__=["rg","info","filter","TransformerBool"],nn.TransformerBool.__interfaces__=[nn.ITransformer],nn.TransformerBool.prototype={transform:function(e){var t=ti["typeof"](e);switch(t[1]){case 3:return nn.TransformResult.Success(e);case 1:case 2:return nn.TransformResult.Success(0!=e);case 6:return"String"==ti.getClassName(t[2])?Tr.canParse(e)?nn.TransformResult.Success(Tr.parse(e)):nn.TransformResult.Failure(new On.Message("unable to tranform the string '{0}'' into a boolean value",[e])):nn.TransformResult.Failure(new On.Message("unable to tranform the instance of {0} into a boolean value",[e]));default:return nn.TransformResult.Failure(new On.Message("unable to tranform {0} into a boolean value",[e]))}},__class__:nn.TransformerBool},nn.TransformerInt=function(){},Er["rg.info.filter.TransformerInt"]=nn.TransformerInt,nn.TransformerInt.__name__=["rg","info","filter","TransformerInt"],nn.TransformerInt.__interfaces__=[nn.ITransformer],nn.TransformerInt.prototype={transform:function(e){switch(ti["typeof"](e)[1]){case 3:return nn.TransformResult.Success(e?1:0);case 1:return nn.TransformResult.Success(e);case 2:return nn.TransformResult.Success(e|0);default:return ar.__instanceof(e,String)&&zr.canParse(e)?nn.TransformResult.Success(zr.parse(e)):nn.TransformResult.Failure(new On.Message("unable to tranform {0} into an integer value",[e]))}},__class__:nn.TransformerInt},nn.TransformerFloat=function(){},Er["rg.info.filter.TransformerFloat"]=nn.TransformerFloat,nn.TransformerFloat.__name__=["rg","info","filter","TransformerFloat"],nn.TransformerFloat.__interfaces__=[nn.ITransformer],nn.TransformerFloat.prototype={transform:function(e){switch(ti["typeof"](e)[1]){case 3:return nn.TransformResult.Success(e?1:0);case 1:case 2:return nn.TransformResult.Success(e);default:return ar.__instanceof(e,String)&&Hr.canParse(e)?nn.TransformResult.Success(Hr.parse(e)):nn.TransformResult.Failure(new On.Message("unable to tranform {0} into a float value",[e]))}},__class__:nn.TransformerFloat},nn.TransformerFunction=function(){},Er["rg.info.filter.TransformerFunction"]=nn.TransformerFunction,nn.TransformerFunction.__name__=["rg","info","filter","TransformerFunction"],nn.TransformerFunction.__interfaces__=[nn.ITransformer],nn.TransformerFunction.prototype={transform:function(e){return Kr.isFunction(e)?nn.TransformResult.Success(e):nn.TransformResult.Failure(new On.Message("not a function"))},__class__:nn.TransformerFunction},nn.TransformerTemplateToFunction=function(e){this.argumentsMap=e},Er["rg.info.filter.TransformerTemplateToFunction"]=nn.TransformerTemplateToFunction,nn.TransformerTemplateToFunction.__name__=["rg","info","filter","TransformerTemplateToFunction"],nn.TransformerTemplateToFunction.__interfaces__=[nn.ITransformer],nn.TransformerTemplateToFunction.prototype={transform:function(e){var t=this;if(ar.__instanceof(e,String)){var n=new Zi(e);return nn.TransformResult.Success(function(){return n.execute(nn.TransformerExpressionToFunction.extractValues(t.argumentsMap,arguments))})}return Kr.isFunction(e)?nn.TransformResult.Success(e):nn.TransformResult.Failure(new On.Message("not a function"))},argumentsMap:null,__class__:nn.TransformerTemplateToFunction},nn.TransformerExpressionToFunction=function(e){this.argumentsMap=e},Er["rg.info.filter.TransformerExpressionToFunction"]=nn.TransformerExpressionToFunction,nn.TransformerExpressionToFunction.__name__=["rg","info","filter","TransformerExpressionToFunction"],nn.TransformerExpressionToFunction.__interfaces__=[nn.ITransformer],nn.TransformerExpressionToFunction.extractValues=function(e,t){var n=e.length,r=new Br;r.set("ReportGrid",ReportGrid),r.set("format",ReportGrid.format),r.set("symbol",ReportGrid.symbol),r.set("humanize",ReportGrid.humanize),r.set("compare",ReportGrid.compare),r.set("Math",Math),r.set("null",null),r.set("true",!0);for(r.set("false",!1);0<=--n;){var i=e[n];if(null==i)for(var i=0,s=Kr.fields(t[n]);i<s.length;){var o=s[i];++i,r.set(o,Kr.field(t[n],o))}else r.set(i,t[n])}return r},nn.TransformerExpressionToFunction.prototype={transform:function(e){var t=this;if(ar.__instanceof(e,String)&&nn.TransformerExpressionToFunction.pattern.match(e)){var e=e.substr(e.indexOf("=")+1),n=(new er).parseString(e);return nn.TransformResult.Success(function(){return nn.TransformerExpressionToFunction.interp.variables=nn.TransformerExpressionToFunction.extractValues(t.argumentsMap,arguments),nn.TransformerExpressionToFunction.interp.execute(n)})}return Kr.isFunction(e)?nn.TransformResult.Success(e):nn.TransformResult.Failure(new On.Message("not a function"))},argumentsMap:null,__class__:nn.TransformerExpressionToFunction},nn.ReturnMessageIfNot=function(){},Er["rg.info.filter.ReturnMessageIfNot"]=nn.ReturnMessageIfNot,nn.ReturnMessageIfNot.__name__=["rg","info","filter","ReturnMessageIfNot"],nn.ReturnMessageIfNot.isBool=function(e){return ar.__instanceof(e,as)?null:"not a boolean"},nn.ReturnMessageIfNot.isString=function(e){return ar.__instanceof(e,String)?null:"not a string"},nn.ReturnMessageIfNot.isObject=function(e){return Kr.isObject(e)&&null==ti.getClass(e)?null:"not an object"},nn.ReturnMessageChainer=function(){},Er["rg.info.filter.ReturnMessageChainer"]=nn.ReturnMessageChainer,nn.ReturnMessageChainer.__name__=["rg","info","filter","ReturnMessageChainer"],nn.ReturnMessageChainer.make=function(e,t){return function(n){return e(n)?null:t}},nn.ReturnMessageChainer.or=function(e,t){return function(n){var r=e(n);return null==r?t(n):r}},nn.ReturnMessageChainer.and=function(e,t){return function(n){return null==e(n)&&null==t(n)}},nn.PairTransformer=function(e,t){this.names=e,this.valueTransformer=t},Er["rg.info.filter.PairTransformer"]=nn.PairTransformer,nn.PairTransformer.__name__=["rg","info","filter","PairTransformer"],nn.PairTransformer.__interfaces__=[nn.ITransformer],nn.PairTransformer.prototype={transform:function(e){e=this.valueTransformer.transform(e);switch(e[1]){case 0:var t=e[2];return nn.TransformResult.Success(new nn.Pairs(this.names,this.names.map(function(){return t})));case 1:return nn.TransformResult.Failure(e[2])}},valueTransformer:null,names:null,__class__:nn.PairTransformer},nn.Pairs=function(e,t){if(e.length!=t.length)throw new Tn.Error("names and values must have the same length",null,null,{fileName:"Pairs.hx",lineNumber:15,className:"rg.info.filter.Pairs",methodName:"new"});this.names=e,this.values=t},Er["rg.info.filter.Pairs"]=nn.Pairs,nn.Pairs.__name__=["rg","info","filter","Pairs"],nn.Pairs.prototype={iterator:function(){for(var e=[],t=0,n=this.names.length;t<n;){var r=t++;e.push({name:this.names[r],value:this.values[r]})}return Fr.iter(e)},values:null,names:null,__class__:nn.Pairs},nn.TransformResult={__ename__:["rg","info","filter","TransformResult"],__constructs__:["Success","Failure"]},nn.TransformResult.Success=function(e){return e=["Success",0,e],e.__enum__=nn.TransformResult,e.toString=Sr,e},nn.TransformResult.Failure=function(e){return e=["Failure",1,e],e.__enum__=nn.TransformResult,e.toString=Sr,e},wt=function(e,t){this.container=e,this.serviceUrl=t,this.tokenId=dt.getTokenId()},bt=void 0,Er["rg.interactive.RGDownloader"]=wt,wt.__name__=["rg","interactive","RGDownloader"],wt.getClassName=function(e){return e=e.attr("class").get(),e=Yr.trim((new Or("\\s+","g")).replace((new Or("(^rg$|^rg\\s+|\\s+rg\\s+|\\s+rg$)","g")).replace(e," ")," ")),""==e?null:e},wt.appendArgument=function(e,t,n){var r=0<=e.indexOf("?")?"&":"?";return e+r+t+"="+Yr.urlEncode(n)},wt.prototype={complete:function(e,t,n){n=_n.Json.decode(n),null!=n.error?null!=t&&t(n.error):e(n)&&(e=Kr.field(n.service,this.format),null!=this.tokenId&&(e=wt.appendArgument(e,"tokenId",this.tokenId)),e=wt.appendArgument(e,"forceDownload","true"),fr.window.location.href=e)},config:function(){var e=this.container.select("svg"),t=e.attr("width").getFloat(),e=e.attr("height").getFloat(),t='"cache":"1d","duration":"1d","width":'+t+',"height":'+e+',"formats":["'+wt.ALLOWED_FORMATS.join('","')+'"]';return null!=this.tokenId&&(t+=',"params":{"tokenId":true}'),"{"+t+"}"},html:function(){var e=this.findCssSources(),t=this.container.attr("class").get(),n=this.extractSvg(this.container.html().get());return'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<title></title>\n'+(null==e?"":e.map(function(e){return'<link href="'+e+'" rel="stylesheet" type="text/css" />'}).join("\n"))+'\n</head>\n<body>\n<div class="'+(null==t?"rg":t+" rg")+'">'+n+"</div>\n</body>\n</html>"},extractSvg:function(e){var t=new Or("<svg",""),n=new Or("</svg>","");return t.match(e),e=t.matchedRight(),n.match(e),"<svg"+n.matchedLeft()+"</svg>"},findCssSources:function(){return Oi.selectAll("link").filterNode(function(e){return"stylesheet"==e.rel}).mapNode(function(e){return e.href})},download:function(e,t,n,r){if(!xr.exists(wt.ALLOWED_FORMATS,e))throw new Tn.Error("The download format '{0}' is not correct",[e],null,{fileName:"RGDownloader.hx",lineNumber:33,className:"rg.interactive.RGDownloader",methodName:"download"});this.format=e,e=new Qn(this.url(e)),e.setHeader("Accept","application/json"),e.onError=null!=r?r:function(){},e.onData=function(e,t,n){return function(r){return e(t,n,r)}}(wr(this,this.complete),n,r),e.setParameter("html",this.html()),e.setParameter("config",this.config()),e.request(!0)},url:function(e){return Yr.replace(this.serviceUrl,"{ext}",e)},tokenId:null,format:null,container:null,serviceUrl:null,__class__:wt},bt=function(e,t){this.container=e,this.serviceUrl=t,this.tokenId=dt.getTokenId()},Er["rg.interactive.RGLegacyRenderer"]=bt,bt.__name__=["rg","interactive","RGLegacyRenderer"],bt.getIframeDoc=function(e){var t=null;return e.contentDocument?t=e.contentDocument:e.contentWindow?t=e.contentWindow.document:null!=fr.window.frames[e.name]&&(t=fr.window.frames[e.name].document),t},bt.isIE7orBelow=function(){return document.all&&!document.querySelector},bt.removeFunctions=function(e){for(var t=0,n=Kr.fields(e);t<n.length;){var r=n[t];++t;var i=Kr.field(e,r);Kr.isFunction(i)?Kr.deleteField(e,r):Kr.isObject(e)&&null==ti.getClass(e)&&bt.removeFunctions(i)}},bt.removeEmpties=function(e){for(var t=0,n=Kr.fields(e);t<n.length;){var r=n[t];++t;var i=Kr.field(e,r);Kr.isObject(i)&&null==ti.getClass(i)?(bt.removeEmpties(i),0==Kr.fields(i).length&&Kr.deleteField(e,r)):null==i&&Kr.deleteField(e,r)}},bt.prototype={config:function(e){return"{"+('"cache":"1d","duration":"1d","width":'+e.width+',"height":'+e.height+',"formats":["'+bt.FORMAT+'"]')+"}"},html:function(e,t,n){var t=_n.Json.encode(t),r=this.findJsSources(),i=this.findCssSources(),s=this.container.attr("class").get();return"<!DOCTYPE html>\n<html>\n<head>\n<title></title>\n"+(null==r?"":r.map(function(e){return'<script src="'+e+'" type="text/javascript"></script>'}).join("\n"))+(null==i?"":i.map(function(e){return'<link href="'+e+'" rel="stylesheet" type="text/css" />'}).join("\n"))+'\n<script type="text/javascript">\nfunction __RG__render()\n{\nReportGrid.chart("#'+e+'", '+t+');\n}\n</script>\n</head>\n<body onload="__RG__render()">\n<div id="'+e+'" class="'+(null==s?"rg":s+" rg")+'" style="margin:0;width:'+n.width+"px;height:"+n.height+'px;"></div>\n</body>\n</html>'},findCssSources:function(){return Oi.selectAll("link").filterNode(function(e){return"stylesheet"==e.rel}).mapNode(function(e){return e.href})},findJsSources:function(){var e=new Or("reportgrid-[^.]+\\.js","");return Oi.selectAll("script").filterNode(function(t){return e.match(t.src)}).mapNode(function(e){return e.src})},normalizeParams:function(e){null==e.options&&(e.options={});var t=Lt.size(this.container,e.options,0);return e.options.width=t.width,e.options.height=t.height,bt.removeFunctions(e.options),bt.removeEmpties(e),Kr.deleteField(e,"load"),Kr.deleteField(e.options,"download"),e.options.forcelegacy=!1,t},writeToIframe:function(e,t){var n=bt.getIframeDoc(e);null!=n&&(n.open(),n.write('<html><head><title></title></head><body style="visibility:hidden;border:none" scroll="no">'+t+"</body></html>"),n.close())},createIframe:function(e,t){var n="rgiframe"+ ++bt.nextframeid;return this.container.append("iframe").attr("name").string(n).attr("id").string(n).attr("frameBorder").string("0").attr("scrolling").string("no").attr("width").string(e+"").attr("height").string(t+"").attr("marginwidth").string("0").attr("marginheight").string("0").attr("hspace").string("0").attr("vspace").string("0").attr("style").string("width:100%; border:0; height:100%; overflow:auto;").attr("src").string(bt.isIE7orBelow()?'javascript:\'<script>window.onload=function(){document.body.scroll="no";document.body.style.overflow="hidden";document.write(\\\'<script>document.domain=\\\\"'+
fr.document.domain+"\\\\\";<\\\\\\\\/script>\\');document.close();};<\\/script>'":"about:blank")},display:function(e){var t=this,n=this.normalizeParams(e),r=this.container.attr("id").get(),i=this.createIframe(n.width,n.height);null==r&&(r="rgchart");var s=this.url(),e=this.html(r,e,n),n=this.config(n),o='<form method="post" action="'+s+'" name="VIZ"><textarea name="html" style="width:40em;height:50%">'+e+'</textarea><textarea name="config" style="width:40em;height:50%">'+n+'</textarea><script type="text/javascript">\ndocument.VIZ.submit();\n</script>\n</form>';Yn.delay(function(){t.writeToIframe(i.node(),o)},100);if(bt.isIE7orBelow()){var u=i.node();u.attachEvent("onload",function(){var e=bt.getIframeDoc(u);e.body.scroll="no",e.body.style.overflow="hidden",e.body.style.border=0,e.body.style.margin=0,e.body.style.padding=0})}},url:function(){return Yr.replace(this.serviceUrl,"{ext}",bt.FORMAT)},tokenId:null,container:null,serviceUrl:null,__class__:bt},i={__ename__:["rg","layout","Anchor"],__constructs__:["Top","Bottom","Left","Right"]},r=void 0,s=void 0,o=void 0,u=void 0,a=void 0,f=void 0,i.Top=["Top",0],i.Top.toString=Sr,i.Top.__enum__=i,i.Bottom=["Bottom",1],i.Bottom.toString=Sr,i.Bottom.__enum__=i,i.Left=["Left",2],i.Left.toString=Sr,i.Left.__enum__=i,i.Right=["Right",3],i.Right.toString=Sr,i.Right.__enum__=i,s=function(e,t,n){this.container=n,n.classed().add("rg"),this.space=new rt.Space(this.width=e,this.height=t,n.append("div"))},Er["rg.layout.Layout"]=s,s.__name__=["rg","layout","Layout"],s.prototype={adjustPadding:function(){},feedOptions:function(e){this.mainPanelName=e.main,this.paddings=e.padding},paddings:null,suggestPanelPadding:function(e,t,n){if(null!=e&&(e=ni.as(e.frame,v),null!=e)){var r=e.disposition;switch(r[1]){case 0:var i=r[5],s=r[4],o=r[3],r=r[2];e.set_disposition(c.Fill(null==t?r:t,null==n?o:n,s,i));break;case 1:var i=r[6],s=r[5],u=r[4],o=r[3],r=r[2];e.set_disposition(c.FillPercent(null==t?r:t,null==n?o:n,u,s,i));break;case 2:i=r[4],o=r[3],r=r[2],e.set_disposition(c.FillRatio(null==t?r:t,null==n?o:n,i));break;case 3:i=r[4],o=r[3],r=r[2],e.set_disposition(c.Fixed(null==t?r:t,null==n?o:n,i))}}},suggestPanelSize:function(e,t){var n=ni.as(e.frame,v);if(null!=n){var r=n.disposition;switch(r[1]){case 3:n.set_disposition(c.Fixed(r[2],r[3],t))}}},destroy:function(){this.container.selectAll("*").remove()},suggestSize:function(e,t){var n=this.getPanel(e);null!=n&&this.suggestPanelSize(n,t)},getPanel:function(){return null},getContext:function(){return null},container:null,space:null,height:null,width:null,mainPanelName:null,__class__:s},o=function(e,t,n){s.call(this,e,t,n),this.titleOnTop=!0,this.right=!1,this.alternating=!0,this.yitems=[]},Er["rg.layout.LayoutCartesian"]=o,o.__name__=["rg","layout","LayoutCartesian"],o.__super__=s,o.prototype=yr(s.prototype,{adjustPadding:function(){var e=null==this.title&&null==this.paddings.top?8:this.paddings.top,t=(null==this.xtickmarks||!this.titleOnTop&&null==this.title)&&null==this.paddings.bottom?8:this.paddings.bottom,n=null==this.leftcontainer&&null==this.paddings.left?20:this.paddings.left,r=null==this.rightcontainer&&null==this.paddings.right?20:this.paddings.right;if(null!=n||null!=r)this.suggestPanelPadding(this.getMain(),n,r),this.suggestPanelPadding(this.bottommiddlecontainer,n,r);(null!=e||null!=t)&&this.suggestPanelPadding(this.middlecontainer,e,t)},feedOptions:function(e){s.prototype.feedOptions.call(this,e),this.titleOnTop=e.titleOnTop;switch(e.scalePattern[1]){case 0:this.alternating=this.right=!1;break;case 1:this.right=!0,this.alternating=!1;break;case 2:this.right=!1,this.alternating=!0}},getMain:function(){return null==this.main&&(this.main=this.getMiddleContainer().createPanelAt(1,c.Fill(0,0))),this.main},getXTickmarks:function(){if(null==this.xtickmarks){var e=this.getBottomMiddleContainer();this.xtickmarks=new u(e.createPanelAt(0,c.Fixed(0,0,0)),i.Top)}return this.xtickmarks},getBottomMiddleContainer:function(){if(null==this.bottommiddlecontainer){var e=this.getBottomContainer();this.bottomleft=e.createPanel(c.Fixed(0,0,0)),this.bottommiddlecontainer=e.createContainer(c.Fill(0,0),h.Vertical),this.bottommiddlecontainer.g.classed().add("axis-x"),this.bottomright=e.createPanel(c.Fixed(0,0,0))}return this.bottommiddlecontainer},getBottomContainer:function(){return null==this.bottomcontainer&&(this.bottomcontainer=this.getMainContainer().createContainerAt(1,c.Fixed(0,0,0),h.Horizontal)),this.bottomcontainer},getRightContainer:function(){return null==this.rightcontainer&&(this.getMain(),this.rightcontainer=this.getMiddleContainer().createContainer(c.Fixed(0,0,0),h.Horizontal)),this.rightcontainer},getLeftContainer:function(){return null==this.leftcontainer&&(this.leftcontainer=this.getMiddleContainer().createContainerAt(0,c.Fixed(0,0,0),h.Horizontal)),this.leftcontainer},getMiddleContainer:function(){return null==this.middlecontainer&&(this.middlecontainer=this.getMainContainer().createContainerAt(0,c.Fill(0,0),h.Horizontal)),this.middlecontainer},getMainContainer:function(){return null==this.maincontainer&&(this.maincontainer=this.space.createContainerAt(this.titleOnTop?1:0,c.Fill(0,0),h.Vertical)),this.maincontainer},getXTitle:function(){return null==this.xtitle&&(this.xtitle=new u(this.getBottomMiddleContainer().createPanel(c.Fixed(0,0,0)),i.Top)),this.xtitle},suggestLateralSize:function(e){for(var t=0,n=0,r=0,i=this.yitems;r<i.length;){var s=i[r];++r,n++,null!=s.container&&ti.enumEq(s.anchor,e)&&(t+=s.container.frame.width)}switch(e[1]){case 3:this.suggestSize("left",t),this.suggestSize("bottomleft",t);break;case 2:this.suggestSize("right",t),this.suggestSize("bottomright",t)}},suggestSize:function(e,t){if(this.isY(e)||this.isYTitle(e)){var n=this.getYItem(this.getYIndex(e));if(null!=n.container){var r=0;null!=n.context&&(this.isY(e)&&this.suggestPanelSize(n.context.panel,t),r+=n.context.panel.frame.width),null!=n.title&&(this.isYTitle(e)&&this.suggestPanelSize(n.title.panel,t),r+=n.title.panel.frame.width),this.suggestPanelSize(n.container,Math.round(r)),this.suggestLateralSize(n.anchor)}}else switch(s.prototype.suggestSize.call(this,e,t),e){case"x":case"xtitle":n=0,r=this.getPanel("x"),null!=r&&(n+=r.frame.height),r=this.getPanel("xtitle"),null!=r&&(n+=r.frame.height),s.prototype.suggestSize.call(this,"xtickmarks",n)}},isYTitle:function(e){return o.REYTITLE.match(e)},isY:function(e){return o.REYAXIS.match(e)},getYIndex:function(e){return o.REYINDEX.match(e)?Qr.parseInt(o.REYINDEX.matched(1)):-1},getYTitle:function(e){var t=this.getYItem(e);if(null==t.title){switch(t.anchor[1]){case 2:e=this.getYContainer(e).createPanel(c.Fixed(0,0,0));break;case 3:e=this.getYContainer(e).createPanelAt(0,c.Fixed(0,0,0));break;default:e=null}t.title=new u(e,t.anchor)}return t.title},getYContext:function(e){var t=this.getYItem(e);if(null==t.context){switch(t.anchor[1]){case 2:e=this.getYContainer(e).createPanelAt(0,c.Fixed(0,0,0));break;case 3:e=this.getYContainer(e).createPanel(c.Fixed(0,0,0));break;default:e=null}t.context=new u(e,t.anchor)}return t.context},getYContainer:function(e){var t=this.getYItem(e);return null==t.container&&(t.container=this.right||this.alternating&&0!=e%2?this.getRightContainer().createContainer(c.Fixed(0,0,0),h.Horizontal):this.getLeftContainer().createContainerAt(0,c.Fixed(0,0,0),h.Horizontal),t.container.g.classed().add("group-"+e)),t.container},getYItem:function(e){return null==this.yitems[e]&&(this.yitems[e]={container:null,context:null,title:null,anchor:this.right||this.alternating&&0!=e%2?i.Left:i.Right}),this.yitems[e]},getPanel:function(e){switch(e){case"main":return this.getMain();case"xtickmarks":return this.getBottomContainer();case"left":return this.getLeftContainer();case"right":return this.getRightContainer();case"bottomleft":return this.bottomleft;case"bottomright":return this.bottomright;default:return e=this.getContext(e),null==e?null:e.panel}},getContext:function(e){if(this.isY(e))return this.getYContext(this.getYIndex(e));if(this.isYTitle(e))return this.getYTitle(this.getYIndex(e));switch(e){case"title":return null==this.title&&(this.title=new u(this.space.createPanelAt(this.titleOnTop?0:1,c.Fixed(0,0,0)),this.titleOnTop?i.Bottom:i.Top)),this.title;case"x":return this.getXTickmarks();case"xtitle":return this.getXTitle();default:return null}},xtitle:null,yitems:null,alternating:null,right:null,title:null,xtickmarks:null,bottomright:null,bottomleft:null,middlecontainer:null,maincontainer:null,bottommiddlecontainer:null,bottomcontainer:null,rightcontainer:null,leftcontainer:null,titleOnTop:null,main:null,__class__:o}),a=function(e,t,n){s.call(this,e,t,n),this.titleOnTop=!0},Er["rg.layout.LayoutSimple"]=a,a.__name__=["rg","layout","LayoutSimple"],a.__super__=s,a.prototype=yr(s.prototype,{feedOptions:function(e){s.prototype.feedOptions.call(this,e),this.titleOnTop=e.titleOnTop},getTitle:function(){return null==this.title&&(this.title=new u(this.space.createPanelAt(this.titleOnTop?0:1,c.Fixed(0,0,20)),this.titleOnTop?i.Bottom:i.Top)),this.title},title:null,getPanel:function(e){switch(e){case"main":return null==this.main&&(this.main=this.space.createPanelAt(this.titleOnTop?1:0,c.Fill(0,0))),this.main;case"title":return this.getTitle().panel;default:return null}},getContext:function(e){switch(e){case"title":return null!=this.title?null:this.getTitle();default:return null}},titleOnTop:null,main:null,__class__:a}),f=function(e,t,n){s.call(this,e,t,n),this.titleOnTop=!0},Er["rg.layout.LayoutX"]=f,f.__name__=["rg","layout","LayoutX"],f.__super__=s,f.prototype=yr(s.prototype,{adjustPadding:function(){var e=null==this.title&&null==this.paddings.top?8:this.paddings.top,t=(null==this.xtickmarks||!this.titleOnTop&&null==this.title)&&null==this.paddings.bottom?8:this.paddings.bottom,n=null==this.paddings.left?20:this.paddings.left,r=null==this.paddings.right?20:this.paddings.right;if(null!=n||null!=r)this.suggestPanelPadding(this.getMain(),n,r),this.suggestPanelPadding(this.bottommiddlecontainer,n,r);(null!=e||null!=t)&&this.suggestPanelPadding(this.middlecontainer,e,t)},feedOptions:function(e){s.prototype.feedOptions.call(this,e),this.titleOnTop=e.titleOnTop},getMain:function(){return null==this.main&&(this.main=this.getMiddleContainer().createPanelAt(1,c.Fill(0,0))),this.main},getXTickmarks:function(){if(null==this.xtickmarks){var e=this.getBottomMiddleContainer();this.xtickmarks=new u(e.createPanelAt(0,c.Fixed(0,0,0)),i.Top)}return this.xtickmarks},getBottomMiddleContainer:function(){return null==this.bottommiddlecontainer&&(this.bottommiddlecontainer=this.getBottomContainer().createContainer(c.Fill(0,0),h.Vertical),this.bottommiddlecontainer.g.classed().add("axis-x")),this.bottommiddlecontainer},getBottomContainer:function(){return null==this.bottomcontainer&&(this.bottomcontainer=this.getMainContainer().createContainerAt(1,c.Fixed(0,0,0),h.Horizontal)),this.bottomcontainer},getMiddleContainer:function(){return null==this.middlecontainer&&(this.middlecontainer=this.getMainContainer().createContainerAt(0,c.Fill(0,0),h.Horizontal)),this.middlecontainer},getMainContainer:function(){return null==this.maincontainer&&(this.maincontainer=this.space.createContainerAt(this.titleOnTop?1:0,c.Fill(0,0),h.Vertical)),this.maincontainer},getXTitle:function(){return null==this.xtitle&&(this.xtitle=new u(this.getBottomMiddleContainer().createPanel(c.Fixed(0,0,0)),i.Top)),this.xtitle},suggestSize:function(e,t){s.prototype.suggestSize.call(this,e,t);switch(e){case"x":case"xtitle":var n=0,r=this.getPanel("x");null!=r&&(n+=r.frame.height),r=this.getPanel("xtitle"),null!=r&&(n+=r.frame.height),s.prototype.suggestSize.call(this,"xtickmarks",n)}},getPanel:function(e){switch(e){case"main":return this.getMain();case"xtickmarks":return this.getBottomContainer();default:return e=this.getContext(e),null==e?null:e.panel}},getContext:function(e){switch(e){case"title":return null==this.title&&(this.title=new u(this.space.createPanelAt(this.titleOnTop?0:1,c.Fixed(0,0,0)),this.titleOnTop?i.Bottom:i.Top)),this.title;case"x":return this.getXTickmarks();case"xtitle":return this.getXTitle();default:return null}},xtitle:null,title:null,xtickmarks:null,middlecontainer:null,maincontainer:null,bottommiddlecontainer:null,bottomcontainer:null,titleOnTop:null,main:null,__class__:f}),u=function(e,t){this.panel=e,this.anchor=t},Er["rg.layout.PanelContext"]=u,u.__name__=["rg","layout","PanelContext"],u.prototype={anchor:null,panel:null,__class__:u},r={__ename__:["rg","layout","ScalePattern"],__constructs__:["ScalesBefore","ScalesAfter","ScalesAlternating"],ScalesBefore:["ScalesBefore",0]},r.ScalesBefore.toString=Sr,r.ScalesBefore.__enum__=r,r.ScalesAfter=["ScalesAfter",1],r.ScalesAfter.toString=Sr,r.ScalesAfter.__enum__=r,r.ScalesAlternating=["ScalesAlternating",2],r.ScalesAlternating.toString=Sr,r.ScalesAlternating.__enum__=r,Y=function(e,t){this._async=e,this._first=t,this._store=new Br},G=void 0,Z=void 0,Er["rg.query.BaseQuery"]=Y,Y.__name__=["rg","query","BaseQuery"],Y.asyncTransform=function(e){return function(t,n){for(var r=0,i=t.length;r<i;){var s=r++;t[s]=e(t[s])}n(t)}},Y.stackAsyncTransform=function(e){return function(t,n){n(e(t))}},Y.prototype={_this:function(e){return e},toString:function(){return ti.getClassName(ti.getClass(this)).split(".").pop()+(" [next: "+Qr.string(null!=this._next)+", async: "+Qr.string(null!=this._async)+"]")},_createQuery:function(e,t){return new Y(e,t)},_query:function(e){return e},execute:function(e){this._first.execute(e)},stackClear:function(){return this.stackTransform(function(){return[]})},stackRetrieve:function(e){var t=this;return null==e&&(e=""),this.stackTransform(function(n){return n.concat(t._first._store.get(e))})},stackSortValue:function(e,t){null==t&&(t=!0);var n=function(t){return t.reduce(function(t,n){return t+Kr.field(n,e)},0)};return this.stackSort(function(e,r){return(t?1:-1)*(n(e)-n(r))})},stackSort:function(e){return this.stackTransform(function(t){return t.sort(e),t})},stackStore:function(e){var t=this;return null==e&&(e=""),this.stackTransform(function(n){return t._first._store.set(e,n.slice()),n})},stackReverse:function(){return this.stackAsync(Y.stackAsyncTransform(function(e){return e.reverse(),e}))},stackRotate:function(e){var t=Z.rotate(e);return this.stackAsync(Y.stackAsyncTransform(function(e){return t(e)}))},split:function(e){if(ar.__instanceof(e,String))var t=e,e=function(e){return Kr.field(e,t)};return this.stackAsync(Y.stackAsyncTransform(function(t){for(var n=[],r=0;r<t.length;){var i=t[r];++r,n=n.concat(Z.split(i,e))}return n}))},stackKeep:function(e){return null==e&&(e=1),this.stackAsync(Y.stackAsyncTransform(function(t){return t.slice(0,e)}))},stackDiscard:function(e){return null==e&&(e=1),this.stackAsync(Y.stackAsyncTransform(function(t){for(var n=0;n<e;)n++,t.pop();return t}))},stackMerge:function(){return this.stackAsync(Y.stackAsyncTransform(function(e){return[xr.flatten(e)]}))},fold:function(e,t){return this.transform(function(n){var r=[],i=Kr.isFunction(e)?e(n,r):e;return n.forEach(function(e){i=t(i,e,r)}),r})},unique:function(e){return null==e&&(e=_r.same),this.transform(Z.uniquef(e))},reverse:function(){return this.transform(Z.reverse)},limit:function(e,t){return null==t&&(t=e,e=0),this.transform(Z.limit(e,t))},sortValues:function(e){for(var t=[],n=[],r=0,i=Kr.fields(e);r<i.length;){var s=i[r];++r,t.push(s),n.push(0!=Kr.field(e,s))}return this.sort(function(e,r){for(var i,s=0,o=t.length;s<o;){var u=s++;i=t[u],i=(n[u]?1:-1)*_r.compare(Kr.field(e,i),Kr.field(r,i));if(0!=i)return i}return 0})},sortValue:function(e,t){var n={};return n[e]=null==t?!0:t,this.sortValues(n)},sort:function(e){return this.transform(Z.sort(e))},filterValue:function(e,t){return this.transform(Z.filterValue(e,t))},filterValues:function(e){return this.transform(Z.filterValues(e))},filter:function(e){return this.transform(Z.filter(e))},addIndex:function(e,t){return null==e&&(e="index"),null==t&&(t=0),this.fold(function(){return t},function(t,n,r){return n[e]=t,r.push(n),++t})},mapValues:function(e){return this.transform(Z.mapFields(e))},mapValue:function(e,t){return this.transform(Z.mapField(e,t))},setValues:function(e){return this.transform(Z.setFields(e))},setValue:function(e,t){return this.transform(Z.setField(e,t))},asyncEach:function(e){return this.asyncAll(function(t,n){for(var r=t.length,i=0,s=[],o=function(e,t){s[e]=t,++i==r&&n(xr.flatten(s))},u=0,a=t.length;u<a;){var f=u++;e(t[f],function(e,t){return function(n){return e(t,n)}}(o,f))}})},asyncAll:function(e){return this.stackAsync(function(t,n){for(var r=t.length,i=0,s=[],o=function(e,t){s[e]=t,++i==r&&n(s)},u=0,a=t.length;u<a;){var f=u++;e(t[f],function(e,t){return function(n){return e(t,n)}}(o,f))}})},stackAsync:function(e){return this._next=e=this._createQuery(e,this._first)},stackTransform:function(e){return this.stackAsync(Y.stackAsyncTransform(e))},stackCross:function(){return this.stackTransform(Z.crossStack)},firstElement:function(){return this.transform(function(e){return e[0]})},transform:function(e){return this.stackAsync(Y.asyncTransform(e))},toObject:function(e){return this.transform(Z.toObject(e))},renameFields:function(e){var t=Kr.fields(e).map(function(t){return{src:t,dst:Kr.field(e,t)}});return this.map(function(e){for(var n={},r=0;r<t.length;){var i=t[r];++r,n[i.dst]=Kr.field(e,i.src)}return n})},console:function(e){return this.stackTransform(function(t){var n=console;return null!=n&&n.log((null==e?"":e+": ")+_r.string(t)),t})},audit:function(e){return this.transform(function(t){return e(t),t})},map:function(e){return this.transform(Z.map(e))},data:function(e){return ar.__instanceof(e,Array)||(e=[e]),this.stackAsync(function(t,n){t.push(e),n(t)})},load:function(e){return this.stackAsync(function(t,n){e(function(e){t.push(e),n(t)})})},_store:null,_async:null,_next:null,_first:null,__class__:Y},G=function(){Y.call(this,null,this)},Er["rg.query.Query"]=G,G.__name__=["rg","query","Query"],G.create=function(){var e=new G,t=e._createQuery(function(e,t){t(e)},e);return e._next=t},G.executeHandler=function(e,t){var n=e._next;(function(){var e=null;return e=function(r){null==n._next?t(xr.flatten(r)):(n=n._next,n._async(r,e))}})(this)([])},G.__super__=Y,G.prototype=yr(Y.prototype,{execute:function(e){G.executeHandler(this,e)},__class__:G}),Z=function(){},Er["rg.query.Transformers"]=Z,Z.__name__=["rg","query","Transformers"],Z.crossStack=function(e){if(1>=e.length)return e;for(var t=e.shift();0<e.length;){for(var n=e.shift(),r=[],i=0;i<t.length;){var s=t[i];++i;for(var o=0;o<n.length;){var u=n[o];++o,r.push(Jr.copyTo(u,Jr.copyTo(s,{})))}}t=r}return[t]},Z.split=function(e,t){var n=new Br,r=[];return e.forEach(function(e){var i=""+t(e),s=n.get(i);null==s&&(s=r.length,n.set(i,s),r.push([])),r[s].push(e)}),r},Z.map=function(e){return function(t){return t.map(e)}},Z.toObject=function(e){return function(t){return t.map(function(t){var n={};return n[e]=t,n})}},Z.filter=function(e){return function(t){return xr.filter(t,e)}},Z.filterValues=function(e){var t=Jr.entries(e);t.forEach(function(e){if(!Kr.isFunction(e.value)){var t=e.value;e.value=function(e){return e==t}}});var n=function(e){for(var n=0;n<t.length;){var r=t[n];++n;if(!r.value(Kr.field(e,r.key)))return!1}return!0};return function(e){return xr.filter(e,n)}},Z.filterValue=function(e,t){if(!Kr.isFunction(t))var n=t,t=function(e){return e==n};var r=function(n){return t(Kr.field(n,e))?!0:!1};return function(e){return xr.filter(e,r)}},Z.setField=function(e,t){if(!Kr.isFunction(t))var n=t,t=function(){return n};return function(n){return n.forEach(function(n){n[e]=t(n)}),n}},Z.mapField=function(e,t){if(!Kr.isFunction(t))var n=t,t=function(){return n};return function(n){return n.forEach(function(n){n[e]=t(Kr.field(n,e))}),n}},Z.setFields=function(e){for(var t=Kr.fields(e),n=[],r=0;r<t.length;){var i=t[r];++r,i=Kr.field(e,i),Kr.isFunction(i)?n.push(i):n.push(function(e,t){return function(n){return e(t,n)}}(function(e){return e},i))}return function(e){return e.forEach(function(e){for(var r=0,i=t.length;r<i;){var s=r++;e[t[s]]=n[s](e)}}),e}},Z.mapFields=function(e){for(var t=Kr.fields(e),n=[],r=0;r<t.length;){var i=t[r];++r,i=Kr.field(e,i),Kr.isFunction(i)?n.push(i):n.push(function(e,t){return function(n){return e(t,n)}}(function(e){return e},i))}return function(e){return e.forEach(function(e){for(var r=0,i=t.length;r<i;){var s=r++;e[t[s]]=n[s](Kr.field(e,t[s]))}}),e}},Z.sort=function(e){return function(t){return t.sort(null==e?_r.compare:e),t}},Z.limit=function(e,t){return function(n){return e>=n.length?[]:n.slice(e,e+t>n.length?n.length:e+t)}},Z.reverse=function(e){return e.reverse(),e},Z.uniquef=function(e){return function(t){for(var n=0,r;n<t.length-1;){var i=t[n];for(r=t.length-1;r>n;)e(i,t[r])&&t.splice(r,1),r--;n++}return t}},Z.rotate=function(e){if(ar.__instanceof(e,String))var t=e,e=function(e,n){return Kr.field(e,t)==Kr.field(n,t)};var n=null==e?function(e,t,n,r){return n==r}:function(t,n){return e(t,n)};return function(e){for(var t=[],r=e[0],i=0,s=r.length;i<s;){for(var o=i++,u=r[o],a=[u],f=1,l=e.length;f<l;)for(var c=f++,c=e[c],h=0,p=c.length;h<p;){var d=h++,v=c[d];if(n(u,v,o,d)){a.push(v);break}}t.push(a)}return t}},rt={},et=void 0,tt=void 0,nt=void 0,it=void 0,rt.Layer=function(e){this.frame=(this.panel=e).frame,e.addLayer(this),this.g=e.g.append("svg:g"),this.g.attr("class").string("layer"),this._resize()},Er["rg.svg.panel.Layer"]=rt.Layer,rt.Layer.__name__=["rg","svg","panel","Layer"],rt.Layer.prototype={set_customClass:function(e){return null!=this.customClass&&this.g.classed().remove(this.customClass),this.g.classed().add(e),this.customClass=e},destroy:function(){this.panel.removeLayer(this),this.g.remove()},resize:function(){},_resize:function(){this.width=this.frame.width,this.height=this.frame.height,this.resize()},toggleClass:function(e){this.g.classed().toggle(e)},removeClass:function(e){this.g.classed().remove(e)},addClass:function(e){var t=this;e.split(" ").forEach(function(e){t.g.classed().add(e)})},customClass:null,height:null,width:null,g:null,frame:null,panel:null,__class__:rt.Layer,__properties__:{set_customClass:"set_customClass"}},tt={Chart:function(e){rt.Layer.call(this,e),this.animated=!0,this.animationDuration=1500,this.animationEase=Nn.Equations.linear,this.ready=new ts}},Er["rg.svg.chart.Chart"]=tt.Chart,tt.Chart.__name__=["rg","svg","chart","Chart"],tt.Chart.__super__=rt.Layer,tt.Chart.prototype=yr(rt.Layer.prototype,{moveTooltip:function(e,t,n){var r=rt.Panels.absolutePos(this.panel);this.panelx=r.x,this.panely=r.y,this.tooltip.setAnchorColor(n),this.tooltip.showAt(this.panelx+e|0,this.panely+t|0)},init:function(){null!=this.labelDataPointOver&&(this.tooltip=gt.Tooltip.get_instance()),this.resize()},resize:function(){var e=rt.Panels.absolutePos(this.panel);this.panelx=e.x,this.panely=e.y},tooltip:null,panely:null,panelx:null,ready:null,labelDataPointOver:null,labelDataPoint:null,click:null,animationEase:null,animationDuration:null,animated:null,__class__:tt.Chart}),tt.CartesianChart=function(e){tt.Chart.call(this,e)},Er["rg.svg.chart.CartesianChart"]=tt.CartesianChart,tt.CartesianChart.__name__=["rg","svg","chart","CartesianChart"],tt.CartesianChart.__super__=tt.Chart,tt.CartesianChart.prototype=yr(tt.Chart.prototype,{data:function(){throw new Tn.AbstractMethod({fileName:"CartesianChart.hx",lineNumber:36,className:"rg.svg.chart.CartesianChart",methodName:"data"})},setVariables:function(e){this.xVariable=e[0],this.yVariables=e.slice(1)},xVariable:null,yVariables:null,__class__:tt.CartesianChart}),tt.BarChart=function(e){tt.CartesianChart.call(this,e),this.addClass("bar-chart"),this.defs=this.g.append("svg:defs"),this.chart=this.g.append("svg:g"),this.gradientLightness=2,this.displayGradient=!0,this.padding=10,this.paddingAxis=4,this.paddingDataPoint=2,this.horizontal=!1},Er["rg.svg.chart.BarChart"]=tt.BarChart,tt.BarChart.__name__=["rg","svg","chart","BarChart"],tt.BarChart.__super__=tt.CartesianChart,tt.BarChart.prototype=yr(tt.CartesianChart.prototype,{applyGradient:function(e){var t=Oi.selectNodeData(e);Kr.field(e,"__dhx_data__");var e=t.style("fill").get(),e=pt.parse(e,"#ccc"),n="rg_bar_gradient_"+e.hex("");if(this.defs.select("#"+n).empty()){var r=pt.applyLightness(kn.Hsl.toHsl(e),this.gradientLightness).toRgbString(),i=this.defs.append("svg:linearGradient").attr("gradientUnits").string("objectBoundingBox").attr("id").string(n).attr("x1")["float"](0).attr("x2")["float"](0).attr("y1")["float"](1).attr("y2")["float"](0).attr("spreadMethod").string("pad");i.append("svg:stop").attr("offset")["float"](0).attr("stop-color").string(r).attr("stop-opacity")["float"](1),i.append("svg:stop").attr("offset")["float"](1).attr("stop-color").string(e.toRgbString()).attr("stop-opacity")["float"](1)}t.attr("style").string("fill:url(#"+n+")")},onmouseover:function(e,t){var n=this.labelDataPointOver(Kr.field(t,"__dhx_data__"),e);if(null==n)this.tooltip.hide();else{var r=Oi.selectNode(t),i=r.attr("x").getFloat(),s=r.attr("y").getFloat(),r=r.attr("width").getFloat();this.tooltip.html(n.split("\n").join("<br>")),this.moveTooltip(i+r/2,s,pt.extractColor(t))}},onclick:function(e,t){this.click(t,e)},datav:function(e){for(var t=new Br,n=(this.width-this.padding*(e.length-1))/e.length,r=function(e,n){var r=t.get(e);return null==r&&(r=n.append("svg:g").attr("class").string(e),t.set(e,r)),r},i=0,s=e.length;i<s;)for(var o=i++,o=e[o],u=(n-this.paddingAxis*(o.length-1))/o.length,a=0,f=o.length;a<f;)for(var l=a++,c=o[l],h=r("group-"+l,this.chart),p=this.xVariable.type,d=this.xVariable.axis,v=this.xVariable.min(),m=this.xVariable.max(),g=this.yVariables[l].type,y=this.yVariables[l].axis,b=this.yVariables[l].min(),w=this.yVariables[l].max(),E=Math.max(1,(u-this.paddingDataPoint*(c.length-1))/c.length),S=-n/2+l*(u+this.paddingAxis),x=this.yVariables[l].stats,l=function(e,t){return function(n,r){return e(t,n,r)}}(wr(this,this.onmouseover),x),x=function(e,t){return function(n,r,i){return e(t,n,r,i)}}(wr(this,this.onclick),x),T=0,N=0,C=c.length;N<C;){var k=N++,L=c[k],A=r("fill-"+k,h),O=this.width*d.scale(v,m,Kr.field(L,p)),M=T,_=y.scale(b,w,Kr.field(L,g))*this.height;Math.isNaN(_)&&(_=0),k=A.append("svg:rect").attr("class").string("bar").attr("x")["float"](this.stacked?O+S:O+S+k*(E+this.paddingDataPoint)).attr("width")["float"](Math.max(this.stacked?u:E,1)).attr("y")["float"](this.height-_-M).attr("height")["float"](_).onNode("mouseover",l).onNode("click",function(e,t){return function(n,r){return e(t,n,r)}}(x,L)),k.node().__dhx_data__=L,pt.storeColorForSelection(k),this.displayGradient&&k.eachNode(wr(this,this.applyGradient)),this.stacked&&(T=M+_)}this.ready.dispatch()},datah:function(e){for(var t=new Br,n=(this.height-this.padding*(e.length-1))/e.length,r=function(e,n){var r=t.get(e);return null==r&&(r=n.append("svg:g").attr("class").string(e),t.set(e,r)),r},i=0,s=e.length;i<s;)for(var o=i++,o=e[o],u=(n-this.paddingAxis*(o.length-1))/o.length,a=0,f=o.length;a<f;)for(var l=a++,c=o[l],h=r("group-"+l,this.chart),p=this.xVariable.type,d=this.xVariable.axis,v=this.xVariable.min(),m=this.xVariable.max(),g=this.yVariables[l].type,y=this.yVariables[l].axis,b=this.yVariables[l].min(),w=this.yVariables[l].max(),E=Math.max(1,(u-this.paddingDataPoint*(c.length-1))/c.length),l=-n/2+l*(u+this.paddingAxis),S=this.xVariable.stats,x=function(e,t){return function(n,r){return e(t,n,r)}}(wr(this,this.onmouseover),S),S=function(e,t){return function(n,r,i){return e(t,n,r,i)}}(wr(this,this.onclick),S),T=0,N=0,C=c.length;N<C;){var k=N++,L=c[k],A=r("fill-"+k,h),O=T,M=Math.max(this.height*y.scale(b,w,Kr.field(L,g)),1),_=d.scale(v,m,Kr.field(L,p))*this.width,k=A.append("svg:rect").attr("class").string("bar").attr("x")["float"](O).attr("y")["float"](this.height-(this.stacked?M-l:M-l-k*(E+this.paddingDataPoint))).attr("height")["float"](this.stacked?u:E).attr("width")["float"](_).onNode("mouseover",x).onNode("click",function(e,t){return function(n,r){return e(t,n,r)}}(S,L));k.node().__dhx_data__=L,pt.storeColorForSelection(k),this.displayGradient&&k.eachNode(wr(this,this.applyGradient)),this.stacked&&(T=O+_)}this.ready.dispatch()},data:function(e){this.horizontal?this.datah(e):this.datav(e)},setVariables:function(e,t,n,r){this.horizontal?(this.xVariable=n[0],this.yVariables=t):(this.xVariable=t[0],this.yVariables=n);if(this.stacked){for(e=0;e<n.length;)t=n[e],++e,t.meta.max=Math.NEGATIVE_INFINITY;for(var i=0,e=r.length;i<e;)for(var s=i++,o=0,u=r[s].length;o<u;){for(var a=o++,t=n[a],f=0,l=0,c=r[s][a].length;l<c;)var h=l++,f=f+ht.valueAlt(r[s][a][h],t.type,0);t.meta.max<f&&(t.meta.max=f)}}},horizontal:null,paddingDataPoint:null,paddingAxis:null,padding:null,displayGradient:null,gradientLightness:null,dps:null,defs:null,chart:null,stacked:null,__class__:tt.BarChart}),tt.ColorScaleMode={__ename__:["rg","svg","chart","ColorScaleMode"],__constructs__:"FromCssInterpolation,FromCss,Interpolation,Sequence,Fixed,Fun".split(",")},tt.ColorScaleMode.FromCssInterpolation=function(e){return e=["FromCssInterpolation",0,e],e.__enum__=tt.ColorScaleMode,e.toString=Sr,e},tt.ColorScaleMode.FromCss=function(e){return e=["FromCss",1,e],e.__enum__=tt.ColorScaleMode,e.toString=Sr,e},tt.ColorScaleMode.Interpolation=function(e){return e=["Interpolation",2,e],e.__enum__=tt.ColorScaleMode,e.toString=Sr,e},tt.ColorScaleMode.Sequence=function(e){return e=["Sequence",3,e],e.__enum__=tt.ColorScaleMode,e.toString=Sr,e},tt.ColorScaleMode.Fixed=function(e){return e=["Fixed",4,e],e.__enum__=tt.ColorScaleMode,e.toString=Sr,e},tt.ColorScaleMode.Fun=function(e){return e=["Fun",5,e],e.__enum__=tt.ColorScaleMode,e.toString=Sr,e},tt.ColorScaleModes=function(){},Er["rg.svg.chart.ColorScaleModes"]=tt.ColorScaleModes,tt.ColorScaleModes.__name__=["rg","svg","chart","ColorScaleModes"],tt.ColorScaleModes.canParse=function(e){try{return tt.ColorScaleModes.createFromDynamic(e),!0}catch(t){return!1}},tt.ColorScaleModes.createFromDynamic=function(e){if(Kr.isFunction(e))return tt.ColorScaleMode.Fun(e);if(!ar.__instanceof(e,String))throw new Tn.Error("invalid color mode '{0}'",[e],null,{fileName:"ColorScaleModes.hx",lineNumber:28,className:"rg.svg.chart.ColorScaleModes",methodName:"createFromDynamic"});e=ar.__cast(e,String).split(":");switch(e[0].toLowerCase()){case"css":return tt.ColorScaleMode.FromCss(null==e[1]?null:Qr.parseInt(e[1]));case"i":case"interpolated":return tt.ColorScaleMode.Interpolation(e[1].split(",").map(function(e){return kn.Colors.parse(e)}));case"s":case"sequence":return tt.ColorScaleMode.Sequence(e[1].split(",").map(function(e){return kn.Colors.parse(e)}));case"f":case"fixed":return tt.ColorScaleMode.Fixed(kn.Colors.parse(e[1]));default:return 0<=e[0].indexOf(",")?tt.ColorScaleMode.Sequence(e[0].split(",").map(function(e){return kn.Colors.parse(e)})):tt.ColorScaleMode.Fixed(kn.Colors.parse(e[0]))}},tt.Coords=function(){},Er["rg.svg.chart.Coords"]=tt.Coords,tt.Coords.__name__=["rg","svg","chart","Coords"],tt.Coords.fromTransform=function(e){return tt.Coords.retransform.match(e)?(e=tt.Coords.retransform.matched(2),[Qr.parseFloat(tt.Coords.retransform.matched(1)),null==e?0:Qr.parseFloat(e)]):[0,0]},tt.FunnelChart=function(e){tt.Chart.call(this,e),this.padding=2.5,this.flatness=1,this.arrowSize=30,this.gradientLightness=1,this.displayGradient=!0,this.labelArrow=wr(this,this.defaultLabelArrow),this.labelDataPoint=wr(this,this.defaultLabelDataPoint),this.labelDataPointOver=wr(this,this.defaultLabelDataPointOver)},Er["rg.svg.chart.FunnelChart"]=tt.FunnelChart,tt.FunnelChart.__name__=["rg","svg","chart","FunnelChart"],tt.FunnelChart.__super__=tt.Chart,tt.FunnelChart.prototype=yr(tt.Chart.prototype,{externalGradient:function(e,t){var n=Oi.selectNode(e).select("path"),r=kn.Hsl.toHsl(pt.parse(n.style("fill").get(),"#cccccc")),i=this.next(t),s=this.dpvalue(this.dps[t]),o=Math.round(100*(i/s))/100,o="rg_funnel_ext_gradient_"+r.hex("#")+"-"+o,u=this.defs.append("svg:radialGradient").attr("gradientUnits").string("objectBoundingBox").attr("id").string(o).attr("cx").string("50%").attr("cy").string("0%").attr("r").string("110%"),a=r.hex("#");u.append("svg:stop").attr("offset").string("10%").attr("stop-color").string(a),r=pt.applyLightness(r,1-(s<i?s/i:i/s),this.gradientLightness*(s>=i?1:-1)).hex("#"),u.append("svg:stop").attr("offset").string("50%").attr("stop-color").string(r),u.append("svg:stop").attr("offset").string("90%").attr("stop-color").string(a),n.attr("style").string("fill:url(#"+o+")")},internalGradient:function(e){var t=pt.parse(e.style("fill").get(),"#cccccc"),n=this.defs.append("svg:radialGradient").attr("gradientUnits").string("objectBoundingBox").attr("id").string("rg_funnel_int_gradient_0").attr("cx").string("50%").attr("fx").string("75%").attr("cy").string("20%").attr("r").string(Math.round(75)+"%");n.append("svg:stop").attr("offset").string("0%").attr("stop-color").string(pt.applyLightness
(kn.Hsl.toHsl(t),this.gradientLightness).toRgbString()),n.append("svg:stop").attr("offset").string("100%").attr("stop-color").string(pt.applyLightness(kn.Hsl.toHsl(t),-this.gradientLightness).toRgbString()),e.attr("style").string("fill:url(#rg_funnel_int_gradient_0)")},init:function(){tt.Chart.prototype.init.call(this),null!=this.tooltip&&this.tooltip.anchor("bottomright"),this.defs=this.g.classed().add("funnel-chart").append("svg:defs")},mouseOver:function(e,t,n){null!=this.labelDataPointOver&&(e=this.labelDataPointOver(e,n),null==e?this.tooltip.hide():(this.tooltip.html(e.split("\n").join("<br>")),this.moveTooltip(this.width/2,this.topheight+.6*this.h+(this.h+this.padding)*t,pt.extractColor(this.currentNode))))},redraw:function(){var e=this;if(null!=this.dps&&0!=this.dps.length){this.g.selectAll("g").remove(),this.g.selectAll("radialGradient").remove(),this.stats=this.variableDependent.stats;var t=this.scale(this.stats.max),n=function(n){return e.width/2-e.scale(n)/t*(e.width-2)/2},r=function(t){return e.width-n(t)},i=(new Mn.Diagonal).sourcef(function(t){return[n(e.dpvalue(t)),0]}).targetf(function(t,r){return[n(e.next(r)),e.h]}),s=(new Mn.Diagonal).sourcef(function(t,n){return[r(e.next(n)),e.h]}).targetf(function(t){return[r(e.dpvalue(t)),0]}),o=function(t,i,s){return t=i?n(t)-r(t):r(t)-n(t)," a 5 "+e.flatness+" 0 0 "+(i?0==s?1:0:s)+" "+t+" 0"},u=function(t){return t=e.dpvalue(t)," M "+n(t)+" 0 "+o(t,!1,0)+o(t,!0,1)},a=this.g.append("svg:g"),f=a.append("svg:path").attr("class").string("funnel-inside fill-0").attr("d").string(u(this.dps[0]));null!=this.click&&a.onNode("click",function(){e.click(e.dps[0],e.stats)}),this.displayGradient&&this.internalGradient(f),f.onNode("mouseover",function(t){e.currentNode=t,e.mouseOver(e.dps[0],0,e.stats)}),pt.storeColorForSelection(f),this.topheight=Math.ceil(f.node().getBBox().height/2)+1,f=this.dps.length-1,u=this.g.append("svg:path").attr("class").string("funnel-inside fill-"+f).attr("d").string(u(this.dps[f])),f=Math.ceil(u.node().getBBox().height/2)+1,u.remove(),this.h=(this.height-this.topheight-f-(this.dps.length-1)*this.padding)/this.dps.length,a.attr("transform").string("translate(0,"+(1+this.topheight)+")"),a=this.g.selectAll("g.section").data(this.dps).enter().append("svg:g").attr("class").string("section").attr("transform").stringf(function(t,n){return"translate(0,"+(e.topheight+n*(e.padding+e.h))+")"}),u=a.append("svg:path").attr("class").stringf(function(e,t){return"funnel-outside fill-"+t}).attr("d").stringf(function(t,n){var r=s.diagonal(t,n).split("C");return r.shift(),r="C"+r.join("C"),i.diagonal(t,n)+o(e.next(n),!1,0)+r+o(e.dpvalue(t),!0,0)}),null!=this.click&&u.on("click",function(t){e.click(t,e.stats)}),pt.storeColorForSelection(u),u.onNode("mouseover",function(t,n){e.currentNode=t,e.mouseOver(Kr.field(t,"__dhx_data__"),n,e.stats)}),this.displayGradient&&a.eachNode(wr(this,this.externalGradient)),a=this.g.selectAll("g.arrow").data(this.dps).enter().append("svg:g").attr("class").string("arrow").attr("transform").stringf(function(t,n){return"translate("+e.width/2+","+(e.topheight+e.h*n+e.arrowSize/2)+")"}),a.each(function(t){if(null!=e.labelArrow&&(t=e.labelArrow(t,e.stats),null!=t)){var n=Oi.selectNode(Li.current);n.append("svg:path").attr("transform").string("scale(1.1,0.85)translate(1,1)").attr("class").string("shadow").style("fill").string("#000").attr("opacity")["float"](.25).attr("d").string(Mn.Symbol.arrowDownWide(e.arrowSize*e.arrowSize)),n.append("svg:path").attr("transform").string("scale(1.1,0.8)").attr("d").string(Mn.Symbol.arrowDownWide(e.arrowSize*e.arrowSize)),n=new nt.Label(n,!0,!1,!0),n.set_anchor(nt.GridAnchor.Bottom),n.set_text(t)}}),a.each(function(t,n){if(null!=e.labelDataPoint){var r=e.labelDataPoint(t,e.stats);if(null!=r){var i=new nt.Balloon(e.g);i.set_boundingBox({x:e.width/2+2*(e.arrowSize/3),y:0,width:e.width,height:e.height}),i.set_preferredSide(3),i.set_text(r.split("\n")),i.moveTo(e.width/2,e.topheight+.6*e.h+(e.h+e.padding)*n,!1)}}}),this.ready.dispatch()}},next:function(e){return this.dpvalue(this.dps[e+1<this.dps.length?e+1:e])},scale:function(e){return this.variableDependent.axis.scale(this.variableDependent.min(),this.variableDependent.max(),e)},currentNode:null,h:null,topheight:null,stats:null,dpvalue:function(e){return Kr.field(e,this.variableDependent.type)},resize:function(){tt.Chart.prototype.resize.call(this),this.redraw()},data:function(e){this.dps=e,this.redraw()},setVariables:function(e,t){this.variableIndependent=e[0],this.variableDependent=t[0]},defaultLabelDataPointOver:function(e){return zr.format(Kr.field(e,this.variableDependent.type))},defaultLabelDataPoint:function(e){return at.humanize(Kr.field(e,this.variableIndependent.type)).split(" ").join("\n")},defaultLabelArrow:function(e,t){var n=Kr.field(e,this.variableDependent.type)/t.max;return xn.FormatNumber.percent(100*n,0)},dps:null,defs:null,variableDependent:null,variableIndependent:null,labelArrow:null,arrowSize:null,gradientLightness:null,displayGradient:null,flatness:null,padding:null,__class__:tt.FunnelChart}),tt.Geo=function(e){this.labelOutline=this.labelShadow=!1,tt.Chart.call(this,e),this.mapcontainer=this.g.append("svg:g").attr("class").string("mapcontainer"),this.queue=[],this.set_colorMode(tt.ColorScaleMode.FromCss()),this.resize()},Er["rg.svg.chart.Geo"]=tt.Geo,tt.Geo.__name__=["rg","svg","chart","Geo"],tt.Geo.__super__=tt.Chart,tt.Geo.prototype=yr(tt.Chart.prototype,{addMap:function(e,t){null!=t&&e.onReady.add(function(e,t,n){return function(){return e(t,n)}}(wr(this,this.drawmap),e,t))},init:function(){tt.Chart.prototype.init.call(this),gt.Tooltip.get_instance().hide(),null==this.tooltip&&(this.tooltip=gt.Tooltip.get_instance()),this.g.classed().add("geo")},set_colorMode:function(e){var t=this,n=this.colorMode=e;switch(n[1]){case 0:n=n[2],null==n&&(n=1);var r=et.RGCss.colorsInCss();r.length>n&&(r=r.slice(0,n)),1==r.length&&r.push(kn.Hsl.lighter(kn.Hsl.toHsl(kn.Colors.parse(r[0])),.9).hex("#")),r.reverse(),this.set_colorMode(tt.ColorScaleMode.Interpolation(r.map(function(e){return kn.Colors.parse(e)})));break;case 1:var i=n[2];null==i&&(i=et.RGCss.numberOfColorsInCss()),this.stylefeature=function(e,n){var r=t.variableDependent.axis.scale(t.variableDependent.min(),t.variableDependent.max(),Kr.field(n,t.variableDependent.type)),r=Math.floor(i*r);e.attr("class").string("fill-"+r),pt.storeColorForSelection(e)};break;case 3:var n=n[2],s=n.map(function(e){return e.hex("#")});this.stylefeature=function(e,n){var r=t.variableDependent.axis.scale(t.variableDependent.min(),t.variableDependent.max(),Kr.field(n,t.variableDependent.type)),r=Math.floor(s.length*r);e.style("fill").string(s[r]),pt.storeColorForSelection(e)};break;case 2:var r=n[2],o=kn.Rgb.interpolateStepsf(r);this.stylefeature=function(e,n){var r=t.variableDependent.axis.scale(t.variableDependent.min(),t.variableDependent.max(),Kr.field(n,t.variableDependent.type));e.style("fill").string(o(r).hex("#")),pt.storeColorForSelection(e)};break;case 4:var n=n[2],u=n.hex("#");this.stylefeature=function(e){e.style("fill").string(u),pt.storeColorForSelection(e)};break;case 5:var a=n[2];this.stylefeature=function(e,n){e.style("fill").string(a(n,t.variableDependent.stats)),pt.storeColorForSelection(e)}}return e},get_colorMode:function(){return this.colorMode},redraw:function(){for(;0<this.queue.length;)this.queue.shift()()},stylefeature:function(){},handlerClick:function(e,t){t(e,this.variableDependent.stats)},handlerDataPointOver:function(e,t,n){n=n(t,this.variableDependent.stats),null==n?this.tooltip.hide():(this.tooltip.html(n.split("\n").join("<br>")),t=Kr.field(t,"$centroid"),this.moveTooltip(t[0]+this.width/2,t[1]+this.height/2,pt.extractColor(e)))},drawmap:function(e,t){if(null==this.dps||0==this.dps.length)this.queue.push(function(e,t,n){return function(){return e(t,n)}}(wr(this,this.drawmap),e,t));else{this.set_colorMode(e.colorMode);for(var n=null,r=0,i=this.dps;r<i.length;){var s=i[r];++r;var o=Kr.field(s,t),o=e.map.get(o);null!=o&&(this.stylefeature(o.svg,Jr.copyTo(s,o.dp)),null!=e.radius&&"circle"==o.svg.node().nodeName&&o.svg.attr("r")["float"](e.radius(o.dp,this.variableDependent.stats)),null!=e.labelDataPoint&&null!=(n=e.labelDataPoint(o.dp,this.variableDependent.stats))&&(s=Kr.field(o.dp,"$centroid"),o=new nt.Label(this.mapcontainer,!0,this.labelShadow,this.labelOutline),o.set_text(n),o.place(s[0],s[1],0)))}0==this.queue.length&&this.ready.dispatch()}},dpvalue:function(e){return Kr.field(e,this.variableDependent.type)},resize:function(){tt.Chart.prototype.resize.call(this),null!=this.mapcontainer&&this.mapcontainer.attr("transform").string("translate("+this.width/2+","+this.height/2+")")},data:function(e){this.dps=e,this.redraw()},setVariables:function(e,t){this.variableDependent=t[0]},queue:null,dps:null,variableDependent:null,labelShadow:null,labelOutline:null,colorMode:null,mapcontainer:null,__class__:tt.Geo,__properties__:yr(tt.Chart.prototype.__properties__,{set_colorMode:"set_colorMode",get_colorMode:"get_colorMode"})}),tt.GradientEffect={__ename__:["rg","svg","chart","GradientEffect"],__constructs__:["NoEffect","Gradient"]},tt.GradientEffect.NoEffect=["NoEffect",0],tt.GradientEffect.NoEffect.toString=Sr,tt.GradientEffect.NoEffect.__enum__=tt.GradientEffect,tt.GradientEffect.Gradient=function(e){return e=["Gradient",1,e],e.__enum__=tt.GradientEffect,e.toString=Sr,e},tt.GradientEffects=function(){},Er["rg.svg.chart.GradientEffects"]=tt.GradientEffects,tt.GradientEffects.__name__=["rg","svg","chart","GradientEffects"],tt.GradientEffects.canParse=function(e){switch(e.toLowerCase().split(":")[0]){case"gradient":case"noeffect":case"none":case"flat":e=!0;break;default:e=!1}return e},tt.GradientEffects.parse=function(e){var t=e.toLowerCase().split(":");switch(t.shift()){case"gradient":return e=.75,t=t.pop(),null!=t&&(e=Qr.parseFloat(t.split(",").shift())),tt.GradientEffect.Gradient(e);default:return tt.GradientEffect.NoEffect}},tt.HeatGrid=function(e){tt.CartesianChart.call(this,e),this.useContour=!1,this.set_colorMode(tt.ColorScaleMode.FromCss())},Er["rg.svg.chart.HeatGrid"]=tt.HeatGrid,tt.HeatGrid.__name__=["rg","svg","chart","HeatGrid"],tt.HeatGrid.__super__=tt.CartesianChart,tt.HeatGrid.prototype=yr(tt.CartesianChart.prototype,{set_colorMode:function(e){var t=this,n=this.colorMode=e;switch(n[1]){case 0:n=n[2],null==n&&(n=1);var r=et.RGCss.colorsInCss();r.length>n&&(r=r.slice(0,n)),1==r.length&&r.push(kn.Hsl.lighter(kn.Hsl.toHsl(kn.Colors.parse(r[0])),.9).hex("#")),r.reverse(),this.set_colorMode(tt.ColorScaleMode.Interpolation(r.map(function(e){return kn.Colors.parse(e)})));break;case 1:var i=n[2];null==i&&(i=et.RGCss.numberOfColorsInCss()),this.stylefeature=function(e,n){var r=t.variableDependent.axis.scale(t.variableDependent.min(),t.variableDependent.max(),Kr.field(n,t.variableDependent.type)),r=Math.floor(i*r);e.attr("class").string("fill-"+r)};break;case 3:var n=n[2],s=n.map(function(e){return e.hex("#")});this.stylefeature=function(e,n){var r=t.variableDependent.axis.scale(t.variableDependent.min(),t.variableDependent.max(),Kr.field(n,t.variableDependent.type)),r=Math.floor(s.length*r);e.style("fill").string(s[r])};break;case 2:var r=n[2],o=kn.Rgb.interpolateStepsf(r);this.stylefeature=function(e,n){var r=t.variableDependent.axis.scale(t.variableDependent.min(),t.variableDependent.max(),Kr.field(n,t.variableDependent.type));e.style("fill").string(o(r).hex("#"))};break;case 4:var n=n[2],u=n.hex("#");this.stylefeature=function(e){e.style("fill").string(u)};break;case 5:var a=n[2];this.stylefeature=function(e,n){e.style("fill").string(a(n,t.variableDependent.stats))}}return e},get_colorMode:function(){return this.colorMode},stylefeature:function(){},range:function(e){var t=ar.__instanceof(e,St)?e:null;return null!=t?t.axis.range(t.min(),t.max()):e.axis.ticks(e.min(),e.max()).map(function(e){return e.get_value()})},onclick:function(e){null!=this.click&&this.click(e,this.stats)},onmouseover:function(e,t){if(null!=this.labelDataPointOver){var n=this.labelDataPointOver(e,this.stats);null==n?this.tooltip.hide():(this.tooltip.html(n.split("\n").join("<br>")),this.moveTooltip(this.x(e,t)+this.w/2,this.y(e,t)+this.h/2,pt.extractColor(this.currentNode)))}},drawSquares:function(){var e=this,t=this.g.selectAll("rect").data(this.dps).enter().append("svg:rect").attr("x").floatf(wr(this,this.x)).attr("y").floatf(wr(this,this.y)).attr("width")["float"](this.w).attr("height")["float"](this.h).each(function(t){e.stylefeature(Oi.selectNode(Li.current),t)}).on("click",wr(this,this.onclick)).onNode("mouseover",function(t,n){e.currentNode=t,e.onmouseover(Kr.field(t,"__dhx_data__"),n)});pt.storeColorForSelection(t)},currentNode:null,createGridMap:function(e){for(var t=new Br,n=0,r=this.rows;n<r;)for(var i=n++,s=0,o=this.cols;s<o;){var u=s++;e(u,i)&&t.set(i+"-"+u,[i,u])}return t},drawContour:function(){},redraw:function(){null!=this.dps&&0!=this.dps.length&&(this.stats=this.variableDependent.stats,this.xrange=this.range(this.xVariable),this.yrange=this.range(this.yVariables[0]),this.cols=this.xrange.length,this.rows=this.yrange.length,this.w=this.width/this.cols,this.h=this.height/this.rows,this.useContour?this.drawContour():this.drawSquares(),this.ready.dispatch())},y:function(e){return this.height-(1+this.yrange.indexOf(Kr.field(e,this.yVariables[0].type)))*this.h},x:function(e){return this.xrange.indexOf(Kr.field(e,this.xVariable.type))*this.w},stats:null,h:null,w:null,rows:null,cols:null,yrange:null,xrange:null,scale:function(e){return this.variableDependent.axis.scale(this.variableDependent.min(),this.variableDependent.max(),e)},value:function(e){return this.scale(Kr.field(e,this.variableDependent.type))},data:function(e){this.dps=e,this.redraw()},resize:function(){tt.CartesianChart.prototype.resize.call(this),this.redraw()},init:function(){tt.CartesianChart.prototype.init.call(this),this.g.classed().add("heat-grid")},setVariables:function(e,t,n){this.xVariable=t[0],this.yVariables=[t[1]],this.variableDependent=n[0]},variableDependent:null,dps:null,colorMode:null,useContour:null,__class__:tt.HeatGrid,__properties__:yr(tt.CartesianChart.prototype.__properties__,{set_colorMode:"set_colorMode",get_colorMode:"get_colorMode"})}),tt.LineChart=function(e){tt.CartesianChart.call(this,e),this.addClass("line-chart"),this.chart=this.g.append("svg:g"),this.sensibleRadius=100},Er["rg.svg.chart.LineChart"]=tt.LineChart,tt.LineChart.__name__=["rg","svg","chart","LineChart"],tt.LineChart.__super__=tt.CartesianChart,tt.LineChart.prototype=yr(tt.CartesianChart.prototype,{onclick:function(e){var e=Kr.field(e,"__dhx_data__"),t=this.getStats(e);this.click(e,t)},onmouseover:function(e){var t=Kr.field(e,"__dhx_data__"),n=this.getStats(t),t=this.labelDataPointOver(t,n);null==t?this.tooltip.hide():(n=Oi.selectNode(e.parentNode),n=tt.Coords.fromTransform(n.attr("transform").get()),this.tooltip.html(t.split("\n").join("<br>")),this.moveTooltip(n[0],n[1],pt.extractColor(e)))},getStats:function(e){for(var t=0,n=this.stats;t<n.length;){var r=n[t];++t;if(null!=Kr.field(e,r.type))return r}return null},getTranslatePointf:function(e){var t=wr(this,this.x),n=this.getY1(e);return function(e,r){return"translate("+t(e)+","+n(e,r)+")"}},data:function(e){var t=this;this.linePathShape=[];for(var n=0,r=this.yVariables.length;n<r;){var i=n++,s=[new Mn.Line(wr(this,this.x),this.getY1(i))];null!=this.lineInterpolator&&s[0].interpolator(this.lineInterpolator),this.linePathShape[i]=function(e){return function(n,r){return t.segment=r,e[0].shape(n,r)}}(s)}n=this.chart.selectAll("g.group").data(e),n.enter().append("svg:g").attr("class").stringf(function(e,t){return"group group-"+t}),n.exit().remove(),this.stats=[],n=0;for(r=e.length;n<r;){i=[n++],this.segments=e[i[0]],s=this.chart.select("g.group-"+i[0]),this.stats[i[0]]=new j(this.yVariables[i[0]].type),this.stats[i[0]].addMany(ht.values(xr.flatten(this.segments),this.yVariables[i[0]].type));if(null!=this.y0property){var o=new Mn.Area(wr(this,this.x),this.getY0(i[0]),this.getY1(i[0]));null!=this.lineInterpolator&&o.interpolator(this.lineInterpolator),s.selectAll("path.area").data(this.segments).enter().append("svg:path").attr("class").stringf(this.classff(i[0],"area area-"+i[0])).attr("d").stringf(wr(o,o.shape))}var o=s.selectAll("path.main").data(this.segments),u=this.lineEffect;switch(u[1]){case 1:var a=u[3],a=[a],u=[u[2]],f=[[]];o.enter().append("svg:path").attr("class").stringf(this.classsf(i[0],"line")).eachNode(function(e,t){return function(n,r){var i=kn.Hsl.toHsl(pt.parse(Oi.selectNode(n).style("stroke").get(),"#000000")),s=pt.applyLightness(i,t[0]);e[0][r]=kn.Hsl.interpolatef(s,i)}}(f,u)).remove();for(u=0;u<a[0];){var l=[u++];o.enter().append("svg:path").attr("class").string("line grad-"+(a[0]-l[0]-1)).style("stroke").stringf(function(e,t,n){return function(r,i){return t[0][i](e[0]/n[0]).hex("#")}}(l,f,a)).attr("d").stringf(this.linePathShape[i[0]])}break;case 2:for(var a=u[4],f=u[3],c=u[2],u=0;u<a;)l=u++,o.enter().append("svg:path").attr("transform").string("translate("+(1+l)*c+","+(1+l)*f+")").attr("class").stringf(this.classsf(i[0],"line shadow shadow-"+l)).attr("d").stringf(this.linePathShape[i[0]])}u=o.enter().append("svg:path").attr("class").stringf(this.classsf(i[0],"line")).attr("d").stringf(this.linePathShape[i[0]]);switch(this.lineEffect[1]){case 1:u.classed().add("gradient");break;case 2:u.classed().add("dropshadow");break;case 0:u.classed().add("noeffect")}o.update().attr("d").stringf(this.linePathShape[i[0]]),o.exit().remove(),s=s.selectAll("g.symbols").data(this.segments),o=s.enter().append("svg:g").attr("class").stringf(this.classsf(i[0],"symbols")).selectAll("g.symbol").dataf(function(){return function(e){return e}}()).enter().append("svg:g").attr("transform").stringf(this.getTranslatePointf(i[0])),u=o.append("svg:circle").attr("r")["float"](6).attr("opacity")["float"](0).style("fill").string("#000000"),null!=this.labelDataPointOver&&u.classed().add("rgdata"),pt.storeColorForSelection(u,"stroke"),null!=this.symbol&&(u=[this.symbol],u=o.append("svg:path").attr("d").stringf(function(e,n){return function(r){return e[0](r,t.stats[n[0]])}}(u,i)),pt.storeColorForSelection(u,"stroke"),null!=this.symbolStyle&&(l=[this.symbolStyle],u.attr("style").stringf(function(e,n){return function(r){return e[0](r,t.stats[n[0]])}}(l,i)))),null!=this.labelDataPoint&&o.eachNode(function(e,n){return function(r){var i=Kr.field(r,"__dhx_data__");(new nt.Label(Oi.selectNode(r),!0,!1,!1)).set_text(e[0](i,t.stats[n[0]]))}}([this.labelDataPoint],i)),s.update().selectAll("g.symbol").dataf(function(){return function(e){return e}}()).update().attr("transform").stringf(this.getTranslatePointf(i[0])),s.exit().remove()}nt.Sensible.sensibleZone(this.g,this.panel,null==this.click?null:wr(this,this.onclick),null==this.labelDataPointOver?null:wr(this,this.onmouseover),this.sensibleRadius),this.ready.dispatch()},classff:function(e,t){return function(n,r){return t+" fill-"+(e+r)}},classsf:function(e,t){return function(n,r){return t+" stroke-"+(e+r)}},segments:null,getY0:function(e){var t=this,n=this.yVariables[e],r=function(e,t,n){return function(r){return e(t,n,r)}}((rs=n.axis,wr(rs,rs.scale)),n.min(),n.max());return function(e){return t.height-r(ht.valueAlt(e,t.y0property,n.min()))*t.height}},getY1:function(e){var t=this,n=this.yVariables[e],r=function(e,t,n){return function(r){return e(t,n,r)}}((rs=n.axis,wr(rs,rs.scale)),n.min(),n.max());if(null!=this.y0property){var i=r(n.min())*this.height;return function(s,o){return t.getY0(e)(s,o)-r(Kr.field(s,n.type))*t.height+i}}return function(e){return e=Kr.field(e,n.type),e=r(e)*t.height,t.height-e}},x:function(e){return e=Kr.field(e,this.xVariable.type),this.xVariable.axis.scale(this.xVariable.min(),this.xVariable.max(),e)*this.width},setVariables:function(e,t,n,r){tt.CartesianChart.prototype.setVariables.call(this,e,t,n,r);if(null!=this.y0property&&""!=this.y0property){for(var i,e=0;e<n.length;)t=n[e],++e,t.meta.max=Math.NEGATIVE_INFINITY;for(var s=0,e=r.length;s<e;)for(var o=s++,t=n[o],u=0,a=r[o].length;u<a;)for(var f=u++,l=0,c=r[o][f].length;l<c;)if(i=l++,i=r[o][f][i],i=ht.valueAlt(i,t.type,0)+ht.valueAlt(i,this.y0property,0),t.meta.max<i)t.meta.max=i}},stats:null,segment:null,dps:null,chart:null,linePathShape:null,sensibleRadius:null,y0property:null,lineEffect:null,lineInterpolator:null,symbolStyle:null,symbol:null,__class__:tt.LineChart}),tt.LineEffect={__ename__:["rg","svg","chart","LineEffect"],__constructs__:["NoEffect","Gradient","DropShadow"]},tt.LineEffect.NoEffect=["NoEffect",0],tt.LineEffect.NoEffect.toString=Sr,tt.LineEffect.NoEffect.__enum__=tt.LineEffect,tt.LineEffect.Gradient=function(e,t){var n=["Gradient",1,e,t];return n.__enum__=tt.LineEffect,n.toString=Sr,n},tt.LineEffect.DropShadow=function(e,t,n){return e=["DropShadow",2,e,t,n],e.__enum__=tt.LineEffect,e.toString=Sr,e},tt.LineEffects=function(){},Er["rg.svg.chart.LineEffects"]=tt.LineEffects,tt.LineEffects.__name__=["rg","svg","chart","LineEffects"],tt.LineEffects.parse=function(e){var t=e.toLowerCase().split(":");switch(t.shift()){case"dropshadow":var n=.5,r=.5,e=2,t=t.pop();return null!=t&&(t=t.split(","),n=Qr.parseFloat(t[0]),r=1<t.length?Qr.parseFloat(t[1]):n,2<t.length&&(e=Qr.parseInt(t[2]))),tt.LineEffect.DropShadow(n,r,e);case"gradient":return n=.75,e=2,t=t.pop(),null!=t&&(n=Qr.parseFloat(t.split(",").shift()),r=t.split(",").pop(),null!=r&&(e=Qr.parseInt(r))),tt.LineEffect.Gradient(n,e);default:return tt.LineEffect.NoEffect}},tt.PieChart=function(e){tt.Chart.call(this,e),this.addClass("pie-chart"),this.g.append("svg:defs"),this.pie=new Dn.layout.Pie,this.gradientLightness=.75,this.displayGradient=!0,this.innerRadius=this.animationDelay=0,this.outerRadius=.9,this.overRadius=.95,this.labelRadius=.45,this.tooltipRadius=.5,this.labels=new Br,this.labelOrientation=nt.LabelOrientation.Orthogonal,this.labelDontFlip=!0},Er["rg.svg.chart.PieChart"]=tt.PieChart,tt.PieChart.__name__=["rg","svg","chart","PieChart"],tt.PieChart.__super__=tt.Chart,tt.PieChart.prototype=yr(tt.Chart.prototype,{destroy:function(){for(var e=this.labels.iterator();e.hasNext();)e.next().destroy();tt.Chart.prototype.destroy.call(this)},pief:function(e){for(var t=this.variableDependent.type,n=this.pie.pie(e.map(function(e){return Kr.field(e,t)})),r=0,i=n.length;r<i;){var s=r++,o=this.makeid(e[s]);n[s].id=o,n[s].dp=e[s]}return n},arcShape:function(e){return function(t){return e.shape(t)}},makeid:function(e){return e=Jr.clone(e),Kr.deleteField(e,this.variableDependent.type),Gn.encode(_r.string(e))},id:function(e){return e.id},backtonormal:function(e){Oi.selectNodeData(e).selectAll("path").transition().ease(this.animationEase).duration(null,this.animationDuration).attr("d").stringf(this.arcShape(this.arcNormal))},highlight:function(e){Oi.selectNodeData(e).selectAll("path").transition().ease(this.animationEase).duration(null,this.animationDuration).attr("d").stringf(this.arcShape(this.arcBig))},fadein:function(e){var t=Oi.selectNodeData(e),e=this.arcNormal.shape(Kr.field(e,"__dhx_data__"));t.selectAll("path.slice").transition().ease(this.animationEase).duration(null,this.animationDuration).delay(null,this.animationDelay).attr("d").string(e)},applyGradient:function(e){var t=Oi.selectNodeData(e),n=Kr.field(e,"__dhx_data__").id;if(this.g.select("defs").select("#rg_pie_gradient_"+n).empty()){var r=t.select("path.slice"),e=this.arcNormal.shape(Kr.field(e,"__dhx_data__")),e=t.append("svg:path").attr("d").string(e),i;try{i=e.node().getBBox()}catch(s){i={x:0,y:0,width:0,height:0}}e.remove();var r=pt.parse(r.style("fill").get(),"#cccccc"),e=pt.applyLightness(kn.Hsl.toHsl(r),this.gradientLightness),o=i.width/i.height,u=100*-i.x/i.width/o,a=100*-i.y/i.height/o;i=100*(i.width>i.height?Math.min(1,this.radius*this.outerRadius/i.width):Math.max(1,this.radius*this.outerRadius/i.width)),i=this.g.select("defs").append("svg:radialGradient").attr("gradientUnits").string("objectBoundingBox").attr("id").string("rg_pie_gradient_"+n).attr("cx").string(u*o+"%").attr("cy").string(a+"%").attr("gradientTransform").string("scale(1 "+o+")").attr("r").string(i+"%"),i.append("svg:stop").attr("offset").string(100*this.innerRadius+"%").attr("stop-color").string(r.toRgbString()).attr("stop-opacity")["float"](1),i.append("svg:stop").attr("offset").string("100%").attr("stop-color").string(e.toRgbString()).attr("stop-opacity")["float"](1)}t.select("path.slice").attr("style").string("fill:url(#rg_pie_gradient_"+n+")")},appendLabel:function(e){var t=Oi.selectNode(e),t=new nt.Label(t,this.labelDontFlip,!0,!0),e=Kr.field(e,"__dhx_data__"),n=this.radius*this.labelRadius,r=e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2;t.set_orientation(this.labelOrientation);switch(this.labelOrientation[1]){case 0:t.set_anchor(nt.GridAnchor.Center);break;case 1:t.set_anchor(nt.GridAnchor.Left);break;case 2:t.set_anchor(nt.GridAnchor.Top)}t.set_text(this.labelDataPoint(e.dp,this.stats)),t.place(-2.5+Math.cos(r)*n,-2.5+Math.sin(r)*n,57.29577951308232*r),this.labels.set(e.id,t),0>=Kr.field(e.dp,this.stats.type)&&t.hide()},updateLabel:function(e){Oi.selectNode(e);var e=Kr.field(e,"__dhx_data__"),t=this.labels.get(e.id),n=this.radius*this.labelRadius,r=e.startAngle+(e.endAngle-e.startAngle)/2-Math.PI/2;t.set_text(this.labelDataPoint(e.dp,this.stats)),t.place(-2.5+Math.cos(r)*n,-2.5+Math.sin(r)*n,57.29577951308232*r),0==Kr.field(e.dp,this.stats.type)?t.hide():t.show()},removeLabel:function(e){Oi.selectNode(e),e=Kr.field(e,"__dhx_data__"),this.labels.get(e.id).destroy(),this.labels.remove(e.id)},onMouseClick:function(e){this.mouseClick(Kr.field(e,"__dhx_data__").dp)},onMouseOver:function(e){if(null!=this.labelDataPointOver){var t=Kr.field(e,"__dhx_data__"),n=this.labelDataPointOver(t.dp,this.stats);if(null==n)this.tooltip.hide();else{var t=t.startAngle+(t.endAngle-t.startAngle)/2-Math.PI/2,r=this.radius*this.tooltipRadius;this.tooltip.html(n.split("\n").join("<br>")),this.moveTooltip(this.width/2+Math.cos(t)*r,this.height/2+Math.sin(t)*r,pt.extractColor(e))}}},data:function(e){this.stats=this.variableDependent.stats;var e=this.g.selectAll("g.group").data(this.pief(e),wr(this,this.id)),t=e.enter().append("svg:g").attr("class").stringf(function(e,t){return"group fill-"+t}).attr("transform").string("translate("+this.radius+","+this.radius+")"),n=t.append("svg:path").attr("class").string("slice");pt.storeColorForSelection(t),this.displayGradient&&t.eachNode(wr(this,this.applyGradient)),this.animated?(n.attr("d").stringf(this.arcShape(this.arcStart)),t.eachNode(wr(this,this.fadein)).onNode("mouseover.animation",wr(this,this.highlight)).onNode("mouseout.animation",wr(this,this.backtonormal))):n.attr("d").stringf(this.arcShape(this.arcNormal)),t.onNode("mouseover.label",wr(this,this.onMouseOver)),null!=this.mouseClick&&t.onNode("click.user",wr(this,this.onMouseClick)),null!=this.labelDataPoint&&e.enter().append("svg:g").attr("transform").string("translate("+this.radius+","+this.radius+")").eachNode(wr(this,this.appendLabel)),e.update().select("path").transition().ease(this.animationEase).duration(null,this.animationDuration).attr("d").stringf(this.arcShape(this.arcNormal)),null!=this.labelDataPoint&&e.update().eachNode(wr(this,this.updateLabel)),e.exit().eachNode(wr(this,this.removeLabel)).remove(),this.ready.dispatch()},resize:function(){tt.Chart.prototype.resize.call(this),this.radius=Math.min(this.width,this.height)/2,this.arcStart=Mn.Arc.fromAngleObject().innerRadius(this.radius*this.innerRadius).outerRadius(this.radius*this.innerRadius),this.arcNormal=Mn.Arc.fromAngleObject().innerRadius(this.radius*this.innerRadius).outerRadius(this.radius*this.outerRadius),this.arcBig=Mn.Arc.fromAngleObject().innerRadius(this.radius*this.innerRadius).outerRadius(this.radius*this.overRadius),this.width>this.height?this.g.attr("transform").string("translate("+(this.width/2-this.height/2)+",0)"):this.g.attr("transform").string("translate(0,"+(this.height/2-this.width/2)+")")},setVariables:function(e,t){this.variableDependent=t[0]},mouseClick:null,labels:null,labelDontFlip:null,labelOrientation:null,animationDelay:null,displayGradient:null,gradientLightness:null,variableDependent:null,stats:null,radius:null,pie:null,arcBig:null,arcStart:null,arcNormal:null,tooltipRadius:null,labelRadius:null,overRadius:null,outerRadius:null,innerRadius:null,__class__:tt.PieChart}),tt.Sankey=function(e){tt.Chart.call(this,e),this.addClass("sankey"),this.layerWidth=61,this.nodeSpacing=28,this.dummySpacing=18,this.extraWidth=28,this.backEdgeSpacing=4,this.extraRadius=this.extraHeight=5,this.imageWidth=60,this.imageHeight=48,this.imageSpacing=0,this.labelNodeSpacing=4,this.styleNode="0",this.styleentry="4",this.styleexit="6",this.styleEdgeBackward="3",this.styleEdgeForward="0",this.thinbackedges=this.stackbackedges=!0},Er["rg.svg.chart.Sankey"]=tt.Sankey,tt.Sankey.__name__=["rg","svg","chart","Sankey"],tt.Sankey.__super__=tt.Chart,tt.Sankey.prototype=yr(tt.Chart.prototype,{hnode:function(e){return this.nheight(e.data.weight)},isdummy:function(e){return"#"==Fr.substr(e.data.id,0,1)},nodepadding:function(e){return this.isdummy(e)?this.dummySpacing:this.nodeSpacing},ynode:function(e){for(var t=this.layout.cell(e),n=this.layerstarty[t.layer],r=0,i=t.position;r<i;)var s=r++,s=this.layout.nodeAt(t.layer,s),n=n+(this.hnode(s)+this.nodepadding(s));return n+=this.nodepadding(e),Math.round(n)+.5},xlayer:function(e){return 1>=this.layout.length?this.width/2:Math.round((this.width-this.padBefore-this.padAfter-this.layerWidth)/(this.layout.length-1)*e+this.layerWidth/2+this.padBefore)},hafter:function(e,t){for(var n=!1,r=this.backEdgeSpacing/this.nheight(1),i=r;t.hasNext();){var s=t.next();n?i+=s.weight+r:s.id==e&&(n=!0)}return this.nheight(i)},cafter:function(e,t){for(var n=!1,r=0;t.hasNext();){var i=t.next();n?r++:i.id==e&&(n=!0)}return r},ydiagonal:function(e,t){for(var n=0;t.hasNext();){var r=t.next();if(r.id==e)break;n+=r.weight}return this.nheight(n)},nheight:function(e){return 0==e?0:Math.round(e/this.maxweight*this.availableheight)},onmouseoverexit:function(e,t,n,r){this.highlight(n.id,"node"),null!=this.labelEdgeOver&&(n=this.labelEdgeOver(this.edgeDataWithNode(n,!0),this.dependentVariable.stats),null==n?this.tooltip.hide():(this.tooltip.anchor("topleft"),this.tooltip.html(n.split("\n").join("<br>")),this.moveTooltip(e,t,pt.extractColor(r))))},onmouseoverentry:function(e,t,n,r){this.highlight(n.id,"node"),null!=this.labelEdgeOver&&(n=this.labelEdgeOver(this.edgeDataWithNode(n,!1),this.dependentVariable.stats),null==n?this.tooltip.hide():(this.tooltip.anchor("bottomright"),this.tooltip.html(n.split("\n").join("<br>")),this.moveTooltip(e,t,pt.extractColor(r))))},onmouseoveredge:function(e,t,n,r){this.highlight(n.id,"edge"),null!=this.labelEdgeOver&&(n=this.labelEdgeOver(this.edgeData(n),this.dependentVariable.stats),null==n?this.tooltip.hide():(this.tooltip.anchor("bottomright"),this.tooltip.html(n.split("\n").join("<br>")),this.moveTooltip(e,t,pt.extractColor(r))))},onmouseovernode:function(e,t){this.highlight(e.id,"node");if(this.isdummy(e)){if(null!=this.labelEdgeOver){var n=this.labelEdgeOver(this.edgeData(e.graph.edges.positives(e).next()),this.dependentVariable.stats);if(!1!==n)if(null==n)this.tooltip.hide();else{var r=this.layout.cell(e);this.tooltip.anchor("bottomright"),this.tooltip.html(n.split("\n").join("<br>")),this.moveTooltip(this.xlayer(r.layer),this.ynode(e)+this.hnode(e)/2,pt.extractColor(t))}}}else null!=this.labelDataPointOver&&(n=this.labelDataPointOver(e.data.dp,this.dependentVariable.stats),!1!==n&&(null==n?this.tooltip.hide():(r=this.layout.cell(e),this.tooltip.anchor("bottomright"),this.tooltip.html(n.split("\n").join("<br>")),this.moveTooltip(this.xlayer(r.layer),this.ynode(e)+this.hnode(e)/2,pt.extractColor(t)))))},edgeClickWithNode:function(e,t,n,r){this.edgeclick(this.edgeDataWithNode(e,t),n,r)},edgeClickWithEdge:function(e,t,n){this.edgeclick(this.edgeData(e),t,n)},edgeclick:function(e){this.clickEdge(e,this.dependentVariable.stats)},nodeclick:function(e){this.click(e.data.dp,this.dependentVariable.stats)},edgeDataWithNode:function(e,t){return{tail:t?e.data.dp:null,head:t?null:e.data.dp,edgeweight:t?e.data.exit:e.data.entry,nodeweight:e.data.weight}},edgeData:function(e){for(var t=e.head,n=e.tail;this.isdummy(t);)t=t.graph.edges.positives(t).next().head;for(;this.isdummy(n);)n=n.graph.edges.negatives(n).next().tail;return{head:t.data.dp,tail:n.data.dp,edgeweight:e.weight,nodeweight:n.data.weight}},highlight:function(e,t){for(var n=this,r=this.maphi.iterator();r.hasNext();)r.next().classed().remove("over");this.maphi=new Br;var i=null,s=null,o=null,u=null,a=function(e,t){var r=t+":"+e;n.maphi.set(r,n.mapelements.get(r).classed().add("over"))},f=function(e){var e="entry:"+e,t=n.mapelements.get(e);null!=t&&n.maphi.set(e,t.classed(
).add("over"))},i=function(e){n.maphi.exists("edge:"+e.id)||(a(e.id,"edge"),n.isbackward(e)||s(e.head))},s=function(e){if(!n.maphi.exists("node:"+e.id)){a(e.id,"node");var t="exit:"+e.id,r=n.mapelements.get(t);null!=r&&n.maphi.set(t,r.classed().add("over"));for(e=e.graph.edges.positives(e);e.hasNext();)t=e.next(),i(t)}},o=function(e){n.isbackward(e)||u(e.tail),n.maphi.exists("edge:"+e.id)||n.isbackward(e)||a(e.id,"edge")},u=function(e){for(var t=e.graph.edges.negatives(e);t.hasNext();){var r=t.next();o(r)}n.maphi.exists("node:"+e.id)||(a(e.id,"node"),f(e.id))};"edge"==t?(i(this.layout.graph.edges.get(e)),o(this.layout.graph.edges.get(e))):"node"==t&&(s(this.layout.graph.nodes.get(e)),u(this.layout.graph.nodes.get(e)),f(e))},isbackward:function(e){return this.layout.cell(e.head).layer<=this.layout.cell(e.tail).layer},addToMap:function(e,t,n){this.mapelements.set(t+":"+e,n)},redraw:function(){var e=this;this.mapelements=new Br,this.maphi=new Br,this.maxweight=0,this.layerstarty=[];for(var t=0,n=this.layout.length;t<n;){var r=t++,i=Xr.reduce(br(this.layout.layer(r))(),function(e,t){return e+t.data.weight},0);i>this.maxweight&&(this.maxweight=i)}for(var s=0,t=0,n=this.layout.length;t<n;)r=t++,i=Xr.reduce(br(this.layout.layer(r))(),function(t,n){return t+e.nodepadding(n)},0),i>s&&(s=i);this.availableheight=this.height-s;if(this.thinbackedges)this.availableheight-=(1+this.backEdgeSpacing)*(this.stackbackedges?Xr.filter(this.layout.graph.edges.collection.iterator(),function(t){return e.layout.cell(t.tail).layer>=e.layout.cell(t.head).layer}).length:1);else if(this.stackbackedges)for(t=this.layout.graph.edges.collection.iterator();t.hasNext();)r=t.next(),this.layout.cell(r.tail).layer<this.layout.cell(r.head).layer||(this.availableheight-=this.backEdgeSpacing,this.maxweight+=r.weight);else{this.availableheight-=this.backEdgeSpacing,i=0;for(t=this.layout.graph.edges.collection.iterator();t.hasNext();)if(r=t.next(),!(this.layout.cell(r.tail).layer<this.layout.cell(r.head).layer)&&r.weight>i)i=r.weight;this.maxweight+=i}this.availableheight-=this.extraRadius+this.extraHeight;for(var o=0,t=0,n=this.layout.length;t<n;){for(var r=t++,s=this.layout.layer(r),u=0,a=0;a<s.length;)i=s[a],++a,u+=this.nodepadding(i)+this.nheight(i.data.weight);this.layerstarty[r]=u,u>o&&(o=u)}t=0;for(n=this.layerstarty.length;t<n;)r=t++,this.layerstarty[r]=(o-this.layerstarty[r])/2;o+=this.extraRadius+this.extraHeight,n=this.padBefore=0;for(t=this.layout.layer(0);n<t.length;){i=t[n],++n,s=Math.min(this.nheight(i.data.entry),this.extraWidth);for(u=i.graph.edges.negatives(i);u.hasNext();)r=u.next(),r=this.hafter(r.id,i.graph.edges.negatives(i))+this.nheight(r.weight),r>s&&(s=r);s>this.padBefore&&(this.padBefore=s)}this.padBefore+=2,n=this.padAfter=0;for(t=this.layout.layer(this.layout.length-1);n<t.length;){i=t[n],++n,s=Math.min(this.nheight(i.data.exit),this.extraWidth);for(u=i.graph.edges.positives(i);u.hasNext();)r=u.next(),r=this.hafter(r.id,i.graph.edges.positives(i))+this.nheight(r.weight)+Math.min(this.nheight(i.data.exit),this.extraWidth),r>s&&(s=r);s>this.padAfter&&(this.padAfter=s)}this.padAfter+=2;var f=this.g.select("g.edges");f.empty()?f=this.g.append("svg:g").attr("class").string("edges"):f.selectAll("*").remove(),t=xr.order(Xr.array(br(Xr.array(this.layout.graph.edges.iterator()))()),function(t,n){var r=e.layout.cell(t.tail).layer-e.layout.cell(t.head).layer,r=e.layout.cell(n.tail).layer-e.layout.cell(n.head).layer-r;return 0!=r?r:Hr.compare(n.weight,t.weight)}),Xr.each(this.layout.graph.nodes.iterator(),function(t){t.graph.edges.sortPositives(t,function(t,n){var r=e.layout.cell(t.head),i=e.layout.cell(n.head),s=i.layer-r.layer;return 0!=s?s:r.position-i.position}),t.graph.edges.sortNegatives(t,function(t,n){var r=e.layout.cell(t.tail),i=e.layout.cell(n.tail);return r.layer>i.layer?1:r.position-i.position})}),n=t.slice(),n.sort(function(t,n){var r=e.layout.cell(t.tail);return e.layout.cell(n.tail).position-r.position}),this.thinbackedges?Xr.each(br(n)(),function(t){if(!(0>=t.weight)){var n=e.layout.cell(t.head),r=e.layout.cell(t.tail);if(!(n.layer>r.layer)){var i=e.nheight(t.weight),s=5+e.cafter(t.id,t.tail.positives())*(e.backEdgeSpacing+1),u=5+e.cafter(t.id,t.head.negatives())*(e.backEdgeSpacing+1),r=e.layerWidth/2+e.xlayer(r.layer),a=-e.layerWidth/2+e.xlayer(n.layer),l=e.ynode(t.tail)+e.ydiagonal(t.id,t.tail.positives()),c=e.nheight(t.head.data.entry)+e.ynode(t.head)+e.ydiagonal(t.id,t.head.negatives()),h=f.append("svg:g");h.append("svg:rect").attr("x")["float"](r).attr("y")["float"](l).attr("width")["float"](10).attr("height")["float"](i).attr("class").string("edge fill fill-"+e.styleEdgeBackward+" stroke stroke-"+e.styleEdgeBackward).onNode("mouseover",function(e,t,n,r){return function(i,s){return e(t,n,r,i,s)}}(wr(e,e.onmouseoveredge),(r+a)/2,o,t)),h.append("svg:rect").attr("x")["float"](a-10).attr("y")["float"](c).attr("width")["float"](10).attr("height")["float"](i).attr("class").string("edge fill fill-"+e.styleEdgeBackward+" stroke stroke-"+e.styleEdgeBackward).onNode("mouseover",function(e,t,n,r){return function(i,s){return e(t,n,r,i,s)}}(wr(e,e.onmouseoveredge),(r+a)/2,o,t)),n=new nt.HookConnector(h,"stroke stroke-"+e.styleEdgeBackward),e.addToMap(t.id,"edge",h),n.update(r+10,l+i/2,a-10,c+i/2,o,s,u),n.g.onNode("mouseover",function(e,t,n,r){return function(i,s){return e(t,n,r,i,s)}}(wr(e,e.onmouseoveredge),(r+a)/2,o,t)),null!=e.edgeClass&&(i=e.edgeClass({head:t.head.data,tail:t.tail.data,edgeweight:t.weight},e.dependentVariable.stats),null!=i&&n.addClass(i)),pt.storeColorForSelection(n.g,"stroke",n.line.style("stroke").get()),null!=e.clickEdge&&n.g.onNode("click",function(e,t){return function(n,r){return e(t,n,r)}}(wr(e,e.edgeClickWithEdge),t)),e.stackbackedges&&(o+=1+e.backEdgeSpacing)}}}):Xr.each(br(n)(),function(t){if(!(0>=t.weight)){var n=e.layout.cell(t.head),r=e.layout.cell(t.tail);if(!(n.layer>r.layer)){var i=e.nheight(t.weight),s=new nt.HookConnectorArea(f,"fill fill-"+e.styleEdgeBackward,"stroke stroke-"+e.styleEdgeBackward),u=e.hafter(t.id,t.tail.positives())+Math.min(e.extraWidth,e.nheight(t.tail.data.exit)),a=e.hafter(t.id,t.head.negatives()),r=e.layerWidth/2+e.xlayer(r.layer),n=-e.layerWidth/2+e.xlayer(n.layer),l=e.ynode(t.tail)+e.ydiagonal(t.id,t.tail.positives()),c=e.nheight(t.head.data.entry)+e.ynode(t.head)+e.ydiagonal(t.id,t.head.negatives());e.addToMap(t.id,"edge",s.g),s.update(r,l,n,c,i,o,u,a),s.g.onNode("mouseover",function(e,t,n,r){return function(i,s){return e(t,n,r,i,s)}}(wr(e,e.onmouseoveredge),(r+n)/2,o+i/2,t)),null!=e.edgeClass&&(u=e.edgeClass({head:t.head.data,tail:t.tail.data,edgeweight:t.weight},e.dependentVariable.stats),null!=u&&s.addClass(u)),pt.storeColorForSelection(s.g,"fill",s.area.style("fill").get()),null!=e.clickEdge&&s.g.onNode("click",function(e,t){return function(n,r){return e(t,n,r)}}(wr(e,e.edgeClickWithEdge),t)),e.stackbackedges&&(o+=i+e.backEdgeSpacing)}}}),Xr.each(br(t)(),function(t){if(!(0>=t.weight)){var n=t.head,r=t.tail,i=e.layout.cell(n),s=e.layout.cell(r);if(!(i.layer<=s.layer)){var s=Math.round(e.layerWidth/2+e.xlayer(s.layer))-.5,i=Math.round(-e.layerWidth/2+e.xlayer(i.layer))-.5,r=e.ynode(r)+e.ydiagonal(t.id,r.graph.edges.positives(r)),n=e.ynode(n)+e.nheight(n.data.entry)+e.ydiagonal(t.id,n.graph.edges.negatives(n)),o=e.nheight(t.weight),u=new nt.DiagonalArea(f,"fill fill-"+e.styleEdgeForward,"stroke stroke-"+e.styleEdgeForward);u.update(s,r,i,n,o,o);if(null!=e.edgeClass){var a=e.edgeClass({head:t.head.data,tail:t.tail.data,edgeweight:t.weight},e.dependentVariable.stats);null!=a&&u.addClass(a)}e.addToMap(t.id,"edge",u.g),u.g.onNode("mouseover",function(e,t,n,r){return function(i,s){return e(t,n,r,i,s)}}(wr(e,e.onmouseoveredge),(s+i)/2,(r+n+o)/2,t)),pt.storeColorForSelection(u.g,"fill",u.area.style("fill").get()),null!=e.clickEdge&&u.g.onNode("click",function(e,t){return function(n,r){return e(t,n,r)}}(wr(e,e.edgeClickWithEdge),t))}}}),this.layout.each(function(t,n){if(!(0>=n.data.exit||0>=e.extraWidth||null!=e.displayExit&&!e.displayExit(n.data,e.dependentVariable.stats))){var r=new nt.ElbowArea(f,"fill fill-"+e.styleexit,"stroke stroke-"+e.styleexit),i=e.nheight(n.data.exit),s=e.layerWidth/2+e.xlayer(t.layer),o=e.ynode(n)+e.ydiagonal(null,n.graph.edges.positives(n)),u=Math.max(0,Math.min(i-3,e.extraRadius));r.update(nt.Orientation.RightBottom,i,s,o+i,u,e.extraWidth,0,e.extraHeight);if(null!=e.labelEdge){var a,l=e.labelEdge({tail:n,head:null,nodeweight:n.data.weight,edgeweight:n.data.exit},e.dependentVariable.stats);a=new nt.Label(f,!0,!0,!1),a.addClass("edge"),a.place(s,o+i/2,0),a.set_anchor(nt.GridAnchor.Left),a.set_text(l),a.getSize().height>.75*i&&a.destroy()}r.g.onNode("mouseover",function(e,t,n,r){return function(i,s){return e(t,n,r,i,s)}}(wr(e,e.onmouseoverexit),s+u+(-u+Math.min(e.extraWidth,i))/2,e.ynode(n)+e.hnode(n)+u+e.extraHeight,n)),null!=e.edgeClass&&(i=e.edgeClass({head:null,tail:n.data,edgeweight:n.data.exit},e.dependentVariable.stats),null!=i&&r.addClass(i)),pt.storeColorForSelection(r.g,"fill",r.area.style("fill").get()),null!=e.clickEdge&&r.g.onNode("click",function(e,t,n){return function(r,i){return e(t,n,r,i)}}(wr(e,e.edgeClickWithNode),n,!0)),e.addToMap(n.id,"exit",r.g)}}),this.layout.each(function(t,n){if(!(0>=n.data.entry||0>=e.extraWidth||null!=e.displayEntry&&!e.displayEntry(n.data,e.dependentVariable.stats))){var r=new nt.ElbowArea(f,"fill fill-"+e.styleentry,"stroke stroke-"+e.styleentry),i=e.nheight(n.data.entry),s=Math.max(0,Math.min(i-3,e.extraRadius)),o=-e.layerWidth/2+e.xlayer(t.layer);r.update(nt.Orientation.LeftTop,i,o,e.ynode(n),s,e.extraWidth,0,e.extraHeight);if(null!=e.labelEdge){var u,a=e.labelEdge({tail:null,head:n,nodeweight:n.data.weight,edgeweight:n.data.entry},e.dependentVariable.stats);u=new nt.Label(f,!0,!0,!1),u.addClass("edge"),u.place(o,e.ynode(n)+i/2,0),u.set_anchor(nt.GridAnchor.Right),u.set_text(a),u.getSize().height>.75*i&&u.destroy()}r.g.onNode("mouseover",function(e,t,n,r){return function(i,s){return e(t,n,r,i,s)}}(wr(e,e.onmouseoverentry),o-s+(s-Math.min(e.extraWidth,i))/2,e.ynode(n)-s-e.extraHeight,n)),null!=e.edgeClass&&(i=e.edgeClass({head:n.data,tail:null,edgeweight:n.data.entry},e.dependentVariable.stats),null!=i&&r.addClass(i)),pt.storeColorForSelection(r.g,"fill",r.area.style("fill").get()),null!=e.clickEdge&&r.g.onNode("click",function(e,t,n){return function(r,i){return e(t,n,r,i)}}(wr(e,e.edgeClickWithNode),n,!1)),e.addToMap(n.id,"entry",r.g)}}),null!=this.labelEdge&&Xr.each(br(t)(),function(t){if(!(0>=t.weight)){var n=t.tail;if(!e.isdummy(n)){var r=e.layout.cell(n),i=e.nheight(t.weight),s,o=e.labelEdge(e.edgeData(t),e.dependentVariable.stats);s=new nt.Label(f,!0,!0,!1),s.addClass("edge"),s.place(e.layerWidth/2+e.xlayer(r.layer)+2,e.ynode(n)+e.ydiagonal(t.id,n.graph.edges.positives(n))+i/2,0),s.set_anchor(nt.GridAnchor.Left),s.set_text(o),s.getSize().height>.75*i&&s.destroy()}}}),t=this.g.selectAll("g.layer").data(this.layout.layers()).enter().append("svg:g").attr("class").string("layer").append("svg:line").attr("class").stringf(function(e,t){return"rule rule-"+t}).attr("x1")["float"](0).attr("x2")["float"](0).attr("y1")["float"](0).attr("y2")["float"](this.height).update().attr("transform").stringf(function(t,n){return"translate("+e.xlayer(n)+",0)"}).exit().remove().update().selectAll("g.node").dataf(function(t,n){return e.layout.layer(n)}),n=t.enter().append("svg:g").attr("class").string("node"),0<this.layerWidth&&(i=n.append("svg:rect").attr("class").stringf(function(t){return"fill fill-"+(e.isdummy(t)?e.styleEdgeForward+" nonode":e.styleNode+" node")}).attr("x")["float"](-this.layerWidth/2).attr("y")["float"](0).attr("width")["float"](Math.round(this.layerWidth)).attr("height").floatf(wr(this,this.hnode)),n.each(function(t){e.addToMap(t.id,"node",Oi.selectNode(Li.current)),null!=e.nodeClass&&(t=e.nodeClass(t.data,e.dependentVariable.stats),null!=t&&Oi.selectNode(Li.current).classed().add(t))}),pt.storeColorForSelection(n,"fill",i.style("fill").get()),n.append("svg:line").attr("class").stringf(function(t){return"node stroke stroke-"+(e.isdummy(t)?e.styleEdgeForward:e.styleNode)}).attr("x1")["float"](-this.layerWidth/2).attr("y1")["float"](0).attr("x2")["float"](this.layerWidth/2).attr("y2")["float"](0),n.append("svg:line").attr("class").stringf(function(t){return"node stroke stroke-"+(e.isdummy(t)?e.styleEdgeForward:e.styleNode)}).attr("x1")["float"](-this.layerWidth/2).attr("y1").floatf(wr(this,this.hnode)).attr("x2")["float"](this.layerWidth/2).attr("y2").floatf(wr(this,this.hnode))),t.update().attr("transform").stringf(function(t){return"translate(0,"+e.ynode(t)+")"}),n.each(function(t){var n=Oi.selectNode(Li.current);if(!e.isdummy(t)){var r=e.hnode(t),i;if(null!=e.labelDataPoint)for(var s=e.labelDataPoint(t.data.dp,e.dependentVariable.stats).split("\n"),o=null,u,a=0,f=0,l=s.length;f<l;){a=f++,u=s[a],i=new nt.Label(n,!0,!0,!1),i.addClass("node"),0==a&&i.addClass("first"),a=3,null!=o&&(a+=o.y+o.getSize().height),i.place(-e.layerWidth/2+6,a,0),i.set_anchor(nt.GridAnchor.TopLeft),i.set_text(u);if(i.y+i.getSize().height>r){i.destroy();break}o=i}r=!1,null!=e.imagePath&&!e.isdummy(t)&&(i=e.imagePath(t.data.dp),null!=i&&(r=!0,n.append("svg:g").attr("transform").string("translate("+Math.round(-e.imageWidth/2)+","+Math.round(-e.imageHeight-e.imageSpacing)+")").append("svg:image").attr("preserveAspectRatio").string("xMidYMid slice").attr("width")["float"](e.imageWidth).attr("height")["float"](e.imageHeight).attr("xlink:href").string(i))),null!=e.labelNode&&(i=r?new nt.Label(n,!0,!0,!0):new nt.Label(n,!0,!1,!1),i.set_anchor(nt.GridAnchor.Bottom),i.place(0,-e.labelNodeSpacing,0),i.set_text(e.labelNode(t.data.dp,e.dependentVariable.stats)))}}),n.each(function(t){var n=Oi.selectNode(Li.current);n.onNode("mouseover",function(e,t){return function(n,r){return e(t,n,r)}}(wr(e,e.onmouseovernode),t)),null!=e.click&&n.onNode("click",function(e,t){return function(n,r){return e(t,n,r)}}(wr(e,e.nodeclick),t))}),this.ready.dispatch()},data:function(e){var t=this;this.layout=e.clone();for(var e=Xr.filter(br(Xr.filter(this.layout.graph.nodes.iterator(),function(e){return t.isdummy(e)}))(),function(e){e=e.graph.edges.positives(e).next();if(null==e)return!1;var n=t.layout.cell(e.head);return t.layout.cell(e.tail).layer>n.layer}),n=this.layout.layers(),r=0;r<e.length;){var i=e[r];++r;var s=this.layout.cell(i),o=i.graph.edges.positives(i).next(),u=i.graph.edges.negatives(i).next();n[s.layer].splice(s.position,1),this.layout.graph.edges.create(u.tail,o.head,o.weight,o.data),i.graph.nodes._remove(i)}this.redraw()},setVariables:function(e,t){this.dependentVariable=t[0]},maphi:null,mapelements:null,dependentVariable:null,styleEdgeForward:null,styleEdgeBackward:null,styleexit:null,styleentry:null,styleNode:null,layerstarty:null,padAfter:null,padBefore:null,availableheight:null,maxweight:null,layout:null,displayExit:null,displayEntry:null,edgeClass:null,nodeClass:null,clickEdge:null,imagePath:null,labelNode:null,labelEdgeOver:null,labelEdge:null,thinbackedges:null,stackbackedges:null,labelNodeSpacing:null,imageSpacing:null,imageHeight:null,imageWidth:null,extraRadius:null,extraHeight:null,backEdgeSpacing:null,extraWidth:null,dummySpacing:null,nodeSpacing:null,layerWidth:null,__class__:tt.Sankey}),tt.ScatterGraph=function(e){tt.CartesianChart.call(this,e),this.addClass("scatter-graph"),this.chart=this.g.append("svg:g")},Er["rg.svg.chart.ScatterGraph"]=tt.ScatterGraph,tt.ScatterGraph.__name__=["rg","svg","chart","ScatterGraph"],tt.ScatterGraph.__super__=tt.CartesianChart,tt.ScatterGraph.prototype=yr(tt.CartesianChart.prototype,{onclick:function(e,t){this.click(t,e)},onmouseover:function(e,t){var n=this.labelDataPointOver(Kr.field(t,"__dhx_data__"),e);if(null==n)this.tooltip.hide();else{var r=Oi.selectNode(t),r=tt.Coords.fromTransform(r.attr("transform").get());this.tooltip.html(n.split("\n").join("<br>")),this.moveTooltip(r[0],r[1],null)}},getTranslatePointf:function(e){var t=wr(this,this.x),n=this.getY1(e);return function(e,r){return"translate("+t(e)+","+n(e,r)+")"}},redraw:function(){var e=this;if(null!=this.dps&&null!=this.dps[0]&&null!=this.dps[0][0]){var t=this.chart.selectAll("g.group").data(this.dps);t.enter().append("svg:g").attr("class").stringf(function(e,t){return"group group-"+t}),t.exit().remove();for(var t=0,n=this.dps.length;t<n;){var r=t++,i=this.dps[r],s=this.chart.select("g.group-"+r),o=[this.yVariables[r].stats],i=s.selectAll("g.symbol").data(i),u=function(){return function(e,t){return function(){return function(n,r){return e(t,n,r)}}()}}()(wr(this,this.onclick),o[0]),a=function(){return function(e,t){return function(){return function(n,r){return e(t,n,r)}}()}}()(wr(this,this.onmouseover),o[0]),s=i.enter().append("svg:g").attr("class").stringf(this.classf(r,"symbol")).attr("transform").stringf(this.getTranslatePointf(r));null!=this.click&&s.on("click",u),null!=this.labelDataPointOver&&s.onNode("mouseover",a),u=s.append("svg:path").attr("d").stringf(function(t){return function(n){return e.symbol(n,t[0])}}(o)),null!=this.symbolStyle&&u.attr("style").stringf(function(t){return function(n){return e.symbolStyle(n,t[0])}}(o)),null!=this.labelDataPoint&&s.eachNode(function(e,t){return function(n){var r=Kr.field(n,"__dhx_data__");(new nt.Label(Oi.selectNode(n),!0,!0,!0)).set_text(e[0](r,t[0]))}}([this.labelDataPoint],o)),i.update().selectAll("g.symbol").dataf(function(){return function(e){return e}}()).update().attr("transform").stringf(this.getTranslatePointf(r)),i.exit().remove()}this.ready.dispatch()}},resize:function(){tt.CartesianChart.prototype.resize.call(this),this.redraw()},data:function(e){this.dps=e,this.redraw()},classf:function(e,t){return function(){return t+" stroke-"+e+" fill-"+e}},getY1:function(e){var t=this.height,n=this.yVariables[e];return function(e){return e=Kr.field(e,n.type),e=n.axis.scale(n.min(),n.max(),e)*t,t-e}},x:function(e){return e=Kr.field(e,this.xVariable.type),this.xVariable.axis.scale(this.xVariable.min(),this.xVariable.max(),e)*this.width},dps:null,chart:null,symbolStyle:null,symbol:null,__class__:tt.ScatterGraph}),tt.StreamEffect={__ename__:["rg","svg","chart","StreamEffect"],__constructs__:["NoEffect","GradientHorizontal","GradientVertical"]},tt.StreamEffect.NoEffect=["NoEffect",0],tt.StreamEffect.NoEffect.toString=Sr,tt.StreamEffect.NoEffect.__enum__=tt.StreamEffect,tt.StreamEffect.GradientHorizontal=function(e){return e=["GradientHorizontal",1,e],e.__enum__=tt.StreamEffect,e.toString=Sr,e},tt.StreamEffect.GradientVertical=function(e){return e=["GradientVertical",2,e],e.__enum__=tt.StreamEffect,e.toString=Sr,e},tt.StreamEffects=function(){},Er["rg.svg.chart.StreamEffects"]=tt.StreamEffects,tt.StreamEffects.__name__=["rg","svg","chart","StreamEffects"],tt.StreamEffects.getLightness=function(e,t){return null==e?t:Qr.parseFloat(e)},tt.StreamEffects.parse=function(e){e=e.toLowerCase().split(":");switch(e.shift()){case"gradient":case"gradientv":case"gradientvert":case"gradientvertical":return tt.StreamEffect.GradientVertical(tt.StreamEffects.getLightness(e.pop(),.75));case"gradienth":case"gradienthoriz":case"gradienthorizontal":return tt.StreamEffect.GradientHorizontal(tt.StreamEffects.getLightness(e.pop(),.75));default:return tt.StreamEffect.NoEffect}},tt.StreamGraph=function(e){tt.CartesianChart.call(this,e),this.interpolator=Mn.LineInterpolator.Cardinal(.6),this.gradientLightness=.75,this.gradientStyle=1},Er["rg.svg.chart.StreamGraph"]=tt.StreamGraph,tt.StreamGraph.__name__=["rg","svg","chart","StreamGraph"],tt.StreamGraph.__super__=tt.CartesianChart,tt.StreamGraph.prototype=yr(tt.CartesianChart.prototype,{applyGradientH:function(e){for(var t=Oi.selectNode(Li.current),n=kn.Hsl.toHsl(pt.parse(t.style("fill").get(),"#cccccc")),r="rg_stream_gradient_v_"+tt.StreamGraph.vid++,i=this.defs.append("svg:linearGradient").attr("gradientUnits").string("objectBoundingBox").attr("class").string("x").attr("id").string(r).attr("x1").string("0%").attr("x2").string("100%").attr("y1").string("0%").attr("y2").string("0%"),s=e[0].coord.x,o=e[e.length-1].coord.x-s,u=xr.floatMax(e,function(e){return e.coord.y}),a=0,f=e.length;a<f;){var l=a++,l=e[l],c=pt.applyLightness(n,this.gradientLightness,l.coord.y/u);i.append("svg:stop").attr("offset").string(Math.round(1e4*((l.coord.x-s)/o))/100+"%").attr("stop-color").string(c.hex("#")).attr("stop-opacity")["float"](1)}t.attr("style").string("fill:url(#"+r+")")},applyGradientV:function(){var e=Oi.selectNode(Li.current),t=pt.parse(e.style("fill").get(),"#cccccc"),n="rg_stream_gradient_h_"+t.hex("");if(this.defs.select("#"+n).empty()){var r=pt.applyLightness(kn.Hsl.toHsl(t),this.gradientLightness).toRgbString(),i=this.defs.append("svg:linearGradient").attr("gradientUnits").string("objectBoundingBox").attr("id").string(n).attr("x1").string("0%").attr("x2").string("0%").attr("y1").string("100%").attr("y2").string("0%").attr("spreadMethod").string("pad");i.append("svg:stop").attr("offset").string("0%").attr("stop-color").string(r).attr("stop-opacity")["float"](1),i.append("svg:stop").attr("offset").string("100%").attr("stop-color").string(t.toRgbString()).attr("stop-opacity")["float"](1)}e.attr("style").string("fill:url(#"+n+")")},prepareData:function(){var e=this;this.defs.selectAll("linearGradient.h").remove();var t=function(e,t,n){return function(r){return e(t,n,r)}}((rs=this.xVariable.axis,wr(rs,rs.scale)),this.xVariable.min(),this.xVariable.max()),n=this.xVariable.type,r=function(e,t,n){return function(r){return e(t,n,r)}}((rs=this.yVariables[0].axis,wr(rs,rs.scale)),this.yVariables[0].min(),this.yVariables[0].max()),i=this.yVariables[0].type,s=xr.floatMax(this.dps,function(e){return e.length})|0,o=this.dps.map(function(o){return zr.range(0,s).map(function(s,u){var a=o[u];if(null==a){e:{for(var a=0,f=e.dps.length;a<f;){var l=a++;if(null!=e.dps[l][u]){a=e.dps[l][u];break e}}a=null}a={x:t(Kr.field(a,n)),y:0}}else a={x:t(Kr.field(a,n)),y:Math.max(0,r(Kr.field(a,i)))};return a})}),o=(new Dn.layout.Stack).offset(Dn.layout.StackOffset.Silhouette).order(Dn.layout.StackOrder.DefaultOrder).stack(o);this.transformedData=o.map(function(t,n){return t.map(function(t,r){return{coord:t,dp:e.dps[n][r]}})}),this.stats=this.yVariables[0].stats,this.maxy=xr.floatMax(o,function(e){return xr.floatMax(e,function(e){return e.y0+e.y})}),this.area=(new Mn.Area).interpolator(this.interpolator).x(function(t){return t.coord.x*e.width}).y0(function(t){return e.height-t.coord.y0*e.height/e.maxy}).y1(function(t){return e.height-(t.coord.y+t.coord.y0)*e.height/e.maxy})},onclick:function(e,t){null!=this.click&&this.click(this.getDataAtNode(e,t).dp,this.stats)},onover:function(e,t){if(null!=this.labelDataPointOver){var n=this.getDataAtNode(e,t);this.tooltip.html(this.labelDataPointOver(n.dp,this.stats).split("\n").join("<br>")),this.moveTooltip(n.coord.x*this.width,this.height-(n.coord.y+n.coord.y0)*this.height/this.maxy,pt.extractColor(e))}},getDataAtNode:function(e,t){var n=$i.mouse(e)[0],n=Hr.uninterpolatef(this.transformedData[t][0].coord.x,xr.last(this.transformedData[t]).coord.x)(n/this.width);return Kr.field(e,"__dhx_data__"),xr.nearest(this.transformedData[t],n,function(e){return e.coord.x})},redraw:function(){if(null!=this.transformedData){var e=this.g.selectAll("g.group").data(this.transformedData);e.update().select("path.line").attr("d").stringf((rs=this.area,wr(rs,rs.shape)));var t=e.enter().append("svg:g").attr("class").string("group").append("svg:path").attr("class").stringf(function(e,t){return"line fill-"+t+" stroke-"+t}).attr("d").stringf((rs=this.area,wr(rs,rs.shape))).onNode("mousemove",wr(this,this.onover)).onNode("click",wr(this,this.onclick));pt.storeColorForSelection(t),0!=this.gradientStyle&&t.each(1==this.gradientStyle?wr(this,this.applyGradientV):wr(this,this.applyGradientH)),e.exit().remove(),this.ready.dispatch()}},data:function(e){this.dps=e,this.prepareData(),this.redraw()},setVariables:function(e,t,n,r){tt.CartesianChart.prototype.setVariables.call(this,e,t,n,r)},init:function(){tt.CartesianChart.prototype.init.call(this),this.defs=this.g.append("svg:defs"),this.g.classed().add("stream-chart")},maxy:null,defs:null,stats:null,transformedData:null,area:null,dps:null,gradientStyle:null,gradientLightness:null,interpolator:null,__class__:tt.StreamGraph}),it={RulesOrtho:function(e,t){rt.Layer.call(this,e),this.orientation=t,this.displayAnchorLine=this.displayMajor=this.displayMinor=!0,this.g.classed().add("tickmarks")}},Er["rg.svg.layer.RulesOrtho"]=it.RulesOrtho,it.RulesOrtho.__name__=["rg","svg","layer","RulesOrtho"],it.RulesOrtho.__super__=rt.Layer,it.RulesOrtho.prototype=yr(rt.Layer.prototype,{tickClass:function(e){return e.get_major()?"major":null},y2Vertical:function(){return this.height},y2Horizontal:function(){return 0},x2Vertical:function(){return 0},x2Horizontal:function(){return this.width},y1Vertical:function(){return 0},y1Horizontal:function(){return 0},x1Vertical:function(){return 0},x1Horizontal:function(){return 0},translateVertical:function(e){return"translate("+e.get_delta()*this.width+",0)"},translateHorizontal:function(e){return"translate(0,"+(this.height-e.get_delta()*this.height)+")"},t:function(e,t){return"translate("+e+","+t+")"},init:function(){this.initf(),this.displayAnchorLine&&(this.g.append("svg:line").attr("class").string("anchor-line"),this.updateAnchorLine())},initf:function(){switch(this.orientation[1]){case 1:this.translate=wr(this,this.translateHorizontal),this.x1=wr(this,this.x1Horizontal),this.y1=wr(this,this.y1Horizontal),this.x2=wr(this,this.x2Horizontal),this.y2=wr(this,this.y2Horizontal);break;case 0:this.translate=wr(this,this.translateVertical),this.x1=wr(this,this.x1Vertical),this.y1=wr(this,this.y1Vertical),this.x2=wr(this,this.x2Vertical),this.y2=wr(this,this.y2Vertical)}},redraw:function(){var e=this.axis.ticks(this.min,this.max,this.maxTicks()),e=this.g.selectAll("g.rule").data(e,wr(this,this.id)),t=e.enter().append("svg:g").attr("class").string("rule").attr("transform").stringf(this.translate);this.displayMinor&&t.filter(function(e){return!e.major}).append("svg:line").attr("x1").floatf(this.x1).attr("y1").floatf(this.y1).attr("x2").floatf(this.x2).attr("y2").floatf(this.y2).attr("class").stringf(wr(this,this.tickClass)),this.displayMajor&&t.filter(function(e){return e.major}).append("svg:line").attr("x1").floatf(this.x1).attr("y1").floatf(this.y1).attr("x2").floatf(this.x2).attr("y2").floatf(this.y2).attr("class").stringf(wr(this,this.tickClass)),e.update().attr("transform").stringf(this.translate),e.exit().remove()},id:function(e){return""+Qr.string(e.get_value())},maxTicks:function(){var e;switch(this.orientation[1]){case 1:e=this.width;break;case 0:e=this.height}return Math.round(e/2.5)},updateAnchorLine:function(){var e=this.g.select("line.anchor-line");switch(this.orientation[1]){case 1:e.attr("x1")["float"](0).attr("y1")["float"](0).attr("x2")["float"](0).attr("y2")["float"](this.height);break;case 0:e.attr("x1")["float"](0).attr("y1")["float"](this.height).attr("x2")["float"](this.width).attr("y2")["float"](this.height)}},update:function(e,t,n){this.axis=e,this.min=t,this.max=n,this.redraw()},resize:function(){null!=this.axis&&(this.displayAnchorLine&&this.updateAnchorLine(),this.redraw())},max:null,min:null,axis:null,y:null,x:null,y2:null,x2:null,y1:null,x1:null,translate:null,displayAnchorLine:null,displayMajor:null,displayMinor:null,orientation:null,__class__:it.RulesOrtho}),it.TickmarksOrtho=function(e,t){rt.Layer.call(this,e),this.anchor=t,this.displayLabel=this.displayMajor=this.displayMinor=!0,this.displayAnchorLine=!1,this.lengthMinor=2,this.lengthMajor=5,this.paddingMajor=this.paddingMinor=1,this.paddingLabel=10,this.g.classed().add("tickmarks")},Er["rg.svg.layer.TickmarksOrtho"]=it.TickmarksOrtho,it.TickmarksOrtho.__name__=["rg","svg","layer","TickmarksOrtho"],it.TickmarksOrtho.__super__=rt.Layer,it.TickmarksOrtho.prototype=yr(rt.Layer.prototype,{tickClass:function(e){return e.get_major()?"major":null},y2Right:function(){return 0},y2Left:function(){return 0},y2Bottom:function(e){return-(e.get_major()?this.lengthMajor+this.paddingMajor:this.lengthMinor+this.paddingMinor)},y2Top:function(e){return e.get_major()?this.lengthMajor+this.paddingMajor:this.lengthMinor+this.paddingMinor},x2Right:function(e){return-(e.get_major()?this.lengthMajor+this.paddingMajor:this.lengthMinor+this.paddingMinor)},x2Left:function(e){return e.get_major()?this.lengthMajor+this.paddingMajor:this.lengthMinor+this.paddingMinor},x2Bottom:function(){return 0},x2Top:function(){return 0},y1Right:function(){return 0},y1Left:function(){return 0},y1Bottom:function(e){return-(e.get_major()?this.paddingMajor:this.paddingMinor)},y1Top:function(e){return e.get_major()?this.paddingMajor:this.paddingMinor},x1Right:function(e){return-(e.get_major()?this.paddingMajor:this.paddingMinor)},x1Left:function(e){return e.get_major()?this.paddingMajor:this.paddingMinor},x1Bottom:function(){return 0},x1Top:function(){return 0},translateRight:function(e){return"translate("+this.panel.frame.width+","+(this.panel.frame.height-e.get_delta()*this.panel.frame.height)+")"},translateLeft:function(e){return"translate(0,"+(this.panel.frame.height-e.get_delta()*this.panel.frame.height)+")"},translateBottom:function(e){return"translate("+e.get_delta()*this.panel.frame.width+","+this.panel.frame.height+")"},translateTop:function(e){return"translate("+e.get_delta()*this.panel.frame.width+",0)"},t:function(e,t){return"translate("+e+","+t+")"},init:function(){this.initf(),this.displayAnchorLine&&(this.g.append("svg:line").attr("class").string("anchor-line"),this.updateAnchorLine())},initf:function(){switch(this.anchor[1]){case 0:this.translate=wr(this,this.translateTop),this.x1=wr(this,this.x1Top),this.y1=wr(this,this.y1Top),this.x2=wr(this,this.x2Top),this.y2=wr(this,this.y2Top);break;case 1:this.translate=wr(this,this.translateBottom),this.x1=wr(this,this.x1Bottom),this.y1=wr(this,this.y1Bottom),this.x2=wr(this,this.x2Bottom),this.y2=wr(this,this.y2Bottom);break;case 2:this.translate=wr(this,this.translateLeft),this.x1=wr(this,this.x1Left),this.y1=wr(this,this.y1Left),this.x2=wr(this,this.x2Left),this.y2=wr(this,this.y2Left);break;case 3:this.translate=wr(this,this.translateRight),this.x1=wr(this,this.x1Right),this.y1=wr(this,this.y1Right),this.x2=wr(this,this.x2Right),this.y2=wr(this,this.y2Right)}if(null==this.labelOrientation)switch(this.anchor[1]){case 0:case 1:this.labelOrientation=nt.LabelOrientation.Orthogonal;break;case 2:case 3:this.labelOrientation=nt.LabelOrientation.Aligned}else if(null==this.labelAnchor)switch(this.labelOrientation[1]){case 1:switch(this.anchor[1]){case 0:case 2:this.labelAnchor=nt.GridAnchor.Left;break;case 1:case 3:this.labelAnchor=nt.GridAnchor.Right}break;case 2:switch(this.anchor[1]){case 0:case 2:this.labelAnchor=nt.GridAnchor.Top;break;case 1:case 3:this.labelAnchor=nt.GridAnchor.Bottom}}if(null==this.labelAnchor)switch(this.anchor[1]){case 0:this.labelAnchor=nt.GridAnchor.Top;break;case 1:this.labelAnchor=nt.GridAnchor.Bottom;break;case 2:this.labelAnchor=nt.GridAnchor.Left;break;case 3:this.labelAnchor=nt.GridAnchor.Right}if(null==this.labelAngle)switch(this.anchor[1]){case 0:this.labelAngle=90;break;case 1:this.labelAngle=90;break;case 2:this.labelAngle=0;break;case 3:this.labelAngle=0}},createLabel:function(e){var t=Kr.field(e,"__dhx_data__");if(t.get_major()){e=new nt.Label(Oi.selectNode(e),!1,!1,!1),e.set_anchor(this.labelAnchor),e.set_orientation(this.labelOrientation);var n=this.paddingLabel;e.set_text(null==this.tickLabel?t.get_label():this.tickLabel(t.get_value()));switch(this.anchor[1]){case 0:e.place(0,n,this.labelAngle);break;case 1:e.place(0,-n,this.labelAngle);break;case 2:e.place(n,0,this.labelAngle);break;case 3:e.place(-n,0,this.labelAngle)}var r;switch(this.anchor[1]){case 0:case 1:r=e.getSize().height+n;break;case 2:case 3:r=e.getSize().width+n}t=r,t>this.desiredSize&&(this.desiredSize=t)}},redraw:function(){this.desiredSize=Math.max(this.paddingMinor+this.lengthMinor,this.paddingMajor+this.lengthMajor);var e=this.axis.ticks(this.min,this.max,this.maxTicks()),e=this.g.selectAll("g.tick").data(e,wr(this,this.id)),t=e.enter().append("svg:g").attr("class").string("tick").attr("transform").stringf(this.translate);this.displayMinor&&t.filter(function(e){return!e.major}).append("svg:line").attr("x1").floatf(this.x1).attr("y1").floatf(this.y1).attr("x2").floatf(this.x2).attr("y2").floatf(this.y2).attr("class").stringf(wr(this,this.tickClass)),this.displayMajor&&t.filter(function(e){return e.major}).append("svg:line").attr("x1").floatf(this.x1).attr("y1").floatf(this.y1).attr("x2").floatf(this.x2).attr("y2").floatf(this.y2).attr("class").stringf(wr(this,this.tickClass)),this.displayLabel&&t.eachNode(wr(this,this.createLabel)),e.update().attr("transform")
.stringf(this.translate),e.exit().remove()},id:function(e){return""+Qr.string(e.get_value())},maxTicks:function(){var e;switch(this.anchor[1]){case 2:case 3:e=this.height;break;case 0:case 1:e=this.width}return Math.round(e/2.5)},updateAnchorLine:function(){var e=this.g.select("line.anchor-line");switch(this.anchor[1]){case 0:e.attr("x1")["float"](0).attr("y1")["float"](0).attr("x2")["float"](this.panel.frame.width).attr("y2")["float"](0);break;case 1:e.attr("x1")["float"](0).attr("y1")["float"](this.panel.frame.height).attr("x2")["float"](this.panel.frame.width).attr("y2")["float"](this.panel.frame.height);break;case 2:e.attr("x1")["float"](0).attr("y1")["float"](0).attr("x2")["float"](0).attr("y2")["float"](this.panel.frame.height);break;case 3:e.attr("x1")["float"](this.panel.frame.width).attr("y1")["float"](0).attr("x2")["float"](this.panel.frame.width).attr("y2")["float"](this.panel.frame.height)}},update:function(e,t,n){this.axis=e,this.min=t,this.max=n,this.redraw()},resize:function(){null!=this.axis&&(this.displayAnchorLine&&this.updateAnchorLine(),this.redraw())},max:null,min:null,axis:null,y:null,x:null,y2:null,x2:null,y1:null,x1:null,translate:null,tickLabel:null,desiredSize:null,labelAngle:null,labelAnchor:null,labelOrientation:null,paddingLabel:null,paddingMajor:null,paddingMinor:null,lengthMajor:null,lengthMinor:null,displayAnchorLine:null,displayLabel:null,displayMajor:null,displayMinor:null,anchor:null,__class__:it.TickmarksOrtho}),it.Title=function(e,t,n,r,i,s,o){null==o&&(o=!1),null==s&&(s=!1),null==i&&(i="title"),null==r&&(r=1),rt.Layer.call(this,e),this.addClass(i),this.group=this.g.append("svg:g"),this.label=new nt.Label(this.group,!1,s,o),this.label.set_orientation(nt.LabelOrientation.Orthogonal),this.set_anchor(n),this.set_padding(r),this.set_text(t),this.resize()},Er["rg.svg.layer.Title"]=it.Title,it.Title.__name__=["rg","svg","layer","Title"],it.Title.__super__=rt.Layer,it.Title.prototype=yr(rt.Layer.prototype,{set_padding:function(e){this.padding=e;switch(this.anchor[1]){case 0:this.label.place(0,0,90);break;case 1:this.label.place(0,0,90);break;case 2:this.label.place(0,0,180);break;case 3:this.label.place(0,0,0)}return e},set_anchor:function(e){switch((this.anchor=e)[1]){case 0:this.label.set_anchor(nt.GridAnchor.Top);break;case 1:this.label.set_anchor(nt.GridAnchor.Bottom);break;case 2:this.label.set_anchor(nt.GridAnchor.Bottom);break;case 3:this.label.set_anchor(nt.GridAnchor.Bottom)}return e},set_text:function(e){return this.label.set_text(e)},get_text:function(){return this.label.text},resize:function(){if(null!=this.anchor&&null!=this.width&&null!=this.padding)switch(this.anchor[1]){case 0:this.group.attr("transform").string("translate("+this.width/2+","+this.padding+")");break;case 3:this.group.attr("transform").string("translate("+(this.width-this.padding)+","+this.height/2+")");break;case 2:this.group.attr("transform").string("translate("+this.padding+","+this.height/2+")");break;case 1:this.group.attr("transform").string("translate("+this.width/2+","+(this.height-this.padding)+")")}},idealHeight:function(){var e=this.label.getSize();return Math.round(function(t){var n;switch(t.anchor[1]){case 2:case 3:n=e.width+t.padding;break;case 0:case 1:n=e.height+t.padding}return n}(this))},group:null,label:null,padding:null,anchor:null,__class__:it.Title,__properties__:yr(rt.Layer.prototype.__properties__,{set_text:"set_text",get_text:"get_text",set_anchor:"set_anchor",set_padding:"set_padding"})}),rt.Panel=function(e){this.frame=e,e.change=wr(this,this.reframe),this._layers=[]},Er["rg.svg.panel.Panel"]=rt.Panel,rt.Panel.__name__=["rg","svg","panel","Panel"],rt.Panel.prototype={reframe:function(){this.g.attr("transform").string("translate("+this.frame.x+","+this.frame.y+")");for(var e,t=0,n=this._layers.length;t<n;)e=this._layers[t++],e._resize()},init:function(e){this.g=e.append("svg:g").attr("class").string("panel").attr("transform").string("translate("+this.frame.x+","+this.frame.y+")")},setParent:function(e){null!=this.g&&this.g.remove(),this.parent=e,null!=e&&this.init(e.g)},removeLayer:function(e){Fr.remove(this._layers,e)},addLayer:function(e){Fr.remove(this._layers,e),this._layers.push(e)},toString:function(){return ti.getClassName(ti.getClass(this)).split(".").pop()},_layers:null,parent:null,g:null,frame:null,__class__:rt.Panel},rt.Container=function(e,t){rt.Panel.call(this,e),this.stack=new p(e.width,e.height,t),this.panels=[]},Er["rg.svg.panel.Container"]=rt.Container,rt.Container.__name__=["rg","svg","panel","Container"],rt.Container.__super__=rt.Panel,rt.Container.prototype=yr(rt.Panel.prototype,{reframe:function(){rt.Panel.prototype.reframe.call(this),this.stack.setSize(this.frame.width,this.frame.height),this.stack.reflow()},createContainerAt:function(e,t,n){return t=new rt.Container(new v(t),n),this.insertPanel(e,t),t},createPanelAt:function(e,t){var n=new rt.Panel(new v(t));return this.insertPanel(e,n),n},createContainer:function(e,t){var n=new rt.Container(new v(e),t);return this.addPanel(n),n},createPanel:function(e){return e=new rt.Panel(new v(e)),this.addPanel(e),e},removePanel:function(e){return Fr.remove(this.panels,e)?(this.stack.removeChild(ar.__cast(e.frame,v)),e.setParent(null),this):this},addPanels:function(e){for(var t=[],e=br(e)();e.hasNext();){var n=e.next();null!=n&&(null!=n.parent&&n.parent.removePanel(n),this.panels.push(n),n.setParent(this),t.push(ar.__cast(n.frame,v)))}return this.stack.addItems(t),this},addPanel:function(e){return this.addPanels([e])},insertPanel:function(e,t){return null==t?this:e>=this.stack.get_length()?this.addPanel(t):(0>e&&(e=0),null!=t.parent&&t.parent.removePanel(t),this.panels.splice(e,0,t),t.setParent(this),this.stack.insertItem(e,ar.__cast(t.frame,v)),this)},panels:null,stack:null,__class__:rt.Container}),rt.Panels=function(){},Er["rg.svg.panel.Panels"]=rt.Panels,rt.Panels.__name__=["rg","svg","panel","Panels"],rt.Panels.rootSize=function(e){for(var t=e.parent;null!=t;)var n=t,t=e.parent,e=n;return{width:e.frame.width,height:e.frame.height}},rt.Panels.absolutePos=function(e){for(var t=e,n=0,r=0;null!=t;)e=t,n+=t.frame.x,r+=t.frame.y,t=t.parent;var i=rt.Panels.htmlContainer(e),e=cr.getLeft(),t=cr.getTop();return null==i?{x:e,y:t}:(i=i.getBoundingClientRect(),{x:i.left+n+e,y:i.top+r+t})},rt.Panels.svgContainer=function(e){e=e.g.node();do e=e.ownerSVGElement;while(null!=e&&null!=Kr.field(e.ownerSVGElement,"ownerSVGElement"));return null==e?null:e},rt.Panels.htmlContainer=function(e){return e=rt.Panels.svgContainer(e),null==e?null:e.parentNode},rt.Panels.boundingBox=function(e,t){for(var n=e,r=0,i=0;t!=n;)r+=n.frame.x,i+=n.frame.y,n=n.parent;return{x:r,y:i,width:e.frame.width,height:e.frame.height}},rt.Panels.ancestorBoundingBox=function(e,t){for(var n=e,r=0,i=0,s=0,o=0;t!=n;)r+=n.frame.x,i+=n.frame.y,s=n.frame.width,o=n.frame.height,n=n.parent;return{x:-r,y:-i,width:s,height:o}},rt.Space=function(e,t,n){this.panel=new v(c.Fill(0,0)),rt.Container.call(this,this.panel,h.Vertical),this.init(this.svg=n.append("svg:svg").attr("xmlns").string("http://www.w3.org/2000/svg")),this.resize(e,t)},Er["rg.svg.panel.Space"]=rt.Space,rt.Space.__name__=["rg","svg","panel","Space"],rt.Space.__super__=rt.Container,rt.Space.prototype=yr(rt.Container.prototype,{resize:function(e,t){this.panel.width==e&&this.panel.height==t||(this.svg.attr("width")["float"](e).attr("height")["float"](t),this.panel.set_layout(0,0,e,t))},svg:null,panel:null,__class__:rt.Space}),et={RGCss:function(){}},Er["rg.svg.util.RGCss"]=et.RGCss,et.RGCss.__name__=["rg","svg","util","RGCss"],et.RGCss.cssSources=function(){var e=[];return Oi.selectAll('link[rel="stylesheet"]').eachNode(function(t){e.push(t.href)}),e},et.RGCss.colorsInCss=function(){if(null!=et.RGCss.cache)return et.RGCss.cache;var e=Oi.select("body").append("svg:svg").attr("class").string("rg"),t=et.RGCss.createBlock(e,0).style("fill").get();et.RGCss.cache=[t];for(var n=1;1e3>n;){var r=n++,r=et.RGCss.createBlock(e,r).style("fill").get();if(t==r)break;et.RGCss.cache.push(r)}return e.remove(),et.RGCss.cache},et.RGCss.numberOfColorsInCss=function(){return et.RGCss.colorsInCss().length},et.RGCss.createBlock=function(e,t){return e.append("svg:rect").attr("class").string("fill-"+t)},et.SymbolCache=function(){this.c=new Br,this.r=0},Er["rg.svg.util.SymbolCache"]=et.SymbolCache,et.SymbolCache.__name__=["rg","svg","util","SymbolCache"],et.SymbolCache.prototype={stats:function(){return{cachedSymbols:Xr.array(this.c.iterator()).length}},get:function(e,t){null==t&&(t=100);var n=e+":"+t,r=this.c.get(n);return null==r&&(r=Kr.field(Mn.Symbol,e)(t),this.c.set(n,r)),r},r:null,c:null,__class__:et.SymbolCache},nt={Balloon:function(e,t){null==t&&(t=!0);if(t){for(var n=e.node();null!=n&&"svg"!=n.nodeName;)n=n.parentNode;this.container=null==n?e:Oi.selectNode(n)}else this.container=e;this.visible=!0,this.duration=350,this.minwidth=30,this.set_preferredSide(2),this.ease=Nn.Ease.mode(Nn.EaseMode.EaseOut,Nn.Equations.cubic),this.set_roundedCorner(5),this.paddingHorizontal=3.5,this.paddingVertical=1.5,this.transition_id=0,this.balloon=this.container.append("svg:g").attr("pointer-events").string("none").attr("class").string("balloon").attr("transform").string("translate("+(this.x=0)+", "+(this.y=0)+")"),this.frame=this.balloon.append("svg:g").attr("transform").string("translate(0, 0)").attr("class").string("frame"),this.frame.append("svg:path").attr("class").string("shadow").attr("transform").string("translate(1, 1)"),this.connectorShapeV=Mn.Diagonal.forObject(),this.connectorShapeH=Mn.Diagonal.forObject().projection(function(e){return[e[1],e[0]]}),this.connector=this.balloon.append("svg:path").attr("class").string("balloon-connector").style("fill").string("none").style("display").string("none").attr("transform").string("translate(0, 0)"),this.frame.append("svg:path").attr("class").string("bg"),this.labelsContainer=this.frame.append("svg:g").attr("class").string("labels"),this.labels=[],n=this.createLabel(0),n.set_text("HELLO"),this.set_lineHeight(n.getSize().height),n.destroy()}},Er["rg.svg.widget.Balloon"]=nt.Balloon,nt.Balloon.__name__=["rg","svg","widget","Balloon"],nt.Balloon.prototype={redraw:function(){var e=this;if(null!=this.text&&0!=this.text.length){for(var t=this.boxWidth=0,n=0,r=this.labels;n<r.length;)if(t=r[n],++n,(t=Math.ceil(t.getSize().width))>this.boxWidth)this.boxWidth=t;if(0==t){var i=this.text;Yn.delay(function(){e.set_text(i)},15)}else this.boxWidth+=2*this.paddingHorizontal,this.boxHeight=this.lineHeight*this.labels.length+2*this.paddingVertical,n=this.frame.selectAll(".bg"),r=n.style("stroke-width").getFloat(),Math.isNaN(r)&&(r=0),this.labelsContainer.attr("transform").string("translate("+this.boxWidth/2+","+(r+this.paddingVertical)+")"),n.transition().ease(this.ease).delay(null,this.duration)}},hide:function(e){null==e&&(e=!1);var t=this;this.visible&&(this.visible=!1,e?this.balloon.transition().attr("opacity")["float"](0).endNode(function(){t.balloon.style("display").string("none")}):(this.balloon.attr("opacity")["float"](0),this.balloon.style("display").string("none")))},show:function(e){this.visible||((this.visible=!0,this.balloon.style("display").string("block"),e)?this.balloon.transition().attr("opacity")["float"](1):this.balloon.attr("opacity")["float"](1))},_moveTo:function(e,t){for(var n=this.get_boundingBox(),r=n.x,i=n.x+n.width,s=n.y,o=n.y+n.height,u=2*this.roundedCorner,a=n=0,f=0,l=0,c=this.preferredSide,h=1;0<h&&5>h;){if(e>=i-u){if(t<=s+u){e-i<s-t?(f=-this.boxWidth+i-e,l=s-t+this.roundedCorner,c=0,n=this.boxWidth-4*this.roundedCorner):(f=-this.boxWidth+i-e-this.roundedCorner,l=s-t,c=1,n=this.roundedCorner),a=1;break}if(t>=o-u){e-i<t-o?(f=-this.boxWidth+i-e,l=o-t-this.boxHeight-this.roundedCorner,c=2,n=this.boxWidth-4*this.roundedCorner):(f=-this.boxWidth+i-e-this.roundedCorner,l=o-t-this.boxHeight,c=1,n=this.boxHeight-3*this.roundedCorner),a=1;break}}else if(e<=r+u){if(t<=s+u){r-e<s-t?(f=r-e,l=s-t+this.roundedCorner,n=c=0):(f=r-e+this.roundedCorner,l=s-t,c=3,n=this.roundedCorner),a=1;break}if(t>=o-u){r-e<t-o?(f=r-e,l=o-t-this.boxHeight-this.roundedCorner,c=2,n=0):(f=r-e+this.roundedCorner,l=o-t-this.boxHeight,c=3,n=this.boxHeight-3*this.roundedCorner),a=1;break}}switch(c){case 0:if(t+this.boxHeight+this.roundedCorner>=o){c=2,h++;continue}if(e<=r+u){c=3,h++;continue}if(e>=i-u){c=1,h++;continue}f=-this.boxWidth/2,l=this.roundedCorner,n=this.boxWidth/2-2*this.roundedCorner,e-this.boxWidth/2<=r?(h=r-e+this.boxWidth/2,n=Math.max(0,n-h),f+=h):e+this.boxWidth/2>=i&&(h=i-e-this.boxWidth/2,n=Math.min(this.boxWidth-3*this.roundedCorner,n-h),f+=h),t<s&&(a=1,l=s-t+this.roundedCorner);break;case 1:if(e-this.boxWidth-this.roundedCorner<=r){c=3,h++;continue}if(t<=s+u){c=2,h++;continue}if(t>=o-u){c=0,h++;continue}f=-this.boxWidth-this.roundedCorner,l=-this.boxHeight/2,n=(this.boxHeight-2*this.roundedCorner)/2,t-this.boxHeight/2<=s?(h=s-t+this.boxHeight/2,n=Math.max(0,n-h),l+=h):t+this.boxHeight/2>=o&&(h=o-t-this.boxHeight/2,n=Math.min(this.boxHeight-3*this.roundedCorner,n-h),l+=h),e>i&&(a=2,f=i-e-this.boxWidth-this.roundedCorner);break;case 2:if(t-this.boxHeight-this.roundedCorner<=s){c=0,h++;continue}if(e<=r+u){c=3,h++;continue}if(e>=i-u){c=1,h++;continue}f=-this.boxWidth/2,l=-this.boxHeight-this.roundedCorner,n=this.boxWidth/2-2*this.roundedCorner,e-this.boxWidth/2<=r?(h=r-e+this.boxWidth/2,n=Math.max(this.roundedCorner,n-h),f+=h):e+this.boxWidth/2>=i&&(h=i-e-this.boxWidth/2,n=Math.min(this.boxWidth-3*this.roundedCorner,n-h),f+=h),t>o&&(a=1,l=o-t-this.boxHeight-this.roundedCorner);break;case 3:if(e+this.boxWidth+this.roundedCorner>=i){c=1,h++;continue}if(t<=s+u){c=2,h++;continue}if(t>=o-u){c=0,h++;continue}f=this.roundedCorner,l=-this.boxHeight/2,n=(this.boxHeight-2*this.roundedCorner)/2,t-this.boxHeight/2<=s?(h=s-t+this.boxHeight/2,n=Math.max(this.roundedCorner,n-h),l+=h):t+this.boxHeight/2>=o&&(h=o-t-this.boxHeight/2,n=Math.min(this.boxHeight-3*this.roundedCorner,n-h),l+=h),e<r&&(a=2,f=r-e+this.roundedCorner)}h=0}r=null;if(0==a)this.connector.style("display").string("none");else switch(this.connector.style("display").string("block"),r={x0:1,y0:1,x1:1,y1:1},c){case 0:r.x1=f+1+n+2*this.roundedCorner,r.y1=l+1-this.roundedCorner;break;case 1:r.y1=f+1+this.boxWidth+this.roundedCorner,r.x1=l+1+n+this.roundedCorner;break;case 2:r.x1=f+1+n+2*this.roundedCorner,r.y1=l+1+this.boxHeight+this.roundedCorner;break;case 3:r.y1=f+1+ -this.roundedCorner,r.x1=l+1+n+this.roundedCorner}this.balloon.attr("transform").string("translate("+(this.x=e)+", "+(this.y=t)+")"),this.frame.attr("transform").string("translate("+f+", "+l+")").selectAll("path").attr("d").string(nt.BalloonShape.shape(this.boxWidth,this.boxHeight,this.roundedCorner,this.roundedCorner,c,n)),0!=a&&this.connector.attr("d").string(0==c%2?this.connectorShapeV.diagonal(r):this.connectorShapeH.diagonal(r))},moveTo:function(e,t,n){null==n&&(n=!0);var r=this;if(n){Nn.Equations.elasticf();var i=++this.transition_id,s=Hr.interpolatef(this.x,e,this.ease),o=Hr.interpolatef(this.y,t,this.ease);Ji.timer(function(n){return i!=r.transition_id?!0:n>r.duration?(r._moveTo(e,t),!0):(r._moveTo(s(n/r.duration),o(n/r.duration)),!1)},0)}else 0==this.boxWidth?Yn.delay(function(e,t,n){return function(){return e(t,n)}}(wr(this,this._moveTo),e,t),15):this._moveTo(e,t)},transition_id:null,get_boundingBox:function(){if(null==this.boundingBox)try{this.set_boundingBox(this.container.node().getBBox())}catch(e){return{width:0,height:0,x:0,y:0}}return this.boundingBox},set_boundingBox:function(e){return this.boundingBox=e,this.redraw(),e},set_roundedCorner:function(e){return this.roundedCorner=e,this.redraw(),e},setPadding:function(e,t){this.paddingHorizontal=e,this.paddingVertical=t,this.redraw()},set_lineHeight:function(e){return this.lineHeight=e,this.redraw(),e},set_text:function(e){for(;this.labels.length>e.length;)this.labels.pop().destroy();for(var t=this.labels.length,n=e.length;t<n;){var r=t++;this.labels[r]=this.createLabel(r)}t=0;for(n=e.length;t<n;)r=t++,this.labels[r].set_text(e[r]);return this.text=e,this.redraw(),e},set_preferredSide:function(e){return this.preferredSide=zr.clamp(e,0,3),this.redraw(),e},createLabel:function(e){var t=new nt.Label(this.labelsContainer,!0,!1,!1);return t.addClass("line-"+e),t.set_anchor(nt.GridAnchor.Top),t.set_orientation(nt.LabelOrientation.Orthogonal),t.place(0,e*this.lineHeight,90),t},removeClass:function(e){this.frame.select("path.bg").classed().remove(e)},addClass:function(e){this.frame.select("path.bg").classed().add(e)},boundingBox:null,connectorShapeH:null,connectorShapeV:null,ease:null,duration:null,connector:null,labelsContainer:null,frame:null,balloon:null,container:null,labels:null,minwidth:null,preferredSide:null,paddingVertical:null,paddingHorizontal:null,roundedCorner:null,lineHeight:null,visible:null,boxHeight:null,boxWidth:null,y:null,x:null,text:null,__class__:nt.Balloon,__properties__:{set_text:"set_text",set_lineHeight:"set_lineHeight",set_roundedCorner:"set_roundedCorner",set_preferredSide:"set_preferredSide",set_boundingBox:"set_boundingBox",get_boundingBox:"get_boundingBox"}},nt.BalloonShape=function(){},Er["rg.svg.widget.BalloonShape"]=nt.BalloonShape,nt.BalloonShape.__name__=["rg","svg","widget","BalloonShape"],nt.BalloonShape.shape=function(e,t,n,r,i,s){return e-=2*n,t-=2*n,r="M"+n+",0",r=0==i?r+("h"+s)+("a"+n+","+n+",0,0,0,"+n+","+ -n)+("a"+n+","+n+",0,0,0,"+n+","+n)+("h"+(e-(s+2*n))):r+("h"+e),r+="a"+n+","+n+",0,0,1,"+n+","+n,r=1==i?r+("v"+(s-n))+("a"+n+","+n+",0,0,0,"+n+","+n)+("a"+n+","+n+",0,0,0,"+ -n+","+n)+("v"+(t-(s+n))):r+("v"+t),r+="a"+n+","+n+",0,0,1,"+ -n+","+n,r=2==i?r+("h"+ -(e-(s+2*n)))+("a"+n+","+n+",0,0,0,"+ -n+","+n)+("a"+n+","+n+",0,0,0,"+ -n+","+ -n)+("h"+ -s):r+("h"+ -e),r+="a"+n+","+n+",0,0,1,"+ -n+","+ -n,r=3==i?r+("v"+ -(t-(s+n)))+("a"+n+","+n+",0,0,0,"+ -n+","+ -n)+("a"+n+","+n+",0,0,0,"+n+","+ -n)+("v"+ -(s-n)):r+("v"+ -t),r+("a"+n+","+n+",0,0,1,"+n+","+ -n)+"Z"},nt.DiagonalArea=function(e,t,n){this.g=e.append("svg:g").attr("class").string("diagonal"),this.diagonal=Mn.Diagonal.forArray().projection(function(e){return[e[1],e[0]]}),this.area=this.g.append("svg:path").attr("class").string("diagonal-fill"+(null==t?"":" "+t)),this.before=this.g.append("svg:path").attr("class").string("diagonal-stroke before"+(null==n?"":" "+n)),this.after=this.g.append("svg:path").attr("class").string("diagonal-stroke after"+(null==n?"":" "+n))},Er["rg.svg.widget.DiagonalArea"]=nt.DiagonalArea,nt.DiagonalArea.__name__=["rg","svg","widget","DiagonalArea"],nt.DiagonalArea.prototype={update:function(e,t,n,r,i,s){var o=this.diagonal.diagonal([t,e,r,n]),e=this.diagonal.diagonal([r+s,n,t+i,e]),t=o+"L"+Fr.substr(e,1,null)+"z";this.before.attr("d").string(o),this.after.attr("d").string(e),this.area.attr("d").string(t)},addClass:function(e){this.g.classed().add(e)},after:null,before:null,area:null,diagonal:null,g:null,__class__:nt.DiagonalArea},nt.ElbowArea=function(e,t,n){this.g=e.append("svg:g").attr("class").string("elbow"),this.area=this.g.append("svg:path").attr("class").string("elbow-fill"+(null==t?"":" "+t)),this.outer=this.g.append("svg:path").attr("class").string("elbow-stroke outer"+(null==n?"":" "+n)),this.inner=this.g.append("svg:path").attr("class").string("elbow-stroke inner"+(null==n?"":" "+n))},Er["rg.svg.widget.ElbowArea"]=nt.ElbowArea,nt.ElbowArea.__name__=["rg","svg","widget","ElbowArea"],nt.ElbowArea.prototype={update:function(e,t,n,r,i,s,o,u){null==u&&(u=10),null==o&&(o=0),null==s&&(s=16),null==i&&(i=3);if(0!=t){var a="",f="",l=0>t?Math.max(s,t):Math.min(s,t);switch(e[1]){case 0:a="M"+(o+n+i)+","+(r+i+u)+"L"+(o+n+i)+","+(r+i)+"A"+Math.abs(i)+","+Math.abs(i)+" 0 0,0 "+(o+n)+","+r+"L"+n+","+r,f="M"+n+","+(r-t)+"L"+(o+n)+","+(r-t)+"A"+Math.abs(l)+","+Math.abs(l)+" 0 0,1 "+(o+n+l)+","+(r-t+l)+"L"+(o+n+l)+","+(r+u+i);break;case 3:this.update(nt.Orientation.RightBottom,-t,n,r,-i,-s,-o,-u);return}e=f+"L"+Fr.substr(a,1,null)+"z",this.inner.attr("d").string(a),this.outer.attr("d").string(f),this.area.attr("d").string(e)}},addClass:function(e){this.g.classed().add(e)},inner:null,outer:null,area:null,g:null,__class__:nt.ElbowArea},nt.Orientation={__ename__:["rg","svg","widget","Orientation"],__constructs__:"RightBottom,LeftBottom,RightTop,LeftTop,BottomRight,BottomLeft,TopRight,TopLeft".split(",")},nt.Orientation.RightBottom=["RightBottom",0],nt.Orientation.RightBottom.toString=Sr,nt.Orientation.RightBottom.__enum__=nt.Orientation,nt.Orientation.LeftBottom=["LeftBottom",1],nt.Orientation.LeftBottom.toString=Sr,nt.Orientation.LeftBottom.__enum__=nt.Orientation,nt.Orientation.RightTop=["RightTop",2],nt.Orientation.RightTop.toString=Sr,nt.Orientation.RightTop.__enum__=nt.Orientation,nt.Orientation.LeftTop=["LeftTop",3],nt.Orientation.LeftTop.toString=Sr,nt.Orientation.LeftTop.__enum__=nt.Orientation,nt.Orientation.BottomRight=["BottomRight",4],nt.Orientation.BottomRight.toString=Sr,nt.Orientation.BottomRight.__enum__=nt.Orientation,nt.Orientation.BottomLeft=["BottomLeft",5],nt.Orientation.BottomLeft.toString=Sr,nt.Orientation.BottomLeft.__enum__=nt.Orientation,nt.Orientation.TopRight=["TopRight",6],nt.Orientation.TopRight.toString=Sr,nt.Orientation.TopRight.__enum__=nt.Orientation,nt.Orientation.TopLeft=["TopLeft",7],nt.Orientation.TopLeft.toString=Sr,nt.Orientation.TopLeft.__enum__=nt.Orientation,nt.GridAnchor={__ename__:["rg","svg","widget","GridAnchor"],__constructs__:"TopLeft,Top,TopRight,Left,Center,Right,BottomLeft,Bottom,BottomRight".split(",")},nt.GridAnchor.TopLeft=["TopLeft",0],nt.GridAnchor.TopLeft.toString=Sr,nt.GridAnchor.TopLeft.__enum__=nt.GridAnchor,nt.GridAnchor.Top=["Top",1],nt.GridAnchor.Top.toString=Sr,nt.GridAnchor.Top.__enum__=nt.GridAnchor,nt.GridAnchor.TopRight=["TopRight",2],nt.GridAnchor.TopRight.toString=Sr,nt.GridAnchor.TopRight.__enum__=nt.GridAnchor,nt.GridAnchor.Left=["Left",3],nt.GridAnchor.Left.toString=Sr,nt.GridAnchor.Left.__enum__=nt.GridAnchor,nt.GridAnchor.Center=["Center",4],nt.GridAnchor.Center.toString=Sr,nt.GridAnchor.Center.__enum__=nt.GridAnchor,nt.GridAnchor.Right=["Right",5],nt.GridAnchor.Right.toString=Sr,nt.GridAnchor.Right.__enum__=nt.GridAnchor,nt.GridAnchor.BottomLeft=["BottomLeft",6],nt.GridAnchor.BottomLeft.toString=Sr,nt.GridAnchor.BottomLeft.__enum__=nt.GridAnchor,nt.GridAnchor.Bottom=["Bottom",7],nt.GridAnchor.Bottom.toString=Sr,nt.GridAnchor.Bottom.__enum__=nt.GridAnchor,nt.GridAnchor.BottomRight=["BottomRight",8],nt.GridAnchor.BottomRight.toString=Sr,nt.GridAnchor.BottomRight.__enum__=nt.GridAnchor,nt.GridAnchors=function(){},Er["rg.svg.widget.GridAnchors"]=nt.GridAnchors,nt.GridAnchors.__name__=["rg","svg","widget","GridAnchors"],nt.GridAnchors.parse=function(e){switch(e.toLowerCase()){case"topleft":e=nt.GridAnchor.TopLeft;break;case"top":e=nt.GridAnchor.Top;break;case"topright":e=nt.GridAnchor.TopRight;break;case"left":e=nt.GridAnchor.Left;break;case"center":e=nt.GridAnchor.Center;break;case"right":e=nt.GridAnchor.Right;break;case"bottomleft":e=nt.GridAnchor.BottomLeft;break;case"bottom":e=nt.GridAnchor.Bottom;break;case"bottomright":e=nt.GridAnchor.BottomRight;break;default:e=nt.GridAnchor.Center}return e},nt.HookConnector=function(e,t){this.g=e.append("svg:g").attr("class").string("hook"),this.line=this.g.append("svg:path").attr("class").string("hook-stroke line"+(null==t?"":" "+t))},Er["rg.svg.widget.HookConnector"]=nt.HookConnector,nt.HookConnector.__name__=["rg","svg","widget","HookConnector"],nt.HookConnector.lineTo=function(e,t){return"L"+e+","+t},nt.HookConnector.quarterTo=function(e,t,n){return"A"+Math.abs(n)+","+Math.abs(n)+" 0 0,"+(0>n?0:1)+" "+e+","+t},nt.HookConnector.prototype={createPath2:function(e,t,n,r,i,s){var o="M"+e+","+t;return s>t?(o+="A"+Math.abs(n)+","+Math.abs(n)+" 0 0,1 "+(e+n)+","+(t+n),o=o+("L"+(n+e)+","+(s-n))+("A"+Math.abs(n)+","+Math.abs(n)+" 0 0,1 "+e+","+s)):(o+="A"+Math.abs(n)+","+Math.abs(n)+" 0 0,0 "+(e+n)+","+(t-n),o=o+("L"+(n+e)+","+(s+n))+("A"+Math.abs(n)+","+Math.abs(n)+" 0 0,0 "+e+","+s)),o+="L"+r+","+s,s>i?(o+="A"+Math.abs(n)+","+Math.abs(n)+" 0 0,1 "+(r-n)+","+(s-n),o=o+("L"+(r-n)+","+(i+n))+("A"+Math.abs(n)+","+Math.abs(n)+" 0 0,1 "+r+","+i)):(o+="A"+Math.abs(n)+","+Math.abs(n)+" 0 0,0 "+(r-n)+","+(s+n),o=o+("L"+(r-n)+","+(i-n))+("A"+Math.abs(n)+","+Math.abs(n)+" 0 0,0 "+r+","+i)),o},createPath:function(e,t,n,r,i,s,o,u,a){var f;return f="M"+e+","+t+nt.HookConnector.lineTo(e+s-u,t),f+=nt.HookConnector.quarterTo(e+s,t+a,u),f+=nt.HookConnector.lineTo(e+s,i-a),f+=nt.HookConnector.quarterTo(e+s-u,i,u),f+=nt.HookConnector.lineTo(n-o+u,i),f+=nt.HookConnector.quarterTo(n-o,i-a,u),f+=nt.HookConnector.lineTo(n-o,r+a),f+=nt.HookConnector.quarterTo(n-o+u,r,u),f+=nt.HookConnector.lineTo(n,r)},update:function(e,t,n,r,i,s,o){e=this.createPath(e,t,n,r,i,s,o,5,5),this.line.attr("d").string(e)},addClass:function(e){this.g.classed().add(e)},line:null,g:null,__class__:nt.HookConnector},nt.HookConnectorArea=function(e,t,n){this.g=e.append("svg:g").attr("class").string("hook-area"),this.area=this.g.append("svg:path").attr("class").string("hook-area-fill"+(null==t?"":" "+t)),this.upper=this.g.append("svg:path").attr("class").string("hook-area-stroke upper"+(null==n?"":" "+n)),this.lower=this.g.append("svg:path").attr("class").string("hook-area-stroke lower"+(null==n?"":" "+n))},Er["rg.svg.widget.HookConnectorArea"]=nt.HookConnectorArea,nt.HookConnectorArea.__name__=["rg","svg","widget","HookConnectorArea"],nt.HookConnectorArea.lineTo=function(e,t){return"L"+e+","+t},nt.HookConnectorArea.quarterTo=function(e,t,n){return"A"+Math.abs(n)+","+Math.abs(n)+" 0 0,"+(0>n?0:1)+" "+e+","+t},nt.HookConnectorArea.prototype={createPath2:function(e,t,n,r,i,s){var o="M"+e+","+t;return s>t?(o+="A"+Math.abs(n)+","+Math.abs(n)+" 0 0,1 "+(e+n)+","+(t+n),o=o+("L"+(n+e)+","+(s-n))+("A"+Math.abs(n)+","+Math.abs(n)+" 0 0,1 "+e+","+s)):(o+="A"+Math.abs(n)+","+Math.abs(n)+" 0 0,0 "+(e+n)+","+(t-n),o=o+("L"+(n+e)+","+(s+n))+("A"+Math.abs(n)+","+Math.abs(n)+" 0 0,0 "+e+","+s)),o+="L"+r+","+s,s>i?(o+="A"+Math.abs(n)+","+Math.abs(n)+" 0 0,1 "+(r-n)+","+(s-n),o=o+("L"+(r-n)+","+(i+n))+("A"+Math.abs(n)+","+Math.abs(n)+" 0 0,1 "+r+","+i)):(o+="A"+Math.abs(n)+","+Math.abs(n)+" 0 0,0 "+(r-n)+","+(s+n),o=o+("L"+(r-n)+","+(i-n))+("A"+Math.abs(n)+","+Math.abs(n)+" 0 0,0 "+r+","+i)),o},createPath:function(e,t,n,r,i,s,o,u,a){var f;return f="M"+e+","+t+nt.HookConnectorArea.lineTo(e+s-u,t),f+=nt.HookConnectorArea.quarterTo(e+s,t+a,u),f+=nt.HookConnectorArea.lineTo(e+s,i-a),f+=nt.HookConnectorArea.quarterTo(e+s-u,i,u),f+=nt.HookConnectorArea.lineTo(n-o+u,i),f+=nt.HookConnectorArea.quarterTo(n-o,i-a,u),f+=nt.HookConnectorArea.lineTo(n-o,r+a),f+=nt.HookConnectorArea.quarterTo(n-o+u,r,u),f+=nt.HookConnectorArea.lineTo(n,r)},update:function(e,t,n,r,i,s,o,u){var a=Math.min(5,i),f=this.createPath(e,t,n,r,t>s?s:s+i,o+i,u+i,i,i),e=this.createPath(n,r+i,e,t+i,t>s?s-i:s,-u,-o,-a,a);this.upper.attr("d").string(f),this.lower.attr("d").string(e),this.area.attr("d").string(f+"L"+Fr.substr(e,1,null)+"z")},addClass:function(e){this.g.classed().add(e)},lower:null,upper:null,area:null,g:null,__class__:nt.HookConnectorArea},nt.Label=function(e,t,n,r){null==t&&(t=!0),this.shadow=n,this.outline=r,this.g=e.append("svg:g").attr("class").string("label"),n&&(this.gshadow=this.g.append("svg:g").attr("transform").string("translate(0,0)"),this.gshadowrot=this.gshadow.append("svg:g"),this.tshadow=this.gshadowrot.append("svg:text").attr("class").string("shadow"+(r?"":" nooutline"))),this.gtext=this.g.append("svg:g"),r&&(this.toutline=this.gtext.append("svg:text").attr("class").string("outline"+(n?"":" noshadow"))),e=xr.addIf(xr.addIf(["text"],!r,"nooutline"),!n,"noshadow"),this.ttext=this.gtext.append("svg:text").attr("class").string(e.join(" ")),this.dontFlip=t,r?this.setShadowOffset(1,1.25):this.setShadowOffset(.5,.5),this.angle=this.y=this.x=0,this.set_orientation(nt.LabelOrientation.FixedAngle(0)),this.set_anchor(nt.GridAnchor.Center),this.visible=!0},Er["rg.svg.widget.Label"]=nt.Label,nt.Label.__name__=["rg","svg","widget","Label"],nt.Label.prototype={destroy:function(){this.g.remove()},reanchor:function(){if(null!=this.anchor){var e=this.getBB(),t,n,r=this.anchor;if(this.dontFlip)switch(this.orientation[1]){case 1:90<this.angle&&270>this.angle&&(r=function(){var e;switch(r[1]){case 0:e=nt.GridAnchor.BottomRight;break;case 1:e=nt.GridAnchor.Bottom;break;case 2:e=nt.GridAnchor.BottomLeft;break;case 3:e=nt.GridAnchor.Right;break;case 4:e=nt.GridAnchor.Center;break;case 5:e=nt.GridAnchor.Left;break;case 6:e=nt.GridAnchor.TopRight;break;case 7:e=nt.GridAnchor.Top;break;case 8:e=nt.GridAnchor.TopLeft}return e}(this));break;case 2:180<this.angle&&(r=function(){var e;switch(r[1]){case 0:e=nt.GridAnchor.BottomRight;break;case 1:e=nt.GridAnchor.Bottom;break;case 2:e=nt.GridAnchor.BottomLeft;break;case 3:e=nt.GridAnchor.Right;break;case 4:e=nt.GridAnchor.Center;break;case 5:e=nt.GridAnchor.Left;break;case 6:e=nt.GridAnchor.TopRight;break;case 7:e=nt.GridAnchor.Top;break;case 8:e=nt.GridAnchor.TopLeft}return e}(this))}switch(r[1]){case 0:t=0,n=e.height;break;case 1:t=-e.width/2,n=e.height;break;case 2:t=-e.width,n=e.height;break;case 3:t=0,n=e.height/2;break;case 4:t=-e.width/2,n=e.height/2;break;case 5:t=-e.width,n=e.height/2;break;case 6:n=t=0;break;case 7:t=-e.width/2,n=0;break;case 8:t=-e.width,n=0}this.outline&&this.toutline.attr("x")["float"](t+.5).attr("y")["float"](n-1.5),this.ttext.attr("x")["float"](t+.5).attr("y")["float"](n-1.5),this.shadow&&this.tshadow.attr("x")["float"](t+.5).attr("y")["float"](n-1.5)}},getBB:function(){var e=this.ttext.node(),t=this.ttext.style("font-size").getFloat();if(null==t||0>=t)try{t=e.getExtentOfChar("A").height}catch(n){t=Oi.selectNode(e).style("height").getFloat()}var r;try{r=e.getComputedTextLength()}catch(i){r=Oi.selectNode(e).style("width").getFloat()}return{width:r,height:t}},set_anchor:function(e){return this.anchor=e,this.reanchor(),e},set_orientation:function(e){return this.orientation=e,this.place(this.x,this.y,this.angle),e},set_text:function(e){return this.text=e,this.outline&&this.toutline.text().string(e),this.ttext.text().string(e),this.shadow&&this.tshadow.text().string(e),this.reanchor(),e},setShadowOffset:function(e,t){this.shadowOffsetX=e,this.shadowOffsetY=t,this.shadow&&this.gshadow.attr("transform").string("translate("+this.shadowOffsetX+","+this.shadowOffsetY+")")},place:function(e,t,n){this.x=Math.isNaN(e)?0:e,this.y=Math.isNaN(t)?0:t,this.angle=n%360,0>this.angle&&(this.angle+=360),this.g.attr("transform").string("translate("+this.x+","+this.y+")"),e=this.orientation;switch(e[1]){case 0:n=e[2],this.gtext.attr("transform").string("rotate("+n+")");break;case 1:this.dontFlip&&90<this.angle&&270>this.angle&&(n+=180),this.gtext.attr("transform").string("rotate("+n+")");break;case 2:this.dontFlip&&180<this.angle&&(n-=180),this.gtext.attr("transform").string("rotate("+(-90+n)+")")}this.shadow&&this.gshadowrot.attr("transform").string(this.gtext.attr("transform").get()),this.reanchor()},getSize:function(){try{return this.g.node().getBBox()}catch(e){return{width:0,height:0}}},removeClass:function(e){this.g.classed().remove(e)},addClass:function(e){this.g.classed().add(e)},_toggleVisibility:function(){this.g.style("opacity")["float"](this.visible?1:0)},hide:function(){this.visible&&(this.visible=!1,this._toggleVisibility())},show:function(){this.visible||(this.visible=!0,this._toggleVisibility())},tshadow:null,toutline:null,ttext:null,gshadowrot:null,gtext:null,gshadow:null,g:null,visible:null,outline:null,shadow:null,shadowOffsetY:null,shadowOffsetX:null,dontFlip:null,angle:null,y:null,x:null,anchor:null,orientation:null,text:null,__class__:nt.Label,__properties__:{set_text:"set_text",set_orientation:"set_orientation",set_anchor:"set_anchor"}},nt.LabelOrientation={__ename__:["rg","svg","widget","LabelOrientation"],__constructs__:["FixedAngle","Aligned","Orthogonal"]},nt.LabelOrientation.FixedAngle=function(e){return e=["FixedAngle",0,e],e.__enum__=nt.LabelOrientation,e.toString=Sr,e},nt.LabelOrientation.Aligned=["Aligned",1],nt.LabelOrientation.Aligned.toString=Sr,nt.LabelOrientation.Aligned.__enum__=nt.LabelOrientation,nt.LabelOrientation.Orthogonal=["Orthogonal",2],nt.LabelOrientation.Orthogonal.toString=Sr,nt.LabelOrientation.Orthogonal.__enum__=nt.LabelOrientation,nt.LabelOrientations=function(){},Er["rg.svg.widget.LabelOrientations"]=nt.LabelOrientations,nt.LabelOrientations.__name__=["rg","svg","widget","LabelOrientations"],nt.LabelOrientations.canParse=function(e){return e=e.split(":")[0].toLowerCase(),xr.exists("angle,fixed,ortho,orthogonal,align,aligned,horizontal".split(","),e)},nt.LabelOrientations.parse=function(e){switch(e.split(":")[0].toLowerCase()){case"fixed":case"angle":e=Qr.parseFloat(e.split(":")[1]);if(null==e||!Math.isFinite(e))throw new Tn.Error("when 'fixed' is used a number should follow the 'dash' character"
,null,null,{fileName:"LabelOrientations.hx",lineNumber:27,className:"rg.svg.widget.LabelOrientations",methodName:"parse"});return nt.LabelOrientation.FixedAngle(e);case"ortho":case"orthogonal":return nt.LabelOrientation.Orthogonal;case"align":case"aligned":return nt.LabelOrientation.Aligned;case"horiz":case"horizontal":return nt.LabelOrientation.FixedAngle(0);default:throw new Tn.Error("invalid filter orientation '{0}'",null,e,{fileName:"LabelOrientations.hx",lineNumber:36,className:"rg.svg.widget.LabelOrientations",methodName:"parse"})}},nt.Map=function(e,t){var n=this;this.g=e.append("svg:g").attr("class").string("map"),this.projection=t,this.map=new Br,this.ready=!1,this.onReady=new ts,this.onReady.addOnce(function(){n.ready=!0})},Er["rg.svg.widget.Map"]=nt.Map,nt.Map.__name__=["rg","svg","widget","Map"],nt.Map.loadJsonp=function(e,t){vt.get(e,t,null,null,null)},nt.Map.loadJsonAjax=function(e,t){var n=new Qn(e);n.onData=function(e){e=_n.Json.decode(e),t(e)},n.onError=function(t){throw new Tn.Error("unable to load JSON file '{0}': {1}",[e,t],null,{fileName:"Map.hx",lineNumber:90,className:"rg.svg.widget.Map",methodName:"loadJsonAjax"})},n.request(!1)},nt.Map.prototype={set_className:function(e){return this.g.attr("class").string("map"+(null==e?"":" "+e)),e},handlerClick:null,handlerDataPointOver:null,onClick:function(e){this.handlerClick(e,this.click)},onMouseOver:function(e,t){this.handlerDataPointOver(t,e,this.labelDataPointOver)},draw:function(e){var t=this,n=null!=this.mapping?function(e){return Kr.hasField(t.mapping,e)?Kr.field(t.mapping,e):e}:function(e){return e},r=new Mn.PathGeoJson;r.set_projection(this.projection);switch(e.type){case"FeatureCollection":for(var i=0,s=e.features.length;i<s;){var o=i++,o=e.features[o],u=r.centroid(o.geometry),a="Point"==o.geometry.type?this.g.append("svg:circle").attr("cx")["float"](u[0]).attr("cy")["float"](u[1]).attr("r")["float"](5):this.g.append("svg:path").attr("d").string(r.path(o.geometry)),f={};f.$centroid=u,f.$data=o.properties,null!=o.id&&this.map.set(n(o.id),{svg:a,dp:f}),null!=this.labelDataPointOver&&a.onNode("mouseover",function(e,t){return function(n,r){return e(t,n,r)}}(wr(this,this.onMouseOver),f)),null!=this.click&&a.onNode("click",function(e,t){return function(n,r){return e(t,n,r)}}(wr(this,this.onClick),f))}break;case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":throw new Tn.Error("the type '{0}' is not implemented yet",[e.type],null,{fileName:"Map.hx",lineNumber:136,className:"rg.svg.widget.Map",methodName:"draw"});default:this.g.append("svg:path").attr("d").string(r.path(e))}this.onReady.dispatch()},loadGeoJson:function(e,t,n){var r=this,i=n?nt.Map.loadJsonp:nt.Map.loadJsonAjax;null==t?i(e,wr(this,this.draw)):i(t,function(t){r.mapping=t,i(e,wr(r,r.draw))})},load:function(e,t,n,r){switch(t){case"geojson":this.loadGeoJson(e,n,r);break;default:new Tn.Error("unsupported geographic format '{0}'",null,t,{fileName:"Map.hx",lineNumber:59,className:"rg.svg.widget.Map",methodName:"load"})}},g:null,projection:null,mapping:null,ready:null,colorMode:null,radius:null,labelDataPointOver:null,labelDataPoint:null,click:null,onReady:null,map:null,className:null,__class__:nt.Map,__properties__:{set_className:"set_className"}},nt.Sensible=function(){},Er["rg.svg.widget.Sensible"]=nt.Sensible,nt.Sensible.__name__=["rg","svg","widget","Sensible"],nt.Sensible.sensibleZone=function(e,t,n,r,i){if(null!=n||null!=r){var s=e.append("svg:rect").attr("class").string("sensible").attr("x")["float"](0).attr("y")["float"](0).attr("width")["float"](t.frame.width).attr("height")["float"](t.frame.height).attr("fill").string("#000").style("fill-opacity")["float"](0);null!=r&&s.onNode("mousemove",function(){var t=nt.Sensible.findDataNodeNearMouse(e,i);0<t.length?(r(t[0]),null!=n&&s.classed().add("pointer")):null!=n&&s.classed().remove("pointer")}),null!=n&&(null==r&&s.onNode("mousemove",function(){0<nt.Sensible.findDataNodeNearMouse(e,i).length?s.classed().add("pointer"):s.classed().remove("pointer")}),s.onNode("click",function(){var t=nt.Sensible.findDataNodeNearMouse(e,i);0<t.length&&n(t[0])}))}},nt.Sensible.findDataNodeNearMouse=function(e,t){var n=Oi.event;return nt.Sensible.findDataNodesNear({x:n.clientX,y:n.clientY},e,t)},nt.Sensible.findDataNodesNear=function(e,t,n){var t=t.selectAll(".rgdata"),r=[],i=n*n;return t.eachNode(function(t){var n=t.getBoundingClientRect(),s=e.x-(n.left+n.width/2),n=e.y-(n.top+n.height/2),s=s*s+n*n;s>i||r.push({node:t,dist:s})}),r.sort(function(e,t){return Hr.compare(e.dist,t.dist)}),r.map(function(e){return e.node})},st=void 0,ot=void 0,ut=void 0,at=void 0,ft=void 0,lt=void 0,ct=void 0,ht=void 0,pt=void 0,dt=void 0,vt=void 0,mt=void 0,ft=function(e){try{this.tests=mt.decrypt(e).split(",")}catch(t){}},Er["rg.util.Auth"]=ft,ft.__name__=["rg","util","Auth"],ft.prototype={authorizeMany:function(e){for(var t=0;t<e.length;){var n=e[t];++t;if(this.authorize(n))return!0}return!1},authorizeOne:function(e,t){return"*."==e.substring(0,2)?Yr.endsWith("."+t,e.substring(1)):t==e},authorize:function(e){for(var t=0,n=this.tests;t<n.length;){var r=n[t];++t;if(this.authorizeOne(e,r))return!0}return!1},tests:null,__class__:ft},lt=function(e){this.handler=e,this.actions=[],this.pos=0,this.executor=wr(this,this.execute)},Er["rg.util.ChainedExecutor"]=lt,lt.__name__=["rg","util","ChainedExecutor"],lt.prototype={executor:null,execute:function(e){this.pos==this.actions.length?(this.pos=0,this.handler(e)):this.actions[this.pos++](e,wr(this,this.execute))},addAction:function(e){this.actions.push(e)},pos:null,actions:null,handler:null,__class__:lt},ht=function(){},Er["rg.util.DataPoints"]=ht,ht.__name__=["rg","util","DataPoints"],ht.partition=function(e,t,n){null==n&&(n="default");for(var r=new Cn.HashList,i,s=0;s<e.length;){var o=e[s];++s,i=Kr.field(o,t),i=null==i?n:_r.string(i);var u=r.get(i);null==u&&(u=[],r.set(i,u)),u.push(o)}return r.array()},ht.filterByIndependents=function(e,t){for(var n=0;n<t.length;){var r=[t[n]];++n;var i=[r[0].axis.range(r[0].min(),r[0].max())],e=xr.filter(e,function(e,t){return function(n){return n=Kr.field(n,t[0].type),null==n?!1:xr.exists(e[0],n)}}(i,r))}return e},ht.filterByDependents=function(e,t){for(var n=0;n<t.length;){var r=[t[n]];++n,e=xr.filter(e,function(e){return function(t){return null==Kr.field(t,e[0].type)?!1:!0}}(r))}return e},ht.value=function(e,t){return Kr.field(e,t)},ht.valueAlt=function(e,t,n){var r;return null==(r=Kr.field(e,t))?n:r},ht.values=function(e,t){return xr.filter(e.map(function(e){return Kr.field(e,t)}),function(e){return null!=e})},ht.id=function(e,t){for(var n=Jr.clone(e),r=0;r<t.length;){var i=t[r];++r,Kr.deleteField(n,i)}return Gn.encode(_r.string(n))},mt=function(){},Er["rg.util.Decrypt"]=mt,mt.__name__=["rg","util","Decrypt"],mt.decrypt=function(e){var t=new pr.RSAEncrypt(mt.modulus,mt.publicExponent),e=dr.Base64.decode(e);try{return t.verify(e).toString()}catch(n){return null}},ot=function(){},Er["rg.util.Js"]=ot,ot.__name__=["rg","util","Js"],ot.findScript=function(e){var t=fr.document.getElementsByTagName("SCRIPT");if("string"==typeof e)for(var n=0,r=t.length;n<r;){var i=n++,i=t[i],s=i.getAttribute("src");if(null!=s&&0<=s.indexOf(e))return i}else{n=0;for(r=t.length;n<r;)if(i=n++,i=t[i],s=i.getAttribute("src"),null!=s&&s.match(e))return i}return null},ot.findPosition=function(e){var t=0,n=0;do t+=e.offsetLeft,n+=e.offsetTop;while(null!=(e=e.offsetParent));return{x:t,y:n}},vt=function(){},Er["rg.util.Jsonp"]=vt,vt.__name__=["rg","util","Jsonp"],vt.get=function(e,t,n,r,i){var s=vt.get_api;s(e,{success:t,failure:n},r,i)},vt.post=function(e,t,n,r,i,s){var o=vt.post_api;o(e,t,{success:n,failure:r},i,s)},vt.request_api=function(e,t,n,r,i,s){null==i&&(i={}),t=st.addQueryParameters(t,i),null==s&&(s={});var o=r.success,u=null==r.failure?function(){}:r.failure,a="ReportGridChartsJsonpCallback"+(214748363*Math.random()|0),f=fr.document.head;null==f&&(f=fr.document.getElementsByTagName("head")[0]),fr.window[a]=function(e,t){200==t.status.code?o(e):u(t.status.code,t.status.reason),f.removeChild(fr.document.getElementById(a)),fr.window[a]=void 0;try{delete window[a]}catch(n){}},r={},r.method=e,0<Kr.fields(s).length&&(r.headers=_n.Json.encode(s)),r.callback=a,null!=n&&(r.content=_n.Json.encode(n)),e=st.addQueryParameters(t,r),t=fr.document.createElement("SCRIPT"),t.setAttribute("type","text/javascript"),t.setAttribute("src",e),t.setAttribute("id",a),f.appendChild(t)},vt.get_api=function(e,t,n,r){vt.request_api("GET",e,null,t,n,r)},vt.post_api=function(e,t,n,r,i){vt.request_api("POST",e,t,n,r,i)},ut=function(){},Er["rg.util.Periodicity"]=ut,ut.__name__=["rg","util","Periodicity"],ut.defaultPeriodicity=function(e){return null==e||0==e?"eternity":216e5>=e?"minute":1728e5>=e?"hour":5184e6>=e?"day":62208e6>=e?"month":"year"},ut.defaultRange=function(e){var t;switch(e){case"eternity":case"single":t=[0,0];break;case"minute":t=ut.parsePair("6 hours ago","now");break;case"hour":t=ut.parsePair("2 days ago","now");break;case"day":t=ut.parsePair("14 days ago","today");break;case"month":t=ut.parsePair("6 months ago","today");break;case"year":t=ut.parsePair("6 years ago","today")}return t},ut.isValid=function(e){return xr.exists(ut.validPeriods,e)},ut.calculateBetween=function(e,t,n){return null==n&&(n=2),null==e||null==t?"eternity":(e=Math.abs(t.getTime()-e.getTime()),e>=Ar.days(365*n)?"year":e>=Ar.days(30*n)?"month":e>=Ar.days(7*n)?"week":e>=Ar.days(n)?"day":e>=Ar.hours(n)?"hour":"minute")},ut.unitsBetween=function(e,t,n){return function(r){var i;switch(n){case"eternity":case"single":i=1;break;case"minute":i=Math.floor((t-e)/6e4);break;case"hour":i=Math.floor((t-e)/36e5);break;case"day":i=Math.floor((t-e)/864e5);break;case"week":i=Math.floor((t-e)/6048e5);break;case"month":i=function(n){var r=function(){var t=new Date;return t.setTime(e),t}(n),i=function(){var e=new Date;return e.setTime(t),e}(n),n=r.getFullYear(),s=i.getFullYear(),r=r.getMonth(),i=i.getMonth();return 12*(s-n)+(i-r)}(r);break;case"year":i=Math.floor(ut.unitsBetween(e,t,"month")/12)}return i}(this)},ut.units=function(e,t){var n=ut.unitsBetween(0,e,t),r;switch(t){case"hour":r=1;break;default:r=0}return n+r},ut.range=function(e,t,n){var r=1e3;switch(n){case"eternity":case"single":return[0];case"minute":r=6e4;break;case"hour":r=36e5;break;case"day":for(var r=Mr.snap(e,"day"),i=Mr.snap(t,"day"),t=[];r<=i;)t.push(r),r=Mr.snap(r+864e5,"day");return t;case"week":r=6048e5;break;case"month":r=ut.dateUtc(e),i=ut.dateUtc(t),e=r.getFullYear(),n=i.getFullYear(),r=r.getMonth(),i=i.getMonth();for(t=[];e<n||e==n&&r<=i;)t.push((new Date(e,r,1,0,0,0)).getTime()),r++,11<r&&(r=0,e++);return t;case"year":return t=zr.range(ut.dateUtc(e).getFullYear(),ut.dateUtc(t).getFullYear()+1,1).map(function(e){return(new Date(e,0,1,0,0,0)).getTime()})}return Hr.range(e,t+r,r)},ut.next=function(e,t,n){return null==n&&(n=1),null==t&&(t=(new Date).getTime()),0==n?t:function(r){var i;switch(e){case"eternity":case"single":i=t;break;case"minute":i=t+6e4*n;break;case"hour":i=t+36e5*n;break;case"day":i=t+864e5*n;break;case"week":i=t+6048e5*n;break;case"month":i=function(){var e=new Date;e.setTime(t);var r=e.getFullYear(),i=e.getMonth()+n;return(new Date(r,i,e.getDay(),e.getHours(),e.getMinutes(),e.getSeconds())).getTime()}(r);break;case"year":i=function(){var e=new Date;return e.setTime(t),(new Date(e.getFullYear()+n,e.getMonth(),e.getDay(),e.getHours(),e.getMinutes(),e.getSeconds())).getTime()}(r)}return i}(this)},ut.minForPeriodicityInSeries=function(e,t){return xr.floatMin(e,function(e){return xr.floatMin(Kr.fields(Kr.field(e,t)),function(e){return Qr.parseFloat(e)})})},ut.maxForPeriodicityInSeries=function(e,t){return xr.floatMax(e,function(e){return xr.floatMax(Kr.fields(Kr.field(e,t)),function(e){return Qr.parseFloat(e)})})},ut.formatf=function(e){return function(){var t;switch(e){case"eternity":t=function(){return"all time"};break;case"single":t=function(){return"period"};break;case"minute":case"hour":t=function(e){return xn.FormatDate.timeShort(function(){var t=new Date;return t.setTime(e),t}(this))};break;case"day":case"week":t=function(e){return xn.FormatDate.dateShort(function(){var t=new Date;return t.setTime(e),t}(this))};break;case"month":t=function(e){return xn.FormatDate.yearMonth(function(){var t=new Date;return t.setTime(e),t}(this))};break;case"year":t=function(e){return xn.FormatDate.year(function(){var t=new Date;return t.setTime(e),t}(this))}}return t}(this)},ut.format=function(e,t){switch(e){case"eternity":return"all time";case"single":return"period";case"minute":return xn.FormatDate.timeShort(function(){var e=new Date;return e.setTime(t),e}(this));case"hour":return xn.FormatDate.hourShort(function(){var e=new Date;return e.setTime(t),e}(this));case"day":case"week":return xn.FormatDate.dateShort(function(){var e=new Date;return e.setTime(t),e}(this));case"month":return xn.FormatDate.yearMonth(function(){var e=new Date;return e.setTime(t),e}(this));case"year":return xn.FormatDate.year(function(){var e=new Date;return e.setTime(t),e}(this));default:return e+": "+t}},ut.smartFormat=function(e,t){switch(e){case"eternity":case"single":return"all time";case"minute":return ut.firstInSeries("hour",t)?xn.FormatDate.timeShort(function(){var e=new Date;return e.setTime(t),e}(this)):xn.FormatDate.format("%i",function(){var e=new Date;return e.setTime(t),e}(this));case"hour":return ut.firstInSeries("day",t)?xn.FormatDate.format("%b %e",ut.dateUtc(t)):xn.FormatDate.hourShort(function(){var e=new Date;return e.setTime(t),e}(this));case"day":return ut.firstInSeries("month",t)?xn.FormatDate.format("%b %e",ut.dateUtc(t)):xn.FormatDate.format("%e",ut.dateUtc(t));case"week":var n=ut.dateUtc(t);return 7>=n.getDate()?xn.FormatDate.format("%b %e",n):xn.FormatDate.format("%e",n);case"month":return ut.firstInSeries("year",t)?xn.FormatDate.year(ut.dateUtc(t)):xn.FormatDate.format("%b",ut.dateUtc(t));case"year":return xn.FormatDate.year(ut.dateUtc(t));default:return e+": "+Qr.string(function(){var e=new Date;return e.setTime(t),e}(this))}},ut.firstInSeries=function(e,t){return function(n){switch(e){case"eternity":case"single":n=0==t;break;case"minute":n=0==t%6e4;break;case"hour":n=0==t%36e5;break;case"day":n=function(){var e=new Date;return e.setTime(t),0==e.getHours()&&0==e.getMinutes()&&0==e.getSeconds()}(n);break;case"week":n=function(){var e=new Date;return e.setTime(t),0==e.getDay()}(n);break;case"month":n=function(){var e=new Date;return e.setTime(t),1==e.getDate()}(n);break;case"year":n=function(){var e=new Date;return e.setTime(t),1==e.getDate()&&0==e.getMonth()}(n);break;default:n=!1}return n}(this)},ut.nextPeriodicity=function(e){switch(e){case"minute":e="hour";break;case"hour":e="day";break;case"day":case"week":e="month";break;case"month":e="year";break;default:e="year"}return e},ut.prevPeriodicity=function(e){switch(e){case"minute":e="hour";break;case"hour":e="minute";break;case"day":e="hour";break;case"week":case"month":e="day";break;default:e="minute"}return e},ut.parsePair=function(e,t){return[Ln.DateParser.parse(e).getTime(),Ln.DateParser.parse(t).getTime()]},ut.timezoneOffset=function(e){return e.getTimezoneOffset()},ut.dateUtc=function(e){var t=function(){var t=new Date;return t.setTime(e),t}(this).getTimezoneOffset();return 0>t&&(t=0),function(){var n=new Date;return n.setTime(e+6e4*t),n}(this)},ut.isValidGroupBy=function(e){return xr.exists(ut.validGroupValues,e)},ct=function(){},Er["rg.util.Properties"]=ct,ct.__name__=["rg","util","Properties"],ct.isTime=function(e){return 0<=e.indexOf("time:")},ct.periodicity=function(e){return Fr.substr(e,e.indexOf("time:")+5,null)},ct.timeProperty=function(e){return".time:"+e},ct.humanize=function(e){return at.humanize(e)},ct.formatValue=function(e,t){var n=Kr.field(t,e);if(null==n)return n;if(0<=e.indexOf("time:")){var r=Fr.substr(e,e.indexOf("time:")+5,null);return ut.format(r,Mr.snap(n,r))}return at.humanize(n)},dt=function(){},Er["rg.util.RG"]=dt,dt.__name__=["rg","util","RG"],dt.getTokenId=function(){try{return Zr.rtrim(Zr.ltrim(ReportGrid.$.Config.tokenId,'"'),'"')}catch(e){return null}},pt=function(){},Er["rg.util.RGColors"]=pt,pt.__name__=["rg","util","RGColors"],pt.parse=function(e,t){try{var n=kn.Colors.parse(e);if(null!=n)return n}catch(r){}return kn.Colors.parse(t)},pt.applyLightness=function(e,t,n){return null==n&&(n=1/Math.abs(t)),0<=t?kn.Hsl.lighter(e,(1-n)*(1+t)):kn.Hsl.darker(e,(1-n)*(1-t))},pt.extractColor=function(e){return e.__rgcolor__},pt.storeColor=function(e,t){e.__rgcolor__=t},pt.storeColorForSelection=function(e,t,n){null==t&&(t="fill"),e.eachNode(function(e){var r=null==n?Oi.selectNode(Li.current).style(t).get():n;pt.storeColor(e,r)})},at=function(){},Er["rg.util.RGStrings"]=at,at.__name__=["rg","util","RGStrings"],at.humanize=function(e){if(ar.__instanceof(e,ss))return zr.format(e);if(ar.__instanceof(e,us))return Hr.format(e);e=Qr.string(e);if(at.range.match(e)){var e=at.range.matched(1),t=at.range.matched(2),e=null!=e?zr.canParse(e)?zr.format(zr.parse(e)):Hr.format(Hr.parse(e)):"",t=null!=t?zr.canParse(t)?zr.format(zr.parse(t)):Hr.format(Hr.parse(t)):"";return at.hstring(at.range.matchedLeft())+e+"-"+t+at.hstring(at.range.matchedRight())}return at.hstring(e)},at.hstring=function(e){return Zr.ucwords(Zr.humanize(e))},st=function(){},Er["rg.util.Urls"]=st,st.__name__=["rg","util","Urls"],st.addQueryParameters=function(e,t){for(var n=0>e.indexOf("?")?"?":"&",r=[],i=0,s=Kr.fields(t);i<s.length;){var o=s[i];++i;var u=Qr.string(Kr.field(t,o));r.push(o+"="+Yr.urlEncode(u))}return 0==r.length?e:e+n+r.join("&")},st.parseQueryParameters=function(e){var t=e.indexOf("?");if(0>t)return{};for(var e=Fr.substr(e,t+1,null).split("&"),t={},n=0;n<e.length;){var r=e[n];++n;var i=r.split("="),r=i[0],i=null==i[1]?null:Yr.urlDecode(i[1]);t[r]=i}return t},L=function(e){this.container=e},m=void 0,g=void 0,y=void 0,b=void 0,w=void 0,E=void 0,S=void 0,x=void 0,T=void 0,N=void 0,C=void 0,k=void 0,A=void 0,O=void 0,M=void 0,Er["rg.visualization.Visualization"]=L,L.__name__=["rg","visualization","Visualization"],L.prototype={removeReady:function(e){this.ready.remove(e)},addReady:function(e){this.ready.add(e),this.hasRendered&&e()},addReadyOnce:function(e){this.ready.addOnce(e),this.hasRendered&&e()},destroy:function(){},feedData:function(){},init:function(){throw new Tn.AbstractMethod({fileName:"Visualization.hx",lineNumber:42,className:"rg.visualization.Visualization",methodName:"init"})},setVariables:function(e,t,n){var r=this;this.variables=e,this.independentVariables=t,this.dependentVariables=n,this.hasRendered=!1,this.ready=new ts,this.ready.addOnce(function(){r.hasRendered=!0})},hasRendered:null,ready:null,container:null,variables:null,dependentVariables:null,independentVariables:null,__class__:L},A=function(e){L.call(this,e.container),this.layout=e},Er["rg.visualization.VisualizationSvg"]=A,A.__name__=["rg","visualization","VisualizationSvg"],A.__super__=L,A.prototype=yr(L.prototype,{layout:null,baseChart:null,__class__:A}),O=function(e){A.call(this,e)},Er["rg.visualization.VisualizationCartesian"]=O,O.__name__=["rg","visualization","VisualizationCartesian"],O.__super__=A,O.prototype=yr(A.prototype,{createRules:function(e,t,n){var e=this.info.displayMinorRule(t),r=this.info.displayMajorRule(t),i=this.info.displayAnchorLineRule(t);null!=this.info.label.axis&&this.info.label.axis(t),t=null;if(e||r){t=this.layout.getPanel("main");if(null==t)return null;t=new it.RulesOrtho(t,n),t.displayMinor=e,t.displayMajor=r,t.displayAnchorLine=i,t.init()}return t},createTickmarks:function(e,t,n){var r=this,i=this.info.displayMinorTick(t),s=this.info.displayMajorTick(t),o=this.info.displayLabelTick(t),u=this.info.displayAnchorLineTick(t),a=null!=this.info.label.axis?this.info.label.axis(t):null,f=null,l;if(i||s||o||u){l=this.layout.getContext(n);if(null==l)return null;f=new it.TickmarksOrtho(l.panel,l.anchor),this.setTickmarksDefaults(f,e,t,n),o?null!=this.info.label.tickmark&&(f.tickLabel=function(e){return r.info.label.tickmark(e,t)}):f.displayLabel=!1,f.displayMinor=i,f.displayMajor=s,f.lengthMinor=this.info.lengthTickMinor,f.lengthMajor=this.info.lengthTickMajor,f.paddingMinor=this.info.paddingTickMinor,f.paddingMajor=this.info.paddingTickMajor,f.paddingLabel=this.info.paddingLabel,e=this.info.labelAnchor(t),null!=e&&(f.labelAnchor=nt.GridAnchors.parse(e)),e=this.info.labelOrientation(t),null!=e&&(f.labelOrientation=nt.LabelOrientations.parse(e)),null!=(e=this.info.labelAngle(t))&&(f.labelAngle=e),f.displayAnchorLine=u}return null!=a&&null!=(l=this.layout.getContext(n+"title"))&&(u=(new it.Title(l.panel,a,l.anchor,null,"axis-title")).idealHeight(),this.layout.suggestSize(n+"title",u)),null!=f&&f.init(),f},setTickmarksDefaults:function(){},destroy:function(){this.chart.destroy()},transformData:function(){throw new Tn.AbstractMethod({fileName:"VisualizationCartesian.hx",lineNumber:162,className:"rg.visualization.VisualizationCartesian",methodName:"transformData"})},feedData:function(e){if(0!=e.length){null!=this.title&&null!=this.info.label.title&&(this.title.set_text(this.info.label.title(this.variables,e)),this.layout.suggestSize("title",this.title.idealHeight())),e=this.transformData(e),this.chart.setVariables(this.variables,this.independentVariables,this.dependentVariables,e);for(var t=0,n=this.ylabels.length;t<n;){var r=t++,r=this.ylabels[r],i=this.yvariables[r.id];r.tickmarks.update(i.axis,i.min(),i.max()),i=Math.round(r.tickmarks.desiredSize),this.layout.suggestSize("y"+r.id,i)}t=0;for(n=this.yrules.length;t<n;)r=t++,r=this.yrules[r],i=this.yvariables[r.id],r.rules.update(i.axis,i.min(),i.max());null!=this.xlabel&&(i=this.xvariable,this.xlabel.update(i.axis,i.min(),i.max()),i=Math.round(this.xlabel.desiredSize),this.layout.suggestSize("x",i)),null!=this.xrule&&(i=this.xvariable,this.xrule.update(i.axis,i.min(),i.max())),this.chart.data(e)}},initTitle:function(){if(null!=this.info.label.title){var e=this.layout.getContext("title");null!=e&&(this.title=new it.Title(e.panel,null,e.anchor))}},initCartesianChart:function(){this.chart.animated=this.info.animation.animated,this.chart.animationDuration=this.info.animation.duration,this.chart.animationEase=this.info.animation.ease,this.chart.click=this.info.click,this.chart.labelDataPoint=this.info.label.datapoint,this.chart.labelDataPointOver=this.info.label.datapointover,this.chart.init()},initChart:function(){throw new Tn.AbstractMethod({fileName:"VisualizationCartesian.hx",lineNumber:87,className:"rg.visualization.VisualizationCartesian",methodName:"initChart"})},initXAxis:function(){this.xlabel=this.createTickmarks(0,this.xvariable.type,"x"),this.xrule=this.createRules(0,this.xvariable.type,h.Vertical)},initYAxes:function(){this.ylabels=[],this.yrules=[];for(var e=0,t=this.yvariables.length;e<t;){var n=e++,r=this.createTickmarks(n+1,this.yvariables[n].type,"y"+n),i=this.createRules(n+1,this.yvariables[n].type,h.Horizontal);null!=r&&this.ylabels.push({id:n,tickmarks:r}),null!=i&&this.yrules.push({id:n,rules:i})}},initPadding:function(){this.layout.adjustPadding()},initAxes:function(){throw new Tn.AbstractMethod({fileName:"VisualizationCartesian.hx",lineNumber:45,className:"rg.visualization.VisualizationCartesian",methodName:"initAxes"})},init:function(){this.initAxes(),this.initYAxes(),this.initXAxis(),this.initTitle(),this.initPadding(),this.initChart(),this.initCartesianChart()},yvariables:null,xvariable:null,title:null,yrules:null,ylabels:null,xrule:null,xlabel:null,chart:null,info:null,__class__:O}),b=function(e){O.call(this,e)},Er["rg.visualization.VisualizationBarChart"]=b,b.__name__=["rg","visualization","VisualizationBarChart"],b.__super__=O,b.prototype=yr(O.prototype,{transformData:function(e){var t=[],n=this.independentVariables[0],r=n.axis.range(n.min(),n.max());if(0<=n.type.indexOf("time:"))for(var i=ct.periodicity(n.type),s=0;s<r.length;){var o=[r[s]];++s;for(var u=[],a=0,f=this.dependentVariables.length;a<f;){var l=a++,l=ht.filterByDependents(e,[this.dependentVariables[l]]);u.push(xr.filter(l,function(e){return function(t){return Mr.snap(Kr.field(t,n.type),i)==e[0]}}(o)))}t.push(u)}else for(s=0;s<r.length;){o=[r[s]],++s,u=[],a=0;for(f=this.dependentVariables.length;a<f;)l=a++,l=ht.filterByDependents(e,[this.dependentVariables[l]]),u.push(xr.filter(l,function(e){return function(t){return Kr.field(t,n.type)==e[0]}}(o)));t.push(u)}if(null!=this.infoBar.segment.on){var c=this.infoBar.segment.on,h=new Cn.Set;if(0!=this.infoBar.segment.values.length){s=0;for(f=this.infoBar.segment.values;s<f.length;)o=f[s],++s,h.add(o)}else e.forEach(function(e){h.add(Kr.field(e,c))});f=0;for(s=r.length;f<s;){l=f++,e=0;for(a=this.dependentVariables.length;e<a;){for(var u=e++,o=t[l][u],p=[],d=0,v=h.iterator();v.hasNext();){var m=v.next();if(m==Kr.field(o[d],c))p.push(o[d++]);else{var g={};g[c]=m,g[n.type]=r[l],g[this.dependentVariables[u].type]=0,p.push(g)}}t[l][u]=p}}}return t},initChart:function(){var e=this,t=new tt.BarChart(this.layout.getPanel(this.layout.mainPanelName));this.baseChart=t,t.ready.add(function(){e.ready.dispatch()}),t.stacked=this.infoBar.stacked;var n=this.infoBar.effect;switch(n[1]){case 0:t.displayGradient=!1;break;case 1:n=n[2],t.displayGradient=!0,t.gradientLightness=n}t.padding=this.infoBar.barPadding,t.paddingAxis=this.infoBar.barPaddingAxis,t.paddingDataPoint=this.infoBar.barPaddingDataPoint,t.horizontal=this.infoBar.horizontal,this.chart=t},initAxes:function(){this.infoBar.horizontal?(this.xvariable=this.dependentVariables.map(function(e){return e})[0],this.yvariables=[this.independentVariables[0]]):(this.yvariables=this.dependentVariables.map(function(e){return e}),this.xvariable=this.independentVariables[0])},infoBar:null,__class__:b}),w=function(e){A.call(this,e)},Er["rg.visualization.VisualizationFunnelChart"]=w,w.__name__=["rg","visualization","VisualizationFunnelChart"],w.__super__=A,w.prototype=yr(A.prototype,{destroy:function(){this.chart.destroy(),null!=this.title&&this.title.destroy(),A.prototype.destroy.call(this)},feedData:function(e){this.chart.setVariables(this.independentVariables,this.dependentVariables),e=ht.filterByIndependents(ht.filterByDependents(e,this.dependentVariables),this.independentVariables),null!=this.info.sortDataPoint&&e.sort(this.info.sortDataPoint),null!=this.title&&(null!=this.info.label.title?(this.title.set_text(this.info.label.title(this.variables,e)),this.layout.suggestSize("title",this.title.idealHeight())):this.layout.suggestSize("title",0)),null!=this.info.sortDataPoint&&e.sort(this.info.sortDataPoint),this.chart.init(),this.chart.data(e)},init:function(){var e=this,t=this.layout.getPanel(this.layout.mainPanelName);this.baseChart=this.chart=new tt.FunnelChart(t),this.chart.ready.add(function(){e.ready.dispatch()}),null!=this.info.label.datapoint&&(this.chart.labelDataPoint=this.info.label.datapoint),null!=this.info.label.datapoint&&(this.chart.labelDataPointOver=this.info.label.datapointover),null!=this.info.label.arrow&&(this.chart.labelArrow=this.info.label.arrow),null!=this.info.click&&(this.chart.click=this.info.click),this.chart.padding=this.info.padding,this.chart.flatness=this.info.flatness,t=this.info.effect;switch(t[1]){case 1:t=t[2],this.chart.displayGradient=!0,this.chart.gradientLightness=t;break;case 0:this.chart.displayGradient=!1}this.chart.arrowSize=this.info.arrowSize,null!=this.info.label.title&&(t=this.layout.getContext("title"),null!=t)&&(this.title=new it.Title(t.panel,null,t.anchor))},chart:null,title:null,info:null,__class__:w}),E=function(e){A.call(this,e)},Er["rg.visualization.VisualizationGeo"]=E,E.__name__=["rg","visualization","VisualizationGeo"],E.__super__=A,E.prototype=yr(A.prototype,{destroy:function(){this.chart.destroy(),null!=this.title&&this.title.destroy(),A.prototype.destroy.call(this)},feedData:function(e){this.chart.setVariables(this.independentVariables,this.dependentVariables,e),null!=this.title&&(null!=this.info.label.title?(this.title.set_text(this.info.label.title(this.variables,e)),this.layout.suggestSize("title",this.title.idealHeight())):this.layout.suggestSize("title",0)),this.chart.init(),this.chart.data(e)},init:function(){var e=this;if(null!=this.info.label.title){var t=this.layout.getContext("title");if(null==t)return;this.title=new it.Title(t.panel,null,t.anchor)}t=this.layout.getPanel(this.layout.mainPanelName),this.chart=new tt.Geo(t),this.chart.labelOutline=this.info.labelOutline,this.chart.labelShadow=this.info.labelShadow,this.baseChart=this.chart,this.chart.ready.add(function(){e.ready.dispatch()});for(var t=new Dt,n=0,r=this.info.map;n<r.length;){var i=r[n];++n;var s=t.create(i),s=new nt.Map(this.chart.mapcontainer,s);s.set_className(i.classname),s.labelDataPoint=null==i.label?this.info.label.datapoint:i.label.datapoint,s.labelDataPointOver=null==i.label?this.info.label.datapointover:i.label.datapointover,s.click=i.click,s.radius=i.radius,s.colorMode=i.colorScaleMode,s.handlerClick=(rs=this.chart,wr(rs,rs.handlerClick)),s.handlerDataPointOver=(rs=this.chart,wr(rs,rs.handlerDataPointOver)),s.mapping=i.mapping;var o=i.mappingurl;null!=o&&(!Yr.startsWith(o,"http://")||!Yr.startsWith(o,"https://"))&&(o=ns.BASE_URL_GEOJSON+o+".json"+(i.usejsonp?".js":"")),s.load(i.url,i.type,o,i.usejsonp),this.chart.addMap(s,i.property)}},chart:null,title:null,info:null,__class__:E}),S=function(e){O.call(this,e)},Er["rg.visualization.VisualizationHeatGrid"]=S,S.__name__=["rg","visualization","VisualizationHeatGrid"],S.__super__=O,S.prototype=yr(O.prototype,{setTickmarksDefaults:function(e,t){0==t&&(e.labelAnchor=nt.GridAnchor.Left,e.labelAngle=180)},transformData:function(e){return e},initChart:function(){var e=this,t=new tt.HeatGrid(this.layout.getPanel(this.layout.mainPanelName));this.baseChart=t,t.ready.add(function(){e.ready.dispatch()}),t.useContour=this.infoHeatGrid.contour,t.set_colorMode(this.infoHeatGrid.colorScaleMode),this.chart=t},initAxes:function(){this.xvariable=this.independentVariables[0],this.yvariables=[this.independentVariables[1]]},infoHeatGrid:null,__class__:S}),M=function(e){L.call(this,e),e.classed().add("rg")},Er["rg.visualization.VisualizationHtml"]=M,M.__name__=["rg","visualization","VisualizationHtml"],M.__super__=L,M.prototype=yr(L.prototype,{__class__:M}),g=function(e){M.call(this,e)},Er["rg.visualization.VisualizationLeaderboard"]=g,g.__name__=["rg","visualization","VisualizationLeaderboard"],g.__super__=M,g.prototype=yr(M.prototype,{feedData:function(e){this.chart.setVariables(this.independentVariables,this.dependentVariables),this.chart.data(e)},init:function(){var e=this;this.chart=new yt.Leadeboard(this.container),this.chart.ready.add(function(){e.ready.dispatch()}),null!=this.info.label.datapoint&&(this.chart.labelDataPoint=this.info.label.datapoint),null!=this.info.label.datapointover&&(this.chart.labelDataPointOver=this.info.label.datapointover),null!=this.info.label.rank&&(this.chart.labelRank=this.info.label.rank),null!=this.info.label.value&&(this.chart.labelValue=this.info.label.value),this.chart.animated=this.info.animation.animated,this.chart.animationDuration=this.info.animation.duration,this.chart.animationDelay=this.info.animation.delay,this.chart.animationEase=this.info.animation.ease,this.chart.useMax=this.info.usemax,this.chart.displayBar=this.info.displaybar,this.chart.colorScale=this.info.colorscale,null!=this.info.click&&(this.chart.click=this.info.click),null!=this.info.sortDataPoint&&(this.chart.sortDataPoint=this.info.sortDataPoint),this.chart.init()},chart:null,info:null,__class__:g}),x=function(e){O.call(this,e)},Er["rg.visualization.VisualizationLineChart"]=x,x.__name__=["rg","visualization","VisualizationLineChart"],x.__super__=O,x.prototype=yr(O.prototype,{transformData:function(e){for(var t=[],n=new Ct(this.infoLine.segment.on,this.infoLine.segment.transform,this.infoLine.segment.scale,this.infoLine.segment.values),r=0,i=this.dependentVariables.length;r<i;){var s=this.dependentVariables[r++],s=ht.filterByDependents(e,[s]);t.push(n.segment(s))}return t},initChart:function(){var e=this,t=new tt.LineChart(this.layout.getPanel(this.layout.mainPanelName));this.baseChart=t,t.ready.add(function(){e.ready.dispatch()}),t.symbol=this.infoLine.symbol,t.symbolStyle=this.infoLine.symbolStyle,t.lineInterpolator=this.infoLine.interpolation,t.lineEffect=this.infoLine.effect,t.sensibleRadius=this.infoLine.sensibleradius,null==this.independentVariables[0].scaleDistribution&&(this.independentVariables[0].scaleDistribution=B.ScaleFill),null!=this.infoLine.y0property?t.y0property=this.infoLine.y0property:this.infoLine.displayarea&&(t.y0property=""),this.chart=t},initAxes:function(){this.xvariable=this.variables[0],this.yvariables=this.variables.slice(1)},infoLine:null,__class__:x}),T=function(e){A.call(this,e)},Er["rg.visualization.VisualizationPieChart"]=T,T.__name__=
["rg","visualization","VisualizationPieChart"],T.__super__=A,T.prototype=yr(A.prototype,{destroy:function(){this.chart.destroy(),null!=this.title&&this.title.destroy(),A.prototype.destroy.call(this)},feedData:function(e){this.chart.setVariables(this.independentVariables,this.dependentVariables),null!=this.title&&(null!=this.info.label.title?(this.title.set_text(this.info.label.title(this.variables,e)),this.layout.suggestSize("title",this.title.idealHeight())):this.layout.suggestSize("title",0)),null!=this.info.sortDataPoint&&e.sort(this.info.sortDataPoint),this.chart.init(),this.chart.data(e)},init:function(){var e=this,t=this.layout.getPanel(this.layout.mainPanelName);this.baseChart=this.chart=new tt.PieChart(t),this.chart.ready.add(function(){e.ready.dispatch()}),this.chart.innerRadius=this.info.innerradius,this.chart.outerRadius=this.info.outerradius,this.chart.overRadius=this.info.overradius,this.chart.tooltipRadius=this.info.tooltipradius,t=this.info.effect;switch(t[1]){case 1:t=t[2],this.chart.displayGradient=!0,this.chart.gradientLightness=t;break;case 0:this.chart.displayGradient=!1}this.chart.labelDataPoint=this.info.label.datapoint,this.chart.labelDataPointOver=this.info.label.datapointover,this.chart.labelRadius=this.info.labelradius,this.chart.labelOrientation=this.info.labelorientation,this.chart.labelDontFlip=this.info.dontfliplabel,this.chart.animated=this.info.animation.animated,this.chart.animationDuration=this.info.animation.duration,this.chart.animationEase=this.info.animation.ease,this.chart.animationDelay=this.info.animation.delay,null!=this.info.click&&(this.chart.mouseClick=this.info.click),null!=this.info.label.title&&(t=this.layout.getContext("title"),null!=t)&&(this.title=new it.Title(t.panel,null,t.anchor))},info:null,title:null,chart:null,__class__:T}),m=function(e){M.call(this,e)},Er["rg.visualization.VisualizationPivotTable"]=m,m.__name__=["rg","visualization","VisualizationPivotTable"],m.__super__=M,m.prototype=yr(M.prototype,{destroy:function(){this.chart.destroy()},feedData:function(e){this.chart.setVariables(this.independentVariables,this.dependentVariables),this.chart.data(e)},init:function(){var e=this;this.chart=new yt.PivotTable(this.container),this.chart.ready.add(function(){e.ready.dispatch()}),this.chart.displayColumnTotal=this.info.displayColumnTotal,this.chart.displayHeatMap=this.info.displayHeatmap,this.chart.displayRowTotal=this.info.displayRowTotal,this.chart.colorStart=this.info.heatmapColorStart,this.chart.colorEnd=this.info.heatmapColorEnd,this.chart.cellclass=this.info.cellclass,this.chart.valueclass=this.info.valueclass,this.chart.headerclass=this.info.headerclass,this.chart.totalclass=this.info.totalclass,null!=this.info.click&&(this.chart.click=this.info.click),null!=this.info.label.datapoint&&(this.chart.labelDataPoint=this.info.label.datapoint),null!=this.info.label.datapointover&&(this.chart.labelDataPointOver=this.info.label.datapointover),null!=this.info.label.axis&&(this.chart.labelAxis=this.info.label.axis),null!=this.info.label.axisvalue&&(this.chart.labelAxisValue=this.info.label.axisvalue),null!=this.info.label.total&&(this.chart.labelTotal=this.info.label.total),null!=this.info.label.totalover&&(this.chart.labelTotalOver=this.info.label.totalover),this.chart.incolumns=zr.min(this.info.columnAxes,this.independentVariables.length),this.chart.init()},chart:null,info:null,__class__:m}),N=function(e){A.call(this,e)},Er["rg.visualization.VisualizationSankey"]=N,N.__name__=["rg","visualization","VisualizationSankey"],N.defaultIdf=function(e){return null==e?function(e){return e.id}:e},N.defaultNodef=function(e){if(null==e){var t=0;return function(e){return{id:"#"+ ++t,weight:e.weight,entry:0,exit:0}}}return e},N.defaultEdgesf=function(e,t){return null==t?function(t){for(var n=[],r=e(t),i=0,s=Kr.fields(t.parents);i<s.length;){var o=s[i];++i,n.push({head:r,tail:o,weight:Kr.field(t.parents,o)})}return n}:t},N.__super__=A,N.prototype=yr(A.prototype,{destroy:function(){this.chart.destroy(),null!=this.title&&this.title.destroy(),A.prototype.destroy.call(this)},defaultWeightf:function(e){if(null==e){var t=this.dependentVariables[0].type;return function(e){return e=Kr.field(e,t),null!=e?e:0}}return e},sugiyama:function(e,t){return(new Pn.SugiyamaMethod).resolve(e,t)},weightBalance:function(e,t){var n=new Pn.GraphLayout(e,(new Pn.HeaviestNodeLayer).lay(e)),n=(new Pn.EdgeSplitter).split(n,[],t);return n=Pn.GreedySwitchDecrosser.best().decross(n)},layoutData:function(e,t,n,r,i,s){e=this.createGraph(e,n,i,s),r=N.defaultNodef(r);switch(t){case"weightbalance":return this.weightBalance(e,r);default:return this.sugiyama(e,r)}},extractEdges:function(e){return xr.filter(e,function(e){return null!=e.head&&null!=e.tail})},extractNodes:function(e){var t=xr.filter(e,function(e){return null!=e.id});if(0==t.length){var n=this.dependentVariables[0].type,r=new Br,i=function(e,t,n){if(null!=e){var i=r.get(e);null==i&&(i={node:{id:e},positive:0,negative:0},r.set(e,i)),t?i.positive+=n:i.negative+=n}};xr.filter(e,function(e){return Kr.hasField(e,"head")||Kr.hasField(e,"tail")}).forEach(function(e){var t=Kr.field(e,n);i(e.tail,!0,t),i(e.head,!1,t)}),t=Xr.array(r.iterator()).map(function(e){var t=e.node;return t[n]=Math.max(e.positive,e.negative),t})}return t},createGraph:function(e,t,n,r){t=N.defaultIdf(t),N.defaultEdgesf(t,r);for(var n=this.defaultWeightf(n),r=new Pn.Graph(t),i=this.extractNodes(e),e=this.extractEdges(e),s=0;s<i.length;){var o=i[s];++s,r.nodes.create({dp:o,id:t(o),weight:n(o),entry:0,exit:0})}for(s=0;s<e.length;){t=e[s],++s;var i=r.nodes.getById(t.head),u=r.nodes.getById(t.tail);if(null==i){var o={id:t.head},a=n(t);o[this.dependentVariables[0].type]=a,i=r.nodes.create({dp:o,id:t.head,weight:a,entry:0,exit:0})}null==u&&(o={id:t.tail},a=n(t),o[this.dependentVariables[0].type]=a,u=r.nodes.create({dp:o,id:t.tail,weight:a,entry:0,exit:0})),r.edges.create(u,i,n(t))}for(n=r.nodes.collection.iterator();n.hasNext();)e=n.next(),s=e.negativeWeight(),o=e.positiveWeight(),0==e.data.weight&&(e.data.weight=s),e.data.entry=Math.max(0,e.data.weight-s),e.data.exit=Math.max(0,e.data.weight-o);return r},layoutDataWithMap:function(e,t,n,r,i){var s=this.createGraph(e,n,r,i);t.layers.map(function(e){return e.map(function(e){var t=s.nodes.getById(e);return null==t&&(t=s.nodes.create({id:e,weight:0,entry:0,exit:0,dp:{id:e}})),t.id})}),e=0;for(n=t.dummies;e<n.length;){r=n[e],++e;for(var o=s.nodes.getById(r[0]),i=s.nodes.getById(r[r.length-1]),u=[o],o=o.connectedBy(i),a=null==o?0:o.weight,f=1,l=r.length-1;f<l;){var c=f++;u.push(s.nodes.create({id:r[c],weight:a,entry:0,exit:0,dp:null}))}u.push(i),f=0;for(l=u.length-1;f<l;)c=f++,s.edges.create(u[c],u[c+1],a);null!=o&&o.graph.edges._remove(o)}return t=t.layers.map(function(e){return e.map(function(e){var t=s.nodes.getById(e);return null==t&&(t=s.nodes.create({id:e,weight:0,entry:0,exit:0,dp:{id:e}})),t.id})}),new Pn.GraphLayout(s,t)},feedData:function(e){this.chart.setVariables(this.independentVariables,this.dependentVariables,e),null!=this.title&&(null!=this.info.label.title?(this.title.set_text(this.info.label.title(this.variables,e)),this.layout.suggestSize("title",this.title.idealHeight())):this.layout.suggestSize("title",0)),e=null!=this.info.layoutmap?this.layoutDataWithMap(e,this.info.layoutmap):this.layoutData(e,this.info.layoutmethod),null!=this.info.layerWidth&&(this.chart.layerWidth=this.info.layerWidth),null!=this.info.nodeSpacing&&(this.chart.nodeSpacing=this.info.nodeSpacing),null!=this.info.dummySpacing&&(this.chart.dummySpacing=this.info.dummySpacing),null!=this.info.extraWidth&&(this.chart.extraWidth=this.info.extraWidth),null!=this.info.backEdgeSpacing&&(this.chart.backEdgeSpacing=this.info.backEdgeSpacing),null!=this.info.extraHeight&&(this.chart.extraHeight=this.info.extraHeight),null!=this.info.extraRadius&&(this.chart.extraRadius=this.info.extraRadius),null!=this.info.imageWidth&&(this.chart.imageWidth=this.info.imageWidth),null!=this.info.imageHeight&&(this.chart.imageHeight=this.info.imageHeight),null!=this.info.imageSpacing&&(this.chart.imageSpacing=this.info.imageSpacing),null!=this.info.labelNodeSpacing&&(this.chart.labelNodeSpacing=this.info.labelNodeSpacing),this.chart.stackbackedges=this.info.stackbackedges,this.chart.thinbackedges=this.info.thinbackedges,this.chart.labelDataPoint=this.info.label.datapoint,this.chart.labelDataPointOver=this.info.label.datapointover,this.chart.labelNode=this.info.label.node,this.chart.labelEdge=this.info.label.edge,this.chart.labelEdgeOver=this.info.label.edgeover,this.chart.imagePath=this.info.imagePath,this.chart.click=this.info.click,this.chart.clickEdge=this.info.clickEdge,this.chart.nodeClass=this.info.nodeclass,this.chart.edgeClass=this.info.edgeclass,this.chart.displayEntry=this.info.displayentry,this.chart.displayExit=this.info.displayexit,this.chart.init(),this.chart.data(e)},init:function(){var e=this;if(null!=this.info.label.title){var t=this.layout.getContext("title");if(null==t)return;this.title=new it.Title(t.panel,null,t.anchor)}t=this.layout.getPanel(this.layout.mainPanelName),this.baseChart=this.chart=new tt.Sankey(t),this.chart.ready.add(function(){e.ready.dispatch()})},chart:null,title:null,info:null,__class__:N}),C=function(e){O.call(this,e)},Er["rg.visualization.VisualizationScatterGraph"]=C,C.__name__=["rg","visualization","VisualizationScatterGraph"],C.__super__=O,C.prototype=yr(O.prototype,{transformData:function(e){var t=[];new Ct(this.infoScatter.segment.on,this.infoScatter.segment.transform,this.infoScatter.segment.scale,this.infoScatter.segment.values);for(var n=0,r=this.dependentVariables;n<r.length;){var i=r[n];++n,t.push(ht.filterByDependents(e,[i]))}return t},initChart:function(){var e=this,t=new tt.ScatterGraph(this.layout.getPanel(this.layout.mainPanelName));this.baseChart=t,t.ready.add(function(){e.ready.dispatch()}),t.symbol=this.infoScatter.symbol,t.symbolStyle=this.infoScatter.symbolStyle,null==this.independentVariables[0].scaleDistribution&&(this.independentVariables[0].scaleDistribution=B.ScaleFill),this.chart=t},initAxes:function(){this.xvariable=this.independentVariables[0],this.yvariables=this.dependentVariables.map(function(e){return e})},infoScatter:null,__class__:C}),k=function(e){O.call(this,e)},Er["rg.visualization.VisualizationStreamGraph"]=k,k.__name__=["rg","visualization","VisualizationStreamGraph"],k.__super__=O,k.prototype=yr(O.prototype,{transformData:function(e){return(new Ct(this.infoStream.segment.on,this.infoStream.segment.transform,this.infoStream.segment.scale,this.infoStream.segment.values)).segment(e)},initChart:function(){var e=this,t=new tt.StreamGraph(this.layout.getPanel(this.layout.mainPanelName));this.baseChart=t,t.ready.add(function(){e.ready.dispatch()}),t.interpolator=this.infoStream.interpolation;var n=this.infoStream.effect;switch(n[1]){case 0:t.gradientStyle=0;break;case 2:n=n[2],t.gradientStyle=1,t.gradientLightness=n;break;case 1:n=n[2],t.gradientStyle=2,t.gradientLightness=n}this.chart=t},initAxes:function(){this.xvariable=this.independentVariables[0],this.yvariables=this.dependentVariables.map(function(e){return e})},infoStream:null,__class__:k}),y=function(){},Er["rg.visualization.Visualizations"]=y,y.__name__=["rg","visualization","Visualizations"],y.instantiateLayout=function(e,t,n,r){return ti.createInstance(y.layoutType.get(e),[t,n,r])},Cn={HashList:function(){this.length=0,this.__keys=[],this.__hash=new Br}},Er["thx.collection.HashList"]=Cn.HashList,Cn.HashList.__name__=["thx","collection","HashList"],Cn.HashList.prototype={__hash:null,__keys:null,toString:function(){var e=new Gr;e.b+="{";for(var t=this.keys();t.hasNext();){var n=t.next();e.b+=Qr.string(n),e.b+=" => ",e.b+=Qr.string(Qr.string(this.get(n))),t.hasNext()&&(e.b+=", ")}return e.b+="}",e.b},array:function(){for(var e=[],t=0,n=this.__keys;t<n.length;){var r=n[t];++t,e.push(this.__hash.get(r))}return e},clear:function(){this.__hash=new Br,this.__keys=[],this.length=0},iterator:function(){return Fr.iter(this.array())},keys:function(){return Fr.iter(this.__keys)},keyAt:function(e){return this.__keys[e]},removeAt:function(e){e=this.__keys[e];if(null==e)return null;var t=this.__hash.get(e);return this.__hash.remove(e),Fr.remove(this.__keys,e),this.length--,t},remove:function(e){var t=this.__hash.get(e);return null==t?null:(this.__hash.remove(e),Fr.remove(this.__keys,e),this.length--,t)},exists:function(e){return this.__hash.exists(e)},indexOf:function(e){if(!this.__hash.exists(e))return-1;for(var t=0,n=this.__keys.length;t<n;){var r=t++;if(this.__keys[r]==e)return r}throw"this should never happen"},getAt:function(e){return this.__hash.get(this.__keys[e])},get:function(e){return this.__hash.get(e)},setAt:function(e,t,n){this.remove(t),this.__keys.splice(e,0,t),this.__hash.set(t,n),this.length++},set:function(e,t){this.__hash.exists(e)||(this.__keys.push(e),this.length++),this.__hash.set(e,t)},length:null,__class__:Cn.HashList},Cn.Set=function(){this._v=[],this.length=0},Er["thx.collection.Set"]=Cn.Set,Cn.Set.__name__=["thx","collection","Set"],Cn.Set.ofArray=function(e){for(var t=new Cn.Set,n=0;n<e.length;){var r=e[n];++n,t.add(r)}return t},Cn.Set.prototype={toString:function(){return"{"+this._v.join(", ")+"}"},array:function(){return this._v.slice()},iterator:function(){return Fr.iter(this._v)},exists:function(e){for(var t=0,n=this._v;t<n.length;){var r=n[t];++t;if(r==e)return!0}return!1},remove:function(e){return e=Fr.remove(this._v,e),this.length=this._v.length,e},add:function(e){Fr.remove(this._v,e),this._v.push(e),this.length=this._v.length},_v:null,length:null,__class__:Cn.Set},kn.Cmyk=function(e,t,n,r){kn.Rgb.call(this,zr.interpolate(Hr.normalize(1-e-r),0,255,null),zr.interpolate(Hr.normalize(1-t-r),0,255,null),zr.interpolate(Hr.normalize(1-n-r),0,255,null)),this.cyan=Hr.normalize(e),this.magenta=Hr.normalize(t),this.yellow=Hr.normalize(n),this.black=Hr.normalize(r)},Er["thx.color.Cmyk"]=kn.Cmyk,kn.Cmyk.__name__=["thx","color","Cmyk"],kn.Cmyk.toCmyk=function(e){var t=0,n=0,r=0;return 0==e.red+e.blue+e.green?e=1:(t=1-e.red/255,r=1-e.green/255,n=1-e.blue/255,e=Hr.min(t<r?t:r,n),t=(t-e)/(1-e),r=(r-e)/(1-e),n=(n-e)/(1-e)),new kn.Cmyk(t,r,n,e)},kn.Cmyk.equals=function(e,t){return e.black==t.black&&e.cyan==t.cyan&&e.magenta==t.magenta&&e.yellow==t.yellow},kn.Cmyk.darker=function(e,t,n){return new kn.Cmyk(e.cyan,e.magenta,e.yellow,Hr.interpolate(t,e.black,0,n))},kn.Cmyk.lighter=function(e,t,n){return new kn.Cmyk(e.cyan,e.magenta,e.yellow,Hr.interpolate(t,e.black,1,n))},kn.Cmyk.interpolate=function(e,t,n,r){return new kn.Cmyk(Hr.interpolate(n,e.cyan,t.cyan,r),Hr.interpolate(n,e.magenta,t.magenta,r),Hr.interpolate(n,e.yellow,t.yellow,r),Hr.interpolate(n,e.black,t.black,r))},kn.Cmyk.__super__=kn.Rgb,kn.Cmyk.prototype=yr(kn.Rgb.prototype,{toCmykString:function(){return"cmyk("+this.cyan+","+this.magenta+","+this.yellow+","+this.black+")"},yellow:null,magenta:null,cyan:null,black:null,__class__:kn.Cmyk}),kn.Colors=function(){},Er["thx.color.Colors"]=kn.Colors,kn.Colors.__name__=["thx","color","Colors"],kn.Colors.interpolatef=function(e,t,n){var e=kn.Colors.parse(e),t=kn.Colors.parse(t),r=kn.Rgb.interpolatef(e,t,n);return function(e){return r(e).toString()}},kn.Colors.interpolate=function(e,t,n,r){return kn.Colors.interpolatef(t,n,r)(e)},kn.Colors.parse=function(e){if(!kn.Colors._reParse.match(e=Yr.trim(e.toLowerCase()))){var t=kn.NamedColors.byName.get(e);return null==t?"transparent"==e?kn.Rgb.fromInt(16777215):null:t}e=kn.Colors._reParse.matched(1);if(!Zr.empty(e))switch(t=kn.Colors._reParse.matched(2).split(","),e){case"rgb":case"rgba":return new kn.Rgb(kn.Colors._c(t[0]),kn.Colors._c(t[1]),kn.Colors._c(t[2]));case"hsl":return new kn.Hsl(kn.Colors._d(t[0]),kn.Colors._p(t[1]),kn.Colors._p(t[2]));case"cmyk":return new kn.Cmyk(kn.Colors._p(t[0]),kn.Colors._p(t[1]),kn.Colors._p(t[2]),kn.Colors._p(t[3]))}e=kn.Colors._reParse.matched(3);if(3==e.length)e=e.split("").map(function(e){return e+e}).join("");else if(6!=e.length)return null;return kn.Rgb.fromInt(Qr.parseInt("0x"+e))},kn.Colors._c=function(e){return Qr.parseInt(Yr.trim(e))},kn.Colors._d=function(e){return e=Yr.trim(e),"deg"==Fr.substr(e,-3,null)?e=Fr.substr(e,0,-3):"º"==Fr.substr(e,-1,null)&&(e=Fr.substr(e,0,-1)),Qr.parseFloat(e)},kn.Colors._p=function(e){return e=Yr.trim(e),"%"==Fr.substr(e,-1,null)?Qr.parseFloat(Fr.substr(e,0,-1))/100:Qr.parseFloat(e)},kn.Grey=function(e){this.grey=Hr.normalize(e),e=zr.interpolate(this.grey,0,255,null),kn.Rgb.call(this,e,e,e)},Er["thx.color.Grey"]=kn.Grey,kn.Grey.__name__=["thx","color","Grey"],kn.Grey.toGrey=function(e,t){null==t&&(t=kn.PerceivedLuminance.Perceived);switch(t[1]){case 0:return new kn.Grey(.2126*(e.red/255)+.7152*(e.green/255)+.0722*(e.blue/255));case 1:return new kn.Grey(.299*(e.red/255)+.587*(e.green/255)+.114*(e.blue/255));case 2:return new kn.Grey(Math.sqrt(.241*Math.pow(e.red/255,2)+.691*Math.pow(e.green/255,2)+.068*Math.pow(e.blue/255,2)))}},kn.Grey.equals=function(e,t){return e.grey==t.grey},kn.Grey.darker=function(e,t,n){return new kn.Grey(Hr.interpolate(t,e.grey,0,n))},kn.Grey.lighter=function(e,t,n){return new kn.Grey(Hr.interpolate(t,e.grey,1,n))},kn.Grey.interpolate=function(e,t,n,r){return new kn.Grey(Hr.interpolate(n,e.grey,t.grey,r))},kn.Grey.__super__=kn.Rgb,kn.Grey.prototype=yr(kn.Rgb.prototype,{grey:null,__class__:kn.Grey}),kn.PerceivedLuminance={__ename__:["thx","color","PerceivedLuminance"],__constructs__:["Standard","Perceived","PerceivedAccurate"]},kn.PerceivedLuminance.Standard=["Standard",0],kn.PerceivedLuminance.Standard.toString=Sr,kn.PerceivedLuminance.Standard.__enum__=kn.PerceivedLuminance,kn.PerceivedLuminance.Perceived=["Perceived",1],kn.PerceivedLuminance.Perceived.toString=Sr,kn.PerceivedLuminance.Perceived.__enum__=kn.PerceivedLuminance,kn.PerceivedLuminance.PerceivedAccurate=["PerceivedAccurate",2],kn.PerceivedLuminance.PerceivedAccurate.toString=Sr,kn.PerceivedLuminance.PerceivedAccurate.__enum__=kn.PerceivedLuminance,kn.NamedColors=function(){},Er["thx.color.NamedColors"]=kn.NamedColors,kn.NamedColors.__name__=["thx","color","NamedColors"],xn={Info:function(){}},Er["thx.culture.Info"]=xn.Info,xn.Info.__name__=["thx","culture","Info"],xn.Info.prototype={toString:function(){return this["native"]+" ("+this.english+")"},pluralRule:null,iso3:null,iso2:null,english:null,"native":null,name:null,__class__:xn.Info},xn.Culture=function(){},Er["thx.culture.Culture"]=xn.Culture,xn.Culture.__name__=["thx","culture","Culture"],xn.Culture.__properties__={set_defaultCulture:"set_defaultCulture",get_defaultCulture:"get_defaultCulture",get_cultures:"get_cultures"},xn.Culture.get_cultures=function(){return null==xn.Culture.cultures&&(xn.Culture.cultures=new Br),xn.Culture.cultures},xn.Culture.get=function(e){return xn.Culture.get_cultures().get(e.toLowerCase())},xn.Culture.names=function(){return xn.Culture.get_cultures().keys()},xn.Culture.exists=function(e){return xn.Culture.get_cultures().exists(e.toLowerCase())},xn.Culture.get_defaultCulture=function(){return null==xn.Culture._defaultCulture?Hn.EnUS.get_culture():xn.Culture._defaultCulture},xn.Culture.set_defaultCulture=function(e){return xn.Culture._defaultCulture=e},xn.Culture.add=function(e){null==xn.Culture._defaultCulture&&(xn.Culture._defaultCulture=e);var t=e.name.toLowerCase();xn.Culture.get_cultures().exists(t)||xn.Culture.get_cultures().set(t,e)},xn.Culture.loadAll=function(){},xn.Culture.__super__=xn.Info,xn.Culture.prototype=yr(xn.Info.prototype,{percent:null,currency:null,number:null,symbolPosInf:null,symbolNegInf:null,symbolPermille:null,symbolPercent:null,symbolNaN:null,signPos:null,signNeg:null,digits:null,isMetric:null,nativeRegion:null,englishRegion:null,currencyIso:null,currencySymbol:null,nativeCurrency:null,englishCurrency:null,date:null,language:null,__class__:xn.Culture}),xn.FormatDate=function(){},Er["thx.culture.FormatDate"]=xn.FormatDate,xn.FormatDate.__name__=["thx","culture","FormatDate"],xn.FormatDate.format=function(e,t,n,r){null==r&&(r=!0),null==n&&(n=xn.Culture.get_defaultCulture());for(var i=0,s=e.length,o=new Gr,u=n.date;i<s;){var a=e.charAt(i);if("%"!=a)o.b+=Qr.string(a);else switch(i++,a=e.charAt(i),a){case"a":o.b+=Qr.string(u.abbrDays[t.getDay()]);break;case"A":o.b+=Qr.string(u.days[t.getDay()]);break;case"b":case"h":o.b+=Qr.string(u.abbrMonths[t.getMonth()]);break;case"B":o.b+=Qr.string(u.months[t.getMonth()]);break;case"c":o.b+=Qr.string(xn.FormatDate.dateTime(t,n));break;case"C":o.b+=Qr.string(xn.FormatNumber.digits(""+Math.floor(t.getFullYear()/100),n));break;case"d":o.b+=Qr.string(xn.FormatNumber.digits(Yr.lpad(""+t.getDate(),"0",2),n));break;case"D":o.b+=Qr.string(xn.FormatDate.format("%m/%d/%y",t,n));break;case"e":o.b+=Qr.string(xn.FormatNumber.digits(r?Yr.lpad(""+t.getDate()," ",2):""+t.getDate(),n));break;case"f":o.b+=Qr.string(xn.FormatNumber.digits(r?Yr.lpad(""+(t.getMonth()+1)," ",2):""+(t.getMonth()+1),n));break;case"G":throw"Not Implemented Yet";case"g":throw"Not Implemented Yet";case"H":o.b+=Qr.string(xn.FormatNumber.digits(Yr.lpad(""+t.getHours(),"0",2),n));break;case"i":o.b+=Qr.string(xn.FormatNumber.digits(r?Yr.lpad(""+t.getMinutes()," ",2):""+t.getMinutes(),n));break;case"I":o.b+=Qr.string(xn.FormatNumber.digits(Yr.lpad(""+xn.FormatDate.getMHours(t),"0",2),n));break;case"j":throw"Not Implemented Yet";case"k":o.b+=Qr.string(xn.FormatNumber.digits(r?Yr.lpad(""+t.getHours()," ",2):""+t.getHours(),n));break;case"l":o.b+=Qr.string(xn.FormatNumber.digits(r?Yr.lpad(""+xn.FormatDate.getMHours(t)," ",2):""+xn.FormatDate.getMHours(t),n));break;case"m":o.b+=Qr.string(xn.FormatNumber.digits(Yr.lpad(""+(t.getMonth()+1),"0",2),n));break;case"M":o.b+=Qr.string(xn.FormatNumber.digits(Yr.lpad(""+t.getMinutes(),"0",2),n));break;case"n":o.b+="\n";break;case"p":o.b+=Qr.string(11<t.getHours()?u.pm:u.am);break;case"P":o.b+=Qr.string((11<t.getHours()?u.pm:u.am).toLowerCase());break;case"q":o.b+=Qr.string(xn.FormatNumber.digits(r?Yr.lpad(""+t.getSeconds()," ",2):""+t.getSeconds(),n));break;case"r":o.b+=Qr.string(xn.FormatDate.format("%I:%M:%S %p",t,n));break;case"R":o.b+=Qr.string(xn.FormatDate.format("%H:%M",t,n));break;case"s":o.b+=Qr.string(""+(t.getTime()/1e3|0));break;case"S":o.b+=Qr.string(xn.FormatNumber.digits(Yr.lpad(""+t.getSeconds(),"0",2),n));break;case"t":o.b+="	";break;case"T":o.b+=Qr.string(xn.FormatDate.format("%H:%M:%S",t,n));break;case"u":a=t.getDay(),o.b+=Qr.string(xn.FormatNumber.digits(0==a?"7":""+a,n));break;case"U":throw"Not Implemented Yet";case"V":throw"Not Implemented Yet";case"w":o.b+=Qr.string(xn.FormatNumber.digits(""+t.getDay(),n));break;case"W":throw"Not Implemented Yet";case"x":o.b+=Qr.string(xn.FormatDate.date(t,n));break;case"X":o.b+=Qr.string(xn.FormatDate.time(t,n));break;case"y":o.b+=Qr.string(xn.FormatNumber.digits(Fr.substr(""+t.getFullYear(),-2,null),n));break;case"Y":o.b+=Qr.string(xn.FormatNumber.digits(""+t.getFullYear(),n));break;case"z":o.b+="+0000";break;case"Z":o.b+="GMT";break;case"%":o.b+="%";break;default:o.b+=Qr.string("%"+a)}i++}return o.b},xn.FormatDate.getMHours=function(e){return e=e.getHours(),12<e?e-12:e},xn.FormatDate.yearMonth=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatDate.format(t.date.patternYearMonth,e,t,!1)},xn.FormatDate.monthDay=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatDate.format(t.date.patternMonthDay,e,t,!1)},xn.FormatDate.date=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatDate.format(t.date.patternDate,e,t,!1)},xn.FormatDate.dateShort=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatDate.format(t.date.patternDateShort,e,t,!1)},xn.FormatDate.dateRfc=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatDate.format(t.date.patternDateRfc,e,t,!1)},xn.FormatDate.dateTime=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatDate.format(t.date.patternDateTime,e,t,!1)},xn.FormatDate.universal=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatDate.format(t.date.patternUniversal,e,t,!1)},xn.FormatDate.sortable=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatDate.format(t.date.patternSortable,e,t,!1)},xn.FormatDate.time=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatDate.format(t.date.patternTime,e,t,!1)},xn.FormatDate.timeShort=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatDate.format(t.date.patternTimeShort,e,t,!1)},xn.FormatDate.hourShort=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),null==t.date.am?xn.FormatDate.format("%H",e,t,!1):xn.FormatDate.format("%l %p",e,t,!1)},xn.FormatDate.year=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatNumber.digits(""+e.getFullYear(),t)},xn.FormatDate.month=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatNumber.digits(""+(e.getMonth()+1),t)},xn.FormatDate.monthName=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),t.date.abbrMonths[e.getMonth()]},xn.FormatDate.monthNameShort=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),t.date.months[e.getMonth()]},xn.FormatDate.weekDay=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatNumber.digits(""+(e.getDay()+t.date.firstWeekDay),t)},xn.FormatDate.weekDayName=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),t.date.abbrDays[e.getDay()]},xn.FormatDate.weekDayNameShort=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),t.date.days[e.getDay()]},xn.FormatNumber=function(){},Er["thx.culture.FormatNumber"]=xn.FormatNumber,xn.FormatNumber.__name__=["thx","culture","FormatNumber"],xn.FormatNumber.decimal=function(e,t,n){return null==n&&(n=xn.Culture.get_defaultCulture()),xn.FormatNumber.crunch(e,t,n.percent,n.number.patternNegative,n.number.patternPositive,n,null,null)},xn.FormatNumber.percent=function(e,t,n){return null==n&&(n=xn.Culture.get_defaultCulture()),xn.FormatNumber.crunch(e,t,n.percent,n.percent.patternNegative,n.percent.patternPositive,n,"%",n.symbolPercent)},xn.FormatNumber.permille=function(e,t,n){return null==n&&(n=xn.Culture.get_defaultCulture()),xn.FormatNumber.crunch(e,t,n.percent,n.percent.patternNegative,n.percent.patternPositive,n,"%",n.symbolPermille)},xn.FormatNumber.currency=function(e,t,n,r){return null==r&&(r=xn.Culture.get_defaultCulture()),xn.FormatNumber.crunch(e,n,r.currency,r.currency.patternNegative,r.currency.patternPositive,r,"$",null==t?r.currencySymbol:t)},xn.FormatNumber["int"]=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatNumber.decimal(e,0,t)},xn.FormatNumber.digits=function(e,t){return null==t&&(t=xn.Culture.get_defaultCulture()),xn.FormatNumber.processDigits(e,t.digits)},xn.FormatNumber.crunch=function(e,t,n,r,i,s,o,u){return Math.isNaN(e)?s.symbolNaN:Math.isFinite(e)?(t=xn.FormatNumber.value(e,n,null==t?n.decimals:0>t?0:t,s.digits),null!=o?Yr.replace(Yr.replace(0>e?r:i,"n",t),o,u):Yr.replace(0>e?r:i,"n",t)):e==Math.NEGATIVE_INFINITY?s.symbolNegInf:s.symbolPosInf},xn.FormatNumber.processDigits=function(e,t){if(null==t)return e;for(var n=[],r=0,i=e.length;r<i;){var s=r++;n.push(t[Qr.parseInt(Fr.substr(e,s,1))])}return n.join("")},xn.FormatNumber.value=function(e,t,n,r){var i=""+Math.abs(e),s=i.indexOf("E");if(0<s){var e=Qr.parseInt(Fr.substr(i,s+1,null)),o=!0;0>e&&(o=!1,e=-e),i=Yr.replace(Fr.substr(i,0,s),".",""),i=o?Yr.rpad(i,"0",e+1):"0"+Yr.rpad(".","0",e)+i}e=i.split("."),o=e[0],i=[];for(s=0;0!=o.length;){var u=t.groups[s];if(o.length<=u){i.unshift(xn.FormatNumber.processDigits(o,r));break}i.unshift(xn.FormatNumber.processDigits(Fr.substr(o,-u,null),r)),o=Fr.substr(o,0,-u),s<t.groups.length-1&&s++}return o=i.join(t.groupsSeparator),0<n?(n=1==e.length?Yr.lpad("","0",n):e[1].length>n?Fr.substr(e[1],0,n):Yr.rpad(e[1],"0",n),o+t.decimalsSeparator+xn.FormatNumber.processDigits(n,r)):o},xn.FormatParams=function(){},Er["thx.culture.FormatParams"]=xn.FormatParams,xn.FormatParams.__name__=["thx","culture","FormatParams"],xn.FormatParams.cleanQuotes=function(e){if(1>=e.length)return e;var t=Fr.substr(e,0,1);return'"'!=t&&"'"!=t||Fr.substr(e,-1,null)!=t?e:Fr.substr(e,1,e.length-2)},xn.FormatParams.params=function(e,t,n){return null!=t&&null!=e?[e].concat(t):null!=t&&0!=t.length||null!=e?null==t||0==t.length?(e=e.split(":"),[e[0]].concat(1==e.length?[]:e[1].split(",").map(function(e,t){return 0==t?e:xn.FormatParams.cleanQuotes(e)}))):t:[n]},xn.Language=function(){},Er["thx.culture.Language"]=xn.Language,xn.Language.__name__=["thx","culture","Language"],xn.Language.__properties__={get_languages:"get_languages"},xn.Language.get_languages=function(){return null==xn.Language.languages&&(xn.Language.languages=new Br),xn.Language.languages},xn.Language.get=function(e){return xn.Language.get_languages().get(e.toLowerCase())},xn.Language.names=function(){return xn.Language.get_languages().keys()},xn.Language.add=function(e){xn.Language.get_languages().exists(e.iso2)||xn.Language.get_languages().set(e.iso2,e)},xn.Language.__super__=xn.Info,xn.Language.prototype=yr(xn.Info.prototype,{__class__:xn.Language}),xn.core={},xn.core.DateTimeInfo=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){this.months=e,this.abbrMonths=t,this.days=n,this.abbrDays=r,this.shortDays=i,this.am=s,this.pm=o,this.separatorDate=u,this.separatorTime=a,this.firstWeekDay=f,this.patternYearMonth=l,this.patternMonthDay=c,this.patternDate=h,this.patternDateShort=p,this.patternDateRfc=d,this.patternDateTime=v,this.patternUniversal=m,this.patternSortable=g,this.patternTime=y,this.patternTimeShort=b},Er["thx.culture.core.DateTimeInfo"]=xn.core.DateTimeInfo,xn.core.DateTimeInfo.__name__=["thx","culture","core","DateTimeInfo"],xn.core.DateTimeInfo.prototype={patternTimeShort:null,patternTime:null,patternSortable:null,patternUniversal:null,patternDateTime:null,patternDateRfc:null,patternDateShort:null,patternDate:null,patternMonthDay:null,patternYearMonth:null,firstWeekDay:null,separatorTime:null,separatorDate:null,pm:null,am:null,shortDays:null,abbrDays:null,days:null,abbrMonths:null,months:null,__class__:xn.core.DateTimeInfo},xn.core.NumberInfo=function(e,t,n,r,i,s){this.decimals=e,this.decimalsSeparator=t,this.groups=n,this.groupsSeparator=r,this.patternNegative=i,this.patternPositive=s},Er["thx.culture.core.NumberInfo"]=xn.core.NumberInfo,xn.core.NumberInfo.__name__=["thx","culture","core","NumberInfo"],xn.core.NumberInfo.prototype={patternPositive:null,patternNegative:null,groupsSeparator:null,groups:null,decimalsSeparator:null,decimals:null,__class__:xn.core.NumberInfo},Bn={En:function(){this.name="en",this.english="English",this["native"]="English",this.iso2="en",this.iso3="eng",this.pluralRule=1,xn.Language.add(this)}},Er["thx.languages.En"]=Bn.En,Bn.En.__name__=["thx","languages","En"],Bn.En.__properties__={get_language:"get_language"},Bn.En.get_language=function(){return null==Bn.En.language&&(Bn.En.language=new Bn.En),Bn.En.language},Bn.En.__super__=xn.Language,Bn.En.prototype=yr(xn.Language.prototype,{__class__:Bn.En}),Hn={EnUS:function(){this.language=Bn.En.get_language(),this.name="en-US",this.english="English (United States)",this["native"]="English (United States)",this.date=new xn.core.DateTimeInfo("January,February,March,April,May,June,July,August,September,October,November,December,".split(","),"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,".split(","),"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),"Su,Mo,Tu,We,Th,Fr,Sa".split(","),"AM","PM","/",":",0,"%B, %Y","%B %d","%A, %B %d, %Y","%f/%e/%Y","%a, %d %b %Y %H:%M:%S GMT","%A, %B %d, %Y %l:%M:%S %p","%Y-%m-%d %H:%M:%SZ","%Y-%m-%dT%H:%M:%S","%l:%M:%S %p","%l:%M %p"),this.symbolNaN="NaN",this.symbolPercent="%",this.symbolPermille="‰",this.signNeg="-",this.signPos="+",this.symbolNegInf="-Infinity",this.symbolPosInf="Infinity",this.number=new xn.core.NumberInfo(2,".",[3],",","-n","n"),this.currency=new xn.core.NumberInfo(2,".",[3],",","($n)","$n"),this.percent=new xn.core.NumberInfo(2,".",[3],",","-n %","n %"),this.pluralRule=1,this.nativeCurrency=this.englishCurrency="US Dollar",this.currencySymbol="$",this.currencyIso="USD",this.nativeRegion=this.englishRegion="United States",this.iso2="US",this.iso3="USA",this.isMetric=!1,xn.Culture.add(this)}},Er["thx.cultures.EnUS"]=Hn.EnUS,Hn.EnUS.__name__=["thx","cultures","EnUS"],Hn.EnUS.__properties__={get_culture:"get_culture"},Hn.EnUS.get_culture=function(){return null==Hn.EnUS.culture&&(Hn.EnUS.culture=new Hn.EnUS),Hn.EnUS.culture},Hn.EnUS.__super__=xn.Culture,Hn.EnUS.prototype=yr(xn.Culture.prototype,{__class__:Hn.EnUS}),jn={IDataHandler:function(){}},Er["thx.data.IDataHandler"]=jn.IDataHandler,jn.IDataHandler.__name__=["thx"
,"data","IDataHandler"],jn.IDataHandler.prototype={comment:null,valueBool:null,valueNull:null,valueFloat:null,valueInt:null,valueString:null,valueDate:null,arrayEnd:null,arrayItemEnd:null,arrayItemStart:null,arrayStart:null,objectEnd:null,objectFieldEnd:null,objectFieldStart:null,objectStart:null,end:null,start:null,__class__:jn.IDataHandler},jn.ValueEncoder=function(e){this.handler=e},Er["thx.data.ValueEncoder"]=jn.ValueEncoder,jn.ValueEncoder.__name__=["thx","data","ValueEncoder"],jn.ValueEncoder.prototype={encodeArray:function(e){this.handler.arrayStart();for(var t=0;t<e.length;){var n=e[t];++t,this.handler.arrayItemStart(),this.encodeValue(n),this.handler.arrayItemEnd()}this.handler.arrayEnd()},encodeList:function(e){this.handler.arrayStart();for(e=e.iterator();e.hasNext();){var t=e.next();this.handler.arrayItemStart(),this.encodeValue(t),this.handler.arrayItemEnd()}this.handler.arrayEnd()},encodeHash:function(e){this.handler.objectStart();for(var t=e.keys();t.hasNext();){var n=t.next();this.handler.objectFieldStart(n),this.encodeValue(e.get(n)),this.handler.objectFieldEnd()}this.handler.objectEnd()},encodeObject:function(e){this.handler.objectStart();for(var t=0,n=Kr.fields(e);t<n.length;){var r=n[t];++t,this.handler.objectFieldStart(r),this.encodeValue(Kr.field(e,r)),this.handler.objectFieldEnd()}this.handler.objectEnd()},encodeValue:function(e){var t=ti["typeof"](e);switch(t[1]){case 0:this.handler.valueNull();break;case 1:this.handler.valueInt(e);break;case 2:this.handler.valueFloat(e);break;case 3:this.handler.valueBool(e);break;case 4:this.encodeObject(e);break;case 5:throw new Tn.Error("unable to encode TFunction type",null,null,{fileName:"ValueEncoder.hx",lineNumber:39,className:"thx.data.ValueEncoder",methodName:"encodeValue"});case 6:t=t[2];if(ar.__instanceof(e,String))this.handler.valueString(e);else if(ar.__instanceof(e,Array))this.encodeArray(e);else if(ar.__instanceof(e,Date))this.handler.valueDate(e);else if(ar.__instanceof(e,Br))this.encodeHash(e);else{if(!ar.__instanceof(e,$r))throw new Tn.Error("unable to encode class '{0}'",null,ti.getClassName(t),{fileName:"ValueEncoder.hx",lineNumber:53,className:"thx.data.ValueEncoder",methodName:"encodeValue"});this.encodeList(e)}break;case 7:throw new Tn.Error("unable to encode TEnum type '{0}'",null,ti.getEnumName(t[2]),{fileName:"ValueEncoder.hx",lineNumber:55,className:"thx.data.ValueEncoder",methodName:"encodeValue"});case 8:throw new Tn.Error("unable to encode TUnknown type",null,null,{fileName:"ValueEncoder.hx",lineNumber:57,className:"thx.data.ValueEncoder",methodName:"encodeValue"})}},encode:function(e){this.handler.start(),this.encodeValue(e),this.handler.end()},handler:null,__class__:jn.ValueEncoder},jn.ValueHandler=function(){},Er["thx.data.ValueHandler"]=jn.ValueHandler,jn.ValueHandler.__name__=["thx","data","ValueHandler"],jn.ValueHandler.__interfaces__=[jn.IDataHandler],jn.ValueHandler.prototype={comment:function(){},valueBool:function(e){this._stack.push(e)},valueNull:function(){this._stack.push(null)},valueFloat:function(e){this._stack.push(e)},valueInt:function(e){this._stack.push(e)},valueString:function(e){this._stack.push(e)},valueDate:function(e){this._stack.push(e)},arrayItemEnd:function(){var e=this._stack.pop();xr.last(this._stack).push(e)},arrayItemStart:function(){},arrayEnd:function(){},arrayStart:function(){this._stack.push([])},objectFieldEnd:function(){var e=this._stack.pop();xr.last(this._stack)[this._names.pop()]=e},objectFieldStart:function(e){this._names.push(e)},objectEnd:function(){},objectStart:function(){this._stack.push({})},end:function(){this.value=this._stack.pop()},start:function(){this._stack=[],this._names=[]},_names:null,_stack:null,value:null,__class__:jn.ValueHandler},Ln={DateParser:function(){}},Er["thx.date.DateParser"]=Ln.DateParser,Ln.DateParser.__name__=["thx","date","DateParser"],Ln.DateParser.parse=function(e,t){var n=Ln.DateParser.parseTime(e),r;null==t&&(t=new Date),null!=n.matched&&(e=Yr.replace(e,n.matched,""));var i=0,s=0,o=0,u=null!=n.matched;if(Ln.DateParser.dateexp.match(e))(u=!0,e=Yr.replace(e,Ln.DateParser.dateexp.matched(0),""),null!=(r=Ln.DateParser.dateexp.matched(1)))?(o=Qr.parseInt(Ln.DateParser.dateexp.matched(2)),s=Ln.DateParser.months.indexOf(r.toLowerCase()),i=null!=(r=Ln.DateParser.dateexp.matched(3))?Ln.DateParser.fixyear(Qr.parseInt(r)):t.getFullYear()):null!=(r=Ln.DateParser.dateexp.matched(4))?(o=Qr.parseInt(Ln.DateParser.dateexp.matched(5)),s=Ln.DateParser.shortmonths.indexOf(r.toLowerCase()),i=null!=(r=Ln.DateParser.dateexp.matched(6))?Ln.DateParser.fixyear(Qr.parseInt(r)):t.getFullYear()):null!=(r=Ln.DateParser.dateexp.matched(8))?(s=Ln.DateParser.months.indexOf(r.toLowerCase()),o=null!=(r=Ln.DateParser.dateexp.matched(7))?Qr.parseInt(r):1,i=null!=(r=Ln.DateParser.dateexp.matched(9))?Ln.DateParser.fixyear(Qr.parseInt(r)):t.getFullYear()):null!=(r=Ln.DateParser.dateexp.matched(11))?(s=Ln.DateParser.shortmonths.indexOf(r.toLowerCase()),o=null!=(r=Ln.DateParser.dateexp.matched(10))?Qr.parseInt(r):1,i=null!=(r=Ln.DateParser.dateexp.matched(12))?Ln.DateParser.fixyear(Qr.parseInt(r)):t.getFullYear()):null!=(r=Ln.DateParser.dateexp.matched(14))?(s=Ln.DateParser.months.indexOf(r.toLowerCase()),o=null!=(r=Ln.DateParser.dateexp.matched(13))?Qr.parseInt(r):1,i=null!=(r=Ln.DateParser.dateexp.matched(15))?Ln.DateParser.fixyear(Qr.parseInt(r)):t.getFullYear()):null!=(r=Ln.DateParser.dateexp.matched(17))?(s=Ln.DateParser.shortmonths.indexOf(r.toLowerCase()),o=null!=(r=Ln.DateParser.dateexp.matched(16))?Qr.parseInt(r):1,i=null!=(r=Ln.DateParser.dateexp.matched(18))?Ln.DateParser.fixyear(Qr.parseInt(r)):t.getFullYear()):null!=(r=Ln.DateParser.dateexp.matched(19))?(o=Qr.parseInt(Ln.DateParser.dateexp.matched(20)),s=Qr.parseInt(r)-1,i=null!=(r=Ln.DateParser.dateexp.matched(21))?Ln.DateParser.fixyear(Qr.parseInt(r)):t.getFullYear()):null!=(r=Ln.DateParser.dateexp.matched(23))?(o=Qr.parseInt(Ln.DateParser.dateexp.matched(22)),s=Qr.parseInt(r)-1,i=null!=(r=Ln.DateParser.dateexp.matched(24))?Ln.DateParser.fixyear(Qr.parseInt(r)):t.getFullYear()):null!=(r=Ln.DateParser.dateexp.matched(25))?(i=Ln.DateParser.fixyear(Qr.parseInt(r)),o=Qr.parseInt(Ln.DateParser.dateexp.matched(27)),s=Qr.parseInt(Ln.DateParser.dateexp.matched(26))-1):null!=(r=Ln.DateParser.dateexp.matched(28))&&(i=t.getFullYear(),o=Qr.parseInt(r),s=t.getMonth());else if(Ln.DateParser.absdateexp.match(e)){u=!0,e=Yr.replace(e,Ln.DateParser.absdateexp.matched(0),""),i=t.getFullYear(),s=t.getMonth(),o=t.getDate();if(null!=(r=Ln.DateParser.absdateexp.matched(1)))switch(r.toLowerCase()){case"now":case"this second":null==n.matched&&(n.hour=t.getHours(),n.minute=t.getMinutes(),n.second=t.getSeconds());break;case"tomorrow":o+=1;break;case"yesterday":o-=1}else if(null!=(r=Ln.DateParser.absdateexp.matched(3)))var a=Ln.DateParser.absdateexp.matched(2),f=Ln.DateParser.months.indexOf(r.toLowerCase()),i=f==s?i+(Ln.DateParser.last(a)?-1:Ln.DateParser.next(a)?1:0):f>s?i+(Ln.DateParser.last(a)?-1:0):i+(Ln.DateParser.next(a)?1:0),s=f,o=1;else if(null!=(r=Ln.DateParser.absdateexp.matched(5)))var a=Ln.DateParser.absdateexp.matched(4),f=Ln.DateParser.days.indexOf(r.toLowerCase()),l=t.getDay(),o=f==l?o+(Ln.DateParser.last(a)?-7:Ln.DateParser.next(a)?7:0):f>l?o+(f-l+(Ln.DateParser.last(a)?-7:0)):o+(f-l+(Ln.DateParser.next(a)?7:0));else null!=(r=Ln.DateParser.absdateexp.matched(7))?(a=Ln.DateParser.absdateexp.matched(6),f=Ln.DateParser.shortmonths.indexOf(r.toLowerCase()),i=f==s?i+(Ln.DateParser.last(a)?-1:Ln.DateParser.next(a)?1:0):f>s?i+(Ln.DateParser.last(a)?-1:0):i+(Ln.DateParser.next(a)?1:0),s=f,o=1):null!=(r=Ln.DateParser.absdateexp.matched(9))&&(a=Ln.DateParser.absdateexp.matched(8),f=Ln.DateParser.shortdays.indexOf(r.toLowerCase()),l=t.getDay(),o=f==l?o+(Ln.DateParser.last(a)?-7:Ln.DateParser.next(a)?7:0):f>l?o+(f-l+(Ln.DateParser.last(a)?-7:0)):o+(f-l+(Ln.DateParser.next(a)?7:0)));null==n.matched&&(n.matched="x")}else i=t.getFullYear(),s=t.getMonth(),o=t.getDate();for(;Ln.DateParser.relexp.match(e);){u=!0,e=Yr.replace(e,Ln.DateParser.relexp.matched(0),""),a=Ln.DateParser.relexp.matched(1);if(null!=a)f=null!=(r=Ln.DateParser.relexp.matched(2))?Qr.parseInt(r):1,l=Ln.DateParser.relexp.matched(3);else{l=Ln.DateParser.relexp.matched(5);if(null==l)break;f=null!=(r=Ln.DateParser.relexp.matched(4))?Qr.parseInt(r):1,a=null!=(r=Ln.DateParser.relexp.matched(6))?r:"after"}a=a.toLowerCase();switch(a){case"minus":case"-":case"before":case"ago":f=-f}switch(a){case"ago":case"in":null==n.matched&&(n.hour=t.getHours(),n.minute=t.getMinutes(),n.second=t.getSeconds(),n.matched="x")}switch(l.toLowerCase()){case"second":case"seconds":n.second+=f;break;case"minute":case"minutes":n.minute+=f;break;case"hour":case"hours":n.hour+=f;break;case"day":case"days":o+=f;break;case"week":case"weeks":o+=7*f;break;case"month":case"months":s+=f;break;case"year":case"years":i+=f}}if(!u)throw new Tn.Error("no date information found in the string '{0}'",null,e,{fileName:"DateParser.hx",lineNumber:339,className:"thx.date.DateParser",methodName:"parse"});return r=new Date,r.setTime((new Date(i,s,o,n.hour,n.minute,n.second)).getTime()+n.millis),r},Ln.DateParser.parseTime=function(e){var t={hour:0,minute:0,second:0,millis:0,matched:null};if(!Ln.DateParser.timeexp.match(e))return t;t.matched=Ln.DateParser.timeexp.matched(0);var n;if(null!=(n=Ln.DateParser.timeexp.matched(1)))t.hour=Qr.parseInt(n)+Ln.DateParser.plusPm(Ln.DateParser.timeexp.matched(3)),t.minute=Qr.parseInt(Ln.DateParser.timeexp.matched(2));else if(null!=(n=Ln.DateParser.timeexp.matched(4)))t.hour=Qr.parseInt(n),t.minute=Qr.parseInt(Ln.DateParser.timeexp.matched(5)),null!=(n=Ln.DateParser.timeexp.matched(6))&&(t.second=Qr.parseInt(n)),null!=(n=Ln.DateParser.timeexp.matched(7))&&(t.millis=Qr.parseFloat(n)/1e3);else if(null!=(n=Ln.DateParser.timeexp.matched(8)))t.hour=Qr.parseInt(n)+Ln.DateParser.plusPm(Ln.DateParser.timeexp.matched(10)),t.minute=Qr.parseInt(Ln.DateParser.timeexp.matched(9));else if(null!=(n=Ln.DateParser.timeexp.matched(11)))t.hour=Qr.parseInt(n)+Ln.DateParser.plusPm(Ln.DateParser.timeexp.matched(12));else{if(null==(n=Ln.DateParser.timeexp.matched(13)))throw new Tn.Error("failed to parse time for '{0}'",null,e,{fileName:"DateParser.hx",lineNumber:406,className:"thx.date.DateParser",methodName:"parseTime"});switch(n.toLowerCase()){case"evening":t.hour=17;break;case"morning":t.hour=8;break;case"afternoon":t.hour=14;break;case"sunsrise":case"dawn":t.hour=6;break;case"sunset":case"dusk":t.hour=19;break;case"noon":case"midday":case"mid-day":t.hour=12;break;case"mid-night":case"midnight":t.hour=23,t.minute=59,t.second=59,t.millis=.999}}return t},Ln.DateParser.fixyear=function(e){return 70>e?2e3+e:100>e?1900+e:e},Ln.DateParser.last=function(e){return null==e?!1:"last"==e.toLowerCase()},Ln.DateParser.next=function(e){return null==e?!0:"next"==e.toLowerCase()},Ln.DateParser.plusPm=function(e){if(null==e)e=0;else switch(e.toLowerCase()){case"pm":case"evening":case"afternoon":e=12;break;default:e=0}return e},On={Message:function(e,t,n){this.message=e,this.params=null==t?[]:t,null!=n&&this.params.push(n)}},Er["thx.util.Message"]=On.Message,On.Message.__name__=["thx","util","Message"],On.Message.prototype={translate:function(e,t){null==t&&(t=e.get_domain());var n=xn.Culture.get(t);return 1==this.params.length&&ar.__instanceof(this.params[0],ss)?Zr.format(e.plural(null,this.message,this.params[0],t),this.params,null,n):Zr.format(e.singular(this.message,t),this.params,null,n)},translatef:function(e){return Zr.format(e(this.message),this.params)},toString:function(){return Zr.format(this.message,this.params)},params:null,message:null,__class__:On.Message},Tn={Error:function(e,t,n,r){On.Message.call(this,e,t,n),this.pos=r}},Er["thx.error.Error"]=Tn.Error,Tn.Error.__name__=["thx","error","Error"],Tn.Error.__super__=On.Message,Tn.Error.prototype=yr(On.Message.prototype,{toString:function(){try{return Zr.format(this.message,this.params)}catch(e){return""}},toStringError:function(e){return Zr.format(null==e?Tn.Error.errorPositionPattern:e,[this.pos.className,this.pos.methodName,this.pos.lineNumber,this.pos.fileName,this.pos.customParams])+this.toString()},setInner:function(e){return this.inner=e,this},inner:null,pos:null,__class__:Tn.Error}),Tn.AbstractMethod=function(e){Tn.Error.call(this,"method {0}.{1}() is abstract",[e.className,e.methodName],e,{fileName:"AbstractMethod.hx",lineNumber:14,className:"thx.error.AbstractMethod",methodName:"new"})},Er["thx.error.AbstractMethod"]=Tn.AbstractMethod,Tn.AbstractMethod.__name__=["thx","error","AbstractMethod"],Tn.AbstractMethod.__super__=Tn.Error,Tn.AbstractMethod.prototype=yr(Tn.Error.prototype,{__class__:Tn.AbstractMethod}),Tn.NotImplemented=function(e){Tn.Error.call(this,"method {0}.{1}() needs to be implemented",[e.className,e.methodName],e,{fileName:"NotImplemented.hx",lineNumber:13,className:"thx.error.NotImplemented",methodName:"new"})},Er["thx.error.NotImplemented"]=Tn.NotImplemented,Tn.NotImplemented.__name__=["thx","error","NotImplemented"],Tn.NotImplemented.__super__=Tn.Error,Tn.NotImplemented.prototype=yr(Tn.Error.prototype,{__class__:Tn.NotImplemented}),Tn.NullArgument=function(e,t,n){null==t&&(t="invalid null or empty argument '{0}' for method {1}.{2}()"),Tn.Error.call(this,t,[e,n.className,n.methodName],n,{fileName:"NullArgument.hx",lineNumber:16,className:"thx.error.NullArgument",methodName:"new"})},Er["thx.error.NullArgument"]=Tn.NullArgument,Tn.NullArgument.__name__=["thx","error","NullArgument"],Tn.NullArgument.__super__=Tn.Error,Tn.NullArgument.prototype=yr(Tn.Error.prototype,{__class__:Tn.NullArgument}),An={IProjection:function(){}},Er["thx.geo.IProjection"]=An.IProjection,An.IProjection.__name__=["thx","geo","IProjection"],An.IProjection.prototype={invert:null,project:null,__class__:An.IProjection},An.Albers=function(){this._origin=[-98,38],this._parallels=[29.5,45.5],this._scale=1e3,this._translate=[480,250],this.reload()},Er["thx.geo.Albers"]=An.Albers,An.Albers.__name__=["thx","geo","Albers"],An.Albers.__interfaces__=[An.IProjection],An.Albers.prototype={get_scale:function(){return this._scale},set_scale:function(e){return this._scale=e},reload:function(){var e=.017453292519943295*this.get_parallels()[0],t=.017453292519943295*this.get_parallels()[1],n=.017453292519943295*this.get_origin()[1],r=Math.sin(e),e=Math.cos(e);return this.lng0=.017453292519943295*this.get_origin()[0],this.n=.5*(r+Math.sin(t)),this.C=e*e+2*this.n*r,this.p0=Math.sqrt(this.C-2*this.n*Math.sin(n))/this.n,this},set_translate:function(e){return this._translate=[e[0],e[1]],e},get_translate:function(){return this._translate.slice()},set_parallels:function(e){return this._parallels=[e[0],e[1]],this.reload(),e},get_parallels:function(){return this._parallels.slice()},set_origin:function(e){return this._origin=[e[0],e[1]],this.reload(),e},get_origin:function(){return this._origin.slice()},invert:function(e){var t=(e[0]-this.get_translate()[0])/this.get_scale(),n=this.p0+(e[1]-this.get_translate()[1])/this.get_scale(),e=Math.atan2(t,n),t=Math.sqrt(t*t+n*n);return[(this.lng0+e/this.n)/.017453292519943295,Math.asin((this.C-t*t*this.n*this.n)/(2*this.n))/.017453292519943295]},project:function(e){var t=this.n*(.017453292519943295*e[0]-this.lng0),e=Math.sqrt(this.C-2*this.n*Math.sin(.017453292519943295*e[1]))/this.n;return[this.get_scale()*e*Math.sin(t)+this.get_translate()[0],this.get_scale()*(e*Math.cos(t)-this.p0)+this.get_translate()[1]]},_scale:null,_translate:null,_parallels:null,_origin:null,p0:null,C:null,n:null,lng0:null,__class__:An.Albers,__properties__:{set_origin:"set_origin",get_origin:"get_origin",set_parallels:"set_parallels",get_parallels:"get_parallels",set_translate:"set_translate",get_translate:"get_translate",set_scale:"set_scale",get_scale:"get_scale"}},An.AlbersUsa=function(){this.lower48=new An.Albers,this.alaska=new An.Albers,this.alaska.set_origin([-160,60]),this.alaska.set_parallels([55,65]),this.hawaii=new An.Albers,this.hawaii.set_origin([-160,20]),this.hawaii.set_parallels([8,18]),this.puertoRico=new An.Albers,this.puertoRico.set_origin([-60,10]),this.puertoRico.set_parallels([8,18]),this.set_scale(this.lower48.get_scale())},Er["thx.geo.AlbersUsa"]=An.AlbersUsa,An.AlbersUsa.__name__=["thx","geo","AlbersUsa"],An.AlbersUsa.__interfaces__=[An.IProjection],An.AlbersUsa.prototype={get_translate:function(){return this.lower48.get_translate()},set_translate:function(e){var t=this.lower48.get_scale()/1e3,n=e[0],r=e[1];return this.lower48.set_translate(e),this.alaska.set_translate([n-400*t,r+170*t]),this.hawaii.set_translate([n-190*t,r+200*t]),this.puertoRico.set_translate([n+580*t,r+430*t]),e},get_scale:function(){return this.lower48.get_scale()},set_scale:function(e){return this.lower48.set_scale(e),this.alaska.set_scale(.6*e),this.hawaii.set_scale(e),this.puertoRico.set_scale(1.5*e),this.set_translate(this.lower48.get_translate()),e},invert:function(){throw new Tn.NotImplemented({fileName:"AlbersUsa.hx",lineNumber:67,className:"thx.geo.AlbersUsa",methodName:"invert"})},project:function(e){var t=e[0],n=e[1];return(50<n?this.alaska:-140>t?this.hawaii:21>n?this.puertoRico:this.lower48).project(e)},last:null,puertoRico:null,hawaii:null,alaska:null,lower48:null,__class__:An.AlbersUsa,__properties__:{set_translate:"set_translate",get_translate:"get_translate",set_scale:"set_scale",get_scale:"get_scale"}},An.Azimuthal=function(){this.set_mode(An.ProjectionMode.Orthographic),this.set_scale(200),this.set_translate([480,250]),this.set_origin([0,0])},Er["thx.geo.Azimuthal"]=An.Azimuthal,An.Azimuthal.__name__=["thx","geo","Azimuthal"],An.Azimuthal.__interfaces__=[An.IProjection],An.Azimuthal.prototype={get_mode:function(){return this.mode},set_mode:function(e){return this.mode=e},get_scale:function(){return this.scale},set_scale:function(e){return this.scale=e},set_translate:function(e){return this.translate=[e[0],e[1]],e},get_translate:function(){return this.translate.slice()},set_origin:function(e){return this.origin=[e[0],e[1]],this.x0=.017453292519943295*e[0],this.y0=.017453292519943295*e[1],this.cy0=Math.cos(this.y0),this.sy0=Math.sin(this.y0),e},get_origin:function(){return this.origin.slice()},invert:function(e){var t=(e[0]-this.get_translate()[0])/this.get_scale(),e=(e[1]-this.get_translate()[1])/this.get_scale(),n=Math.sqrt(t*t+e*e),r,i;switch(this.get_mode()[1]){case 0:i=Math.asin(n);break;case 1:i=Math.atan(n)}return r=i,i=Math.sin(r),r=Math.cos(r),[(this.x0+Math.atan2(t*i,n*this.cy0*r+e*this.sy0*i))/.017453292519943295,Math.asin(r*this.sy0-e*i*this.cy0/n)/.017453292519943295]},project:function(e){var t=.017453292519943295*e[0]-this.x0,n=.017453292519943295*e[1],e=Math.cos(t),t=Math.sin(t),r=Math.cos(n),n=Math.sin(n),i;switch(this.get_mode()[1]){case 0:i=1;break;case 1:i=1/(1+this.sy0*n+this.cy0*r*e)}return e=i*(this.sy0*r*e-this.cy0*n),[this.get_scale()*i*r*t+this.get_translate()[0],this.get_scale()*e+this.get_translate()[1]]},sy0:null,cy0:null,y0:null,x0:null,translate:null,scale:null,origin:null,mode:null,__class__:An.Azimuthal,__properties__:{set_mode:"set_mode",get_mode:"get_mode",set_origin:"set_origin",get_origin:"get_origin",set_scale:"set_scale",get_scale:"get_scale",set_translate:"set_translate",get_translate:"get_translate"}},An.ProjectionMode={__ename__:["thx","geo","ProjectionMode"],__constructs__:["Orthographic","Stereographic"]},An.ProjectionMode.Orthographic=["Orthographic",0],An.ProjectionMode.Orthographic.toString=Sr,An.ProjectionMode.Orthographic.__enum__=An.ProjectionMode,An.ProjectionMode.Stereographic=["Stereographic",1],An.ProjectionMode.Stereographic.toString=Sr,An.ProjectionMode.Stereographic.__enum__=An.ProjectionMode,An.Mercator=function(){this.set_scale(500),this.set_translate([480,250])},Er["thx.geo.Mercator"]=An.Mercator,An.Mercator.__name__=["thx","geo","Mercator"],An.Mercator.__interfaces__=[An.IProjection],An.Mercator.prototype={set_translate:function(e){return this.translate=[e[0],e[1]],e},get_translate:function(){return this.translate.slice()},get_scale:function(){return this.scale},set_scale:function(e){return this.scale=e},invert:function(e){var t=(e[0]-this.get_translate()[0])/this.get_scale(),e=(e[1]-this.get_translate()[1])/this.get_scale();return[360*t,2*Math.atan(Math.exp(-6.283185307179586*e))/.017453292519943295-90]},project:function(e){var t=e[0]/360,e=-(Math.log(Math.tan(Math.PI/4+.017453292519943295*e[1]/2))/.017453292519943295)/360;return[this.get_scale()*t+this.get_translate()[0],this.get_scale()*Math.max(-0.5,Math.min(.5,e))+this.get_translate()[1]]},translate:null,scale:null,__class__:An.Mercator,__properties__:{set_scale:"set_scale",get_scale:"get_scale",set_translate:"set_translate",get_translate:"get_translate"}},Dn={Contour:function(){}},Er["thx.geom.Contour"]=Dn.Contour,Dn.Contour.__name__=["thx","geom","Contour"],Dn.Contour.contourStart=function(e){for(var t=0,n=0;;){if(e(t,n))return[t,n];0==t?(t=n+1,n=0):(t-=1,n+=1)}return null},Dn.Contour.contour=function(e,t){var n=null==t?Dn.Contour.contourStart(e):t,r=[],i=n[0],s=n[1],o=0,u=0,a=666,f=666,u=0;do u=0,e(i-1,s-1)&&(u+=1),e(i,s-1)&&(u+=2),e(i-1,s)&&(u+=4),e(i,s)&&(u+=8),6==u?(o=-1==f?-1:1,u=0):9==u?(o=0,u=1==a?-1:1):(o=Dn.Contour.contourDx[u],u=Dn.Contour.contourDy[u]),o!=a&&u!=f&&(r.push([i,s]),a=o,f=u),i+=o,s+=u;while(n[0]!=i||n[1]!=s);return r},Dn.Polygon=function(e){this.coordinates=e},Er["thx.geom.Polygon"]=Dn.Polygon,Dn.Polygon.__name__=["thx","geom","Polygon"],Dn.Polygon.polygonInside=function(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])},Dn.Polygon.polygonIntersect=function(e,t,n,r){var i=e[0],s=n[0],e=e[1],o=n[1],n=t[0]-i,u=r[0]-s,t=t[1]-e,r=r[1]-o,s=(u*(e-o)-r*(i-s))/(r*n-u*t);return[i+s*n,e+s*t]},Dn.Polygon.prototype={clip:function(e){for(var t,n=xr.last(this.coordinates),r,i,s,o,u=0,a=this.coordinates.length;u<a;){r=u++,t=e.slice(),e=[],r=this.coordinates[r],i=t[(o=t.length)-1];for(var f=0;f<o;)s=f++,s=t[s],Dn.Polygon.polygonInside(s,n,r)?(Dn.Polygon.polygonInside(i,n,r)||e.push(Dn.Polygon.polygonIntersect(i,s,n,r)),e.push(s)):Dn.Polygon.polygonInside(i,n,r)&&e.push(Dn.Polygon.polygonIntersect(i,s,n,r)),i=s;n=r}return e},centroid:function(e){var t,n,r,i=0,s=0;null==e&&(e=1/(6*this.area()));for(var o=0,u=this.coordinates.length-1;o<u;)n=o++,t=this.coordinates[n],n=this.coordinates[n+1],r=t[0]*n[1]-n[0]*t[1],i+=(t[0]+n[0])*r,s+=(t[1]+n[1])*r;return[i*e,s*e]},area:function(){for(var e=this.coordinates.length,t=this.coordinates[e-1][0]*this.coordinates[0][1],n=this.coordinates[e-1][1]*this.coordinates[0][0],r=1;r<e;)var i=r++,t=t+this.coordinates[i-1][0]*this.coordinates[i][1],n=n+this.coordinates[i-1][1]*this.coordinates[i][0];return.5*(n-t)},coordinates:null,__class__:Dn.Polygon},Dn.layout={},Dn.layout.Pie=function(){this._startAngle=function(){return 0},this._endAngle=function(){return 6.283185307179586},this._sort=null,this._value=function(e){return Number(e)}},Er["thx.geom.layout.Pie"]=Dn.layout.Pie,Dn.layout.Pie.__name__=["thx","geom","layout","Pie"],Dn.layout.Pie.prototype={valuef:function(e){return this._value=e,this},getValue:function(){return this._value},sort:function(e){return this._sort=e,this},getSort:function(){return this._sort},endAnglef:function(e){return this._endAngle=e,this},endAngle:function(e){return this.endAnglef(function(){return e})},getEndAngle:function(){return this._endAngle},startAnglef:function(e){return this._startAngle=e,this},startAngle:function(e){return this.startAnglef(function(){return e})},getStartAngle:function(){return this._startAngle},pie:function(e,t){var n=this._startAngle(e,t),r=this._endAngle(e,t)-n,i=zr.range(e.length);if(null!=this._sort){var s=this._sort;i.sort(function(t,n){return s(e[t],e[n])})}var o=e.map(this._value),r=r/o.reduce(function(e,t){return e+t},0);Math.isFinite(r)||(r=0);var u,a=i.map(function(e,t){return u=o[t],{value:u,startAngle:n,endAngle:n+=u*r}});return e.map(function(e,t){return a[i[t]]})},_value:null,_sort:null,_endAngle:null,_startAngle:null,__class__:Dn.layout.Pie},Dn.layout.Stack=function(){this._order=Dn.layout.StackOrder.DefaultOrder,this._offset=Dn.layout.StackOffset.ZeroOffset},Er["thx.geom.layout.Stack"]=Dn.layout.Stack,Dn.layout.Stack.__name__=["thx","geom","layout","Stack"],Dn.layout.Stack.getStackOrder=function(e,t){switch(e[1]){case 0:return zr.range(t.length);case 1:var n=t.length,r=t.map(Dn.layout.Stack.stackMaxIndex),i=t.map(Dn.layout.Stack.stackReduceSum),s=zr.range(n),o=0,u=0,a=[],f=[];s.sort(function(e,t){return r[e]-r[t]});for(var l=0;l<n;){var c=l++,c=s[c];o<u?(o+=i[c],a.push(c)):(u+=i[c],f.push(c))}return f.reverse(),f.concat(a);case 2:return s=zr.range(t.length),s.reverse(),s}},Dn.layout.Stack.getStackOffset=function(e,t,n){switch(e[1]){case 0:for(var e=n.length,r=n[0].length,i=[],s=0,o,u=0;u<r;){for(var a=u++,f=o=0;f<e;){var l=f++;o+=n[l][a].y}o>s&&(s=o),i.push(o)}l=t[0];for(u=0;u<r;)a=u++,n[l][a].y0=(s-i[a])/2;break;case 1:var e=n.length,s=n[0],r=s.length,c,h=t[0],p,d,v,m,g;n[h][0].y0=o=g=0;for(u=1;u<r;){a=u++;for(f=p=0;f<e;)l=f++,p+=n[l][a].y;d=0,m=s[a].x-s[a-1].x;for(f=0;f<e;){l=f++,c=t[l],v=(n[c][a].y-n[c][a-1].y)/(2*m);for(var y=0;y<l;){var b=y++;v+=(n[i=t[b]][a].y-n[i][a-1].y)/m}d+=v*n[c][a].y}n[h][a].y0=o-=0!=p?d/p*m:0,o<g&&(g=o)}for(u=0;u<r;)a=u++,n[h][a].y0-=g;break;case 2:r=n[0].length,h=t[0];for(u=0;u<r;)a=u++,n[h][a].y0=0}},Dn.layout.Stack.stackMaxIndex=function(e){for(var t=0,n=e[0].y,r,i=e.length,s=1;s<i;){var o=s++;(r=e[o].y)>n&&(t=o,n=r)}return t},Dn.layout.Stack.stackReduceSum=function(e){return e.reduce(Dn.layout.Stack.stackSum,0)},Dn.layout.Stack.stackSum=function(e,t){return e+t.y},Dn.layout.Stack.prototype={offset:function(e){return this._offset=e,this},getOffset:function(){return this._offset},order:function(e){return this._order=e,this},getOrder:function(){return this._order},stack:function(e){for(var t=e.length,n=e[0].length,r=[],i=0;i<t;){var s=i++,o=[];r.push(o);for(var u=0;u<n;){var a=u++,f=e[s][a];o[a]={x:f.x,y:f.y,y0:0}}}o=Dn.layout.Stack.getStackOrder(this._order,r),Dn.layout.Stack.getStackOffset(this._offset,o,r);for(i=0;i<n;){a=i++,e=r[o[0]][a].y0;for(u=1;u<t;)s=u++,r[o[s]][a].y0=e+=r[o[s-1]][a].y}return r},_offset:null,_order:null,__class__:Dn.layout.Stack},Dn.layout.StackOrder={__ename__:["thx","geom","layout","StackOrder"],__constructs__:["DefaultOrder","InsideOut","ReverseOrder"]},Dn.layout.StackOrder.DefaultOrder=["DefaultOrder",0],Dn.layout.StackOrder.DefaultOrder.toString=Sr,Dn.layout.StackOrder.DefaultOrder.__enum__=Dn.layout.StackOrder,Dn.layout.StackOrder.InsideOut=["InsideOut",1],Dn.layout.StackOrder.InsideOut.toString=Sr,Dn.layout.StackOrder.InsideOut.__enum__=Dn.layout.StackOrder,Dn.layout.StackOrder.ReverseOrder=["ReverseOrder",2],Dn.layout.StackOrder.ReverseOrder.toString=Sr,Dn.layout.StackOrder.ReverseOrder.__enum__=Dn.layout.StackOrder,Dn.layout.StackOffset={__ename__:["thx","geom","layout","StackOffset"],__constructs__:["Silhouette","Wiggle","ZeroOffset"]},Dn.layout.StackOffset.Silhouette=["Silhouette",0],Dn.layout.StackOffset.Silhouette.toString=Sr,Dn.layout.StackOffset.Silhouette.__enum__=Dn.layout.StackOffset,Dn.layout.StackOffset.Wiggle=["Wiggle",1],Dn.layout.StackOffset.Wiggle.toString=Sr,Dn.layout.StackOffset.Wiggle.__enum__=Dn.layout.StackOffset,Dn.layout.StackOffset.ZeroOffset=["ZeroOffset",2],Dn.layout.StackOffset.ZeroOffset.toString=Sr,Dn.layout.StackOffset.ZeroOffset.__enum__=Dn.layout.StackOffset,Pn={EdgeSplitter:function(){}},Er["thx.graph.EdgeSplitter"]=Pn.EdgeSplitter,Pn.EdgeSplitter.__name__=["thx","graph","EdgeSplitter"],Pn.EdgeSplitter.prototype={split:function(e,t,n,r){var i=e.layers(),s,o;null==r&&(r=function(){});for(var u=e.graph.nodes.collection.iterator();u.hasNext();){var a=u.next();s=e.cell(a);for(a=a.graph.edges.positives(a);a.hasNext();){var f=a.next();o=e.cell(f.head);if(s.layer!=o.layer&&s.layer!=o.layer-1&&s.layer!=o.layer+1){var l=[s.layer<o.layer?1:-1];o=zr.abs(o.layer-s.layer)-1,t.push(f.split(o,n,function(e){return function(t,n,o){i[s.layer+(1+o)*e[0]].push(t.head.id),r(t,n,o)}}(l)))}}}return new Pn.GraphLayout(e.graph,i)},__class__:Pn.EdgeSplitter},Pn.GraphElement=function(e,t,n){this.id=t,this.data=n,this.graph=e},Er["thx.graph.GraphElement"]=Pn.GraphElement,Pn.GraphElement.__name__=["thx","graph","GraphElement"],Pn.GraphElement.friendDestroy=function(e){return e},Pn.GraphElement.prototype={destroyed:function(){return null==this.graph},destroy:function(){this.graph=null,this.id=-1},data:null,id:null,graph:null,__class__:Pn.GraphElement},Pn.GEdge=function(e,t,n,r,i,s){Pn.GraphElement.call(this,e,t,s),this.tail=n,this.head=r,this.weight=i},Er["thx.graph.GEdge"]=Pn.GEdge,Pn.GEdge.__name__=["thx","graph","GEdge"],Pn.GEdge.create=function(e,t,n,r,i,s){return new Pn.GEdge(e,t,n,r,i,s)},Pn.GEdge.__super__=Pn.GraphElement,Pn.GEdge.prototype=yr(Pn.GraphElement.prototype,{toString:function(){return null==this.graph?"Edge Destroyed":"Edge (n."+this.id+", tail: n."+this.tail.id+", head: n."+this.head.id+", weight : "+this.weight+(null==this.data?"":", data: "+Qr.string(this.data))+")"},friendRemove:function(){return this.graph.edges},remove:function(){this.graph.edges._remove(this)},invert:function(){var e=this.graph.edges.create(this.head,this.tail,this.weight,this.data);return this.graph.edges._remove(this),e},other:function(e){if(e.graph!=this.graph)throw new Tn.Error("node is part of the edge graph",null,null,{fileName:"GEdge.hx",lineNumber:61,className:"thx.graph.GEdge",methodName:"other"});if(this.tail==e)return this.head;if(this.head==e)return this.tail;throw new Tn.Error("node is not part of the edge",null,null,{fileName:"GEdge.hx",lineNumber:67,className:"thx.graph.GEdge",methodName:"other"})},split:function(e,t,n){null==e&&(e=1);if(1>e)throw new Tn.Error("the split times parameter must be an integer value greater than zero",null,null,{fileName:"GEdge.hx",lineNumber:34,className:"thx.graph.GEdge",methodName:"split"});null==n&&(n=function(){}),null==t&&(t=function(){return null});for(var r=this,i=[],s,o,u=r.graph,a=0;a<e;){var f=a++;s=u.nodes.create(t(r)),o=u.edges.create(r.tail,s,r.weight,r.data),s=u.edges.create(s,r.head,r.weight,r.data),u.edges.remove(r),n(o,s,f),r=s,u=r.graph,i.push(o)}return i.push(r),i},destroy:function(){Pn.GraphElement.prototype.destroy.call(this),this.head=this.tail=null},weight:null,head:null,tail:null,__class__:Pn.GEdge}),Pn.GNode=function(e,t,n){Pn.GraphElement.call(this,e,t,n)},Er["thx.graph.GNode"]=Pn.GNode,Pn.GNode.__name__=["thx","graph","GNode"],Pn.GNode.create=function(e,t,n){return new Pn.GNode(e,t,n)},Pn.GNode.__super__=Pn.GraphElement,Pn.GNode.prototype=yr(Pn.GraphElement.prototype,{toString:function(){return null==this.graph?"Node Destroyed":"Node (n."+this.id+", positives "+this.graph.edges.positiveCount(this)+", negatives: "+this.graph.edges.negativeCount(this)+(null==this.data?"":", data: "+Qr.string(this.data))+")"},friendEdges:function(){return this.graph.edges},friendRemove:function(){return this.graph.nodes},remove:function(){this.graph.nodes._remove(this)},negativeCount:function(){return this.graph.edges.negativeCount(this)},positiveCount:function(){return this.graph.edges.positiveCount(this)},edgeCount:function(){return this.graph.edges.edgeCount(this)},sortNegatives:function(e){this.graph.edges.sortNegatives(this,e)},sortPositives:function(e){this.graph.edges.sortPositives(this,e)},negatives:function(){return this.graph.edges.negatives(this)},positives:function(){return this.graph.edges.positives(this)},edges:function(){return this.graph.edges.edges(this)},predecessorBy:function(e){return Xr.firstf(this.graph.edges.positives(this),function(t){return t.head.id==e.id})},successorBy:function(e){return Xr.firstf(this.graph.edges.negatives(this),function(t){return t.tail.id==e.id})},isPredecessorOf:function(e){return Xr.contains(this.graph.edges.positives(this),null,function(t){return t.head.id==e.id})},isSuccessorOf:function(e){return e.isPredecessorOf(this)},isIsolated:function(){return!this.graph.edges.edges(this).hasNext()},isSink:function(){return this.graph.edges.negatives(this).hasNext()&&!this.graph.edges.positives(this).hasNext()},isSource:function(){return this.graph.edges.positives(this).hasNext()&&!this.graph.edges.negatives(this).hasNext()},_weight:function(e){for(var t=0;e.hasNext();)var n=e.next(),t=t+n.weight;return t},negativeWeight:function(){return this._weight(this.graph.edges.negatives(this))},positiveWeight:function(){return this._weight(this.graph.edges.positives(this))},connectedBy:function(e){if(e.graph!=this.graph)throw new Tn.Error("the node is not part of this graph",null,null,{fileName:"GNode.hx",lineNumber:41,className:"thx.graph.GNode",methodName:"connectedBy"});var t=Xr.firstf(this.graph.edges.positives(this),function(t){return t.head.id==e.id});return null!=t?t:Xr.firstf(this.graph.edges.negatives(this),function(t){return t
.tail.id==e.id})},isConnectedTo:function(e){if(e.graph!=this.graph)throw new Tn.Error("the node is not part of this graph",null,null,{fileName:"GNode.hx",lineNumber:30,className:"thx.graph.GNode",methodName:"isConnectedTo"});return Xr.contains(this.graph.edges.positives(this),null,function(t){return t.head.id==e.id})||Xr.contains(this.graph.edges.negatives(this),null,function(t){return t.tail.id==e.id})},destroy:function(){Pn.GraphElement.prototype.destroy.call(this)},__class__:Pn.GNode}),Pn.Graph=function(e,t){this.nodes=Pn.GraphNodes.newInstance(this,e),this.edges=Pn.GraphEdges.newInstance(this,t)},Er["thx.graph.Graph"]=Pn.Graph,Pn.Graph.__name__=["thx","graph","Graph"],Pn.Graph.friendNodes=function(e){return e},Pn.Graph.friendEdges=function(e){return e},Pn.Graph.prototype={toString:function(){return"Graph (nodes: "+Rr.count(this.nodes.collection)+", edges: "+Rr.count(this.edges.collection)+")"},pickPath:function(e,t){return 0==e.length?null:t?xr.min(e,function(e){return Xr.reduce(br(e)(),function(e,t){return e+t.weight},0)}):xr.min(e,function(e){return e.length})},directedPath:function(e,t,n){return null==n&&(n=!1),this.pickPath(this.directedPaths(e,t),n)},directedPaths:function(e,t){var n=new Cn.Set,r=[],i;return function(){var e=null;return e=function(s,o){for(var u=[],a=o.graph.edges.positives(o);a.hasNext();){var f=a.next();i=f.head,n.exists(f.id)||(i==t?r.push(s.concat([f])):!i.isSink()&&!i.isSource()&&u.push(function(e,t,n){return function(){return e(t,n)}}(e,s.concat([f]),i)),n.add(f.id))}for(a=0;a<u.length;)f=u[a],++a,f()}}(this)([],e),r},path:function(e,t,n){return null==n&&(n=!1),this.pickPath(this.paths(e,t),n)},paths:function(e,t){var n=new Cn.Set,r=[],i;return function(){var e=null;return e=function(s,o){for(var u=[],a=o.graph.edges.edges(o);a.hasNext();){var f=a.next();i=f.other(o),n.exists(f.id)||(i==t?r.push(s.concat([f])):i.isSource()||u.push(function(e,t,n){return function(){return e(t,n)}}(e,s.concat([f]),i)),n.add(f.id))}for(a=0;a<u.length;)f=u[a],++a,f()}}(this)([],e),r},findIsolated:function(){return Xr.firstf(this.nodes.iterator(),function(e){return e.isIsolated()})},findIsolateds:function(){return Xr.filter(this.nodes.iterator(),function(e){return e.isIsolated()})},findSource:function(){return Xr.firstf(this.nodes.iterator(),function(e){return e.isSource()})},findSources:function(){return Xr.filter(this.nodes.iterator(),function(e){return e.isSource()})},findSink:function(){return Xr.firstf(this.nodes.iterator(),function(e){return e.isSink()})},findSinks:function(){return Xr.filter(this.nodes.iterator(),function(e){return e.isSink()})},clone:function(){var e=new Pn.Graph;return e.nodes=this.nodes.copyTo(e),e.edges=this.edges.copyTo(e),e},clear:function(){this.edges.clear(),this.nodes.clear()},empty:function(){return 0==Xr.count(this.nodes.iterator())},edges:null,nodes:null,__class__:Pn.Graph},Pn.GraphCollection=function(e,t){var n=this;this.nextid=0,this.graph=e,this.idf=t,this.collection=new qr,this._map=new Br;if(null!=t){var r=wr(this,this.collectionCreate);this.collectionCreate=function(e){n._map.set(t(e.data),e),r(e)};var i=wr(this,this.collectionRemove);this.collectionRemove=function(e){n._map.remove(t(e.data)),i(e)}}this.onRemove=new es,this.onCreate=new es},Er["thx.graph.GraphCollection"]=Pn.GraphCollection,Pn.GraphCollection.__name__=["thx","graph","GraphCollection"],Pn.GraphCollection.prototype={toString:function(){return Xr.map(this.collection.iterator(),function(e){return Qr.string(e)}).join(", ")},iterator:function(){return this.collection.iterator()},collectionRemove:function(e){this.collection.remove(e.id),this.onRemove.dispatch(e)},collectionCreate:function(e){this.onCreate.dispatch(e),this.collection.set(e.id,e)},get_length:function(){return Rr.count(this.collection)},has:function(e){return e.graph==this.graph&&this.collection.exists(e.id)},get:function(e){return this.collection.get(e)},getById:function(e){return this._map.get(e)},length:null,_map:null,idf:null,nextid:null,collection:null,graph:null,onCreate:null,onRemove:null,__class__:Pn.GraphCollection,__properties__:{get_length:"get_length"}},Pn.GraphEdges=function(e,t){Pn.GraphCollection.call(this,e,t),this.edgesp=new qr,this.edgesn=new qr},Er["thx.graph.GraphEdges"]=Pn.GraphEdges,Pn.GraphEdges.__name__=["thx","graph","GraphEdges"],Pn.GraphEdges.newInstance=function(e,t){return new Pn.GraphEdges(e,t)},Pn.GraphEdges.__super__=Pn.GraphCollection,Pn.GraphEdges.prototype=yr(Pn.GraphCollection.prototype,{toString:function(){return"GraphEdges ("+Rr.count(this.collection)+"): "+Pn.GraphCollection.prototype.toString.call(this)},removeConnection:function(e,t,n){var r=n.get(t);null!=r&&(Fr.remove(r,e),0==r.length&&n.remove(t))},connections:function(e,t){var n=t.get(e);return null==n&&t.set(e,n=[]),n},clear:function(){for(var e=Xr.array(this.collection.iterator()).slice(),t=0;t<e.length;){var n=e[t];++t,this.remove(n)}},_unlink:function(e,t){var n=t.get(e.id);if(null!=n){for(var n=n.slice(),r=0;r<n.length;){var i=n[r];++r,i=this.get(i),null==i||null==i.graph||this._remove(i)}t.remove(e.id)}},unlinkNegatives:function(e){if(e.graph!=this.graph)throw new Tn.Error("unlinkeNegatives: the node is not part of this graph",null,null,{fileName:"GraphEdges.hx",lineNumber:150,className:"thx.graph.GraphEdges",methodName:"unlinkNegatives"});this._unlink(e,this.edgesn)},unlinkPositives:function(e){if(e.graph!=this.graph)throw new Tn.Error("unlinkePositives: the node is not part of this graph",null,null,{fileName:"GraphEdges.hx",lineNumber:143,className:"thx.graph.GraphEdges",methodName:"unlinkPositives"});this._unlink(e,this.edgesp)},_edges:function(e,t){var n=this;return this._edgeids(e,t).map(function(e){return n.get(e)})},_edgeids:function(e,t){var n=t.get(e);return null==n&&(n=[]),n},edgeCount:function(e){return this._edgeids(e.id,this.edgesp).length+this._edgeids(e.id,this.edgesn).length},negativeCount:function(e){return this._edgeids(e.id,this.edgesn).length},positiveCount:function(e){return this._edgeids(e.id,this.edgesp).length},edges:function(e){return Fr.iter(this._edges(e.id,this.edgesp).concat(this._edges(e.id,this.edgesn)))},_sort:function(e,t,n){var r=this,e=n.get(e.id);null!=e&&e.sort(function(e,n){var i=r.graph.edges.get(e),s=r.graph.edges.get(n);return t(i,s)})},sortNegatives:function(e,t){this._sort(e,t,this.edgesn)},sortPositives:function(e,t){this._sort(e,t,this.edgesp)},negatives:function(e){return Fr.iter(this._edges(e.id,this.edgesn))},positives:function(e){return Fr.iter(this._edges(e.id,this.edgesp))},unlink:function(e){if(e.graph!=this.graph)throw new Tn.Error("unlink: the node is not part of this graph",null,null,{fileName:"GraphEdges.hx",lineNumber:70,className:"thx.graph.GraphEdges",methodName:"unlink"});this._unlink(e,this.edgesp),this._unlink(e,this.edgesn)},_remove:function(e){this.collectionRemove(e),this.removeConnection(e.id,e.tail.id,this.edgesp),this.removeConnection(e.id,e.head.id,this.edgesn),e.destroy()},remove:function(e){if(e.graph!=this.graph)throw new Tn.Error("remove: the edge is not part of this graph",null,null,{fileName:"GraphEdges.hx",lineNumber:55,className:"thx.graph.GraphEdges",methodName:"remove"});this._remove(e)},_create:function(e,t,n,r,i){return r=Pn.GEdge.create(this.graph,e,t,n,r,i),this.collectionCreate(r),this.connections(t.id,this.edgesp).push(e),this.connections(n.id,this.edgesn).push(e),r},create:function(e,t,n,r){null==n&&(n=1);if(e.graph!=t.graph||e.graph!=this.graph)throw new Tn.Error("can't create an edge between nodes on different graphs",null,null,{fileName:"GraphEdges.hx",lineNumber:39,className:"thx.graph.GraphEdges",methodName:"create"});return this._create(++this.nextid,e,t,n,r)},copyTo:function(e){for(var t=new Pn.GraphEdges(e),e=e.nodes,n,r,i=this.collection.iterator();i.hasNext();){var s=i.next();n=e.get(s.tail.id),r=e.get(s.head.id),t._create(s.id,n,r,s.weight,s.data)}return t.nextid=this.nextid,t},edgesn:null,edgesp:null,__class__:Pn.GraphEdges}),Pn.GraphLayout=function(e,t){this.graph=e,this._layers=t.map(function(e){return e.slice()}),this.friendCell=this._cell=new Pn.LayoutCell,this._updateMap(),this.length=this._layers.length,e.nodes.onRemove.add(wr(this,this._nodeRemove))},Er["thx.graph.GraphLayout"]=Pn.GraphLayout,Pn.GraphLayout.__name__=["thx","graph","GraphLayout"],Pn.GraphLayout.arrayCrossings=function(e,t,n){for(var r=new qr,i=0,s=0,o=n.length;s<o;){var u=s++;r.set(n[u],u)}if(1>=t.length||1>=n.length)return i;s=0;for(o=t.length;s<o;){u=s++,n=e.nodes.get(t[u]);for(n=n.graph.edges.positives(n);n.hasNext();){var a=n.next(),a=r.get(a.head.id);if(null!=a)for(var f=u+1,l=t.length;f<l;)for(var c=f++,c=e.nodes.get(t[c]),c=c.graph.edges.positives(c);c.hasNext();){var h=c.next();r.get(h.head.id)<a&&i++}}}return i},Pn.GraphLayout.prototype={toString:function(){return"GraphLayout ("+Qr.string(this.graph)+", layers: "+this._layers.length+", crossings : "+this.crossings()+")"},_nodeRemove:function(e){e=this.cell(e),this._layers[e.layer].splice(e.position,1),0==this._layers[e.layer].length&&this._layers.splice(e.layer,1),this._updateMap()},maxCells:function(){return xr.floatMax(this._layers,function(e){return e.length})|0},crossings:function(){for(var e=0,t=0,n=this._layers.length-1;t<n;)var r=t++,e=e+Pn.GraphLayout.arrayCrossings(this.graph,this._layers[r],this._layers[r+1]);return e},layers:function(){for(var e=[],t=0,n=this._layers;t<n.length;){var r=n[t];++t,e.push(r.slice())}return e},layer:function(e){var t=this;return this._layers[e].map(function(e){return t.graph.nodes.get(e)})},nodeAt:function(e,t){var n=this._layers[e];return null==n||t>=n.length?null:this.graph.nodes.get(n[t])},cell:function(e){if(e.graph!=this.graph)throw new Tn.Error("node doesn't belong to this graph",null,null,{fileName:"GraphLayout.hx",lineNumber:59,className:"thx.graph.GraphLayout",methodName:"cell"});return e=this._map.get(e.id),null==e?null:new Pn.LayoutCell(e[0],e[1],this._layers.length,this._layers[e[0]].length)},each:function(e){for(var t=this._layers.length,n,r=0;r<t;){var i=r++;n=this._layers[i].length;for(var s=0;s<n;){var o=s++;this.friendCell.update(i,o,t,n),e(this._cell,this.graph.nodes.get(this._layers[i][o]))}}},clone:function(){return new Pn.GraphLayout(this.graph.clone(),this.layers())},_updateMap:function(){var e=this;this._map=new qr,this.each(function(t,n){e._map.set(n.id,[t.layer,t.position])})},friendCell:null,_map:null,_cell:null,_layers:null,length:null,graph:null,__class__:Pn.GraphLayout},Pn.LayoutCell=function(e,t,n,r){null==r&&(r=0),null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.layer=e,this.layers=n,this.position=t,this.positions=r},Er["thx.graph.LayoutCell"]=Pn.LayoutCell,Pn.LayoutCell.__name__=["thx","graph","LayoutCell"],Pn.LayoutCell.prototype={toString:function(){return"LayoutCell, layer "+this.layer+" ("+this.layers+"), position "+this.position+" ("+this.positions+")"},update:function(e,t,n,r){this.layer=e,this.layers=n,this.position=t,this.positions=r},positions:null,layers:null,position:null,layer:null,__class__:Pn.LayoutCell},Pn.GraphNodes=function(e,t){Pn.GraphCollection.call(this,e,t)},Er["thx.graph.GraphNodes"]=Pn.GraphNodes,Pn.GraphNodes.__name__=["thx","graph","GraphNodes"],Pn.GraphNodes.newInstance=function(e,t){return new Pn.GraphNodes(e,t)},Pn.GraphNodes.__super__=Pn.GraphCollection,Pn.GraphNodes.prototype=yr(Pn.GraphCollection.prototype,{toString:function(){return"GraphNodes ("+Rr.count(this.collection)+"): "+Pn.GraphCollection.prototype.toString.call(this)},clear:function(){for(var e=Xr.array(this.collection.iterator()).slice(),t=0;t<e.length;){var n=e[t];++t,this.remove(n)}},_remove:function(e){this.graph.edges.unlink(e),this.collectionRemove(e),e.destroy()},remove:function(e){if(e.graph!=this.graph)throw new Tn.Error("the node is not part of this graph",null,null,{fileName:"GraphNodes.hx",lineNumber:39,className:"thx.graph.GraphNodes",methodName:"remove"});this._remove(e)},_create:function(e,t){var n=Pn.GNode.create(this.graph,e,t);return this.collectionCreate(n),n},create:function(e){return this._create(++this.nextid,e)},copyTo:function(e){for(var e=new Pn.GraphNodes(e),t=this.collection.iterator();t.hasNext();){var n=t.next();e._create(n.id,n.data)}return e.nextid=this.nextid,e},__class__:Pn.GraphNodes}),Pn.Graphs=function(){},Er["thx.graph.Graphs"]=Pn.Graphs,Pn.Graphs.__name__=["thx","graph","Graphs"],Pn.Graphs.crossings=function(e,t){for(var n=new Br,r=0,i=0,s=t.length;i<s;){var o=i++;n.set(t[o].vertex,o)}if(1>=e.length||1>=t.length)return r;i=0;for(s=e.length;i<s;)for(var o=i++,u=0,a=e[o].edgesp;u<a.length;){var f=a[u];++u,f=n.get(f);if(null!=f)for(var l=o+1,c=e.length;l<c;)for(var h=l++,p=0,h=e[h].edgesp;p<h.length;){var d=h[p];++p,n.get(d)<f&&r++}}return r},Pn.Graphs.layoutCrossings=function(e){for(var t=0,n=0,r=e.length-1;n<r;)var i=n++,t=t+Pn.Graphs.crossings(e[i],e[i+1]);return t},Pn.Graphs.toMap=function(e){for(var t=new Br,n=0,r=e.length;n<r;)for(var i=n++,s=0,o=e[i].length;s<o;){var u=s++;t.set(e[i][u].vertex,e[i][u])}return t},Pn.Graphs.toVertices=function(e){for(var t=[],n=0,r=e.length;n<r;)for(var i=n++,s=0,o=e[i].length;s<o;){var u=s++;t.push(e[i][u].vertex)}return t},Pn.Graphs.toEdges=function(e){for(var t=[],n=0,r=e.length;n<r;)for(var i=n++,s=0,o=e[i].length;s<o;)for(var u=s++,a=e[i][u].vertex,f=0,u=e[i][u].edgesp;f<u.length;){var l=u[f];++f,t.push({a:a,b:l})}return t},Pn.Graphs.findMaxPositiveOverNegative=function(e){for(var t=null,n=0,e=e.iterator();e.hasNext();){var r=e.next(),i=r.edgesp.length-r.edgesn.length;if(null==t||n<i)t=r,n=i}return t},Pn.Graphs.isSink=function(e){return 0==e.edgesp.length&&0<e.edgesn.length},Pn.Graphs.isSource=function(e){return 0==e.edgesn.length&&0==e.edgesp.length},Pn.Graphs.findSink=function(e){for(e=e.iterator();e.hasNext();){var t=e.next();if(0==t.edgesp.length&&0<t.edgesn.length)return t}return null},Pn.Graphs.findSource=function(e){for(e=e.iterator();e.hasNext();){var t=e.next();if(0==t.edgesn.length&&0<t.edgesp.length)return t}return null},Pn.Graphs.findAllIsolated=function(e){for(var t=[],e=e.iterator();e.hasNext();){var n=e.next();0==n.edgesn.length&&0==n.edgesp.length&&t.push(n)}return t},Pn.Graphs.addConnection=function(e,t,n){var r=Pn.Graphs.findPath(e,n,t);null!=r&&r.every(function(e,t){return 0==t||t==r.length-1||Pn.Graphs.isDummy(e)})?(r.reverse(),Pn.Graphs.addConnections(e,r)):Pn.Graphs.addConnections(e,[t,n])},Pn.Graphs.addConnections=function(e,t){for(var n=0,r=t.length-1;n<r;){var i=n++,s=t[i],i=t[i+1];e.get(s).edgesp.push(i),e.get(i).edgesp.push(s)}},Pn.Graphs.reverseConnection=function(e,t,n){t=Pn.Graphs.findPath(e,t,n);if(null==t)return!1;for(var n=0,r=t.length-1;n<r;){var i=n++,s=t[i],i=t[i+1],o=e.get(s),u=e.get(i);Fr.remove(o.edgesp,i),o.edgesn.push(i),Fr.remove(u.edgesn,s),u.edgesp.push(s)}return!0},Pn.Graphs.findPath=function(e,t,n){new Cn.Set;var r,i,n=function(){var n=null;return n=function(s,o){for(var u=[],a=0,f=o.edgesn;a<f.length;){var l=f[a];++a;if(l==t)return s.concat([t]);Pn.Graphs.isSource(r=e.get(l))||u.push(function(e,t,n){return function(){return e(t,n)}}(n,s.concat([l]),r))}for(a=0;a<u.length;)if(f=u[a],++a,null!=(i=f()))return i;return null}}(this)([n],e.get(n));return null==n?null:(n.reverse(),n)},Pn.Graphs.isDummy=function(e){return"#"==Fr.substr(e,0,1)},Pn.Graphs.createDummy=function(){return"#"+ ++Pn.Graphs.id},Pn.Graphs.removeNode=function(e,t){e.remove(t.vertex)},Pn.Graphs.addNode=function(e,t){e.set(t.vertex,t)},Pn.Graphs.clone=function(e){for(var t=new Br,e=e.iterator();e.hasNext();){var n=e.next();Pn.Graphs.addNode(t,{vertex:n.vertex,edgesn:n.edgesn.slice(),edgesp:n.edgesp.slice()})}return t},Pn.Graphs.empty=function(e){return 0==jr.count(e)},Pn.Graphs.count=function(e){return jr.count(e)},Pn.GreedyCyclePartitioner=function(){},Er["thx.graph.GreedyCyclePartitioner"]=Pn.GreedyCyclePartitioner,Pn.GreedyCyclePartitioner.__name__=["thx","graph","GreedyCyclePartitioner"],Pn.GreedyCyclePartitioner.findMaxPositiveOverNegative=function(e){for(var t=null,n=0,e=e.nodes.collection.iterator();e.hasNext();){var r=e.next(),i=r.graph.edges.positiveCount(r)-r.graph.edges.negativeCount(r);if(null==t||n<i)t=r,n=i}return t},Pn.GreedyCyclePartitioner.prototype={partition:function(e){for(var t=[],n=[],r=e.clone(),i;0!=Xr.count(r.nodes.iterator());){for(;null!=(i=r.findSink());){for(var s=i.graph.edges.negatives(i);s.hasNext();){var o=s.next();n.unshift(e.edges.get(o.id)),o.graph.edges._remove(o)}i.graph.nodes._remove(i)}i=0;for(o=r.findIsolateds();i<o.length;)s=o[i],++i,s.graph.nodes._remove(s);for(;null!=(i=r.findSource());){for(s=i.graph.edges.positives(i);s.hasNext();)o=s.next(),t.push(e.edges.get(o.id)),o.graph.edges._remove(o);i.graph.nodes._remove(i)}if(0!=Xr.count(r.nodes.iterator())){i=Pn.GreedyCyclePartitioner.findMaxPositiveOverNegative(r);for(s=i.graph.edges.negatives(i);s.hasNext();)o=s.next(),n.unshift(e.edges.get(o.id)),o.graph.edges._remove(o);for(s=i.graph.edges.positives(i);s.hasNext();)o=s.next(),t.push(e.edges.get(o.id)),o.graph.edges._remove(o);i.graph.nodes._remove(i)}}return{left:t,right:n}},__class__:Pn.GreedyCyclePartitioner},Pn.GreedySwitchDecrosser=function(){},Er["thx.graph.GreedySwitchDecrosser"]=Pn.GreedySwitchDecrosser,Pn.GreedySwitchDecrosser.__name__=["thx","graph","GreedySwitchDecrosser"],Pn.GreedySwitchDecrosser.combined=function(){return{decross:function(e){return e=(new Pn.GreedySwitchDecrosser).decross(e),(new Pn.GreedySwitch2Decrosser).decross(e)}}},Pn.GreedySwitchDecrosser.best=function(){return{decross:function(e){return e=[(new Pn.GreedySwitchDecrosser).decross(e),(new Pn.GreedySwitch2Decrosser).decross(e),Pn.GreedySwitchDecrosser.combined().decross(e)],xr.min(e,function(e){return e.crossings()})}}},Pn.GreedySwitchDecrosser.prototype={swap:function(e,t){var n=e[t];e[t]=e[t+1],e[t+1]=n},decrossPair:function(e,t,n){var r=Pn.GraphLayout.arrayCrossings(e,t,n),i=r,s;do for(var r=i,o=0,u=n.length-1;o<u;){var a=o++;this.swap(n,a),(s=Pn.GraphLayout.arrayCrossings(e,t,n))>=i?this.swap(n,a):i=s}while(i<r)},decross:function(e){var t=e.layers(),n=e.graph,r=e;if(1>=t.length)return new Pn.GraphLayout(e.graph,t);var i,s,o=t.length-1,u;do{e=t.map(function(e){return e.slice()}),r=new Pn.GraphLayout(n,t),i=r.crossings();for(s=0;s<o;)u=s++,t=e[u],u=e[u+1],this.decrossPair(n,t,u);s=(new Pn.GraphLayout(n,e)).crossings(),t=e}while(i>s);return r},__class__:Pn.GreedySwitchDecrosser},Pn.GreedySwitch2Decrosser=function(){Pn.GreedySwitchDecrosser.call(this)},Er["thx.graph.GreedySwitch2Decrosser"]=Pn.GreedySwitch2Decrosser,Pn.GreedySwitch2Decrosser.__name__=["thx","graph","GreedySwitch2Decrosser"],Pn.GreedySwitch2Decrosser.__super__=Pn.GreedySwitchDecrosser,Pn.GreedySwitch2Decrosser.prototype=yr(Pn.GreedySwitchDecrosser.prototype,{decrossTriplet:function(e,t,n,r){if(null==t)this.decrossPair(e,n,r);else if(null==r)this.decrossPair(e,t,n);else{var i=Pn.GraphLayout.arrayCrossings(e,t,n)+Pn.GraphLayout.arrayCrossings(e,n,r),s=i,o;do for(var i=s,u=0,a=n.length-1;u<a;){var f=u++;this.swap(n,f),(o=Pn.GraphLayout.arrayCrossings(e,t,n)+Pn.GraphLayout.arrayCrossings(e,n,r))>=s?this.swap(n,f):s=o}while(s<i)}},decross:function(e){var t=e.layers(),n=e.graph,r=e;if(1>=t.length)return new Pn.GraphLayout(e.graph,t);var i,s,o=t.length-1,u;do{e=t.map(function(e){return e.slice()}),r=new Pn.GraphLayout(n,t),i=r.crossings();for(var a=0;a<o;)u=a++,t=e[u-1],s=e[u],u=e[u+1],this.decrossTriplet(n,t,s,u);s=(new Pn.GraphLayout(n,e)).crossings(),t=e}while(i>s);return r},__class__:Pn.GreedySwitch2Decrosser}),Pn.HeaviestNodeLayer=function(){},Er["thx.graph.HeaviestNodeLayer"]=Pn.HeaviestNodeLayer,Pn.HeaviestNodeLayer.__name__=["thx","graph","HeaviestNodeLayer"],Pn.HeaviestNodeLayer.prototype={lay:function(e){for(var t=[],n=xr.order(Xr.array(e.nodes.iterator()),function(e,t){return Hr.compare(t.positiveWeight(),e.positiveWeight())}),r=function(){var e=null;return e=function(r,i){if(Fr.remove(n,r)){var s=t[i];null==s&&(s=t[i]=[]),s.push(r.id);for(s=r.graph.edges.positives(r);s.hasNext();){var o=s.next();e(o.head,i+1)}}}}(this);0<n.length;)r(n[0],0);for(r=0;r<t.length;){var i=t[r];++r,i.sort(function(t,n){return Hr.compare(e.nodes.get(n).positiveWeight(),e.nodes.get(t).positiveWeight())})}return t},__class__:Pn.HeaviestNodeLayer},Pn.LongestPathLayer=function(){},Er["thx.graph.LongestPathLayer"]=Pn.LongestPathLayer,Pn.LongestPathLayer.__name__=["thx","graph","LongestPathLayer"],Pn.LongestPathLayer.distanceToASink=function(e,t){var n=function(){var e=null;return e=function(t,n){for(var r=n;t.hasNext();){var i=t.next();i.head.isSink()||(r=zr.max(r,e(i.head.positives(),n+1)))}return r}}(this);return t.isIsolated()?0:n(t.graph.edges.positives(t),1)},Pn.LongestPathLayer.prototype={lay:function(e){for(var e=e.clone(),t=[[]],n=0,r=e.findSinks();n<r.length;){var i=r[n];++n,t[0].push(i.id)}n=0;for(r=Xr.filter(e.nodes.iterator(),function(e){return!e.isSink()});n<r.length;){i=r[n],++n;var s=Pn.LongestPathLayer.distanceToASink(e,i),o=t[s];null==o&&(o=t[s]=[]),o.push(i.id)}return t.reverse(),t},__class__:Pn.LongestPathLayer},Pn.OneCycleRemover=function(){},Er["thx.graph.OneCycleRemover"]=Pn.OneCycleRemover,Pn.OneCycleRemover.__name__=["thx","graph","OneCycleRemover"],Pn.OneCycleRemover.prototype={remove:function(e){for(var t=[],n=e.nodes.collection.iterator();n.hasNext();){var r=n.next(),e=r.predecessorBy(r);null!=e&&(t.push({node:r,weight:e.weight,data:e.data}),e.graph.edges._remove(e))}return t},__class__:Pn.OneCycleRemover},Pn.SugiyamaMethod=function(e,t,n,r){this.partitioner=null==e?new Pn.GreedyCyclePartitioner:e,this.layer=null==t?new Pn.LongestPathLayer:t,this.splitter=null==n?new Pn.EdgeSplitter:n,this.decrosser=null==r?Pn.GreedySwitchDecrosser.best():r},Er["thx.graph.SugiyamaMethod"]=Pn.SugiyamaMethod,Pn.SugiyamaMethod.__name__=["thx","graph","SugiyamaMethod"],Pn.SugiyamaMethod.prototype={resolve:function(e,t,n){var r=(new Pn.OneCycleRemover).remove(e),i=(new Pn.TwoCycleRemover).remove(e),s=this.partitioner.partition(e),o=new Br;(s.left.length>s.right.length?s.right:s.left).forEach(function(e){o.set(e.tail.id+"-"+e.head.id,[e.invert()])}),s=this.layer.lay(e),e=new Pn.GraphLayout(e,s),s=[],e=this.splitter.split(e,s,t,n),s.forEach(function(e){var t=e[e.length-1].head.id+"-"+e[0].tail.id;o.exists(t)&&o.set(t,e)}),e=this.decrosser.decross(e);for(t=o.iterator();t.hasNext();)t.next().forEach(function(e){e.invert()});for(t=0;t<i.length;)n=i[t],++t,e.graph.edges.create(n.tail,n.head,n.weight,n.data);for(t=0;t<r.length;)n=r[t],++t,e.graph.edges.create(n.node,n.node,n.weight,n.data);return e},decrosser:null,splitter:null,layer:null,partitioner:null,__class__:Pn.SugiyamaMethod},Pn.TwoCycleRemover=function(){},Er["thx.graph.TwoCycleRemover"]=Pn.TwoCycleRemover,Pn.TwoCycleRemover.__name__=["thx","graph","TwoCycleRemover"],Pn.TwoCycleRemover.prototype={remove:function(e){for(var t=[],e=e.nodes.collection.iterator();e.hasNext();)for(var n=e.next(),r=n.graph.edges.positives(n);r.hasNext();){var i=r.next().head.predecessorBy(n);null!=i&&(t.push({tail:i.tail,head:i.head,weight:i.weight,data:i.data}),i.graph.edges._remove(i))}return t},__class__:Pn.TwoCycleRemover},_n={Json:function(){}},Er["thx.json.Json"]=_n.Json,_n.Json.__name__=["thx","json","Json"],_n.Json.encode=function(e){if(null!=_n.Json.nativeEncoder)return _n.Json.nativeEncoder(e);var t=new _n.JsonEncoder;return(new jn.ValueEncoder(t)).encode(e),t.encodedString},_n.Json.decode=function(e){if(null!=_n.Json.nativeDecoder)return _n.Json.nativeDecoder(e);var t=new jn.ValueHandler;return(new _n.JsonDecoder(t)).decode(e),t.value},_n.JsonDecoder=function(e,t){null==t&&(t=4),this.handler=e,this.tabsize=t},Er["thx.json.JsonDecoder"]=_n.JsonDecoder,_n.JsonDecoder.__name__=["thx","json","JsonDecoder"],_n.JsonDecoder.prototype={error:function(e){var t=this.pos==this.src.length?"":"\nrest: "+(null!=this["char"]?this["char"]:"")+Fr.substr(this.src,this.pos,null)+"...";throw new Tn.Error("error at L {0} C {1}: {2}{3}",[this.line,this.col,e,t],null,{fileName:"JsonDecoder.hx",lineNumber:358,className:"thx.json.JsonDecoder",methodName:"error"})},parseDigits:function(e){null==e&&(e=0);for(var t="";;){var n=null;try{n=this.readChar()}catch(r){if(ar.__instanceof(r,_n._JsonDecoder.StreamError))return t.length<e&&this.error("expected digit"),t;throw r}var i=Fr.cca(n,0);if(48>i||57<i)return t.length<e&&this.error("expected digit"),this.col+=t.length,this["char"]=n,t;t+=n}return null},parseFloat:function(){var e="";this.expect("-")&&(e="-");if(this.expect("0"))e+="0";else{var t=this.readChar(),n=Fr.cca(t,0);(49>n||57<n)&&this.error("expected digit between 1 and 9"),e+=t,this.col++}try{e+=this.parseDigits()}catch(r){if(ar.__instanceof(r,_n._JsonDecoder.StreamError)){this.handler.valueInt(Qr.parseInt(e));return}throw r}try{if(!this.expect(".")){this.handler.valueInt(Qr.parseInt(e));return}e+="."+this.parseDigits(1);if(this.expect("e")||this.expect("E"))e+="e",this.expect("+")||this.expect("-")&&(e+="-"),e+=this.parseDigits(1)}catch(i){if(ar.__instanceof(i,_n._JsonDecoder.StreamError)){this.handler.valueFloat(Qr.parseFloat(e));return}throw i}this.handler.valueFloat(Qr.parseFloat(e))},parseHexa:function(){for(var e=[],t=0;4>t;){t++;var n=this.readChar(),r=Fr.cca(n.toLowerCase(),0);48<=r&&57>=r||97<=r&&102>=r||this.error("invalid hexadecimal value "+n),e.push(n)}return this.handler.valueInt(Qr.parseInt("0x"+e.join(""))),Qr.parseInt("0x"+e.join(""))},_parseString:function(){this.expect('"')||this.error("expected double quote");var e="",t=!1;try{for(;;){var n=this.readChar();this.col++;if(t){switch(n){case'"':e+='"';break;case"\\":e+="\\";break;case"/":e+="/";break;case"b":e+="\b";break;case"f":e+="\f";break;case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"u":e+=String.fromCharCode(this.parseHexa());break;default:this.error("unexpected char "+n)}t=!1}else switch(n){case"\\":t=!0;break;case'"':throw"__break__";default:e+=n}}}catch(r){if("__break__"!=r)throw r}return e},parseString:function(){this.handler.valueString(this._parseString())},parseValue:function(){this.expect("true")?this.handler.valueBool(!0):this.expect("false")?this.handler.valueBool(!1):this.expect("null")?this.handler.valueNull():this.parseFloat()},parseArray:function(){this.ignoreWhiteSpace();var e=!0;for(this.handler.arrayStart();;){this.ignoreWhiteSpace();if(this.expect("]"))break;e?e=!1:this.expect(",")?this.ignoreWhiteSpace():this.error("expected ','"),this.handler.arrayItemStart(),this.parse(),this.handler.arrayItemEnd()}this.handler.arrayEnd()},parseObject:function(){var e=!0;for(this.handler.objectStart();;){this.ignoreWhiteSpace();if(this.expect("}"))break;e?e=!1:this.expect(",")?this.ignoreWhiteSpace():this.error("expected ','");var t=this._parseString();this.ignoreWhiteSpace(),this.expect(":")||this.error("expected ':'"),this.ignoreWhiteSpace(),this.handler.objectFieldStart(t),this.parse(),this.handler.objectFieldEnd()}this.handler.objectEnd()},expect:function(e){return(null==this["char"]?Fr.substr(this.src,this.pos,e.length):this["char"]+Fr.substr(this.src,this.pos,e.length-1))==e?(null==this["char"]?this.pos+=e.length:(this.pos+=e.length-1,this["char"]=null),!0):!1},readChar:function(){if(null==this["char"]){if(this.pos==this.src.length)throw _n._JsonDecoder.StreamError.Eof;return this.src.charAt(this.pos++)}var e=this["char"];return this["char"]=null,e},parse:function(){var e=this.readChar();switch(e){case"{":return this.col++,this.ignoreWhiteSpace(),this.parseObject();case"[":return this.col++,this.ignoreWhiteSpace(),this.parseArray();case'"':return this["char"]=e,this.parseString();default:return this["char"]=e,this.parseValue()}},ignoreWhiteSpace:function(){for(;this.pos<this.src.length;){var e=this.readChar();switch(e){case" ":this.col++;break;case"\n":this.col=0,this.line++;break;case"\r":break;case"	":this.col+=this.tabsize;break;default:this["char"]=e;return}}},decode:function(e){this.line=this.col=0,this.src=e,this["char"]=null,this.pos=0,this.ignoreWhiteSpace(),this.handler.start();try{this.parse()}catch(t){if(!ar.__instanceof(t,_n._JsonDecoder.StreamError))throw t;this.error("unexpected end of stream")}this.ignoreWhiteSpace(),this.pos<this.src.length&&this.error("the stream contains unrecognized characters at its end"),this.handler.end()},handler:null,pos:null,"char":null,src:null,tabsize:null,line:null,col:null,__class__:_n.JsonDecoder},_n._JsonDecoder={},_n._JsonDecoder.StreamError={__ename__:["thx","json","_JsonDecoder","StreamError"],__constructs__:["Eof"]},_n._JsonDecoder.StreamError.Eof=["Eof",0],_n._JsonDecoder.StreamError.Eof.toString=Sr,_n._JsonDecoder.StreamError.Eof.__enum__=_n._JsonDecoder.StreamError,_n.JsonEncoder=function(){},Er["thx.json.JsonEncoder"]=_n.JsonEncoder,_n.JsonEncoder.__name__=["thx","json","JsonEncoder"],_n.JsonEncoder.__interfaces__=[jn.IDataHandler],_n.JsonEncoder.prototype={quote:function(e){return'"'+(new Or(".","")).customReplace((new Or("(\n)","g")).replace((new Or('("|\\\\)',"g")).replace(e,"\\$1"),"\\n"),function(e){return e=Fr.cca(e.matched(0),0),32<=e&&127>=e?String.fromCharCode(e):"\\u"+Yr.hex(e,4)})+'"'},comment:function(){},valueBool:function(e){this.buf.b+=Qr.string(e?"true":"false")},valueNull:function(){this.buf.b+="null"},valueFloat:function(e){this.buf.b+=Qr.string(e)},valueInt:function(e){this.buf.b+=Qr.string(e)},valueString:function(e){this.buf.b+=Qr.string(this.quote(e))},valueDate:function(e){this.buf.b+=Qr.string(e.getTime())},arrayEnd:function(){this.buf.b+="]",this.count.pop()},arrayItemEnd:function(){},arrayItemStart:function(){0<this.count[this.count.length-1]++&&(this.buf.b+=",")},arrayStart:function(){this.buf.b+="[",this.count.push(0)},objectEnd:function(){this.buf.b+="}",this.count.pop()},objectFieldEnd:function(){},objectFieldStart:function(e){0<this.count[this.count.length-1]++&&(this.buf.b+=","),this.buf.b+=Qr.string(this.quote(e)+":")},objectStart:function(){this.buf.b+="{",this.count.push(0)},end:function(){this.encodedString=this.buf.b,this.buf=null},start:function(){this.lvl=0,this.buf=new Gr,this.encodedString=null,this.count=[]},count:null,lvl:null,buf:null,encodedString:null,__class__:_n.JsonEncoder},Nn.Const=function(){},Er["thx.math.Const"]=Nn.Const,Nn.Const.__name__=["thx","math","Const"],Nn.Ease=function(){},Er["thx.math.Ease"]=Nn.Ease,Nn.Ease.__name__=["thx","math","Ease"],Nn.Ease.mode=function(e,t){null==t&&(t=Nn.Equations.cubic),null==e&&(e=Nn.EaseMode.EaseIn);switch(e[1]){case 0:return t;case 1:return function(e){return 1-t(1-e)};case 2:return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))};case 3:return Nn.Ease.mode(Nn.EaseMode.EaseInEaseOut,Nn.Ease.mode(Nn.EaseMode.EaseOut,t))}},Nn.EaseMode={__ename__:["thx","math","EaseMode"],__constructs__:["EaseIn","EaseOut","EaseInEaseOut","EaseOutEaseIn"]},Nn.EaseMode.EaseIn=["EaseIn",0],Nn.EaseMode.EaseIn.toString=Sr,Nn.EaseMode.EaseIn.__enum__=Nn.EaseMode,Nn.EaseMode.EaseOut=["EaseOut",1],Nn.EaseMode.EaseOut.toString=Sr,Nn.EaseMode.EaseOut.__enum__=Nn.EaseMode,Nn.EaseMode.EaseInEaseOut=["EaseInEaseOut",2],Nn.EaseMode.EaseInEaseOut.toString=Sr,Nn.EaseMode.EaseInEaseOut.__enum__=Nn.EaseMode,Nn.EaseMode.EaseOutEaseIn=["EaseOutEaseIn",3],Nn.EaseMode.EaseOutEaseIn.toString=Sr,Nn.EaseMode.EaseOutEaseIn.__enum__=Nn.EaseMode,Nn.Random=function(e){null==e&&(e=1),this.seed=e},Er["thx.math.Random"]=Nn.Random,Nn.Random.__name__=["thx","math","Random"],Nn.Random.prototype={"float":function(){return((this.seed=16807*this.seed%2147483647)&1073741823)/1073741823},"int":function(){return(this.seed=16807*this.seed%2147483647)&1073741823},seed:null,__class__:Nn.Random},Nn.scale={},Nn.scale.IScale=function(){},Er["thx.math.scale.IScale"]=Nn.scale.IScale,Nn.scale.IScale.__name__=["thx","math","scale","IScale"],Nn.scale.IScale.prototype={getRange:null,getDomain:null,scale:null,__class__:Nn.scale.IScale},Nn.scale.NumericScale=function(){this._domain=[0,1],this._range=[0,1],this.f=Hr.interpolatef,this._clamp=!1,this.rescale()},Er["thx.math.scale.NumericScale"]=Nn.scale.NumericScale,Nn.scale.NumericScale.__name__=["thx","math","scale","NumericScale"],Nn.scale.NumericScale.__interfaces__=[Nn.scale.IScale],Nn.scale.NumericScale.scaleBilinear=function(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1],null);return function(e){return s(i(e))}},Nn.scale.NumericScale.scalePolylinear=function(e,t,n,r){for(var i=[],s=[],o=1,u=e.length;o<u;){var a=o++;i.push(n(e[a-1],e[a])),s.push(r(t[a-1],t[a],null))}return function(t){var n=xr.bisectRight(e,t,1,e.length-1)-1;return s[n](i[n](t))}},Nn.scale.NumericScale.prototype={_this:function(){return this},transform:function(e,t,n,r){var i=this.getRange().map(function(n){return(n-t)/e});return this.domain([n,r]),this.domain(i.map(wr(this,this.invert))),this},tickFormat:function(){throw new Tn.AbstractMethod({fileName:"NumericScale.hx",lineNumber:91,className:"thx.math.scale.NumericScale",methodName:"tickFormat"})},ticks:function(){throw new Tn.AbstractMethod({fileName
:"NumericScale.hx",lineNumber:86,className:"thx.math.scale.NumericScale",methodName:"ticks"})},clamp:function(e){return this._clamp=e,this.rescale()},getClamp:function(){return this._clamp},interpolatef:function(e){return this.f=e,this.rescale()},getInterpolate:function(){return this.f},rangeRound:function(e){return this.range(e),this.interpolatef(zr.interpolatef),this},range:function(e){return this._range=e,this.rescale()},getRange:function(){return this._range},domain:function(e){return this._domain=e,this.rescale()},getDomain:function(){return this._domain},invert:function(e){return this._input(e)},scale:function(e){return this._output(e)},rescale:function(){var e=2==this._domain.length?Nn.scale.NumericScale.scaleBilinear:Nn.scale.NumericScale.scalePolylinear,t=this._clamp?Hr.uninterpolateClampf:Hr.uninterpolatef;return this._output=e(this._domain,this._range,t,this.f),this._input=e(this._range,this._domain,t,Hr.interpolatef),this},_input:null,_output:null,_clamp:null,f:null,_range:null,_domain:null,__class__:Nn.scale.NumericScale},Nn.scale.Linear=function(){Nn.scale.NumericScale.call(this),this.m=10},Er["thx.math.scale.Linear"]=Nn.scale.Linear,Nn.scale.Linear.__name__=["thx","math","scale","Linear"],Nn.scale.Linear.__super__=Nn.scale.NumericScale,Nn.scale.Linear.prototype=yr(Nn.scale.NumericScale.prototype,{tickFormat:function(e){var t=Math.max(0,-Math.floor(Math.log(this.tickRange().step)/2.302585092994046+.01));return Hr.format(e,"D:"+t)},ticks:function(){var e=this.tickRange();return Hr.range(e.start,e.stop,e.step)},tickRange:function(){var e=xr.min(this._domain),t=xr.max(this._domain),n=t-e,r=Math.pow(10,Math.floor(Math.log(n/this.m)/2.302585092994046)),n=this.m/(n/r);return.15>=n?r*=10:.35>=n?r*=5:.75>=n&&(r*=2),{start:Math.ceil(e/r)*r,stop:Math.floor(t/r)*r+.5*r,step:r}},modulo:function(e){return this.m=e,this},getModulo:function(){return this.m},m:null,__class__:Nn.scale.Linear}),Nn.scale.LinearT=function(){this._domain=[0,1],this._range=null,this.f=Nn.scale.LinearT._f,this._clamp=!1,this.rescale()},Er["thx.math.scale.LinearT"]=Nn.scale.LinearT,Nn.scale.LinearT.__name__=["thx","math","scale","LinearT"],Nn.scale.LinearT.__interfaces__=[Nn.scale.IScale],Nn.scale.LinearT._f=function(){return function(){return null}},Nn.scale.LinearT.scaleBilinear=function(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1],null);return function(e){return s(i(e))}},Nn.scale.LinearT.scalePolylinear=function(e,t,n,r){for(var i=[],s=[],o=1,u=e.length;o<u;){var a=o++;i.push(n(e[a-1],e[a])),s.push(r(t[a-1],t[a],null))}return function(t){var n=xr.bisectRight(e,t,1,e.length-1)-1;return s[n](i[n](t))}},Nn.scale.LinearT.prototype={tickFormat:function(e){return e=Math.max(0,-Math.floor(Math.log(this.tickRange(e).step)/2.302585092994046+.01)),Hr.formatf("D:"+e)},ticks:function(e){return e=this.tickRange(e),Hr.range(e.start,e.stop,e.step)},tickRange:function(e){var t=Math.min(this._domain[0],this._domain[1]),n=Math.max(this._domain[0],this._domain[1]),r=n-t,i=Math.pow(10,Math.floor(Math.log(r/e)/2.302585092994046)),e=e/(r/i);return.15>=e?i*=10:.35>=e?i*=5:-75>=e&&(i*=2),{start:Math.ceil(t/i)*i,stop:Math.floor(n/i)*i+.5*i,step:i}},clamp:function(e){return this._clamp=e,this.rescale()},getClamp:function(){return this._clamp},interpolatef:function(e){return this.f=e,this.rescale()},getInterpolate:function(){return this.f},range:function(e){return this._range=e,this.rescale()},getRange:function(){return this._range},domain:function(e){return this._domain=e,this.rescale()},getDomain:function(){return this._domain},scale:function(e){return this._output(e)},rescale:function(){return null==this._range?this:(this._output=(2==this._domain.length?Nn.scale.LinearT.scaleBilinear:Nn.scale.LinearT.scalePolylinear)(this._domain,this._range,this._clamp?Hr.uninterpolateClampf:Hr.uninterpolatef,this.f),this)},_output:null,_clamp:null,f:null,_range:null,_domain:null,__class__:Nn.scale.LinearT},Nn.scale.Linears=function(){},Er["thx.math.scale.Linears"]=Nn.scale.Linears,Nn.scale.Linears.__name__=["thx","math","scale","Linears"],Nn.scale.Linears.forString=function(){return(new Nn.scale.LinearT).interpolatef(Zr.interpolatef)},Nn.scale.Linears.forHsl=function(){return(new Nn.scale.LinearT).interpolatef(kn.Hsl.interpolatef)},Nn.scale.Linears.forHslString=function(){return(new Nn.scale.LinearT).interpolatef(function(e,t,n){if(Zr.empty(e)||Zr.empty(t))return function(){return""};var e=kn.Hsl.toHsl(kn.Colors.parse(e)),t=kn.Hsl.toHsl(kn.Colors.parse(t)),r=kn.Hsl.interpolatef(e,t,n);return function(e){return r(e).toHslString()}})},Nn.scale.Linears.forRgb=function(){return(new Nn.scale.LinearT).interpolatef(kn.Rgb.interpolatef)},Nn.scale.Linears.forRgbString=function(){return(new Nn.scale.LinearT).interpolatef(function(e,t,n){if(Zr.empty(e)||Zr.empty(t))return function(){return""};var e=kn.Colors.parse(e),t=kn.Colors.parse(t),r=kn.Rgb.interpolatef(e,t,n);return function(e){return r(e).toRgbString()}})},Mn={Arc:function(){this._r0=function(){return 0},this._r1=function(){return 1},this._a0=function(){return 0},this._a1=function(){return Math.PI}}},Er["thx.svg.Arc"]=Mn.Arc,Mn.Arc.__name__=["thx","svg","Arc"],Mn.Arc.fromObject=function(){return(new Mn.Arc).innerRadiusf(function(e){return e.innerRadius}).outerRadiusf(function(e){return e.outerRadius}).startAnglef(function(e){return e.startAngle}).endAnglef(function(e){return e.endAngle})},Mn.Arc.fromAngleObject=function(){return(new Mn.Arc).startAnglef(function(e){return e.startAngle}).endAnglef(function(e){return e.endAngle})},Mn.Arc.prototype={centroid:function(e,t){var n=(this._r0(e,t)+this._r1(e,t))/2,r=(this._a0(e,t)+this._a1(e,t))/2+Mn.LineInternals.arcOffset;return[Math.cos(r)*n,Math.sin(r)*n]},shape:function(e,t){var n=this._a0(e,t)+Mn.LineInternals.arcOffset,r=this._a1(e,t)+Mn.LineInternals.arcOffset,i=r-n,s=i<Math.PI?"0":"1",o=Math.cos(n),n=Math.sin(n),u=Math.cos(r),r=Math.sin(r),a=this._r0(e,t),f=this._r1(e,t);return i>=Mn.LineInternals.arcMax?0!=a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+ -f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+ -a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+ -f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":0!=a?"M"+f*o+","+f*n+"A"+f+","+f+" 0 "+s+",1 "+f*u+","+f*r+"L"+a*u+","+a*r+"A"+a+","+a+" 0 "+s+",0 "+a*o+","+a*n+"Z":"M"+f*o+","+f*n+"A"+f+","+f+" 0 "+s+",1 "+f*u+","+f*r+"L0,0Z"},endAnglef:function(e){return this._a1=e,this},endAngle:function(e){return this.endAnglef(function(){return e})},getEndAngle:function(){return this._a1},startAnglef:function(e){return this._a0=e,this},startAngle:function(e){return this.startAnglef(function(){return e})},getStartAngle:function(){return this._a0},outerRadiusf:function(e){return this._r1=e,this},outerRadius:function(e){return this.outerRadiusf(function(){return e})},getOuterRadius:function(){return this._r1},innerRadiusf:function(e){return this._r0=e,this},innerRadius:function(e){return this.innerRadiusf(function(){return e})},getInnerRadius:function(){return this._r0},_a1:null,_a0:null,_r1:null,_r0:null,__class__:Mn.Arc},Mn.Area=function(e,t,n,r){this._x=e,this._y0=t,this._y1=n,this._interpolator=r},Er["thx.svg.Area"]=Mn.Area,Mn.Area.__name__=["thx","svg","Area"],Mn.Area.pointArray=function(e){return new Mn.Area(function(e){return e[0]},function(e){return e[1]},function(e){return e[2]},e)},Mn.Area.pointObject=function(e){return new Mn.Area(function(e){return e.x},function(e){return e.y0},function(e){return e.y1},e)},Mn.Area.pointArray2=function(e){return new Mn.Area(function(e){return e[0]},function(){return 0},function(e){return e[1]},e)},Mn.Area.pointObjectXY=function(e){return new Mn.Area(function(e){return e.x},function(){return 0},function(e){return e.y},e)},Mn.Area.prototype={y1:function(e){return this._y1=e,this},getY1:function(){return this._y1},y0:function(e){return this._y0=e,this},getY0:function(){return this._y0},x:function(e){return this._x=e,this},getX:function(){return this._x},interpolator:function(e){return this._interpolator=e,this},getInterpolator:function(){return this._interpolator},shape:function(e){var t=Mn.LineInternals.linePoints(e,this._x,this._y0);return t.reverse(),1>e.length?null:"M"+Mn.LineInternals.interpolatePoints(Mn.LineInternals.linePoints(e,this._x,this._y1),this._interpolator)+"L"+Mn.LineInternals.interpolatePoints(t,this._interpolator)+"Z"},_interpolator:null,_y1:null,_y0:null,_x:null,__class__:Mn.Area},Mn.Diagonal=function(){this._projection=Mn.Diagonal.diagonalProjection},Er["thx.svg.Diagonal"]=Mn.Diagonal,Mn.Diagonal.__name__=["thx","svg","Diagonal"],Mn.Diagonal.diagonalProjection=function(e){return e},Mn.Diagonal.forObject=function(){return(new Mn.Diagonal).sourcef(function(e){return[e.x0,e.y0]}).targetf(function(e){return[e.x1,e.y1]})},Mn.Diagonal.forArray=function(){return(new Mn.Diagonal).sourcef(function(e){return[e[0],e[1]]}).targetf(function(e){return[e[2],e[3]]})},Mn.Diagonal.prototype={projection:function(e){return this._projection=e,this},getProjection:function(){return this._projection},targetf:function(e){return this._target=e,this},getTarget:function(){return this._target},sourcef:function(e){return this._source=e,this},getSource:function(){return this._source},diagonal:function(e,t){var n=this._source(e,t),r=this._target(e,t),i=(n[1]+r[1])/2,n=[n,[n[0],i],[r[0],i],r].map(this._projection);return"M "+n[0][0]+" "+n[0][1]+" C "+n[1][0]+" "+n[1][1]+" "+n[2][0]+" "+n[2][1]+" "+n[3][0]+" "+n[3][1]},_projection:null,_target:null,_source:null,__class__:Mn.Diagonal},Mn.Line=function(e,t,n){this._x=e,this._y=t,this._interpolator=n},Er["thx.svg.Line"]=Mn.Line,Mn.Line.__name__=["thx","svg","Line"],Mn.Line.pointArray=function(e){return new Mn.Line(function(e){return e[0]},function(e){return e[1]},e)},Mn.Line.pointObject=function(e){return new Mn.Line(function(e){return e.x},function(e){return e.y},e)},Mn.Line.prototype={y:function(e){return this._y=e,this},getY:function(){return this._y},x:function(e){return this._x=e,this},getX:function(){return this._x},interpolator:function(e){return this._interpolator=e,this},getInterpolator:function(){return this._interpolator},shape:function(e){return 1>e.length?null:"M"+Mn.LineInternals.interpolatePoints(Mn.LineInternals.linePoints(e,this._x,this._y),this._interpolator)},_interpolator:null,_y:null,_x:null,__class__:Mn.Line},Mn.LineInternals=function(){},Er["thx.svg.LineInternals"]=Mn.LineInternals,Mn.LineInternals.__name__=["thx","svg","LineInternals"],Mn.LineInternals.linePoints=function(e,t,n){for(var r=[],i,s=0,o=e.length;s<o;){var u=s++;i=e[u],r.push([t(i,u),n(i,u)])}return r},Mn.LineInternals.interpolatePoints=function(e,t){null==t&&(t=Mn.LineInterpolator.Linear);var n=[],r=0,i=e.length,s=e[0],o=t;switch(o[1]){case 0:for(n.push(s[0]+","+s[1]);++r<i;)s=e[r],n.push("L"+s[0]+","+s[1]);break;case 1:for(n.push(s[0]+","+s[1]);++r<i-1;)s=e[r],o=e[r+1],n.push("H"+(s[0]+o[0])/2+"V"+s[1]);s=e[r],n.push("H"+s[0]+"V"+s[1]);break;case 2:for(n.push(s[0]+","+s[1]);++r<i;)s=e[r],n.push("V"+s[1]+"H"+s[0]);break;case 3:for(n.push(s[0]+","+s[1]);++r<i;)s=e[r],n.push("H"+s[0]+"V"+s[1]);break;case 4:if(3>e.length)return Mn.LineInternals.interpolatePoints(e,Mn.LineInterpolator.Linear);var r=1,s=e[1],u=s[0],a=s[1],o=[u,u,u,s[0]],f=[a,a,a,s[1]];n.push(u+","+a);for(Mn.LineInternals._lineBasisBezier(n,o,f);++r<i;)s=e[r],o.shift(),o.push(s[0]),f.shift(),f.push(s[1]),Mn.LineInternals._lineBasisBezier(n,o,f);for(r=-1;2>++r;)o.shift(),o.push(s[0]),f.shift(),f.push(s[1]),Mn.LineInternals._lineBasisBezier(n,o,f);break;case 5:if(4>e.length)return Mn.LineInternals.interpolatePoints(e,Mn.LineInterpolator.Linear);r=-1,o=[0];for(f=[0];3>++r;)s=e[r],o.push(s[0]),f.push(s[1]);n.push(Mn.LineInternals._lineDot4(Mn.LineInternals._lineBasisBezier3,o)+","+Mn.LineInternals._lineDot4(Mn.LineInternals._lineBasisBezier3,f));for(--r;++r<i;)s=e[r],o.shift(),o.push(s[0]),f.shift(),f.push(s[1]),Mn.LineInternals._lineBasisBezier(n,o,f);break;case 6:r=-1,u=i+4,o=[];for(f=[];4>++r;)s=e[r%i],o.push(s[0]),f.push(s[1]);n.push(Mn.LineInternals._lineDot4(Mn.LineInternals._lineBasisBezier3,o)+","+Mn.LineInternals._lineDot4(Mn.LineInternals._lineBasisBezier3,f));for(--r;++r<u;)s=e[r%i],o.shift(),o.push(s[0]),f.shift(),f.push(s[1]),Mn.LineInternals._lineBasisBezier(n,o,f);break;case 7:return n=o[2],null==n&&(n=.7),3>e.length?Mn.LineInternals.interpolatePoints(e,Mn.LineInterpolator.Linear):e[0][0]+","+e[0][1]+Mn.LineInternals._lineHermite(e,Mn.LineInternals._lineCardinalTangents(e,n));case 8:return n=o[2],4>e.length?Mn.LineInternals.interpolatePoints(e,Mn.LineInterpolator.Linear):e[1][0]+","+e[1][1]+Qr.string(Mn.LineInternals._lineCardinalTangents(e,n));case 9:return n=o[2],null==n&&(n=.7),3>e.length?Mn.LineInternals.interpolatePoints(e,Mn.LineInterpolator.Linear):e[0][0]+","+e[0][1]+Mn.LineInternals._lineHermite(e,Mn.LineInternals._lineCardinalTangents([e[e.length-2]].concat(e).concat([e[1]]),n));case 10:return 3>e.length?Mn.LineInternals.interpolatePoints(e,Mn.LineInterpolator.Linear):e[0][0]+","+e[0][1]+Mn.LineInternals._lineHermite(e,Mn.LineInternals._lineMonotoneTangents(e))}return n.join("")},Mn.LineInternals._lineDot4=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},Mn.LineInternals._lineBasisBezier=function(e,t,n){e.push("C"+Mn.LineInternals._lineDot4(Mn.LineInternals._lineBasisBezier1,t)+","+Mn.LineInternals._lineDot4(Mn.LineInternals._lineBasisBezier1,n)+","+Mn.LineInternals._lineDot4(Mn.LineInternals._lineBasisBezier2,t)+","+Mn.LineInternals._lineDot4(Mn.LineInternals._lineBasisBezier2,n)+","+Mn.LineInternals._lineDot4(Mn.LineInternals._lineBasisBezier3,t)+","+Mn.LineInternals._lineDot4(Mn.LineInternals._lineBasisBezier3,n))},Mn.LineInternals._lineSlope=function(e,t){return(t[1]-e[1])/(t[0]-e[0])},Mn.LineInternals._lineFiniteDifferences=function(e){for(var t=0,n=e.length-1,r=[],i=e[1],s=r[0]=Mn.LineInternals._lineSlope(e[0],i);++t<n;)r[t]=s+(s=Mn.LineInternals._lineSlope(i,i=e[t+1]));return r[t]=s,r},Mn.LineInternals._lineMonotoneTangents=function(e){for(var t=[],n,r,i,s,o=Mn.LineInternals._lineFiniteDifferences(e),u=-1,a=e.length-1;++u<a;)n=Mn.LineInternals._lineSlope(e[u],e[u+1]),1e-6>Math.abs(n)?o[u]=o[u+1]=0:(r=o[u]/n,i=o[u+1]/n,s=r*r+i*i,9<s&&(s=3*n/Math.sqrt(s),o[u]=s*r,o[u+1]=s*i));for(u=-1;++u<=a;)s=(e[zr.min(a,u+1)][0]-e[zr.max(0,u-1)][0])/(6*(1+o[u]*o[u])),t.push([Math.isFinite(s)?s:0,Math.isFinite(s*=o[u])?s:0]);return t},Mn.LineInternals._lineHermite=function(e,t){if(1>t.length||e.length!=t.length&&e.length!=t.length+2)return Mn.LineInternals.interpolatePoints(e,Mn.LineInterpolator.Linear);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;n&&(r+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],i=e[1],a=2);if(1<t.length){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1],i=2;for(o=t.length;i<o;)u=i++,s=e[a],u=t[u],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1],a++}return n&&(n=e[a],r+="Q"+(s[0]+2*u[0]/3)+","+(s[1]+2*u[1]/3)+","+n[0]+","+n[1]),r},Mn.LineInternals._lineCardinalTangents=function(e,t){for(var n=[],r=(1-t)/2,i=e[0],s=e[1],o=e[2],u=2,a=e.length;++u<a;)n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]),i=s,s=o,o=e[u];return n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]),n},Mn.LineInterpolator={__ename__:["thx","svg","LineInterpolator"],__constructs__:"Linear,Step,StepBefore,StepAfter,Basis,BasisOpen,BasisClosed,Cardinal,CardinalOpen,CardinalClosed,Monotone".split(",")},Mn.LineInterpolator.Linear=["Linear",0],Mn.LineInterpolator.Linear.toString=Sr,Mn.LineInterpolator.Linear.__enum__=Mn.LineInterpolator,Mn.LineInterpolator.Step=["Step",1],Mn.LineInterpolator.Step.toString=Sr,Mn.LineInterpolator.Step.__enum__=Mn.LineInterpolator,Mn.LineInterpolator.StepBefore=["StepBefore",2],Mn.LineInterpolator.StepBefore.toString=Sr,Mn.LineInterpolator.StepBefore.__enum__=Mn.LineInterpolator,Mn.LineInterpolator.StepAfter=["StepAfter",3],Mn.LineInterpolator.StepAfter.toString=Sr,Mn.LineInterpolator.StepAfter.__enum__=Mn.LineInterpolator,Mn.LineInterpolator.Basis=["Basis",4],Mn.LineInterpolator.Basis.toString=Sr,Mn.LineInterpolator.Basis.__enum__=Mn.LineInterpolator,Mn.LineInterpolator.BasisOpen=["BasisOpen",5],Mn.LineInterpolator.BasisOpen.toString=Sr,Mn.LineInterpolator.BasisOpen.__enum__=Mn.LineInterpolator,Mn.LineInterpolator.BasisClosed=["BasisClosed",6],Mn.LineInterpolator.BasisClosed.toString=Sr,Mn.LineInterpolator.BasisClosed.__enum__=Mn.LineInterpolator,Mn.LineInterpolator.Cardinal=function(e){return e=["Cardinal",7,e],e.__enum__=Mn.LineInterpolator,e.toString=Sr,e},Mn.LineInterpolator.CardinalOpen=function(e){return e=["CardinalOpen",8,e],e.__enum__=Mn.LineInterpolator,e.toString=Sr,e},Mn.LineInterpolator.CardinalClosed=function(e){return e=["CardinalClosed",9,e],e.__enum__=Mn.LineInterpolator,e.toString=Sr,e},Mn.LineInterpolator.Monotone=["Monotone",10],Mn.LineInterpolator.Monotone.toString=Sr,Mn.LineInterpolator.Monotone.__enum__=Mn.LineInterpolator,Mn.LineInterpolators=function(){},Er["thx.svg.LineInterpolators"]=Mn.LineInterpolators,Mn.LineInterpolators.__name__=["thx","svg","LineInterpolators"],Mn.LineInterpolators.parse=function(e,t){null==t&&(t=":");var n;switch(e.split(t)[0].toLowerCase()){case"basis":n=Mn.LineInterpolator.Basis;break;case"basisopen":n=Mn.LineInterpolator.BasisOpen;break;case"basisclosed":n=Mn.LineInterpolator.BasisClosed;break;case"cardinal":n=Mn.LineInterpolator.Cardinal(Mn.LineInterpolators.argument(e,t));break;case"cardinalopen":n=Mn.LineInterpolator.CardinalOpen(Mn.LineInterpolators.argument(e,t));break;case"cardinalclosed":n=Mn.LineInterpolator.CardinalClosed(Mn.LineInterpolators.argument(e,t));break;case"monotone":n=Mn.LineInterpolator.Monotone;break;case"step":n=Mn.LineInterpolator.Step;break;case"stepafter":n=Mn.LineInterpolator.StepAfter;break;case"stepbefore":n=Mn.LineInterpolator.StepBefore;break;default:n=Mn.LineInterpolator.Linear}return n},Mn.LineInterpolators.argument=function(e,t){var n=e.split(t)[1];return null==n?null:Qr.parseFloat(n)},Mn.PathGeoJson=function(){this.set_pointRadius(4.5),this.set_projection(new An.AlbersUsa),this.pathTypes=new Mn.PathTypes(this),this.centroidTypes=new Mn.CentroidTypes(this),this.areaTypes=new Mn.AreaTypes(this)},Er["thx.svg.PathGeoJson"]=Mn.PathGeoJson,Mn.PathGeoJson.__name__=["thx","svg","PathGeoJson"],Mn.PathGeoJson.circle=function(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"},Mn.PathGeoJson.bounds=function(e){var t=Math.POSITIVE_INFINITY,n=Math.POSITIVE_INFINITY,r=Math.NEGATIVE_INFINITY,i=Math.NEGATIVE_INFINITY;return Mn.PathGeoJson.applyBounds(e,function(e,s){e<t&&(t=e),e>r&&(r=e),s<n&&(n=s),s>i&&(i=s)}),[[t,n],[r,i]]},Mn.PathGeoJson.applyBounds=function(e,t){switch(e.type){case"Feature":Mn.PathGeoJson.applyBounds(e.geometry,t);break;case"FeatureCollection":for(var n=0,r=e.features;n<r.length;){var i=r[n];++n,Mn.PathGeoJson.applyBounds(i.geometry,t)}break;case"LineString":case"MultiPoint":i=e.coordinates;for(n=0;n<i.length;){var s=i[n];++n,t(s[0],s[1])}break;case"MultiLineString":i=e.coordinates;for(n=0;n<i.length;){s=i[n],++n;for(r=0;r<s.length;){var o=s[r];++r,t(o[0],o[1])}}break;case"MultiPolygon":i=e.coordinates;for(n=0;n<i.length;){s=i[n],++n,r=0;for(s=s[0];r<s.length;)o=s[r],++r,t(o[0],o[1])}break;case"Point":i=e.coordinates,t(i[0],i[1]);break;case"Polygon":i=e.coordinates,n=0;for(r=i[0];n<r.length;)s=r[n],++n,t(s[0],s[1]);break;default:throw new Tn.Error("invalid geomtry type '{0}'",null,e.type,{fileName:"PathGeoJson.hx",lineNumber:113,className:"thx.svg.PathGeoJson",methodName:"applyBounds"})}},Mn.PathGeoJson.prototype={set_projection:function(e){return this.projection=e},set_pointRadius:function(e){return this.pointRadius=e,this.pathCircle=Mn.PathGeoJson.circle(e),e},area:function(e){return this.areaTypes.area(e)},centroid:function(e){return this.centroidTypes.centroid(e)},path:function(e){return this.pathTypes.path(e)},areaTypes:null,centroidTypes:null,pathTypes:null,pathCircle:null,projection:null,pointRadius:null,__class__:Mn.PathGeoJson,__properties__:{set_pointRadius:"set_pointRadius",set_projection:"set_projection"}},Mn.PathTypes=function(e){this.geo=e},Er["thx.svg.PathTypes"]=Mn.PathTypes,Mn.PathTypes.__name__=["thx","svg","PathTypes"],Mn.PathTypes.prototype={project:function(e){return this.geo.projection.project(e).join(",")},geometryCollection:function(e){for(var t=[],n=0,e=e.geometries;n<e.length;){var r=e[n];++n,t.push(this.path(r))}return t.join("")},multiPolygon:function(e){for(var t=[],e=e.coordinates,n=0;n<e.length;){var r=e[n];++n;for(var i=0;i<r.length;){var s=r[i];++i,t.push("M");for(var o=0;o<s.length;){var u=s[o];++o,t.push(this.project(u)),t.push("L")}t[t.length-1]="Z"}}return t.join("")},polygon:function(e){for(var t=[],e=e.coordinates,n=0;n<e.length;){var r=e[n];++n,t.push("M");for(var i=0,s=r.length;i<s;){var o=i++;t.push(this.project(r[o])),t.push("L")}t[t.length-1]="Z"}return t.join("")},multiLineString:function(e){for(var t=[],e=e.coordinates,n=0;n<e.length;){var r=e[n];++n,t.push("M");for(var i=0,s=r.length;i<s;){var o=i++;t.push(this.project(r[o])),t.push("L")}t.pop()}return t.join("")},lineString:function(e){for(var t=[],e=e.coordinates,n=0,r=e.length;n<r;){var i=n++;t.push(this.project(e[i]))}return"M"+t.join("L")},multiPoint:function(e){for(var t=[],e=e.coordinates,n=0,r=e.length;n<r;){var i=n++;t.push("M"+this.project(e[i])+this.geo.pathCircle)}return t.join("")},point:function(e){return"M"+this.project(e.coordinates)+this.geo.pathCircle},feature:function(e){return this.path(e.geometry)},featureCollection:function(e){for(var t=[],e=e.features,n=0,r=e.length;n<r;){var i=n++;t.push(this.path(e[i].geometry))}return t.join("")},path:function(e){var t=Kr.field(this,Zr.lcfirst(e.type));return null==t?"":t.apply(this,[e])},geo:null,__class__:Mn.PathTypes},Mn.AreaTypes=function(e){this.geo=e},Er["thx.svg.AreaTypes"]=Mn.AreaTypes,Mn.AreaTypes.__name__=["thx","svg","AreaTypes"],Mn.AreaTypes.prototype={project:function(e){return this.geo.projection.project(e)},parea:function(e){return Math.abs((new Dn.Polygon(e.map(wr(this,this.project)))).area())},polygonArea:function(e){for(var t=this.parea(e[0]),n=1,r=e.length;n<r;)var i=n++,t=t-this.parea(e[i]);return t},geometryCollection:function(e){for(var t=0,n=0,e=e.geometries;n<e.length;){var r=e[n];++n,t+=this.area(r)}return t},multiPolygon:function(e){for(var t=0,e=e.coordinates,n=0;n<e.length;){var r=e[n];++n,t+=this.polygonArea(r)}return t},polygon:function(e){return this.polygonArea(e.coordinates)},multiLineString:function(){return 0},lineString:function(){return 0},multiPoint:function(){return 0},point:function(){return 0},feature:function(e){return this.area(e.geometry)},featureCollection:function(e){for(var t=0,n=0,e=e.features;n<e.length;){var r=e[n];++n,t+=this.area(r.geometry)}return t},area:function(e){var t=Kr.field(this,Zr.lcfirst(e.type));return null==t?0:t.apply(this,[e])},geo:null,__class__:Mn.AreaTypes},Mn.CentroidTypes=function(e){this.geo=e},Er["thx.svg.CentroidTypes"]=Mn.CentroidTypes,Mn.CentroidTypes.__name__=["thx","svg","CentroidTypes"],Mn.CentroidTypes.prototype={project:function(e){return this.geo.projection.project(e)},polygonCentroid:function(e){for(var t=new Dn.Polygon(e[0].map(wr(this,this.project))),n=t.centroid(1),r=n[0],i=n[1],s=Math.abs(t.area()),o=1,u=e.length;o<u;)t=o++,t=new Dn.Polygon(e[t].map(wr(this,this.project))),n=t.centroid(1),r-=n[0],i-=n[1],s-=Math.abs(t.area());return[r,i,6*s]},multiPolygon:function(e){for(var t=0,n=0,r=0,i,e=e.coordinates,s=0;s<e.length;)i=e[s],++s,i=this.polygonCentroid(i),t+=i[0],n+=i[1],r+=i[2];return[t/r,n/r]},polygon:function(e){return e=this.polygonCentroid(e.coordinates),[e[0]/e[2],e[1]/e[2]]},feature:function(e){return this.centroid(e.geometry)},point:function(e){return this.project(e.coordinates)},centroid:function(e){var t=Kr.field(this,Zr.lcfirst(e.type));return null==t?[0,0]:t.apply(this,[e])},geo:null,__class__:Mn.CentroidTypes},Mn.Symbol=function(){},Er["thx.svg.Symbol"]=Mn.Symbol,Mn.Symbol.__name__=["thx","svg","Symbol"],Mn.Symbol.triangleDown=function(e){var e=Math.sqrt(e/Mn.Symbol.sqrt3),t=e*Mn.Symbol.sqrt3/2;return"M0,"+t+"L"+e+","+ -t+" "+ -e+","+ -t+"Z"},Mn.Symbol.triangleUp=function(e){var e=Math.sqrt(e/Mn.Symbol.sqrt3),t=e*Mn.Symbol.sqrt3/2;return"M0,"+ -t+"L"+e+","+t+" "+ -e+","+t+"Z"},Mn.Symbol.square=function(e){return e=Math.sqrt(e)/2,"M"+ -e+","+ -e+"L"+e+","+ -e+" "+e+","+e+" "+ -e+","+e+"Z"},Mn.Symbol.diamond=function(e){var e=Math.sqrt(e/(2*Mn.Symbol.tan30)),t=e*Mn.Symbol.tan30;return"M0,"+ -e+"L"+t+",0 0,"+e+" "+ -t+",0Z"},Mn.Symbol.cross=function(e){return e=Math.sqrt(e/5)/2,"M"+ -3*e+","+ -e+"H"+ -e+"V"+ -3*e+"H"+e+"V"+ -e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+ -e+"V"+e+"H"+ -3*e+"Z"},Mn.Symbol.circle=function(e){return e=Math.sqrt(e/Math.PI),"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+ -e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"},Mn.Symbol.arrowUp=function(e){return e=Math.sqrt(e/2),"M"+ -e+",0h"+e/2+"v"+e+"h"+e+"v"+ -e+"h"+e/2+"l"+ -e+","+ -e+"Z"},Mn.Symbol.arrowDown=function(e){return e=Math.sqrt(e/2),"M"+ -e+",0h"+e/2+"v"+ -e+"h"+e+"v"+e+"h"+e/2+"l"+ -e+","+e+"Z"},Mn.Symbol.arrowDownWide=function(e){return e=Math.sqrt(e/2.5),"M"+ -e+",0h"+e/4+"v"+ -e+"h"+1.5*e+"v"+e+"h"+e/4+"l"+ -e+","+e+"Z"},Mn.Symbol.arrowRight=function(e){return e=Math.sqrt(e/2),"M0,"+ -e+"v"+e/2+"h"+ -e+"v"+e+"h"+e+"v"+e/2+"l"+e+","+ -e+"Z"},Mn.Symbol.arrowLeft=function(e){return e=Math.sqrt(e/2),"M0,"+ -e+"v"+e/2+"h"+e+"v"+e+"h"+ -e+"v"+e/2+"l"+ -e+","+ -e+"Z"},Mn.Symbol.star=function(e){return e=Math.sqrt(e/.31027)/2,"M0,"+ -e+"L"+.236*e+","+ -0.325*e+" "+.951*e+","+ -0.309*e+" "+.382*e+","+.124*e+" "+.588*e+","+.809*e+" "+0*e+","+.401*e+" "+ -0.588*e+","+.809*e+" "+ -0.382*e+","+.124*e+" "+ -0.951*e+","+ -0.309*e+" "+ -0.236*e+","+ -0.325*e+" Z"},Fn={ITranslation:function(){}},Er["thx.translation.ITranslation"]=Fn.ITranslation,Fn.ITranslation.__name__=["thx","translation","ITranslation"],Fn.ITranslation.prototype={plural:null,singular:null,__class__:Fn.ITranslation},On.MacroVersion=function(){},Er["thx.util.MacroVersion"]=On.MacroVersion,On.MacroVersion.__name__=["thx","util","MacroVersion"],On.Result={__ename__:["thx","util","Result"],__constructs__:["Ok","Failure"]},On.Result.Ok=["Ok",0],On.Result.Ok.toString=Sr,On.Result.Ok.__enum__=On.Result,On.Result.Failure=function(e){return e=["Failure",1,e],e.__enum__=On.Result,e.toString=Sr,e},In={IValidator:function(){}},Er["thx.validation.IValidator"]=In.IValidator,In.IValidator.__name__=["thx","validation","IValidator"],In.IValidator.prototype={isValid:null,validate:null,__class__:In.IValidator};var rs;"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,t){void 0===t&&(t=0),0>t&&(t+=this.length),0>t&&(t=0);for(var n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(e,t){void 0===t&&(t=this.length-1),0>t&&(t+=this.length),t>this.length-1&&(t=this.length-1);for(t++;0<t--;)if(t in this&&this[t]===e)return t;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(e,t){for(var n=0,r=this.length;n<r;n++)n in this&&e.call(t,this[n],n,this)}),"map"in Array.prototype||(Array.prototype.map=function(e,t){for(var n=Array(this.length),r=0,i=this.length;r<i;r++)r in this&&(n[r]=e.call(t,this[r],r,this));return n}),"filter"in Array.prototype||(Array.prototype.filter=function(e,t){for(var n=[],r,i=0,s=this.length;i<s;i++)i in this&&e.call(t,r=this[i],i,this)&&n.push(r);return n}),"every"in Array.prototype||(Array.prototype.every=function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0});var is=new Cr;kr.EMPTY=is.getBytes(),Array.prototype.indexOf&&(Fr.remove=function(e,t){var n=e.indexOf(t);return-1==n?!1:(e.splice(n,1),!0)}),Math.__name__=["Math"],Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Er.Math=Math,Math.isFinite=function(e){return isFinite(e)},Math.isNaN=function(e){return isNaN(e)},String.prototype.__class__=Er.String=String,String.__name__=["String"],Array.prototype.__class__=Er.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=Er.Date=Date,Date.__name__=["Date"];var ss=Er.Int={__name__:["Int"]},os=Er.Dynamic={__name__:["Dynamic"]},us=Er.Float=Number;us.__name__=["Float"];var as=Boolean;as.__ename__=["Bool"];var fs=Er.Class={__name__:["Class"]},ls={},cs=ki.userAgent(),hs=ki.hasNavigator(),ps;ki.host=hs?"undefined"!=typeof module&&module.exports?Ti.NodeJs:(ps=new Or("MSIE(?:/| )(\\S*);","")).match(cs)?Ti.IE(ps.matched(1)):(ps=new Or("Firefox(?:/| )(\\S*)","")).match(cs)?Ti.Firefox(ps.matched(1)):(ps=new Or("Chrome(?:/| )(\\S*)","")).match(cs)?Ti.Chrome(ps.matched(1)):(ps=new Or("Version(?:/| )(\\S*) Safari(?:/| )(\\S*)","")).match(cs)?Ti.Safari(ps.matched(1)):(ps=new Or("Opera(?:/| )(\\S*)","")).match(cs)?Ti.Opera(ps.matched(1)):Ti.Unknown(cs):Ti.UnknownServer,ki.os=hs?(ps=new Or("Windows NT\\s+(\\d+\\.\\d+)","")).match(cs)?function(){var e;switch(ps.matched(1)){case"5.1":e="XP";break;case"5.2":e="2003/XP x64";break;case"6.0":e="Vista";break;case"6.1":e="7";break;case"6.2":e="8";break;default:e="unknown"}return Ci.Windows(e)}(this):(new Or("Mac OS X","")).match(cs)?Ci.Mac:(new Or("(iPhone|iPad|iPod)","")).match(cs)?Ci.IOs:(new Or("Linux","")).match(cs)?Ci.Linux:(new Or("Android","")).match(cs)?Ci.Android:Ci.UnknownOs:Ci.UnknownOs,ki.environment=function(e){var t;switch(ki.host[1]){case 0:t=Ni.Server;break;case 1:t=Ni.Server;break;case 2:case 6:case 3:t=Ni.Desktop;break;case 4:t=function(){var e;switch(ki.os[1]){case 1:e=Ni.Mobile;break;default:e=Ni.Desktop}return e}(e);break;case 5:t=function(){var e;switch(ki.os[1]){case 2:e=Ni.Mobile;break;default:e=Ni.Desktop}return e}(e);break;case 7:t=function(){var e;switch(ki.os[1]){case 5:e=Ni.UnknownEnvironment;break;default:e=Ni.Desktop}return e}(e)}return t}(this),"undefined"!=typeof document&&(fr.document=document),"undefined"!=typeof window&&(fr.window=window,fr.window.onerror=function(e,t,n){var r=fr.onerror;return null==r?!1:r(e,[t+":"+n])}),function(){function e(e,t,n,r,i,s){for(var i=0,o=r.length;i<o;i++){var u=r[i];if(u){for(var a=!1,u=u[e];u;){if(u.sizcache===n){a=r[u.sizset];break}1===u.nodeType&&!s&&(u.sizcache=n,u.sizset=i);if(u.nodeName.toLowerCase()===t){a=u;break}u=u[e]}r[i]=a}}}function t(e,t,n,r,i,s){for(var i=0,o=r.length;i<o;i++){var u=r[i];if(u){for(var a=!1,u=u[e];u;){if(u.sizcache===n){a=r[u.sizset];break}if(1===u.nodeType){s||(u.sizcache=n,u.sizset=i);if("string"!=typeof t){if(u===t){a=!0;break}}else if(0<f.filter(t,[u]).length){a=u;break}}u=u[e]}r[i]=a}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=0,i=Object.prototype.toString,s=!1,o=!0,u=/\\/g,a=/\W/;[0,0].sort(function(){return o=!1,0});var f=function(e,t,r,s){var r=r||[],o=t=t||document;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return r;var u,a,h,p,v,m=!0,g=f.isXML(t),b=[],w=e;do if(n.exec(""),u=n.exec(w))if(w=u[3],b.push(u[1]),u[2]){p=u[3];break}while(u);if(1<b.length&&c.exec(e))if(2===b.length&&l.relative[b[0]])a=y(b[0]+b[1],t);else for(a=l.relative[b[0]]?[t]:f(b.shift(),t);b.length;)e=b.shift(),l.relative[e]&&(e+=b.shift()),a=y(e,a);else if(!s&&1<b.length&&9===t.nodeType&&!g&&l.match.ID.test(b[0])&&!l.match.ID.test(b[b.length-1])&&(u=f.find(b.shift(),t,g),t=u.expr?f.filter(u.expr,u.set)[0]:u.set[0]),t){u=s?{expr:b.pop(),set:d(s)}:f.find(b.pop(),1!==b.length||"~"!==b[0]&&"+"!==b[0]||!t.parentNode?t:t.parentNode,g),a=u.expr?f.filter(u.expr,u.set):u.set;for(0<b.length?h=d(a):m=!1;b.length;)u=v=b.pop(),l.relative[v]?u=b.pop():v="",null==u&&(u=t),l.relative[v](h,u,g)}else h=[];h||(h=a),h||f.error(v||e);if("[object Array]"===i.call(h))if(m)if(t&&1===t.nodeType)for(e=0;null!=h[e];e++)h[e]&&(!0===h[e]||1===h[e].nodeType&&f.contains(t,h[e]))&&r.push(a[e]);else for(e=0;null!=h[e];e++)h[e]&&1===h[e].nodeType&&r.push(a[e]);else r.push.apply(r,h);else d(h,r);return p&&(f(p,o,r,s),f.uniqueSort(r)),r};f.uniqueSort=function(e){if(m&&(s=o,e.sort(m),s))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},f.matches=function(e,t){return f(e,null,null,t)},f.matchesSelector=function(e,t){return 0<f(t,null,null,[e]).length},f.find=function(e,t,n){var r;if(!e)return[];for(var i=0,s=l.order.length;i<s;i++){var o,a=l.order[i];if(o=l.leftMatch[a].exec(e)){var f=o[1];o.splice(1,1);if("\\"!==f.substr(f.length-1)&&(o[1]=(o[1]||"").replace(u,""),r=l.find[a](o,t,n),null!=r)){e=e.replace(l.match[a],"");break}}}return r||(r="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:r,expr:e}},f.filter=function(e,t,n,r){for(var i,s,o=e,u=[],a=t,c=t&&t[0]&&f.isXML(t[0]);e&&t.length;){for(var h in l.filter)if(null!=(i=l.leftMatch[h].exec(e))&&i[2]){var p,d,v=l.filter[h];d=i[1],s=!1,i.splice(1,1
);if("\\"!==d.substr(d.length-1)){a===u&&(u=[]);if(l.preFilter[h])if(i=l.preFilter[h](i,a,n,u,r,c)){if(!0===i)continue}else s=p=!0;if(i)for(var m=0;null!=(d=a[m]);m++)if(d){p=v(d,i,m,a);var g=r^!!p;n&&null!=p?g?s=!0:a[m]=!1:g&&(u.push(d),s=!0)}if(void 0!==p){n||(a=u),e=e.replace(l.match[h],"");if(!s)return[];break}}}if(e===o){if(null!=s)break;f.error(e)}o=e}return a},f.error=function(e){throw"Syntax error, unrecognized expression: "+e};var l=f.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n="string"==typeof t,r=n&&!a.test(t),n=n&&!r;r&&(t=t.toLowerCase());for(var r=0,i=e.length,s;r<i;r++)if(s=e[r]){for(;(s=s.previousSibling)&&1!==s.nodeType;);e[r]=n||s&&s.nodeName.toLowerCase()===t?s||!1:s===t}n&&f.filter(t,e,!0)},">":function(e,t){var n,r="string"==typeof t,i=0,s=e.length;if(r&&!a.test(t)){for(t=t.toLowerCase();i<s;i++)if(n=e[i])n=n.parentNode,e[i]=n.nodeName.toLowerCase()===t?n:!1}else{for(;i<s;i++)(n=e[i])&&(e[i]=r?n.parentNode:n.parentNode===t);r&&f.filter(t,e,!0)}},"":function(n,i,s){var o,u=r++,f=t;"string"==typeof i&&!a.test(i)&&(o=i=i.toLowerCase(),f=e),f("parentNode",i,u,n,o,s)},"~":function(n,i,s){var o,u=r++,f=t;"string"==typeof i&&!a.test(i)&&(o=i=i.toLowerCase(),f=e),f("previousSibling",i,u,n,o,s)}},find:{ID:function(e,t,n){if("undefined"!=typeof t.getElementById&&!n)return(e=t.getElementById(e[1]))&&e.parentNode?[e]:[]},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var n=[],r=t.getElementsByName(e[1]),i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return 0===n.length?null:n}},TAG:function(e,t){if("undefined"!=typeof t.getElementsByTagName)return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(u,"")+" ";if(s)return e;for(var s=0,o;null!=(o=t[s]);s++)o&&(i^(o.className&&0<=(" "+o.className+" ").replace(/[\t\n\r]/g," ").indexOf(e))?n||r.push(o):n&&(t[s]=!1));return!1},ID:function(e){return e[1].replace(u,"")},TAG:function(e){return e[1].replace(u,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||f.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&f.error(e[0]);return e[0]=r++,e},ATTR:function(e,t,n,r,i,s){return t=e[1]=e[1].replace(u,""),!s&&l.attrMap[t]&&(e[1]=l.attrMap[t]),e[4]=(e[4]||e[5]||"").replace(u,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,r,i,s){if("not"===e[1]){if(!(1<(n.exec(e[3])||"").length||/^\w/.test(e[3])))return e=f.filter(e[3],t,r,1^s),r||i.push.apply(i,e),!1;e[3]=f(e[3],null,null,t)}else if(l.match.POS.test(e[0])||l.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return!1===e.disabled&&"hidden"!==e.type},disabled:function(e){return!0===e.disabled},checked:function(e){return!0===e.checked},selected:function(e){return!0===e.selected},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!f(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),e=e.type;return"text"===e&&(t===e||null===t)},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||"button"===e.nodeName.toLowerCase()},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return 0===t%2},odd:function(e,t){return 1===t%2},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=l.filters[i];if(s)return s(e,n,t,r);if("contains"===i)return 0<=(e.textContent||e.innerText||f.getText([e])||"").indexOf(t[3]);if("not"===i){t=t[3],n=0;for(r=t.length;n<r;n++)if(t[n]===e)return!1;return!0}f.error(i)},CHILD:function(e,t){var n=t[1],r=e;switch(n){case"only":case"first":for(;r=r.previousSibling;)if(1===r.nodeType)return!1;if("first"===n)return!0;r=e;case"last":for(;r=r.nextSibling;)if(1===r.nodeType)return!1;return!0;case"nth":var n=t[2],i=t[3];if(1===n&&0===i)return!0;var s=t[0],o=e.parentNode;if(o&&(o.sizcache!==s||!e.nodeIndex)){for(var u=0,r=o.firstChild;r;r=r.nextSibling)1===r.nodeType&&(r.nodeIndex=++u);o.sizcache=s}return r=e.nodeIndex-i,0===n?0===r:0===r%n&&0<=r/n}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||e.nodeName.toLowerCase()===t},CLASS:function(e,t){return-1<(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)},ATTR:function(e,t){var n=t[1],n=l.attrHandle[n]?l.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),r=n+"",i=t[2],s=t[4];return null==n?"!="===i:"="===i?r===s:"*="===i?0<=r.indexOf(s):"~="===i?0<=(" "+r+" ").indexOf(s):s?"!="===i?r!==s:"^="===i?0===r.indexOf(s):"$="===i?r.substr(r.length-s.length)===s:"|="===i?r===s||r.substr(0,s.length+1)===s+"-":!1:r&&!1!==n},POS:function(e,t,n,r){var i=l.setFilters[t[2]];if(i)return i(e,n,t,r)}}},c=l.match.POS,h=function(e,t){return"\\"+(t-0+1)},p;for(p in l.match)l.match[p]=RegExp(l.match[p].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[p]=RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[p].source.replace(/\\(\d+)/g,h));var d=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(v){d=function(e,t){var n=0,r=t||[];if("[object Array]"===i.call(e))Array.prototype.push.apply(r,e);else if("number"==typeof e.length)for(var s=e.length;n<s;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var m,g;document.documentElement.compareDocumentPosition?m=function(e,t){return e===t?(s=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(m=function(e,t){var n,r,i=[],o=[];n=e.parentNode,r=t.parentNode;var u=n;if(e===t)return s=!0,0;if(n===r)return g(e,t);if(!n)return-1;if(!r)return 1;for(;u;)i.unshift(u),u=u.parentNode;for(u=r;u;)o.unshift(u),u=u.parentNode;n=i.length,r=o.length;for(u=0;u<n&&u<r;u++)if(i[u]!==o[u])return g(i[u],o[u]);return u===n?g(e,o[u],-1):g(i[u],t,1)},g=function(e,t,n){if(e===t)return n;for(e=e.nextSibling;e;){if(e===t)return-1;e=e.nextSibling}return 1}),f.getText=function(e){for(var t="",n,r=0;e[r];r++)n=e[r],3===n.nodeType||4===n.nodeType?t+=n.nodeValue:8!==n.nodeType&&(t+=f.getText(n.childNodes));return t},function(){var e=document.createElement("div"),t="script"+(new Date).getTime(),n=document.documentElement;e.innerHTML="<a name='"+t+"'/>",n.insertBefore(e,n.firstChild),document.getElementById(t)&&(l.find.ID=function(e,t,n){if("undefined"!=typeof t.getElementById&&!n)return(t=t.getElementById(e[1]))?t.id===e[1]||"undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id").nodeValue===e[1]?[t]:void 0:[]},l.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=document.createElement("div");e.appendChild(document.createComment("")),0<e.getElementsByTagName("*").length&&(l.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var r=[],i=0;n[i];i++)1===n[i].nodeType&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(l.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),document.querySelectorAll&&function(){var e=f,t=document.createElement("div");t.innerHTML="<p class='TEST'></p>";if(!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){f=function(t,n,r,i){n=n||document;if(!i&&!f.isXML(n)){var s=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(s&&(1===n.nodeType||9===n.nodeType)){if(s[1])return d(n.getElementsByTagName(t),r);if(s[2]&&l.find.CLASS&&n.getElementsByClassName)return d(n.getElementsByClassName(s[2]),r)}if(9===n.nodeType){if("body"===t&&n.body)return d([n.body],r);if(s&&s[3]){var o=n.getElementById(s[3]);if(!o||!o.parentNode)return d([],r);if(o.id===s[3])return d([o],r)}try{return d(n.querySelectorAll(t),r)}catch(u){}}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var s=n,a=(o=n.getAttribute("id"))||"__sizzle__",c=n.parentNode,h=/^\s*[+~]/.test(t);o?a=a.replace(/'/g,"\\$&"):n.setAttribute("id",a),h&&c&&(n=n.parentNode);try{if(!h||c)return d(n.querySelectorAll("[id='"+a+"'] "+t),r)}catch(p){}finally{o||s.removeAttribute("id")}}}return e(t,n,r,i)};for(var n in e)f[n]=e[n];t=null}}(),function(){var e=document.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(document.createElement("div"),"div"),r=!1;try{t.call(document.documentElement,"[test!='']:sizzle")}catch(i){r=!0}f.matchesSelector=function(e,i){i=i.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!f.isXML(e))try{if(r||!l.match.PSEUDO.test(i)&&!/!=/.test(i)){var s=t.call(e,i);if(s||!n||e.document&&11!==e.document.nodeType)return s}}catch(o){}return 0<f(i,null,null,[e]).length}}}(),function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length)&&(l.order.splice(1,0,"CLASS"),l.find.CLASS=function(e,t,n){if("undefined"!=typeof t.getElementsByClassName&&!n)return t.getElementsByClassName(e[1])},e=null)}(),f.contains=document.documentElement.contains?function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:document.documentElement.compareDocumentPosition?function(e,t){return!!(e.compareDocumentPosition(t)&16)}:function(){return!1},f.isXML=function(e){return(e=(e?e.ownerDocument||e:0).documentElement)?"HTML"!==e.nodeName:!1};var y=function(e,t){for(var n,r=[],i="",s=t.nodeType?[t]:t;n=l.match.PSEUDO.exec(e);)i+=n[0],e=e.replace(l.match.PSEUDO,"");e=l.relative[e]?e+"*":e,n=0;for(var o=s.length;n<o;n++)f(e,s[n],r);return f.filter(i,r)};window.Sizzle=f}();var ds=Fi.getSizzle();Ii=ds,Ii.select=ds,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)};var vs;if(window.XMLHttpRequest)vs=XMLHttpRequest;else{var ms;if(!window.ActiveXObject)throw"Unable to create XMLHttpRequest object.";ms=function(){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw"Unable to create XMLHttpRequest object."}}},vs=ms}lr=vs;var gs,ys=window.navigator.appName;gs="Microsoft Internet Explorer"==ys?30:"Netscape"!=ys?26:28;switch(gs){case 30:Rn.defaultAm=2;break;case 28:Rn.defaultAm=3;break;case 26:Rn.defaultAm=1;break;default:throw"bad dbits value"}Rn.DB=gs,Rn.DM=(1<<Rn.DB)-1,Rn.DV=1<<Rn.DB,Rn.BI_FP=52,Rn.FV=Math.pow(2,Rn.BI_FP),Rn.F1=Rn.BI_FP-Rn.DB,Rn.F2=2*Rn.DB-Rn.BI_FP,Rn.initBiRc(),Rn.BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",Rn.lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Rn.lplim=67108864/Rn.lowprimes[Rn.lowprimes.length-1]|0;var bs=window.ReportGrid?window.ReportGrid:window.ReportGrid={};bs.$=bs.$||{},bs.$.pk=bs.$.pk||{},bs.$.pk.rg_query_BaseQuery=bs.$.pk.rg_query_BaseQuery||Y,bs.$.pk.rg_query_Query=bs.$.pk.rg_query_Query||G,et.SymbolCache.cache=new et.SymbolCache,y.layoutDefault=new Br,y.layoutType=new Br,y.layoutArgs=new Br,y.layoutDefault.set("barchart","cartesian"),y.layoutDefault.set("funnelchart","simple"),y.layoutDefault.set("geo","simple"),y.layoutDefault.set("heatgrid","cartesian"),y.layoutDefault.set("linechart","cartesian"),y.layoutDefault.set("piechart","simple"),y.layoutDefault.set("sankey","simple"),y.layoutDefault.set("scattergraph","cartesian"),y.layoutDefault.set("streamgraph","x"),y.layoutType.set("cartesian",o),y.layoutType.set("simple",a),y.layoutType.set("x",f),kn.NamedColors.byName=new Br,kn.NamedColors.byName.set("aliceblue",kn.NamedColors.aliceblue=kn.Rgb.fromInt(15792383)),kn.NamedColors.byName.set("alice blue",kn.NamedColors.aliceblue),kn.NamedColors.byName.set("antiquewhite",kn.NamedColors.antiquewhite=kn.Rgb.fromInt(16444375)),kn.NamedColors.byName.set("antique white",kn.NamedColors.antiquewhite),kn.NamedColors.byName.set("aqua",kn.NamedColors.aqua=kn.Rgb.fromInt(65535)),kn.NamedColors.byName.set("aquamarine",kn.NamedColors.aquamarine=kn.Rgb.fromInt(8388564)),kn.NamedColors.byName.set("azure",kn.NamedColors.azure=kn.Rgb.fromInt(15794175)),kn.NamedColors.byName.set("beige",kn.NamedColors.beige=kn.Rgb.fromInt(16119260)),kn.NamedColors.byName.set("bisque",kn.NamedColors.bisque=kn.Rgb.fromInt(16770244)),kn.NamedColors.byName.set("black",kn.NamedColors.black=kn.Rgb.fromInt(0)),kn.NamedColors.byName.set("blanchedalmond",kn.NamedColors.blanchedalmond=kn.Rgb.fromInt(16772045)),kn.NamedColors.byName.set("blanched almond",kn.NamedColors.blanchedalmond),kn.NamedColors.byName.set("blue",kn.NamedColors.blue=kn.Rgb.fromInt(255)),kn.NamedColors.byName.set("blueviolet",kn.NamedColors.blueviolet=kn.Rgb.fromInt(9055202)),kn.NamedColors.byName.set("blue violet",kn.NamedColors.blueviolet),kn.NamedColors.byName.set("brown",kn.NamedColors.brown=kn.Rgb.fromInt(10824234)),kn.NamedColors.byName.set("burlywood",kn.NamedColors.burlywood=kn.Rgb.fromInt(14596231)),kn.NamedColors.byName.set("burly wood",kn.NamedColors.burlywood),kn.NamedColors.byName.set("cadetblue",kn.NamedColors.cadetblue=kn.Rgb.fromInt(6266528)),kn.NamedColors.byName.set("cadet blue",kn.NamedColors.cadetblue),kn.NamedColors.byName.set("chartreuse",kn.NamedColors.chartreuse=kn.Rgb.fromInt(8388352)),kn.NamedColors.byName.set("chart reuse",kn.NamedColors.chartreuse),kn.NamedColors.byName.set("chocolate",kn.NamedColors.chocolate=kn.Rgb.fromInt(13789470)),kn.NamedColors.byName.set("coral",kn.NamedColors.coral=kn.Rgb.fromInt(16744272)),kn.NamedColors.byName.set("cornflowerblue",kn.NamedColors.cornflowerblue=kn.Rgb.fromInt(6591981)),kn.NamedColors.byName.set("corn flower blue",kn.NamedColors.cornflowerblue),kn.NamedColors.byName.set("cornsilk",kn.NamedColors.cornsilk=kn.Rgb.fromInt(16775388)),kn.NamedColors.byName.set("corn silk",kn.NamedColors.cornsilk),kn.NamedColors.byName.set("crimson",kn.NamedColors.crimson=kn.Rgb.fromInt(14423100)),kn.NamedColors.byName.set("cyan",kn.NamedColors.cyan=kn.Rgb.fromInt(65535)),kn.NamedColors.byName.set("darkblue",kn.NamedColors.darkblue=kn.Rgb.fromInt(139)),kn.NamedColors.byName.set("dark blue",kn.NamedColors.darkblue),kn.NamedColors.byName.set("darkcyan",kn.NamedColors.darkcyan=kn.Rgb.fromInt(35723)),kn.NamedColors.byName.set("dark cyan",kn.NamedColors.darkcyan),kn.NamedColors.byName.set("darkgoldenrod",kn.NamedColors.darkgoldenrod=kn.Rgb.fromInt(12092939)),kn.NamedColors.byName.set("dark golden rod",kn.NamedColors.darkgoldenrod),kn.NamedColors.byName.set("darkgray",kn.NamedColors.darkgray=kn.NamedColors.darkgrey=kn.Rgb.fromInt(11119017)),kn.NamedColors.byName.set("dark gray",kn.NamedColors.darkgray),kn.NamedColors.byName.set("darkgrey",kn.NamedColors.darkgrey),kn.NamedColors.byName.set("dark grey",kn.NamedColors.darkgrey),kn.NamedColors.byName.set("darkgreen",kn.NamedColors.darkgreen=kn.Rgb.fromInt(25600)),kn.NamedColors.byName.set("dark green",kn.NamedColors.darkgreen),kn.NamedColors.byName.set("darkkhaki",kn.NamedColors.darkkhaki=kn.Rgb.fromInt(12433259)),kn.NamedColors.byName.set("dark khaki",kn.NamedColors.darkkhaki),kn.NamedColors.byName.set("darkmagenta",kn.NamedColors.darkmagenta=kn.Rgb.fromInt(9109643)),kn.NamedColors.byName.set("dark magenta",kn.NamedColors.darkmagenta),kn.NamedColors.byName.set("darkolivegreen",kn.NamedColors.darkolivegreen=kn.Rgb.fromInt(5597999)),kn.NamedColors.byName.set("dark olive green",kn.NamedColors.darkolivegreen),kn.NamedColors.byName.set("darkorange",kn.NamedColors.darkorange=kn.Rgb.fromInt(16747520)),kn.NamedColors.byName.set("dark orange",kn.NamedColors.darkorange),kn.NamedColors.byName.set("darkorchid",kn.NamedColors.darkorchid=kn.Rgb.fromInt(10040012)),kn.NamedColors.byName.set("dark orchid",kn.NamedColors.darkorchid),kn.NamedColors.byName.set("darkred",kn.NamedColors.darkred=kn.Rgb.fromInt(9109504)),kn.NamedColors.byName.set("dark red",kn.NamedColors.darkred),kn.NamedColors.byName.set("darksalmon",kn.NamedColors.darksalmon=kn.Rgb.fromInt(15308410)),kn.NamedColors.byName.set("dark salmon",kn.NamedColors.darksalmon),kn.NamedColors.byName.set("darkseagreen",kn.NamedColors.darkseagreen=kn.Rgb.fromInt(9419919)),kn.NamedColors.byName.set("dark sea green",kn.NamedColors.darkseagreen),kn.NamedColors.byName.set("darkslateblue",kn.NamedColors.darkslateblue=kn.Rgb.fromInt(4734347)),kn.NamedColors.byName.set("dark slate blue",kn.NamedColors.darkslateblue),kn.NamedColors.byName.set("darkslategray",kn.NamedColors.darkslategray=kn.NamedColors.darkslategrey=kn.Rgb.fromInt(3100495)),kn.NamedColors.byName.set("dark slate gray",kn.NamedColors.darkslategray),kn.NamedColors.byName.set("darkslategrey",kn.NamedColors.darkslategrey),kn.NamedColors.byName.set("dark slate grey",kn.NamedColors.darkslategrey),kn.NamedColors.byName.set("darkturquoise",kn.NamedColors.darkturquoise=kn.Rgb.fromInt(52945)),kn.NamedColors.byName.set("dark turquoise",kn.NamedColors.darkturquoise),kn.NamedColors.byName.set("darkviolet",kn.NamedColors.darkviolet=kn.Rgb.fromInt(9699539)),kn.NamedColors.byName.set("dark violet",kn.NamedColors.darkviolet),kn.NamedColors.byName.set("deeppink",kn.NamedColors.deeppink=kn.Rgb.fromInt(16716947)),kn.NamedColors.byName.set("deep pink",kn.NamedColors.deeppink),kn.NamedColors.byName.set("deepskyblue",kn.NamedColors.deepskyblue=kn.Rgb.fromInt(49151)),kn.NamedColors.byName.set("deep sky blue",kn.NamedColors.deepskyblue),kn.NamedColors.byName.set("dimgray",kn.NamedColors.dimgray=kn.NamedColors.dimgrey=kn.Rgb.fromInt(6908265)),kn.NamedColors.byName.set("dim grey",kn.NamedColors.dimgrey),kn.NamedColors.byName.set("dimgrey",kn.NamedColors.dimgrey),kn.NamedColors.byName.set("dim grey",kn.NamedColors.dimgrey),kn.NamedColors.byName.set("dodgerblue",kn.NamedColors.dodgerblue=kn.Rgb.fromInt(2003199)),kn.NamedColors.byName.set("dodger blue",kn.NamedColors.dodgerblue),kn.NamedColors.byName.set("firebrick",kn.NamedColors.firebrick=kn.Rgb.fromInt(11674146)),kn.NamedColors.byName.set("fire brick",kn.NamedColors.firebrick),kn.NamedColors.byName.set("floralwhite",kn.NamedColors.floralwhite=kn.Rgb.fromInt(16775920)),kn.NamedColors.byName.set("floral white",kn.NamedColors.floralwhite),kn.NamedColors.byName.set("forestgreen",kn.NamedColors.forestgreen=kn.Rgb.fromInt(2263842)),kn.NamedColors.byName.set("forest green",kn.NamedColors.forestgreen),kn.NamedColors.byName.set("fuchsia",kn.NamedColors.fuchsia=kn.Rgb.fromInt(16711935)),kn.NamedColors.byName.set("gainsboro",kn.NamedColors.gainsboro=kn.Rgb.fromInt(14474460)),kn.NamedColors.byName.set("ghostwhite",kn.NamedColors.ghostwhite=kn.Rgb.fromInt(16316671)),kn.NamedColors.byName.set("ghost white",kn.NamedColors.ghostwhite),kn.NamedColors.byName.set("gold",kn.NamedColors.gold=kn.Rgb.fromInt(16766720)),kn.NamedColors.byName.set("goldenrod",kn.NamedColors.goldenrod=kn.Rgb.fromInt(14329120)),kn.NamedColors.byName.set("golden rod",kn.NamedColors.goldenrod),kn.NamedColors.byName.set("gray",kn.NamedColors.gray=kn.NamedColors.grey=kn.Rgb.fromInt(8421504)),kn.NamedColors.byName.set("grey",kn.NamedColors.grey),kn.NamedColors.byName.set("green",kn.NamedColors.green=kn.Rgb.fromInt(32768)),kn.NamedColors.byName.set("greenyellow",kn.NamedColors.greenyellow=kn.Rgb.fromInt(11403055)),kn.NamedColors.byName.set("green yellow",kn.NamedColors.greenyellow),kn.NamedColors.byName.set("honeydew",kn.NamedColors.honeydew=kn.Rgb.fromInt(15794160)),kn.NamedColors.byName.set("honey dew",kn.NamedColors.honeydew),kn.NamedColors.byName.set("hotpink",kn.NamedColors.hotpink=kn.Rgb.fromInt(16738740)),kn.NamedColors.byName.set("hot pink",kn.NamedColors.hotpink),kn.NamedColors.byName.set("indianred",kn.NamedColors.indianred=kn.Rgb.fromInt(13458524)),kn.NamedColors.byName.set("indian red",kn.NamedColors.indianred),kn.NamedColors.byName.set("indigo",kn.NamedColors.indigo=kn.Rgb.fromInt(4915330)),kn.NamedColors.byName.set("ivory",kn.NamedColors.ivory=kn.Rgb.fromInt(16777200)),kn.NamedColors.byName.set("khaki",kn.NamedColors.khaki=kn.Rgb.fromInt(15787660)),kn.NamedColors.byName.set("lavender",kn.NamedColors.lavender=kn.Rgb.fromInt(15132410)),kn.NamedColors.byName.set("lavenderblush",kn.NamedColors.lavenderblush=kn.Rgb.fromInt(16773365)),kn.NamedColors.byName.set("lavender blush",kn.NamedColors.lavenderblush),kn.NamedColors.byName.set("lawngreen",kn.NamedColors.lawngreen=kn.Rgb.fromInt(8190976)),kn.NamedColors.byName.set("lawn green",kn.NamedColors.lawngreen),kn.NamedColors.byName.set("lemonchiffon",kn.NamedColors.lemonchiffon=kn.Rgb.fromInt(16775885)),kn.NamedColors.byName.set("lemon chiffon",kn.NamedColors.lemonchiffon),kn.NamedColors.byName.set("lightblue",kn.NamedColors.lightblue=kn.Rgb.fromInt(11393254)),kn.NamedColors.byName.set("light blue",kn.NamedColors.lightblue),kn.NamedColors.byName.set("lightcoral",kn.NamedColors.lightcoral=kn.Rgb.fromInt(15761536)),kn.NamedColors.byName.set("light coral",kn.NamedColors.lightcoral),kn.NamedColors.byName.set("lightcyan",kn.NamedColors.lightcyan=kn.Rgb.fromInt(14745599)),kn.NamedColors.byName.set("light cyan",kn.NamedColors.lightcyan),kn.NamedColors.byName.set("lightgoldenrodyellow",kn.NamedColors.lightgoldenrodyellow=kn.Rgb.fromInt(16448210)),kn.NamedColors.byName.set("light golden rod yellow",kn.NamedColors.lightgoldenrodyellow),kn.NamedColors.byName.set("lightgray",kn.NamedColors.lightgray=kn.NamedColors.lightgrey=kn.Rgb.fromInt(13882323)),kn.NamedColors.byName.set("light gray",kn.NamedColors.lightgray),kn.NamedColors.byName.set("lightgrey",kn.NamedColors.lightgrey),kn.NamedColors.byName.set("light grey",kn.NamedColors.lightgrey),kn.NamedColors.byName.set("lightgreen",kn.NamedColors.lightgreen=kn.Rgb.fromInt(9498256)),kn.NamedColors.byName.set("light green",kn.NamedColors.lightgreen),kn.NamedColors.byName.set("lightpink",kn.NamedColors.lightpink=kn.Rgb.fromInt(16758465)),kn.NamedColors.byName.set("light pink",kn.NamedColors.lightpink),kn.NamedColors.byName.set("lightsalmon",kn.NamedColors.lightsalmon=kn.Rgb.fromInt(16752762)),kn.NamedColors.byName.set("light salmon",kn.NamedColors.lightsalmon),kn.NamedColors.byName.set("lightseagreen",kn.NamedColors.lightseagreen=kn.Rgb.fromInt(2142890)),kn.NamedColors.byName.set("light sea green",kn.NamedColors.lightseagreen),kn.NamedColors.byName.set("lightskyblue",kn.NamedColors.lightskyblue=kn.Rgb.fromInt(8900346)),kn.NamedColors.byName.set("light sky blue",kn.NamedColors.lightskyblue),kn.NamedColors.byName.set("lightslategray",kn.NamedColors.lightslategray=kn.NamedColors.lightslategrey=kn.Rgb.fromInt(7833753)),kn.NamedColors.byName.set("light slate gray",kn.NamedColors.lightslategray),kn.NamedColors.byName.set("lightslategrey",kn.NamedColors.lightslategrey),kn.NamedColors.byName.set("light slate grey",kn.NamedColors.lightslategrey),kn.NamedColors.byName.set("lightsteelblue",kn.NamedColors.lightsteelblue=kn.Rgb.fromInt(11584734)),kn.NamedColors.byName.set("light steel blue",kn.NamedColors.lightsteelblue),kn.NamedColors.byName.set("lightyellow",kn.NamedColors.lightyellow=kn.Rgb.fromInt(16777184)),kn.NamedColors.byName.set("light yellow",kn.NamedColors.lightyellow),kn.NamedColors.byName.set("lime",kn.NamedColors.lime=kn.Rgb.fromInt(65280)),kn.NamedColors.byName.set("limegreen",kn.NamedColors.limegreen=kn.Rgb.fromInt(3329330)),kn.NamedColors.byName.set("lime green",kn.NamedColors.limegreen),kn.NamedColors.byName.set("linen",kn.NamedColors.linen=kn.Rgb.fromInt(16445670)),kn.NamedColors.byName.set("magenta",kn.NamedColors.magenta=kn.Rgb.fromInt(16711935)),kn.NamedColors.byName.set("maroon",kn.NamedColors.maroon=kn.Rgb.fromInt(8388608)),kn.NamedColors.byName.set("mediumaquamarine",kn.NamedColors.mediumaquamarine=kn.Rgb.fromInt(6737322)),kn.NamedColors.byName.set("mediuma quamarine",kn.NamedColors.mediumaquamarine),kn.NamedColors.byName.set("mediumblue",kn.NamedColors.mediumblue=kn.Rgb.fromInt(205)),kn.NamedColors.byName.set("medium blue",kn.NamedColors.mediumblue),kn.NamedColors.byName.set("mediumorchid",kn.NamedColors.mediumorchid=kn.Rgb.fromInt(12211667)),kn.NamedColors.byName.set("medium orchid",kn.NamedColors.mediumorchid),kn.NamedColors.byName.set("mediumpurple",kn.NamedColors.mediumpurple=kn.Rgb.fromInt(9662683)),kn.NamedColors.byName.set("medium purple",kn.NamedColors.mediumpurple),kn.NamedColors.byName.set("mediumseagreen",kn.NamedColors.mediumseagreen=kn.Rgb.fromInt(3978097)),kn.NamedColors.byName.set("medium sea green",kn.NamedColors.mediumseagreen),kn.NamedColors.byName.set("mediumslateblue",kn.NamedColors.mediumslateblue=kn.Rgb.fromInt(8087790)),kn.NamedColors.byName.set("medium slate blue",kn.NamedColors.mediumslateblue),kn.NamedColors.byName.set("mediumspringgreen",kn.NamedColors.mediumspringgreen=kn.Rgb.fromInt(64154)),kn.NamedColors.byName.set("medium spring green",kn.NamedColors.mediumspringgreen),kn.NamedColors.byName.set("mediumturquoise",kn.NamedColors.mediumturquoise=kn.Rgb.fromInt(4772300)),kn.NamedColors.byName.set("medium turquoise",kn.NamedColors.mediumturquoise),kn.NamedColors.byName.set("mediumvioletred",kn.NamedColors.mediumvioletred=kn.Rgb.fromInt(13047173)),kn.NamedColors.byName.set("medium violet red",kn.NamedColors.mediumvioletred),kn.NamedColors.byName.set("midnightblue",kn.NamedColors.midnightblue=kn.Rgb.fromInt(1644912)),kn.NamedColors.byName.set("midnight blue",kn.NamedColors.midnightblue),kn.NamedColors.byName.set("mintcream",kn.NamedColors.mintcream=kn.Rgb.fromInt(16121850)),kn.NamedColors.byName.set("mint cream",kn.NamedColors.mintcream),kn.NamedColors.byName.set("mistyrose",kn.NamedColors.mistyrose=kn.Rgb.fromInt(16770273)),kn.NamedColors.byName.set("misty rose",kn.NamedColors.mistyrose),kn.NamedColors.byName.set("moccasin",kn.NamedColors.moccasin=kn.Rgb.fromInt(16770229)),kn.NamedColors.byName.set("navajowhite",kn.NamedColors.navajowhite=kn.Rgb.fromInt(16768685)),kn.NamedColors.byName.set("navajo white",kn.NamedColors.navajowhite),kn.NamedColors.byName.set("navy",kn.NamedColors.navy=kn.Rgb.fromInt(128)),kn.NamedColors.byName.set("oldlace",kn.NamedColors.oldlace=kn.Rgb.fromInt(16643558)),kn.NamedColors.byName.set("old lace",kn.NamedColors.oldlace),kn.NamedColors.byName.set("olive",kn.NamedColors.olive=kn.Rgb.fromInt(8421376)),kn.NamedColors.byName.set("olivedrab",kn.NamedColors.olivedrab=kn.Rgb.fromInt(7048739)),kn.NamedColors.byName.set("olive drab",kn.NamedColors.olivedrab),kn.NamedColors.byName.set("orange",kn.NamedColors.orange=kn.Rgb.fromInt(16753920)),kn.NamedColors.byName.set("orangered",kn.NamedColors.orangered=kn.Rgb.fromInt(16729344)),kn.NamedColors.byName.set("orangered",kn.NamedColors.orangered),kn.NamedColors.byName.set("orchid",kn.NamedColors.orchid=kn.Rgb.fromInt(14315734)),kn.NamedColors.byName.set("palegoldenrod",kn.NamedColors.palegoldenrod=kn.Rgb.fromInt(15657130)),kn.NamedColors.byName.set("pale golden rod",kn.NamedColors.palegoldenrod),kn.NamedColors.byName.set("palegreen",kn.NamedColors.palegreen=kn.Rgb.fromInt(10025880)),kn.NamedColors.byName.set("pale green",kn.NamedColors.palegreen),kn.NamedColors.byName.set("paleturquoise",kn.NamedColors.paleturquoise=kn.Rgb.fromInt(11529966)),kn.NamedColors.byName.set("pale turquoise",kn.NamedColors.paleturquoise),kn.NamedColors.byName.set("palevioletred",kn.NamedColors.palevioletred=kn.Rgb.fromInt(14381203)),kn.NamedColors.byName.set("pale violet red",kn.NamedColors.palevioletred),kn.NamedColors.byName.set("papayawhip",kn.NamedColors.papayawhip=kn.Rgb.fromInt(16773077)),kn.NamedColors.byName.set("papaya whip",kn.NamedColors.papayawhip),kn.NamedColors.byName.set("peachpuff",kn.NamedColors.peachpuff=kn.Rgb.fromInt(16767673)),kn.NamedColors.byName.set("peach puff",kn.NamedColors.peachpuff),kn.NamedColors.byName.set("peru",kn.NamedColors.peru=kn.Rgb.fromInt(13468991)),kn.NamedColors.byName.set("pink",kn.NamedColors.pink=kn.Rgb.fromInt(16761035)),kn.NamedColors.byName.set("plum",kn.NamedColors.plum=kn.Rgb.fromInt(14524637)),kn.NamedColors.byName.set("powderblue",kn.NamedColors.powderblue=kn.Rgb.fromInt(11591910)),kn.NamedColors.byName.set("powder blue",kn.NamedColors.powderblue),kn.NamedColors.byName.set("purple",kn.NamedColors.purple=kn.Rgb.fromInt(8388736)),kn.NamedColors.byName.set("red",kn.NamedColors.red=kn.Rgb.fromInt(16711680)),kn.NamedColors.byName.set("rosybrown",kn.NamedColors.rosybrown=kn.Rgb.fromInt(12357519)),kn.NamedColors.byName.set("rosy brown",kn.NamedColors.rosybrown),kn.NamedColors.byName.set("royalblue",kn.NamedColors.royalblue=kn.Rgb.fromInt(4286945)),kn.NamedColors.byName.set("royal blue",kn.NamedColors.royalblue),kn.NamedColors.byName.set("saddlebrown",kn.NamedColors.saddlebrown=kn.Rgb.fromInt(9127187)),kn.NamedColors.byName.set("saddle brown",kn.NamedColors.saddlebrown),kn.NamedColors.byName.set("salmon",kn.NamedColors.salmon=kn.Rgb.fromInt(16416882)),kn.NamedColors.byName.set("sandybrown",kn.NamedColors.sandybrown=kn.Rgb.fromInt(16032864)),kn.NamedColors.byName.set("sandy brown",kn.NamedColors.sandybrown),kn.NamedColors.byName.set("seagreen",kn.NamedColors.seagreen=kn.Rgb.fromInt(3050327)),kn.NamedColors.byName.set("sea green",kn.NamedColors.seagreen),kn.NamedColors.byName.set("seashell",kn.NamedColors.seashell=kn.Rgb.fromInt(16774638)),kn.NamedColors.byName.set("sea shell",kn.NamedColors.seashell),kn.NamedColors.byName.set("sienna",kn.NamedColors.sienna=kn.Rgb.fromInt(10506797)),kn.NamedColors.byName.set("silver",kn.NamedColors.silver=kn.Rgb.fromInt(12632256)),kn.NamedColors.byName.set("skyblue",kn.NamedColors.skyblue=kn.Rgb.fromInt(8900331)),kn.NamedColors.byName.set("sky blue",kn.NamedColors.skyblue),kn.NamedColors.byName.set("slateblue",kn.NamedColors.slateblue=kn.Rgb.fromInt(6970061)),kn.NamedColors.byName.set("slate blue",kn.NamedColors.slateblue),kn.NamedColors.byName.set("slategray",kn.NamedColors.slategray=kn.NamedColors.slategrey=kn.Rgb.fromInt(7372944)),kn.NamedColors.byName.set("slate gray",kn.NamedColors.slategray),kn.NamedColors.byName.set("slategrey",kn.NamedColors.slategrey),kn.NamedColors.byName.set("slate grey",kn.NamedColors.slategrey),kn.NamedColors.byName.set("snow",kn.NamedColors.snow=kn.Rgb.fromInt(16775930)),kn.NamedColors.byName.set("springgreen",kn.NamedColors.springgreen=kn.Rgb.fromInt(65407)),kn.NamedColors.byName.set("spring green",kn.NamedColors.springgreen),kn.NamedColors.byName.set("steelblue",kn.NamedColors.steelblue=kn.Rgb.fromInt(4620980)),kn.NamedColors.byName.set("steel blue",kn.NamedColors.steelblue),kn.NamedColors.byName.set("tan",kn.NamedColors.tan=kn.Rgb.fromInt(13808780)),kn.NamedColors.byName.set("teal",kn.NamedColors.teal=kn.Rgb.fromInt(32896)),kn.NamedColors.byName.set("thistle",kn.NamedColors.thistle=kn.Rgb.fromInt(14204888)),kn.NamedColors.byName.set("tomato",kn.NamedColors.tomato=kn.Rgb.fromInt(16737095)),kn.NamedColors.byName.set("turquoise",kn.NamedColors.turquoise=kn.Rgb.fromInt(4251856)),kn.NamedColors.byName.set("violet",kn.NamedColors.violet=kn.Rgb.fromInt(15631086)),kn.NamedColors.byName.set("wheat",kn.NamedColors.wheat=kn.Rgb.fromInt(16113331)),kn.NamedColors.byName.set("white",kn.NamedColors.white=kn.Rgb.fromInt(16777215)),kn.NamedColors.byName.set("whitesmoke",kn.NamedColors.whitesmoke=kn.Rgb
.fromInt(16119285)),kn.NamedColors.byName.set("white smoke",kn.NamedColors.whitesmoke),kn.NamedColors.byName.set("yellow",kn.NamedColors.yellow=kn.Rgb.fromInt(16776960)),kn.NamedColors.byName.set("yellowgreen",kn.NamedColors.yellowgreen=kn.Rgb.fromInt(10145074)),kn.NamedColors.byName.set("yellow green",kn.NamedColors.yellowgreen),Bn.En.get_language(),Hn.EnUS.get_culture();var ws;null!=(ws=window.JSON)&&(_n.Json.nativeDecoder=ws.parse,_n.Json.nativeEncoder=ws.stringify),Lr.DIGITS_BASE10="0123456789",Lr.DIGITS_HEXU="0123456789ABCDEF",Lr.DIGITS_HEXL="0123456789abcdef",Lr.DIGITS_OCTAL="01234567",Lr.DIGITS_BN="0123456789abcdefghijklmnopqrstuvwxyz",Lr.DIGITS_BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lr.PROTO_HTTP="http://",Lr.PROTO_HTTPS="http://",Lr.PROTO_FILE="file://",Lr.PROTO_FTP="ftp://",Lr.PROTO_RTMP="rtmp://",Ar.WEEKDAYS="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),Ar.WEEKDAYS_ABBREV="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),Ar.MONTHS="January,February,March,April,May,June,July,August,September,October,November,December".split(","),Ar.MONTHS_ABBREV="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),Ar.DAYS_OF_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],Mr._reparse=new Or("^\\d{4}-\\d\\d-\\d\\d(( |T)\\d\\d:\\d\\d(:\\d\\d(\\.\\d{1,3})?)?)?Z?$",""),Hr._reparse=new Or("^[+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?",""),Hr._reparseStrict=new Or("^[+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?$",""),Ir.ZERO=0,Ir.ONE=1,Ir.BYTE_MASK=255,zr._reparse=new Or("^([+-])?\\d+$",""),Zr._re=new Or("[{](\\d+)(?::[^}]*)?[}]","m"),Zr._reSplitWC=new Or("(\r\n|\n\r|\n|\r)","g"),Zr._reReduceWS=new Or("\\s+",""),Zr._reStripTags=new Or("(<[a-z]+[^>/]*/?>|</[a-z]+>)","i"),Zr._reFormat=new Or("{(\\d+)(?::([a-zA-Z]+))?(?:,([^\"',}]+|'[^']+'|\"[^\"]+\"))?(?:,([^\"',}]+|'[^']+'|\"[^\"]+\"))?(?:,([^\"',}]+|'[^']+'|\"[^\"]+\"))?}","m"),Zr._reCollapse=new Or("\\s+","g"),Zr.__ucwordsPattern=new Or("[^a-zA-Z]([a-z])",""),Zr.__ucwordswsPattern=new Or("\\s([a-z])",""),Zr.__alphaNumPattern=new Or("^[a-z0-9]+$","i"),Zr.__digitsPattern=new Or("^[0-9]+$",""),Zr._reInterpolateNumber=new Or("[-+]?(?:\\d+\\.\\d+|\\d+\\.|\\.\\d+|\\d+)(?:[eE][-]?\\d+)?",""),mr.Sprintf.kPAD_ZEROES=1,mr.Sprintf.kLEFT_ALIGN=2,mr.Sprintf.kSHOW_SIGN=4,mr.Sprintf.kPAD_POS=8,mr.Sprintf.kALT_FORM=16,mr.Sprintf.kLONG_VALUE=32,mr.Sprintf.kUSE_SEPARATOR=64,mr.Sprintf.DEBUG=!1,mr.Sprintf.TRACE=!1,ri.FIELD_DATA="__dhx_data__",ri.FIELD_EVENT="__dhx_on__",ri.FIELD_TRANSITION="__dhx_transition__",ii.refloat=new Or("(\\d+(?:\\.\\d+)?)",""),ui._escapePattern=new Or("[*+?|{[()^$.# \\\\]",""),pi.refloat=new Or("(\\d+(?:\\.\\d+)?)",""),Oi.doc=function(){var e=new Li([fr.document]),t=Hi.create([e]);return e.parentNode=t.parentNode=fr.document.documentElement,t}(),Oi.selectionEngine=function(){var e;if(ji.supported())e=new ji;else{if(!Fi.supported())throw"no selector engine available";e=new Fi}return e}(this),si.prefix=function(){var e=new Br;return e.set("svg","http://www.w3.org/2000/svg"),e.set("xhtml","http://www.w3.org/1999/xhtml"),e.set("xlink","http://www.w3.org/1999/xlink"),e.set("xml","http://www.w3.org/XML/1998/namespace"),e.set("xmlns","http://www.w3.org/2000/xmlns/"),e}(),$i._usepage=(new Or("WebKit","")).match(fr.window.navigator.userAgent),Ji.timeout=0,Ji.interval=0,Ji._step=Ji.step,Ki._id=0,Ki._inheritid=0,Qi.at="@",Qi.bracketMismatch="Bracket mismatch! Inside template, non-paired brackets, '{' or '}', should be replaced by @{'{'} and @{'}'}.",er.p1=0,er.readPos=0,er.tokenMin=0,er.tokenMax=0,Rn.MAX_RADIX=36,Rn.MIN_RADIX=2,Un.bias=1024,Un.cnst=2102,ns.BASE_URL_GEOJSON="https://api.reportgrid.com/geo/json/",ns.SERVICE_RENDERING_STATIC="https://api.reportgrid.com/services/viz/charts/up.json",ns.LEGACY_RENDERING_STATIC="https://api.reportgrid.com/services/viz/charts/upandsee.{ext}",e.lastid=0,e.chartsCounter=0,e.chartsLoaded=0,J.snapping={minute:[{to:10,s:1},{to:20,s:2},{to:30,s:5},{to:60,s:10},{to:120,s:30},{to:240,s:60},{to:960,s:240}],minutetop:480,hour:[{to:12,s:1},{to:24,s:6},{to:60,s:12},{to:240,s:24},{to:480,s:48},{to:960,s:120}],hourtop:240,month:[{to:13,s:1},{to:25,s:2},{to:49,s:4},{to:73,s:6}],monthtop:12,year:[{to:10,s:1},{to:20,s:2},{to:50,s:5}],yeartop:10},Lt.LIMIT_WIDTH=10,Lt.LIMIT_HEIGHT=10,Lt.DEFAULT_WIDTH=400,Lt.DEFAULT_HEIGHT=300,yt.PivotTable.defaultColorStart=new kn.Hsl(210,1,1),yt.PivotTable.defaultColorEnd=new kn.Hsl(210,1,.5),gt.DownloaderMenu.DEFAULT_FORMATS=["png","jpg","pdf"],gt.DownloaderMenu.DEFAULT_TITLE="Download",gt.Logo.registry=new Br,gt.Logo._id=0,gt.Logo.LOGO_WIDTH=194,gt.Logo.LOGO_HEIGHT=29,gt.Tooltip.DEFAULT_DISTANCE=0,gt.Tooltip.DEFAULT_ANCHOR="bottomright",Bt.warner=window.console&&window.console.warn?function(e){console.warn(""+Qr.string(e))}:function(){},Wt.defaultStartColor=new kn.Hsl(210,1,1),Wt.defaultEndColor=new kn.Hsl(210,1,.5),nn.TransformerArray.instance=new nn.TransformerArray,nn.TransformerObject.instance=new nn.TransformerObject,nn.TransformerString.instance=new nn.TransformerString,nn.TransformerBool.instance=new nn.TransformerBool,nn.TransformerInt.instance=new nn.TransformerInt,nn.TransformerFloat.instance=new nn.TransformerFloat,nn.TransformerFunction.instance=new nn.TransformerFunction,nn.TransformerExpressionToFunction.interp=new tr,nn.TransformerExpressionToFunction.pattern=new Or("^\\s*=",""),wt.ALLOWED_FORMATS=["pdf","ps","png","jpg","svg"],bt.FORMAT="jpg",bt.nextframeid=0,o.ALT_RIGHT=20,o.ALT_LEFT=20,o.ALT_TOP=8,o.ALT_BOTTOM=8,o.REYAXIS=new Or("^y(\\d+)$",""),o.REYINDEX=new Or("^y(\\d+)",""),o.REYTITLE=new Or("^y(\\d+)title$",""),f.ALT_RIGHT=20,f.ALT_LEFT=20,f.ALT_TOP=8,f.ALT_BOTTOM=8,tt.Coords.retransform=new Or("translate\\(\\s*(\\d+(?:\\.\\d+)?)\\s*(?:[, ]\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)",""),tt.StreamGraph.vid=0,et.SymbolCache.DEFAULT_SYMBOL="circle",mt.modulus="00:ca:a7:37:07:b0:26:63:cb:f1:37:9d:e9:cc:c1:bd:f1:57:f5:90:72:4d:74:e2:5f:33:df:6c:c4:e4:7f:95:3c:87:89:ed:3c:60:cc:b0:15:f9:ad:57:77:52:4b:25:9b:c8:f9:d0:8a:b8:0a:ab:17:3d:7c:cf:1d:19:a3:8c:43:9b:ee:5b:2e:9e:45:18:b3:97:2a:91:c2:90:c2:1e:49:a3:5e:b1:48:09:1c:ee:06:b9:6e:ec:22:e6:2d:06:b8:b4:22:5f:4d:5e:81:6a:91:13:30:5d:6c:b5:7c:cc:fa:47:dc:8e:b4:f3:fd:0a:6e:d2:f8:09:3c:b1:c2:90:19",mt.publicExponent="3",ut.validPeriods="minute,hour,day,week,month,year,eternity".split(","),ut.validGroupValues=["hour","day","week","month","year"],ct.TIME_TOKEN="time:",at.range=new Or("(\\d+(?:\\.\\d+)?|\\.\\d+)?-(\\d+(?:\\.\\d+|\\.\\d+)?)?",""),y.html=["pivottable","leaderboard"],y.svg="barchart,geo,funnelchart,heatgrid,linechart,piechart,scattergraph,streamgraph,sankey".split(","),y.visualizations=y.svg.concat(y.html),y.layouts=["simple","cartesian","x"],kn.Colors._reParse=new Or("^(?:(hsl|rgb|rgba|cmyk)\\(([^)]+)\\))|(?:(?:0x|#)([a-f0-9]{3,6}))$","i"),Ln.DateParser.daynumeric="0?[1-9]|[1-2][0-9]|3[0-1]",Ln.DateParser.months=Hn.EnUS.get_culture().date.months.slice(0,-1).map(function(e){return e.toLowerCase()}),Ln.DateParser.shortmonths=Hn.EnUS.get_culture().date.abbrMonths.slice(0,-1).map(function(e){return e.toLowerCase()}),Ln.DateParser.days=Hn.EnUS.get_culture().date.days.map(function(e){return e.toLowerCase()}),Ln.DateParser.shortdays=Hn.EnUS.get_culture().date.abbrDays.map(function(e){return e.toLowerCase()}),Ln.DateParser.sfullmonths=Ln.DateParser.months.join("|"),Ln.DateParser.sshortmonths=Ln.DateParser.shortmonths.join("|"),Ln.DateParser.sfulldays=Ln.DateParser.days.join("|"),Ln.DateParser.sshortdays=Ln.DateParser.shortdays.join("|"),Ln.DateParser.day="(0?[0-9]|[1-2][0-9]|3[0-1])(?:st|nd|rd|th)?",Ln.DateParser.month="(?:0?[1-9]|1[0-2])",Ln.DateParser.hour="(?:0?[0-9]|1[0-9]|2[0-3])",Ln.DateParser.hhour="(?:0[0-9]|1[0-2])",Ln.DateParser.hohour="(?:0?[0-9]|1[0-2])",Ln.DateParser.fminsec="(?:0[0-9]|[1-5][0-9])",Ln.DateParser.minsec="(?:0?[0-9]|[1-5][0-9])",Ln.DateParser.ampm="(?:(?:in\\s+the\\s+)?(am|pm|evening|morning|afternoon))",Ln.DateParser.daypart="(?:(?:in\\s+the\\s+)?(evening|morning|afternoon|sunsrise|sunset|dawn|dusk|noon|mid-day|midday|mid-night|midnight))",Ln.DateParser.period="minute|minutes|hour|hours|day|days|week|weeks|month|months|year|years|second|seconds",Ln.DateParser.dateexp=new Or("(?:(?:\\b("+Ln.DateParser.sfullmonths+")\\s+"+Ln.DateParser.day+"(?:\\s*,\\s*(\\d{2,4}))?\\b)|(?:\\b("+Ln.DateParser.sshortmonths+")\\s+"+Ln.DateParser.day+"(?:\\s*,?\\s*(\\d{2,4}))?\\b)|(?:\\b"+Ln.DateParser.day+"\\s+("+Ln.DateParser.sfullmonths+")(?:\\s+(\\d{2,4}))?\\b)|(?:\\b"+Ln.DateParser.day+"\\s+("+Ln.DateParser.sshortmonths+")(?:\\s+(\\d{2,4}))?\\b)|(?:\\b(?:"+Ln.DateParser.day+"\\s+)?("+Ln.DateParser.sfullmonths+")\\s+(\\d{2,4})\\b)|(?:\\b(?:"+Ln.DateParser.day+"\\s+)?("+Ln.DateParser.sshortmonths+")\\s+(\\d{2,4})\\b)|(?:\\b("+Ln.DateParser.month+")/"+Ln.DateParser.day+"(?:/(\\d{2,4}))?\\b)|(?:\\b"+Ln.DateParser.day+"/("+Ln.DateParser.month+")(?:/(\\d{2,4}))?\\b)|(?:\\b(\\d{2,4})-("+Ln.DateParser.month+")-"+Ln.DateParser.day+"\\b)|(?:^\\s*"+Ln.DateParser.day+"\\s*$))","i"),Ln.DateParser.absdateexp=new Or("(?:(?:\\b(today|now|this\\s+second|tomorrow|yesterday)\\b)|(?:\\b(?:(next|last|this)\\s+)?("+Ln.DateParser.sfullmonths+")\\b)|(?:\\b(?:(next|last|this)\\s+)?("+Ln.DateParser.sfulldays+")\\b)|(?:\\b(?:(next|last|this)\\s+)?("+Ln.DateParser.sshortmonths+")\\b)|(?:\\b(?:(next|last|this)\\s+)?("+Ln.DateParser.sshortdays+")\\b))","i"),Ln.DateParser.relexp=new Or("(?:(?:\\b(plus\\s+|minus\\s|\\+|-|in)\\s*(\\d+)?\\s+("+Ln.DateParser.period+")\\b)|(?:\\b(\\d+)?\\s+("+Ln.DateParser.period+")\\s+(from|before|hence|after|ago)?\\b))","i"),Ln.DateParser.timeexp=new Or("(?:\\bat\\s+)?(?:(?:\\b("+Ln.DateParser.hohour+"):("+Ln.DateParser.minsec+")\\s*"+Ln.DateParser.ampm+"\\b)|(?:(?:\\b|T)("+Ln.DateParser.hour+"):("+Ln.DateParser.minsec+")(?:[:]("+Ln.DateParser.minsec+")(?:\\.(\\d+))?)?\\b)|(?:(?:^|\\s+)("+Ln.DateParser.hhour+")("+Ln.DateParser.fminsec+")\\s*"+Ln.DateParser.ampm+"?(?:\\s+|$))|(?:\\b("+Ln.DateParser.hohour+")\\s*"+Ln.DateParser.ampm+"\\b)|(?:\\b"+Ln.DateParser.daypart+"\\b))","i"),Tn.Error.errorPositionPattern="{0}.{1}({2}): ",Dn.Contour.contourDx=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,null],Dn.Contour.contourDy=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,null],Pn.Graphs.id=0,Nn.Const.TWO_PI=6.283185307179586,Nn.Const.PI=3.141592653589793,Nn.Const.HALF_PI=1.5707963267948966,Nn.Const.TO_DEGREE=57.29577951308232,Nn.Const.TO_RADIAN=.017453292519943295,Nn.Const.LN10=2.302585092994046,Nn.Const.E=2.718281828459045,Nn.scale.Linears._default_color=new kn.Hsl(0,0,0),Mn.LineInternals.arcOffset=-Math.PI/2,Mn.LineInternals.arcMax=2*Math.PI-1e-6,Mn.LineInternals._lineBasisBezier1=[0,2/3,1/3,0],Mn.LineInternals._lineBasisBezier2=[0,1/3,2/3,0],Mn.LineInternals._lineBasisBezier3=[0,1/6,2/3,1/6],Mn.Symbol.sqrt3=Math.sqrt(3),Mn.Symbol.tan30=Math.tan(30*Math.PI/180),t.main()}(),define("libs/precog/reportgrid-charts",function(){}),define("app/util/output-chart",["app/util/jsonmodel","app/util/ui","app/util/notification","rtext!templates/panel.options.chart-output.html","libs/precog/reportgrid-charts"],function(e,t,n,r){function v(){clearInterval(this.k),this.k=setTimeout(m,50)}function m(){try{o.find("*").remove(),ReportGrid.chart(o.get(0),d)}catch(e){}}function g(e,t){return t.type.substr(0,5)==="time:"?ReportGrid.format(typeof e=="number"?new Date(e):ReportGrid.date.parse(e),"DT"):ReportGrid.humanize(e)}function y(){E(),ReportGrid.tooltip&&ReportGrid.tooltip.hide();if(!f.chart.x||!f.chart.y||f.chart.x===f.chart.y)return;f.chart.samplesize||(f.chart.samplesize=100);var t=e.axis(h,f.chart.x),n=e.axis(h,f.chart.y);if(!t||!n)return;var r=l.slice(0);t.transformer&&(r=t.transformer(r)),n.transformer&&(r=n.transformer(r)),r=b(r,f.chart.x),r.length>f.chart.samplesize&&(r=r.slice(0,f.chart.samplesize)),d={axes:[t,n],data:r,options:{displayrules:!0,visualization:t.type.substr(0,5)==="time:"?"linechart":"barchart",label:{axis:function(e){return e},datapointover:function(e,r){return g(e[f.chart.x],t)+": "+g(e[f.chart.y],n)}}}},d.options.visualization==="linechart"&&(d.options.effect="dropshadow"),f.chart.segment&&(d.options.segmenton=f.chart.segment),v()}function b(e,t){return e=e.splice(0),e.sort(function(e,n){return ReportGrid.compare(e[t],n[t])}),e}function w(e){function t(e){return!!e.multivalue}function s(e){return!!e.multivalue||e.type==="number"||e.subtype==="datetime"||f&&f.chart.x===e.field||f&&f.chart.y===e.field}function o(e,t,n,r,i){e.find("option").remove(),r&&e.append('<option value="">[none]</option>');for(var s=0;s<t.length;s++){var o=i(t[s]);if(o)continue;e.append('<option value="'+t[s].field+'"'+(n===t[s].field?" selected":"")+">"+t[s].name+"</option>")}return e.find("option").length===(r?1:0)?e.closest(".pg-selection").hide():e.closest(".pg-selection").show(),e}function u(e){return function(){f.chart[e]=$(this).val(),f.chart.segment===f.chart[e]&&(f.chart.segment=null),o(c.find(".pg-segment"),h,f.chart.segment,!0,s),$(i).trigger("optionsChanged",f),y()}}function a(e){return function(){f.chart[e]=$(this).val(),$(i).trigger("optionsChanged",f),y()}}return function(){c&&c.remove(),c=n.context(e,{width:"264px",text:r,target:this,before_open:function(){ReportGrid.tooltip&&ReportGrid.tooltip.hide()},after_open:function(){var e=o(c.find(".pg-x"),h,f.chart.x,!1,t).change(u("x"));o(c.find(".pg-y"),h,f.chart.y,!1,t).change(u("y")),o(c.find(".pg-segment"),h,f.chart.segment,!0,s).change(a("segment")),c.find(".pg-sample").val(f.chart.samplesize).change(a("samplesize")),f.chart.x=c.find(".pg-x").val(),f.chart.y=c.find(".pg-y").val(),y()}})}}function E(){o.find("*").remove().removeClass("rg"),o.append('<div class="pg-message ui-content ui-state-highlight ui-corner-all"><p>Please select the chart axis using the options button above.</p></div>')}ReportGrid.authCode="r59uh0XNfjFqI1M+yxJK33KGZ0Mm82UqEme9ShK7g12KlIHBhCZK1rFV7KdOHgZ7GAePArW/T4EuOgzCPCbZB+AGlqH7I8OeRMwxKJA5lSRO1GTNp5IkXcrS4rKVj0KT3jnc/kc6gJBjzZPBwwX10Xgdg2+/KI1QnoOCVhDJ8Hg=";var i,s=$('<div class="ui-widget ui-content pg-overflow-hidden"><div class="pg-chart"></div></div>'),o=s.find(".pg-chart"),u=2,a,f,l,c,h,p,d;return i={type:"chart",name:"Chart",panel:function(){return s},update:function(t,n){c&&c.remove(),"undefined"==typeof n.chart&&(n.chart={samplesize:200}),f=n,t?l=t:t=l;if(!t||t.length<=1){h=[],o.html('<div class="pg-message ui-content ui-state-highlight ui-corner-all">The dataset doesn\'t contain enough values to build a chart.</div>'),p&&p.button("disable");return}h=e.create(t),p&&p.button("enable"),y()},resize:function(){o.css({width:s.innerWidth()+"px",height:s.innerHeight()+"px"}),y()},activate:function(){a||(a=$(this.toolbar),p=t.button(a,{label:"options",text:!0,handler:w("Chart Options"),disabled:!0})),a.show()},deactivate:function(){ReportGrid.tooltip&&ReportGrid.tooltip.hide(),c&&c.remove(),E(),a.hide()}},i}),define("app/util/output-error",[],function(){function n(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(e,t){var r="<p>"+(e&&n(""+e.message||e))+"</p>";"undefined"!=typeof e.lineNum&&(r+='<p class="pg-position">Error at line '+e.lineNum+", column "+e.colNum+"</p>",r+="<pre>"+n(e.detail)+"</pre>",$(t).trigger("syntaxError",{line:e.lineNum,column:e.colNum,text:e.detail}));var i=$(r);return"undefined"!=typeof e.lineNum&&i.find(".pg-position").click(function(){$(t).trigger("requestCursorChange",{line:e.lineNum,column:e.colNum})}),$('<div class="error-container"></div>').append(i)}var e=$('<div class="ui-widget"><div class="ui-content ui-state-error ui-corner-all"></div></div>'),t=e.find(".ui-state-error");return{type:"error",name:"Error",display:!1,panel:function(){return e},update:function(e,n,i){t.find("*").remove(),$(e).each(function(){t.append(r(this,i))})}}}),define("app/util/output-message",[],function(){var e=$('<div class="ui-widget"><div class="pg-message ui-content ui-state-highlight ui-corner-all"></div></div>'),t=e.find(".pg-message");return{type:"message",name:"Message",display:!1,panel:function(){return e},update:function(e){var n="<p>"+e.message+"</p>";t.html(n)}}}),define("app/config/output-results",["app/util/output-table","app/util/output-json","app/util/output-chart","app/util/output-error","app/util/output-message"],function(){var e=arguments,t=[{name:"update",f:function(){return function(e){}}},{name:"panel",f:function(){return function(){return $("<div></div>")}}},{name:"toolbar",f:function(){return function(){return $("<div></div>")}}},{name:"activate",f:function(){return function(){}}},{name:"deactivate",f:function(){return function(){}}},{name:"display",f:function(){return!0}},{name:"resize",f:function(){return function(){}}},{name:"preferredDownloadFormat",f:function(){return function(){return null}}},{name:"paginationOptions",f:function(){return function(){return null}}}],n=!1;return function(){if(!n){for(var r=0;r<e.length;r++){var i=e[r];"function"==typeof i&&(e[r]=i=i()),$.each(t,function(e,t){"undefined"==typeof i[t.name]&&(i[t.name]=t.f())})}n=!0}return e}}),define("app/config/output-formats",["app/util/converters","app/util/ui"],function(e,t){return[{token:"json",name:"Json",handler:function(e,t){return t.compact?JSON.stringify(e):JSON.stringify(e,null,2)},options:{compact:!1},buildOptions:function(e,n){var r=this;t.checks(e,[{name:"options",checked:this.options.compact,label:"compact json",description:"format json output with no newlines and minimal spacing",handler:function(){r.options.compact=$(this).prop("checked"),n()}}])}},{token:"csv",name:"CSV",handler:function(t){return e.jsonToCsv(t)}}]}),define("rtext!templates/toolbar.output.html",[],function(){return'<div class="pg-toolbar-actions pg-tabs-container">\n    <div class="pg-output-formats">\n    </div>\n</div>\n<div class="pg-toolbar-context pg-stacked-context">\n    <div class="pg-toolbar-result-type"></div>\n    <div class="pg-toolbar-result-general"></div>\n</div>'}),define("app/output",["app/util/ui","app/config/output-results","app/config/output-formats","app/util/dialog-export","rtext!templates/toolbar.output.html"],function(e,t,n,r,i){var s=0;return function(o,u){function y(e,t){return!0}function w(){if(a[c.type]){var e=a[c.type].panel;e.css({width:e.parent().width()+"px",height:e.parent().height()+"px"}),a[c.type].resize()}}function E(e,t,n){t!==c.type&&(c.type&&a[c.type]&&(a[c.type].deactivate(),$(a[c.type].toolbar).hide(),$(a[c.type].panel).hide()),$(a[t].toolbar).show(),$(a[t].panel).show(),a[t].activate(),clearTimeout(this.killActivatePanel),this.killActivatePanel=setTimeout(w,0)),a[t].display&&(a[t].display[0].checked=!0,a[t].display.button("refresh")),a[t].update(e,n,l)}var a={},f=t();$.each(f,function(e,t){a[t.type]=t}),s++;var l,c={result:null,type:null,current:null},h=o.find(".pg-toolbar").append(i),p=o.find(".pg-toolbar-context .pg-toolbar-result-type"),d=o.find(".pg-toolbar-context .pg-toolbar-result-general"),v=h.find(".pg-output-formats"),m=o.find(".pg-result"),g,b=e.button(d,{icon:"ui-icon-arrowthickstop-1-s",description:"download query result",handler:function(){var e=c&&a[c.current].preferredDownloadFormat(g);r("Download Results",n,u.getOutputResult(),e,y)}});return $.each(f,function(e,t){if(t.display){var n="pg-output-type-radio-"+s+"-"+ ++e;t.display=v.append('<input type="radio" id="'+n+'" name="radio" data-format="'+t.type+'" /><label for="'+n+'">'+t.name+"</label>").find("#"+n),t.display.click(function(){if(t.type===c.type){c.current=t.type;return}l.setOutput(c.result,t.type,g)})}t.panel=t.panel(),m.append(t.panel),t.toolbar=t.toolbar(),p.append(t.toolbar),$(t.toolbar).hide(),$(t.panel).hide(),$(t).on("update",function(){l.setOutput(null,null,g)}),$(t).on("optionsChanged",function(e,t){$(l).trigger("optionsChanged",t)}),$(t).on("paginationChanged",function(e,t){console.log("INTERCEPT PAGINATION"),$(l).trigger("paginationChanged",t)}),$(t).on("sortChanged",function(e,t){console.log("INTERCEPT SORT"),$(l).trigger("sortChanged",t)})}),e.buttonset(v),l={setOutput:function(e,t,n){"undefined"==typeof e&&(e=e||c.result||null),t=t||"table",n||(n={}),g=n;var r=!1;e==null?E({message:"please, type and execute a query"},t="message",n):e instanceof Array&&e.length==0?E({message:"empty dataset"},t="message",n):a[t]?(r=a[t].display,E(e,t,n)):(r=!1,E({message:"invalid result type: "+t},t="error",n)),e&&(c.result=e),c.type!=t&&(c.type=t,$(l).trigger("typeChanged",t)),a[t]&&a[t].display&&(c.current=t),v.find("input[type=radio]").each(function(){$(this).attr("checked",$(this).attr("data-format")===t)}),r?(v.buttonset("enable"),b.button("enable")):(v.buttonset("disable"),b.button("disable")),v.buttonset("refresh")},paginationOptions:function(){return a[c.current||"table"].paginationOptions()},last:c,resize:w}}}),define("app/util/humanize",[],function(){var e=this,t=e.humanize,n={};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports.humanize=n):(typeof define=="function"&&define.amd&&define("humanize",function(){return n}),e.humanize=n),n.noConflict=function(){return e.humanize=t,this},n.pad=function(e,t,n,r){e+="",n?n.length>1&&(n=n.charAt(0)):n=" ",r=r===undefined?"left":"right";if(r==="right")while(e.length<t)e+=n;else while(e.length<t)e=n+e;return e},n.time=function(){return(new Date).getTime()/1e3};var r=[0,0,31,59,90,120,151,181,212,243,273,304,334],i=[0,0,31,60,91,121,152,182,213,244,274,305,335];return n.date=function(e,t){var s=t===undefined?new Date:t instanceof Date?new Date(t):new Date(t*1e3),o=/\\?([a-z])/gi,u=function(e,t){return l[e]?l[e]():t},a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f=["January","February","March","April","May","June","July","August","September","October","November","December"],l={d:function(){return n.pad(l.j(),2,"0")},D:function(){return l.l().slice(0,3)},j:function(){return s.getDate()},l:function(){return a[l.w()]},N:function(){return l.w()||7},S:function(){var e=l.j();return e>4&&e<21?"th":{1:"st",2:"nd",3:"rd"}[e%10]||"th"},w:function(){return s.getDay()},z:function(){return(l.L()?i[l.n()]:r[l.n()])+l.j()-1},W:function(){var e=l.z()-l.N()+1.5;return n.pad(1+Math.floor(Math.abs(e)/7)+(e%7>3.5?1:0),2,"0")},F:function(){return f[s.getMonth()]},m:function(){return n.pad(l.n(),2,"0")},M:function(){return l.F().slice(0,3)},n:function(){return s.getMonth()+1},t:function(){return(new Date(l.Y(),l.n(),0)).getDate()},L:function(){return(new Date(l.Y(),1,29)).getMonth()===1?1:0},o:function(){var e=l.n(),t=l.W();return l.Y()+(e===12&&t<9?-1:e===1&&t>9)},Y:function(){return s.getFullYear()},y:function(){return String(l.Y()).slice(-2)},a:function(){return s.getHours()>11?"pm":"am"},A:function(){return l.a().toUpperCase()},B:function(){var e=s.getTime()/1e3,t=e%86400+3600;t<0&&(t+=86400);var n=t/86.4%1e3;return e<0?Math.ceil(n):Math.floor(n)},g:function(){return l.G()%12||12},G:function(){return s.getHours()},h:function(){return n.pad(l.g(),2,"0")},H:function(){return n.pad(l.G(),2,"0")},i:function(){return n.pad(s.getMinutes(),2,"0")},s:function(){return n.pad(s.getSeconds(),2,"0")},u:function(){return n.pad(s.getMilliseconds()*1e3,6,"0")},O:function(){var e=s.getTimezoneOffset(),t=Math.abs(e);return(e>0?"-":"+")+n.pad(Math.floor(t/60)*100+t%60,4,"0")},P:function(){var e=l.O();return e.substr(0,3)+":"+e.substr(3,2)},Z:function(){return-s.getTimezoneOffset()*60},c:function(){return"Y-m-d\\TH:i:sP".replace(o,u)},r:function(){return"D, d M Y H:i:s O".replace(o,u)},U:function(){return s.getTime()/1e3||0}};return e.replace(o,u)},n.numberFormat=function(e,t,n,r){t=isNaN(t)?2:Math.abs(t),n=n===undefined?".":n,r=r===undefined?",":r;var i=e<0?"-":"";e=Math.abs(+e||0);var s=parseInt(e.toFixed(t),10)+"",o=s.length>3?s.length%3:0;return i+(o?s.substr(0,o)+r:"")+s.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?n+Math.abs(e-s).toFixed(t).slice(2):"")},n.naturalDay=function(e,t){e=e===undefined?n.time():e,t=t===undefined?"Y-m-d":t;var r=86400,i=new Date,s=(new Date(i.getFullYear(),i.getMonth(),i.getDate())).getTime()/1e3;return e<s&&e>=s-r?"yesterday":e>=s&&e<s+r?"today":e>=s+r&&e<s+2*r?"tomorrow":n.date(t,e)},n.relativeTime=function(e){e=e===undefined?n.time():e;var t=n.time(),r=t-e;if(r<2&&r>-2)return(r>=0?"just ":"")+"now";if(r<60&&r>-60)return r>=0?Math.floor(r)+" seconds ago":"in "+Math.floor(-r)+" seconds";if(r<120&&r>-120)return r>=0?"about a minute ago":"in about a minute";if(r<3600&&r>-3600)return r>=0?Math.floor(r/60)+" minutes ago":"in "+Math.floor(-r/60)+" minutes";if(r<7200&&r>-7200)return r>=0?"about an hour ago":"in about an hour";if(r<86400&&r>-86400)return r>=0?Math.floor(r/3600)+" hours ago":"in "+Math.floor(-r/3600)+" hours";var i=172800;if(r<i&&r>-i)return r>=0?"1 day ago":"in 1 day";var s=2505600;if(r<s&&r>-s)return r>=0?Math.floor(r/86400)+" days ago":"in "+Math.floor(-r/86400)+" days";var o=5184e3;if(r<o&&r>-o)return r>=0?"about a month ago":"in about a month";var u=parseInt(n.date("Y",t),10),a=parseInt(n.date("Y",e),10),f=u*12+parseInt(n.date("n",t),10),l=a*12+parseInt(n.date("n",e),10),c=f-l;if(c<12&&c>-12)return c>=0?c+" months ago":"in "+ -c+" months";var h=u-a;return h<2&&h>-2?h>=0?"a year ago":"in a year":h>=0?h+" years ago":"in "+ -h+" years"},n.ordinal=function(e){e=parseInt(e,10),e=isNaN(e)?0:e;var t=e<0?"-":"";return e=Math.abs(e),t+e+(e>4&&e<21?"th":{1:"st",2:"nd",3:"rd"}[e%10]||"th")},n.filesize=function(e,t,r,i,s){t=t===undefined?1024:t,r=isNaN(r)?2:Math.abs(r),i=i===undefined?".":i,s=s===undefined?",":s;if(e<=0)return"0 bytes";var o=[1],u=["bytes","Kb","Mb","Gb","Tb","Pb"];if(e<t)return n.numberFormat(e,0)+" "+u[0];for(var a=1;a<u.length;a++){o[a]=o[a-1]*t;if(e<o[a])return n.numberFormat(e/o[a-1],r,i,s)+" "+u[a-1]}return n.numberFormat(e/o[u.length-1],r,i,s)+" "+u[u.length-1]},n.linebreaks=function(e){return e=e.replace(/^([\n|\r]*)/,""),e=e.replace(/([\n|\r]*)$/,""),e=e.replace(/(\r\n|\n|\r)/g,"\n"),e=e.replace(/(\n{2,})/g,"</p><p>"),e=e.replace(/\n/g,"<br />"),"<p>"+e+"</p>"},n.nl2br=function(e){return e.replace(/(\r\n|\n|\r)/g,"<br />")},n.truncatechars=function(e,t){return e.length<=t?e:e.substr(0,t)+"…"},n.truncatewords=function(e,t){var n=e.split(" ");return n.length<t?e:n.slice(0,t).join(" ")+"…"},n}),define("rtext!templates/toolbar.folders.html",[],function(){return'<div class="pg-toolbar-description">\n</div>\n<div class="pg-toolbar-actions">\n</div>\n<div class="pg-toolbar-context">\n</div>'}),function(e){e.vakata={}}(jQuery),function(e){e.fn.vakata_reverse=[].reverse}(jQuery),function(e){jQuery.expr[":"].vakata_icontains=function(e,t,n){return(e.textContent||e.innerText||"").toLowerCase().indexOf(n[3].toLowerCase())>=0}}(jQuery),function(e){e.vakata.array_remove=function(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}}(jQuery),function(e){e.vakata.array_unique=function(e){var t=[],n,r,i;for(n=0,i=e.length;n<i;n++){for(r=0;r<=n;r++)if(e[n]===e[r])break;r===n&&t.push(e[n])}return t}}(jQuery),function(e){e.vakata.attributes=function(t,n){t=e(t)[0];var r=n?{}:[];return e.each(t.attributes,function(t,i){if(e.inArray(i.nodeName.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])!==-1)return;i.nodeValue!==null&&e.trim(i.nodeValue)!==""&&(n?r[i.nodeName]=i.nodeValue:r.push(i.nodeName))}),r}}(jQuery),function(e){var t;e.vakata.get_scrollbar_width=function(){var n,r;return t||(/msie/.test(navigator.userAgent.toLowerCase())?(n=e('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),r=e('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),t=n.width()-r.width(),n.add(r).remove()):(n=e("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),t=100-n.width(),n.parent().remove())),t}}(jQuery),function(e){e.vakata.css={get_css:function(e,t,n){e=e.toLowerCase();var r=n.cssRules||n.rules,i=0;do{if(r.length&&i>r.length+5)return!1;if(r[i].selectorText&&r[i].selectorText.toLowerCase()===e)return t===!0?(n.removeRule&&n.removeRule(i),n.deleteRule&&n.deleteRule(i),!0):r[i]}while(r[++i]);return!1},add_css:function(t,n){return e.jstree.css.get_css(t,!1,n)?!1:(n.insertRule?n.insertRule(t+" { }",0):n.addRule(t,null,0),e.vakata.css.get_css(t))},remove_css:function(t,n){return e.vakata.css.get_css(t,!0,n)},add_sheet:function(t){var n=!1,r=!0;if(t.str)return t.title&&(n=e("style[id='"+t.title+"-stylesheet']")[0]),n?r=!1:(n=document.createElement("style"),n.setAttribute("type","text/css"),t.title&&n.setAttribute("id",t.title+"-stylesheet")),n.styleSheet?r?(document.getElementsByTagName("head")[0].appendChild(n),n.styleSheet.cssText=t.str):n.styleSheet.cssText=n.styleSheet.cssText+" "+t.str:(n.appendChild(document.createTextNode(t.str)),document.getElementsByTagName("head")[0].appendChild(n)),n.sheet||n.styleSheet;if(t.url){if(!document.createStyleSheet)return n=document.createElement("link"),n.rel="stylesheet",n.type="text/css",n.media="all",n.href=t.url,document.getElementsByTagName("head")[0].appendChild(n),n.styleSheet;try{n=document.createStyleSheet(t.url)}catch(i){}}}}}(jQuery),function(e){var t={element:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5},_trigger:function(t,n){var r=e.vakata.dnd._get();r.event=n,e(document).triggerHandler("dnd_"+t+".vakata",r)},_get:function(){return{data:t.data,element:t.element,helper:t.helper}},_clean:function(){t.helper&&t.helper.remove(),t.scroll_i&&(clearInterval(t.scroll_i),t.scroll_i=!1),t={element:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1},e(document).unbind("mousemove",e.vakata.dnd.drag),e(document).unbind("mouseup",e.vakata.dnd.stop)},_scroll:function(n){if(!t.scroll_e||!t.scroll_l&&!t.scroll_t)return t.scroll_i&&(clearInterval(t.scroll_i),t.scroll_i=!1),!1;if(!t.scroll_i)return t.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(n===!0)return!1;var r=t.scroll_e.scrollTop(),i=t.scroll_e.scrollLeft();t.scroll_e.scrollTop(r+t.scroll_t*e.vakata.dnd.settings.scroll_speed),t.scroll_e.scrollLeft(i+t.scroll_l*e.vakata.dnd.settings.scroll_speed),(r!==t.scroll_e.scrollTop()||i!==t.scroll_e.scrollLeft())&&e.vakata.dnd._trigger("scroll",t.scroll_e)},start:function(n,r,i){t.is_drag&&e.vakata.dnd.stop({});try{n.currentTarget.unselectable="on",n.currentTarget.onselectstart=function(){return!1},n.currentTarget.style&&(n.currentTarget.style.MozUserSelect="none")}catch(s){}return t.init_x=n.pageX,t.init_y=n.pageY,t.data=r,t.is_down=!0,t.element=n.currentTarget,i!==!1&&(t.helper=e("<div id='vakata-dnd'></div>").html(i).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(document).bind("mousemove",e.vakata.dnd.drag),e(document).bind("mouseup",e.vakata.dnd.stop),!1},drag:function(n){if(!t.is_down)return;if(!t.is_drag){if(!(Math.abs(n.pageX-t.init_x)>e.vakata.dnd.settings.threshold||Math.abs(n.pageY-t.init_y)>e.vakata.dnd.settings.threshold))return;t.helper&&(t.helper.appendTo("body"),t.helper_w=t.helper.outerWidth()),t.is_drag=!0,e.vakata.dnd._trigger("start",n)}var r=!1,i=!1,s=!1,o=!1,u=!1,a=!1,f=!1,l=!1,c=!1,h=!1;t.scroll_t=0,t.scroll_l=0,t.scroll_e=!1;var p=e(n.target).parentsUntil("body").andSelf().vakata_reverse().filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var r=e(this),i=r.offset();this.scrollHeight>this.offsetHeight&&(i.top+r.height()-n.pageY<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=1),n.pageY-i.top<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(i.left+r.width()-n.pageX<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=1),n.pageX-i.left<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=-1));if(t.scroll_t||t.scroll_l)return t.scroll_e=e(this),!1});if(!t.scroll_e){r=e(document),i=e(window),s=r.height(),o=i.height(),u=r.width(),a=i.width(),f=r.scrollTop(),l=r.scrollLeft(),s>o&&n.pageY-f<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=-1),s>o&&o-(n.pageY-f)<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=1),u>a&&n.pageX-l<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=-1),u>a&&a-(n.pageX-l)<e.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=1);if(t.scroll_t||t.scroll_l)t.scroll_e=r}t.scroll_e&&e.vakata.dnd._scroll(!0),t.helper&&(c=parseInt(n.pageY+e.vakata.dnd.settings.helper_top,10),h=parseInt(n.pageX+e.vakata.dnd.settings.helper_left,10),s&&c+25>s&&(c=s-50),u&&h+t.helper_w>u&&(h=u-(t.helper_w+2)),t.helper.css({left:h+"px",top:c+"px"})),e.vakata.dnd._trigger("move",n)},stop:function(n){t.
is_drag&&e.vakata.dnd._trigger("stop",n),e.vakata.dnd._clean()}}}(jQuery),function(e){e.vakata.xslt=function(t,n){var r=!1,i,s,o;if(r===!1&&window.ActiveXObject)try{r=new ActiveXObject("Msxml2.XSLTemplate"),s=new ActiveXObject("Msxml2.DOMDocument"),s.loadXML(t),o=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),o.loadXML(n),r.stylesheet=o,i=r.createProcessor(),i.input=s,i.transform(),r=i.output}catch(u){}return t=e.parseXML(t),n=e.parseXML(n),r===!1&&typeof XSLTProcessor!="undefined"&&(i=new XSLTProcessor,i.importStylesheet(n),r=i.transformToFragment(t,document),r=e("<div />").append(r).html()),r===!1&&typeof t.transformNode!="undefined"&&(r=t.transformNode(n)),r}}(jQuery),typeof jQuery.hotkeys=="undefined"&&function(e){function t(e){if(typeof e.data!="string")return;var t=e.handler,n=e.data.toLowerCase().split(" ");e.handler=function(e){if(!(this===e.target||!/textarea|select/i.test(e.target.nodeName)&&e.target.type!=="text"))return;var r=e.type!=="keypress"&&jQuery.vakata_hotkeys.specialKeys[e.which],i=String.fromCharCode(e.which).toLowerCase(),s,o="",u={};e.altKey&&r!=="alt"&&(o+="alt+"),e.ctrlKey&&r!=="ctrl"&&(o+="ctrl+"),e.metaKey&&!e.ctrlKey&&r!=="meta"&&(o+="meta+"),e.shiftKey&&r!=="shift"&&(o+="shift+"),r?u[o+r]=!0:(u[o+i]=!0,u[o+jQuery.vakata_hotkeys.shiftNums[i]]=!0,o==="shift+"&&(u[jQuery.vakata_hotkeys.shiftNums[i]]=!0));for(var a=0,f=n.length;a<f;a++)if(u[n[a]])return t.apply(this,arguments)}}e.vakata_hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},jQuery.each(["keydown","keyup","keypress"],function(){jQuery.event.special[this]={add:t}})}(jQuery),function(e){var t=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(document).triggerHandler("context_"+t+".vakata",{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(e){return e=n.items[e],e&&!e._disabled&&e.action?e.action.call(null,{item:e,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}}):!1},_parse:function(t,r){if(!t)return!1;r||(n.html="",n.items=[]);var i="",s=!1,o;return r&&(i+="<ul>"),e.each(t,function(t,r){if(!r)return!0;n.items.push(r),!s&&r.separator_before&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),s=!1,i+="<li class='"+(r._class||"")+(r._disabled?" vakata-contextmenu-disabled ":"")+"'>",i+="<a href='#' rel='"+(n.items.length-1)+"'>",e.vakata.context.settings.icons&&(i+="<ins ",r.icon&&(r.icon.indexOf("/")!==-1?i+=" style='background:url(\""+r.icon+"\") center center no-repeat' ":i+=" class='"+r.icon+"' "),i+=">&#160;</ins><span>&#160;</span>"),i+=r.label+"</a>",r.submenu&&(o=e.vakata.context._parse(r.submenu,!0),o&&(i+=o)),i+="</li>",r.separator_after&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",s=!0)}),i=i.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),r&&(i+="</ul>"),r||(n.html=i,e.vakata.context._trigger("parse")),i.length>10?i:!1},_show_submenu:function(n){n=e(n);if(!n.length||!n.children("ul").length)return;var r=n.children("ul"),i=n.offset().left+n.outerWidth(),s=n.offset().top,o=r.width(),u=r.height(),a=e(document).width(),f=e(document).height();t?n[i-(o+10+n.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):n[i+o+10>a?"addClass":"removeClass"]("vakata-context-right"),s+u+10>f&&r.css("bottom","-1px"),r.show()},show:function(t,r,i){n.element&&n.element.length&&n.element.width("");switch(!0){case!r&&!t:return!1;case!!r&&!!t:n.reference=t,n.position_x=r.x,n.position_y=r.y;break;case!r&&!!t:n.reference=t;var s=t.offset();n.position_x=s.left+t.outerHeight(),n.position_y=s.top;break;case!!r&&!t:n.position_x=r.x,n.position_y=r.y}!!t&&!i&&e(t).data("vakata_contextmenu")&&(i=e(t).data("vakata_contextmenu")),e.vakata.context._parse(i)&&n.element.html(n.html);if(n.items.length){var o=n.element,u=n.position_x,a=n.position_y,f=o.width(),l=o.height(),c=e(document).width(),h=e(document).height();u+f+20>c&&(u=c-(f+20)),a+l+20>h&&(a=h-(l+20)),n.element.css({left:u,top:a}).show().width(n.element.outerWidth()),n.is_visible=!0,e.vakata.context._trigger("show")}},hide:function(){n.is_visible&&(n.element.hide().find("ul").hide(),n.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t=e("body").css("direction")==="rtl";var r=!1,i='.vakata-context { display:none; _width:1px; } .vakata-context, .vakata-context ul { margin:0; padding:2px; position:absolute; background:#f5f5f5; border:1px solid #979797; 	-moz-box-shadow:5px 5px 4px -4px #666666; -webkit-box-shadow:2px 2px 2px #999999; box-shadow:2px 2px 2px #999999; }.vakata-context ul { list-style:none; left:100%; margin-top:-2.7em; margin-left:-4px; } .vakata-context li.vakata-context-right ul { left:auto; right:100%; margin-left:auto; margin-right:-4px; } .vakata-context li { list-style:none; display:inline; }.vakata-context li a { display:block; padding:0 2em 0 2em; text-decoration:none; width:auto; color:black; white-space:nowrap; line-height:2.4em; 	-moz-text-shadow:1px 1px 0px white; -webkit-text-shadow:1px 1px 0px white; text-shadow:1px 1px 0px white; 	-moz-border-radius:1px; -webkit-border-radius:1px; border-radius:1px; }.vakata-context li a:hover { position:relative; background-color:#e8eff7; 	-moz-box-shadow:0px 0px 2px #0a6aa1; -webkit-box-shadow:0px 0px 2px #0a6aa1; box-shadow:0px 0px 2px #0a6aa1; }.vakata-context li.vakata-context-hover > a { position:relative; background-color:#e8eff7; 	-moz-box-shadow:0px 0px 2px #0a6aa1; -webkit-box-shadow:0px 0px 2px #0a6aa1; box-shadow:0px 0px 2px #0a6aa1; }.vakata-context li a.vakata-context-parent { background-image:url("data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAIORI4JlrqN1oMSnmmZDQUAOw=="); background-position:right center; background-repeat:no-repeat; } .vakata-context li.vakata-context-separator a, .vakata-context li.vakata-context-separator a:hover { background:white; border:0; border-top:1px solid #e2e3e3; height:1px; min-height:1px; max-height:1px; padding:0; margin:0 0 0 2.4em; border-left:1px solid #e0e0e0; _overflow:hidden; 	-moz-text-shadow:0 0 0 transparent; -webkit-text-shadow:0 0 0 transparent; text-shadow:0 0 0 transparent; 	-moz-box-shadow:0 0 0 transparent; -webkit-box-shadow:0 0 0 transparent; box-shadow:0 0 0 transparent; 	-moz-border-radius:0; -webkit-border-radius:0; border-radius:0; }.vakata-context li.vakata-contextmenu-disabled a, .vakata-context li.vakata-contextmenu-disabled a:hover { color:silver; background-color:transparent; border:0; box-shadow:0 0 0; }.vakata-context li a ins { text-decoration:none; display:inline-block; width:2.4em; height:2.4em; background:transparent; margin:0 0 0 -2em; } .vakata-context li a span { display:inline-block; width:1px; height:2.4em; background:white; margin:0 0.5em 0 0; border-left:1px solid #e2e3e3; _overflow:hidden; } .vakata-context-rtl ul { left:auto; right:100%; margin-left:auto; margin-right:-4px; } .vakata-context-rtl li a.vakata-context-parent { background-image:url("data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAINjI+AC7rWHIsPtmoxLAA7"); background-position:left center; background-repeat:no-repeat; } .vakata-context-rtl li.vakata-context-separator a { margin:0 2.4em 0 0; border-left:0; border-right:1px solid #e2e3e3;} .vakata-context-rtl li.vakata-context-left ul { right:auto; left:100%; margin-left:-4px; margin-right:auto; } .vakata-context-rtl li a ins { margin:0 -2em 0 0; } .vakata-context-rtl li a span { margin:0 0 0 0.5em; border-left-color:white; background:#e2e3e3; } ';e.vakata.css.add_sheet({str:i,title:"vakata-context"}),n.element=e("<ul class='vakata-context'></ul>"),n.element.delegate("li","mouseenter",function(t){t.stopImmediatePropagation();if(e.contains(this,t.relatedTarget))return;r&&clearTimeout(r),n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").andSelf().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this)}).delegate("li","mouseleave",function(t){if(e.contains(this,t.relatedTarget))return;e(this).find(".vakata-context-hover").andSelf().removeClass("vakata-context-hover")}).bind("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(r=setTimeout(function(t){return function(){e.vakata.context.hide()}}(this),e.vakata.context.settings.hide_onmouseleave))}).delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(t){!e(this).blur().parent().hasClass("vakata-context-disabled")&&e.vakata.context._execute(e(this).attr("rel"))!==!1&&e.vakata.context.hide()}).appendTo("body"),e(document).bind("mousedown",function(t){n.is_visible&&!e.contains(n.element[0],t.target)&&e.vakata.context.hide()}).bind("context_show.vakata",function(e,r){n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&n.element.addClass("vakata-context-rtl").css("direction","rtl"),n.element.find("ul").hide().end()}),(typeof e.hotkeys!="undefined"||typeof e.vakata_hotkeys!="undefined")&&e(document).bind("keydown","up",function(e){if(n.is_visible){var t=n.element.find("ul:visible").andSelf().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first();t.length||(t=n.element.find("ul:visible").andSelf().last().children("li:not(.vakata-context-separator)").last()),t.addClass("vakata-context-hover"),e.stopImmediatePropagation(),e.preventDefault()}}).bind("keydown","down",function(e){if(n.is_visible){var t=n.element.find("ul:visible").andSelf().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first();t.length||(t=n.element.find("ul:visible").andSelf().last().children("li:not(.vakata-context-separator)").first()),t.addClass("vakata-context-hover"),e.stopImmediatePropagation(),e.preventDefault()}}).bind("keydown","right",function(e){n.is_visible&&(n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover"),e.stopImmediatePropagation(),e.preventDefault())}).bind("keydown","left",function(e){n.is_visible&&(n.element.find(".vakata-context-hover").last().parents("li:eq(0)").find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover"),e.stopImmediatePropagation(),e.preventDefault())}).bind("keydown","esc",function(t){e.vakata.context.hide(),t.preventDefault()}).bind("keydown","space",function(e){n.element.find(".vakata-context-hover").last().children("a").click(),e.preventDefault()})})}(jQuery),function(e){var t=function(e){var t=/["\\\x00-\x1f\x7f-\x9f]/g,n={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return e.match(t)?'"'+e.replace(t,function(e){var t=n[e];return typeof t=="string"?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'};e.vakata.json={encode:function(n){if(n===null)return"null";var r=[],i;switch(typeof n){case"undefined":return undefined;case"number":case"boolean":return n+"";case"string":return t(n);case"object":if(e.isFunction(n.toJSON))return e.vakata.json.encode(n.toJSON());if(n.constructor===Date)return'"'+n.getUTCFullYear()+"-"+String("0"+(n.getUTCMonth()+1)).slice(-2)+"-"+String("0"+n.getUTCDate()).slice(-2)+"T"+String("0"+n.getUTCHours()).slice(-2)+":"+String("0"+n.getUTCMinutes()).slice(-2)+":"+String("0"+n.getUTCSeconds()).slice(-2)+"."+String("00"+n.getUTCMilliseconds()).slice(-3)+'Z"';if(n.constructor===Array){for(i=0;i<n.length;i++)r.push(e.vakata.json.encode(n[i])||"null");return"["+r.join(",")+"]"}return e.each(n,function(n,i){if(e.isFunction(i))return!0;n=typeof n=="number"?'"'+n+'"':t(n),i=e.vakata.json.encode(i),r.push(n+":"+i)}),"{"+r.join(", ")+"}"}},decode:function(t){return e.parseJSON(t)}}}(jQuery),function(e){e.vakata.cookie=function(t,n,r){var i,s,o,u;if(arguments.length>1&&String(n)!=="[object Object]"){r=e.extend({},r);if(n===null||n===undefined)r.expires=-1;return typeof r.expires=="number"&&(i=r.expires,s=r.expires=new Date,s.setDate(s.getDate()+i)),n=String(n),document.cookie=[encodeURIComponent(t),"=",r.raw?n:encodeURIComponent(n),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}return r=n||{},u=r.raw?function(e){return e}:decodeURIComponent,(o=(new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)")).exec(document.cookie))?u(o[1]):null}}(jQuery),function(e){function f(){var t=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),t=!0,window.localStorage.removeItem("_tmptest")}catch(i){}if(t)try{window.localStorage&&(n=window.localStorage,u="localStorage")}catch(s){}else if("globalStorage"in window)try{window.globalStorage&&(n=window.globalStorage[window.location.hostname],u="globalStorage")}catch(o){}else{r=document.createElement("link");if(r.addBehavior){r.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(r);try{r.load("jStorage");var a="{}";a=r.getAttribute("jStorage"),n.jStorage=a,u="userDataBehavior"}catch(f){}}!u&&(!!e.vakata.cookie("__vjstorage")||e.vakata.cookie("__vjstorage","{}",{expires:365})&&e.vakata.cookie("__vjstorage")==="{}")&&(r=null,n.jStorage=e.vakata.cookie("__vjstorage"),u="cookie");if(!u){r=null;return}}l(),p()}function l(){if(n.jStorage)try{t=o(String(n.jStorage))}catch(e){n.jStorage="{}"}else n.jStorage="{}";i=n.jStorage?String(n.jStorage).length:0}function c(){try{n.jStorage=s(t),u==="userDataBehavior"&&(r.setAttribute("jStorage",n.jStorage),r.save("jStorage")),u==="cookie"&&e.vakata.cookie("__vjstorage",n.jStorage,{expires:365}),i=n.jStorage?String(n.jStorage).length:0}catch(o){}}function h(e){if(!e||typeof e!="string"&&typeof e!="number")throw new TypeError("Key name must be string or numeric");if(e==="__jstorage_meta")throw new TypeError("Reserved key name");return!0}function p(){var e=+(new Date),n,r,i=Infinity,s=!1;a!==!1&&clearTimeout(a);if(!t.__jstorage_meta||typeof t.__jstorage_meta.TTL!="object")return;r=t.__jstorage_meta.TTL;for(n in r)r.hasOwnProperty(n)&&(r[n]<=e?(delete r[n],delete t[n],s=!0):r[n]<i&&(i=r[n]));i!==Infinity&&(a=setTimeout(p,i-e)),s&&c()}var t={},n={jStorage:"{}"},r=null,i=0,s=e.vakata.json.encode,o=e.vakata.json.decode,u=!1,a=!1;e.vakata.storage={version:"0.1.6.1",set:function(e,n){return h(e),t[e]=n,c(),n},get:function(e,n){return h(e),e in t?t[e]:typeof n=="undefined"?null:n},del:function(e){return h(e),e in t?(delete t[e],t.__jstorage_meta&&typeof t.__jstorage_meta.TTL=="object"&&e in t.__jstorage_meta.TTL&&delete t.__jstorage_meta.TTL[e],c(),!0):!1},setTTL:function(e,n){var r=+(new Date);return h(e),n=Number(n)||0,e in t?(t.__jstorage_meta||(t.__jstorage_meta={}),t.__jstorage_meta.TTL||(t.__jstorage_meta.TTL={}),n>0?t.__jstorage_meta.TTL[e]=r+n:delete t.__jstorage_meta.TTL[e],c(),p(),!0):!1},flush:function(){return t={},c(),!0},storageObj:function(){function e(){}return e.prototype=t,new e},index:function(){var n=[],r;return e.each(t,function(e,t){e!=="__jstorage_meta"&&n.push(e)}),n},storageSize:function(){return i},currentBackend:function(){return u},storageAvailable:function(){return!!u}},f()}(jQuery),function(e){e.vakata.pretty_date={lang:{ago:"Ago",from:"From Now",now:"Just Now",minute:"Minute",minutes:"Minutes",hour:"Hour",hours:"Hours",day:"Day",days:"Days",week:"Week",weeks:"Weeks",month:"Month",months:"Months",year:"Year",years:"Years"},parse:function(t,n){t=new Date(t.replace(/-/g,"/").replace(/[TZ]/g," ").replace(/\+\d\d\:\d\d$/,"")),n=n||new Date;var r=e.vakata.pretty_date.lang,i=[[60,r.now],[3600,r.minute,r.minutes,60],[86400,r.hour,r.hours,3600],[604800,r.day,r.days,86400],[2628e3,r.week,r.weeks,604800],[31536e3,r.month,r.months,2628e3],[Infinity,r.year,r.years,31536e3]],s=(n-t+n.getTimezoneOffset()*6e4)/1e3,o=function(e,t){var n=.1;return e>=t&&e<=t*(1+n)?t:e},u;s<0?(s=Math.abs(s),u=" "+r.from):u=" "+r.ago;for(var a=0,f=i[0];i[a];f=i[++a])if(s<f[0]){if(a===0)return f[1];var l=Math.ceil(o(s,f[3])/f[3]);return l+" "+(l!==1?f[2]:f[1])+(a>0?u:"")}},init:function(t,n){e("time, [datetime]").vakata_pretty_date(n),setInterval(function(){e("time, [datetime]").vakata_pretty_date(n)},t||6e4)}},e.fn.vakata_pretty_date=function(t,n){return t||(t="%{s}"),this.each(function(){var r=jQuery(this),i=e.vakata.pretty_date.parse(r.attr("datetime"),n);i&&(i=t.replace("%{s}",i),r.html()!==i&&r.html(i))})}}(jQuery),function(e){e.vakata.selection={get:function(e){if(window.getSelection){if(e)return window.getSelection().toString();var t=window.getSelection(),n=t.getRangeAt&&t.rangeCount?t.getRangeAt(0):document.createRange(),r=document.createElement("div");return t.getRangeAt||(n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset)),r.appendChild(n.cloneContents()),r.innerHTML}return document.selection?document.selection.createRange()[e?"text":"htmlText"]:""},elm_get:function(e){e=typeof e=="string"?document.getElementById(e):e,e.jquery&&(e=e.get(0));if("selectionStart"in e)return{start:e.selectionStart,end:e.selectionEnd,length:e.selectionEnd-e.selectionStart,text:e.value.substr(e.selectionStart,e.selectionEnd-e.selectionStart)};if(!document.selection)return{start:e.value.length,end:e.value.length,length:0,text:""};e.focus();var t=document.selection.createRange(),n=!1,r=!1,i,s,o,u;if(t&&t.parentElement()===e)return i=e.value.length,s=e.value.replace(/\r\n/g,"\n"),n=e.createTextRange(),n.moveToBookmark(t.getBookmark()),r=e.createTextRange(),r.collapse(!1),n.compareEndPoints("StartToEnd",r)>-1?o=u=i:(o=-n.moveStart("character",-i),o+=s.slice(0,o).split("\n").length-1,n.compareEndPoints("EndToEnd",r)>-1?u=i:(u=-n.moveEnd("character",-i),u+=s.slice(0,u).split("\n").length-1)),s=e.value.slice(o,u),{start:o,end:u,length:s.length,text:s}},elm_set:function(t,n,r){t=typeof t=="string"?document.getElementById(t):t,t.jquery&&(t=t.get(0));if("selectionStart"in t)t.focus(),t.selectionStart=n,t.selectionEnd=r;else if(document.selection){t.focus();var i=t.createTextRange(),s=t.value.replace(/\r\n/g,"\n");n-=s.slice(0,n).split("\n").length-1,r-=s.slice(0,r).split("\n").length-1,i.collapse(!0),i.moveEnd("character",r),i.moveStart("character",n),i.select()}return e.vakata.selection.elm_get(t)},elm_replace:function(t,n){t=typeof t=="string"?document.getElementById(t):t,t.jquery&&(t=t.get(0));var r=e.vakata.selection.elm_get(t),i=r.start,s=i+n.length;return t.value=t.value.substr(0,i)+n+t.value.substr(r.end,t.value.length),e.vakata.selection.elm_set(t,i,s),{start:i,end:s,length:n.length,text:n}},elm_get_caret:function(t){return e.vakata.selection.elm_get(t).end},elm_set_caret:function(t,n){return e.vakata.selection.elm_set(t,n,n)},elm_get_caret_position:function(t){t=typeof t=="string"?document.getElementById(t):t,t.jquery&&(t=t.get(0));var n=e.vakata.selection.elm_get_caret(t),r=t.value.substring(0,n).replace(/&/g,"&amp;").replace(/</ig,"&lt;").replace(/>/ig,"&gt;").replace(/\r/g,"").replace(/\t/g,"&#10;").replace(/\n/ig,"<br />"),i=e.vakata.get_scrollbar_width(),s=e(t).width(),o=e(t).height();return t.scrollHeight>o&&(s-=i),t.scrollWidth>s&&(o-=i),t=e(t),t=e("<div />").html(r).css({background:"red",width:s+"px",height:"auto",position:"absolute",left:"0px",top:"-10000px",fontSize:t.css("fontSize"),fontFamily:t.css("fontFamily"),fontWeight:t.css("fontWeight"),fontVariant:t.css("fontVariant"),fontStyle:t.css("fontStyle"),textTransform:t.css("textTransform"),lineHeight:t.css("lineHeight"),whiteSpace:"pre-wrap"}),t.append('<span class="caret">&nbsp;</span>').appendTo("body"),r=t.find("span.caret"),n=r.offset(),n.top=n.top+1e4+r.height(),t.remove(),n}}}(jQuery),function(e){e.fn.vakata_highlight=function(t){var n=this;return typeof t=="string"&&(t=[t]),e.isArray(t)&&(t={words:t}),t=e.extend(!0,{},{css_class:"vakata-highlight",words:[],color:"#99ccff"},t),t.words.length&&this.each(function(){var n=e(this);e.each(t.words,function(r,i){var s=!1;typeof t.color=="string"&&(s=t.color),e.isArray(t.color)&&typeof t.color[r]=="string"&&(s=t.color[r]),n.find(':vakata_icontains("'+i.replace(/\"/ig,"")+'")').filter("strong, span, li, p, h1, h2, h3, h4, h5, h6, div, u, em, i, dt, dd").contents().filter(function(){return this.nodeType===3}).each(function(){if(this.nodeValue.toLowerCase().indexOf(i.toLowerCase())>=0){this.nodeValue=this.nodeValue.replace(new RegExp("("+i.replace(/([\-.*+?\^${}()|\[\]\/\\])/g,"\\$1")+")","ig"),"|{{{$1}}}|");var n=e(this).parent();n.html(n.html().replace(/\|\{\{\{/g,'<span class="'+t.css_class+" "+t.css_class+"-"+r+'" '+(typeof s=="string"?' style="background:'+s+';" ':"")+">").replace(/\}\}\}\|/g,"</span>"))}})})}),n}}(jQuery),define("libs/jquery/jstree/vakata",function(){}),function(){if(!jQuery)throw"jsTree: jQuery not included.";if(jQuery.jstree)return;(function(e){var t=[],n=-1,r={},i={};e.jstree={VERSION:"1.0.0",IS_IE6:jQuery.browser.msie&&parseInt(jQuery.browser.version,10)===6,IS_IE7:jQuery.browser.msie&&parseInt(jQuery.browser.version,10)===6,IS_FF2:jQuery.browser.mozilla&&parseFloat(jQuery.browser.version,10)<1.9,__construct:function(n){var i={},s={},o=[],u=[],a=0;return n=e(n),e.jstree._reference(n)&&e.jstree.__destruct(n),e.extend.apply(null,[!0,i].concat(Array.prototype.slice.call(arguments,1),n.data("jstree")||{})),o=e.isArray(i.plugins)?i.plugins:e.jstree.defaults.plugins.slice(),o=e.vakata.array_unique(o),i=e.extend(!0,{},e.jstree.defaults,i),e.each(r,function(t,n){t!=="core"&&e.inArray(t,o)===-1?(i[t]=null,delete i[t]):(u.push(t),s[t]={})}),i.plugins=u,a=parseInt(t.push({}),10)-1,n.data("jstree_instance_id",a).addClass("jstree jstree-"+a),this.data=s,this.get_index=function(){return a},this.get_container=function(){return n},this.get_container_ul=function(){return n.children("ul:eq(0)")},this.get_settings=function(t){return t?i:e.extend(!0,{},i)},this.__trigger=function(e,t){if(!e)return;t||(t={}),typeof e=="string"&&(e=e.replace(".jstree","")+".jstree"),t.inst=this,this.get_container().triggerHandler(e,t)},t[a]=this,e.each(u,function(e,n){r[n]&&r[n].__construct.apply(t[a])}),this.__trigger("__construct"),e.jstree._focus(a),this},__destruct:function(i){i=e.jstree._reference(i);if(!i)return!1;var s=i.get_settings(),o=i.get_index(),u=0;if(n===o){for(u in t)if(t.hasOwnProperty(u)&&u!==o){e.jstree._focus(u);break}n===o&&e.jstree._focus(!1)}return e.each(s.plugins,function(e,t){try{r[t].__destruct.apply(i)}catch(n){}}),i.__trigger("__destruct"),i.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")}),e(document).unbind(".jstree-"+o).undelegate(".jstree-"+o),delete t[o],!0},__call:function(t,n,r){t=e.jstree._reference(t);if(!t||!e.isFunction(t[n]))return;return t[n].apply(t,r)},_reference:function(n){if(t[n])return t[n];var r=e(n);return!r.length&&typeof n=="string"&&(r=e("#"+n)),r.length?t[r.closest(".jstree").data("jstree_instance_id")]||null:null},_focused:function(){return t[n]||null},_focus:function(r){return r===!1?(t[n].get_container().removeClass("jstree-focused"),t[n].__trigger("_defocus"),n=-1,!1):(r=e.jstree._reference(r),!r||r.get_index()===n?!1:(n!==-1&&(t[n].get_container().removeClass("jstree-focused"),t[n].__trigger("_defocus")),n=r.get_index(),r.get_container().addClass("jstree-focused"),r.__trigger("_focus"),!0))},plugin:function(t,n){n=e.extend({},{__construct:e.noop,__destuct:e.noop,_fn:{},defaults:!1},n),r[t]=n,e.jstree.defaults[t]=n.defaults,e.each(n._fn,function(n,r){r.plugin=t,r.old=i[n],i[n]=function(){var t,i=r,s=Array.prototype.slice.call(arguments),o=new e.Event("before.jstree"),u=this.get_settings(!0).plugins;do{if(i&&i.plugin&&e.inArray(i.plugin,u)!==-1)break;i=i.old}while(i);if(!i)return;if(n.indexOf("_")===0)t=i.apply(this,s);else{t=this.__trigger(o,{func:n,args:s,plugin:i.plugin});if(t===!1)return;t=i.apply(e.extend({},this,{__callback:function(e){return this.__trigger(n,{args:s,rslt:e,plugin:i.plugin}),e},__call_old:function(e){return i.old.apply(this,e?Array.prototype.slice.call(arguments,1):s)}}),s)}return t},i[n].old=r.old,i[n].plugin=t})},defaults:{plugins:[]}},e.fn.jstree=function(t){var n=typeof t=="string",r=Array.prototype.slice.call(arguments,1),i=this;return this.each(function(){if(n){var s=e.jstree.__call(this,t,r);if(typeof s!="undefined"&&(t.indexOf(!1)||s!==!0&&s!==!1))return i=s,!1}else n=new e.jstree.__construct(this,t)}),i},i=e.jstree.__construct.prototype,e.expr[":"].jstree=function(t,n,r){return typeof e(t).data("jstree_instance_id")!="undefined"}})(jQuery),function(e){var t=!1,n=!1;e(function(){e.jstree.SCROLLBAR_WIDTH=e.vakata.get_scrollbar_width()}),e.jstree.plugin("core",{__construct:function(){this.data.core.rtl=this.get_container().css("direction")==="rtl",this.data.core.rtl&&this.get_container().addClass("jstree-rtl"),this.data.core.ready=!1,this.get_container().bind("__construct.jstree",e.proxy(function(){setTimeout(e.proxy(function(){this&&this.init()},this),0)},this)).bind("before.jstree",e.proxy(function(e,t){if(!/^is_locked|unlock$/.test(t.func)&&this.data.core.locked)return e.stopImmediatePropagation(),!1},this)).bind("create_node.jstree",e.proxy(function(e,t){this.clean_node(t.rslt.obj)},this)).bind("load_node.jstree",e.proxy(function(e,t){this.clean_node(t.rslt.obj===-1?this.get_container_ul().children("li"):t.rslt.obj.find("> ul > li")),!this.data.core.ready&&!this.get_container_ul().find(".jstree-loading:eq(0)").length&&(this.data.core.ready=!0,this.__trigger("__ready"))},this)).bind("__loaded.jstree",e.proxy(function(e,t){t.inst.get_container_ul().children("li").each(function(){t.inst.correct_node(this)})},this)).bind("open_node.jstree",e.proxy(function(e,t){t.rslt.obj.find("> ul > li").each(function(){t.inst.correct_node(this)})},this)).bind("mousedown.jstree",e.proxy(function(){e.jstree._focus(this.get_index())},this)).bind("dblclick.jstree",function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(t){}}}).delegate("li > ins","click.jstree",e.proxy(function(e){this.toggle_node(e.target)},this))},__destruct:function(){},defaults:{strings:!1},_fn:{_get_string:function(t){var n=this.get_settings(!0).core.strings;return e.isFunction(n)?n.call(this,t):n&&n[t]?n[t]:t},init:function(){this.data.core.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.core.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.get_container().html("<ul><li class='jstree-loading'><a href='#'>"+this._get_string("Loading ...")+"</a></li></ul>"),this.clean_node(-1),this.data.core.li_height=this.get_container_ul().children("li:eq(0)").height()||18,this.load_node(-1,function(){this.__trigger("__loaded")})},lock:function(){this.data.core.locked=!0,this.get_container().addClass("jstree-locked"),this.__callback()},unlock:function(){this.data.core.locked=!1,this.get_container().removeClass("jstree-locked"),this.__callback()},is_locked:function(){return this.data.core.locked},get_node:function(t){var n=e(t,this.get_container());return n.is(".jstree")||t===-1?-1:(n=n.closest("li",this.get_container()),n.length?n:!1)},get_next:function(e,t){return e=this.get_node(e),e===-1?this.get_container_ul().children("li:eq(0)"):!e||!e.length?!1:t?e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):!1:e.hasClass("jstree-open")?e.find("li:eq(0)"):e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):e.parentsUntil(".jstree","li").next("li").eq(0)},get_prev:function(e,t){e=this.get_node(e);if(e===-1)return this.get_container().find("> ul > li:last-child");if(!e||!e.length)return!1;if(t)return e.prevAll("li").length>0?e.prevAll("li:eq(0)"):!1;if(e.prev("li").length){e=e.prev("li").eq(0);while(e.hasClass("jstree-open"))e=e.children("ul:eq(0)").children("li:last");return e}var n=e.parentsUntil(".jstree","li:eq(0)");return n.length?n:!1},get_parent:function(e){e=this.get_node(e);if(e===-1||!e||!e.length)return!1;var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},get_children:function(e){return e=this.get_node(e),e===-1?this.get_container_ul().children("li"):!e||!e.length?!1:e.find("> ul > li")},is_parent:function(e){return e=this.get_node(e),e&&e!==-1&&(e.find("> ul > li:eq(0)").length||e.hasClass("jstree-closed"))},is_loaded:function(e){return e=this.get_node(e),e&&(e===-1&&!this.get_container().find("> ul > li.jstree-loading").length||e!==-1&&!e.hasClass("jstree-loading")&&(e.find("> ul > li").length||e.hasClass("jstree-leaf")))},is_loading:function(e){return e=this.get_node(e),e&&(e===-1&&this.get_container().find("> ul > li.jstree-loading").length||e!==-1&&e.hasClass("jstree-loading"))},is_open:function(e){return e=this.get_node(e),e&&e!==-1&&e.hasClass("jstree-open")},is_closed:function(e){return e=this.get_node(e),e&&e!==-1&&e.hasClass("jstree-closed")},is_leaf:function(e){return e=this.get_node(e),e&&e!==-1&&e.hasClass("jstree-leaf")},load_node:function(t,n){return t=this.get_node(t),t?(t!==-1&&t.addClass("jstree-loading"),this._load_node(t,e.proxy(function(e){t!==-1&&t.removeClass("jstree-loading"),this.__callback({obj:t,status:e}),n&&n.call(this,t,e)},this)),!0):(n.call(this,t,!1),!1)},_load_node:function(e,t){e===-1&&this.get_container_ul().empty().append(this.data.core.original_container_html.clone(!0)),t.call(null,!0)},open_node:function(t,n,r){t=this.get_node(t);if(t===-1||!t||!t.length)return!1;if(!this.is_closed(t))return n&&n.call(this,t,!1),!1;if(!this.is_loaded(t))this.load_node(t,function(e,t){return t?this.open_node(e,n,r):n?n.call(this,e,!1):!1});else{var i=this;t.children("ul").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").children("ul").stop(!0,!0).slideDown(e.jstree.IS_IE6?0:r,function(){this.style.display="",i.__trigger("__after_open",{rslt:{obj:t}})}),n&&n.call(this,t,!0),this.__callback({obj:t})}},close_node:function(t,n){t=this.get_node(t);if(!t||!t.length||!this.is_open(t))return!1;var r=this;t.children("ul").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").children("ul").stop(!0,!0).slideUp(e.jstree.IS_IE6?0:n,function(){this.style.display="",r.__trigger("__after_close",{rslt:{obj:t}})}),this.__callback({obj:t})},toggle_node:function(e){if(this.is_closed(e))return this.open_node(e);if(this.is_open(e))return this.close_node(e)},open_all:function(e,t,n){e=e?this.get_node(e):-1,e=!e||e===-1?this.get_container_ul():e,n=n||e;var r=this;e=this.is_closed(e)?e.find("li.jstree-closed").andSelf():e.find("li.jstree-closed"),e.each(function(){r.open_node(this,r.is_loaded(this)?!1:function(e){this.open_all(e,t,n)},t||0)}),n.find("li.jstree-closed").length===0&&this.__callback({obj:n})},close_all:function(e,t){e=e?this._get_node(e):-1;var n=!e||e===-1?this.get_container_ul():e,r=this;n=this.is_open(n)?n.find("li.jstree-open").andSelf():n.find("li.jstree-open"),n.each(function(){r.close_node(this,t||0)}),this.__callback({obj:e})},clean_node:function(t){t=this.get_node(t),t=!t||t===-1?this.get_container().find("li"):t.find("li").andSelf();var n=this;return t.each(function(){var t=e(this),r=t.data("jstree"),i=r&&r.opened||t.hasClass("jstree-open")?"open":r&&r.closed||t.children("ul").length?"closed":"leaf";r&&r.opened&&delete r.opened,r&&r.closed&&delete r.closed,t.removeClass("jstree-open jstree-closed jstree-leaf jstree-last"),t.children("a").length?e.trim(t.children("a").attr("href"))||t.children("a").attr("href","#"):(t.contents().filter(function(){return this.nodeType===3||this.tagName!=="UL"}).wrapAll('<a href="#"></a>'),t.children("a").html(t.children("a").html().replace(/[\s\t\n]+$/,""))),t.children
("ins.jstree-ocl").length||t.prepend("<ins class='jstree-icon jstree-ocl'>&#160;</ins>"),t.is(":last-child")&&t.addClass("jstree-last");switch(i){case"leaf":t.addClass("jstree-leaf");break;case"closed":t.addClass("jstree-open"),n.close_node(t,0);break;case"open":t.addClass("jstree-closed"),n.open_node(t,!1,0)}})},correct_node:function(t,n){return t=this.get_node(t),!t||t===-1&&!n?!1:(t===-1?t=this.get_container().find("li"):t=n?t.find("li").andSelf():t,t.each(function(){var t=e(this);switch(!0){case t.hasClass("jstree-open")&&!t.find("> ul > li").length:t.removeClass("jstree-open").addClass("jstree-leaf").children("ul").remove();break;case t.hasClass("jstree-leaf")&&!!t.find("> ul > li").length:t.removeClass("jstree-leaf").addClass("jstree-closed")}t[t.is(":last-child")?"addClass":"removeClass"]("jstree-last")}),t)},scroll_to_node:function(t){var n=this.get_container()[0],r;if(n.scrollHeight>n.offsetHeight){t=this.get_node(t);if(!t||t===-1||!t.length||!t.is(":visible"))return;r=t.offset().top-this.get_container().offset().top,r<0&&(n.scrollTop=n.scrollTop+r-1),r+this.data.core.li_height+(n.scrollWidth>n.offsetWidth?e.jstree.SCROLLBAR_WIDTH:0)>n.offsetHeight&&(n.scrollTop=n.scrollTop+(r-n.offsetHeight+this.data.core.li_height+1+(n.scrollWidth>n.offsetWidth?e.jstree.SCROLLBAR_WIDTH:0)))}},get_state:function(){var e={open:[],scroll:{left:this.get_container().scrollLeft(),top:this.get_container().scrollTop()}};return this.get_container_ul().find(".jstree-open").each(function(){this.id&&e.open.push(this.id)}),e},set_state:function(t,n){if(t){if(e.isArray(t.open)){var r=!0,i=this;return e.each(t.open.concat([]),function(n,s){s=document.getElementById(s),s&&(i.is_loaded(s)?(i.is_closed(s)&&i.open_node(s,!1,0),e.vakata.array_remove(t.open,n)):(i.is_loading(s)||i.open_node(s,e.proxy(function(){this.set_state(t)},i),0),r=!1))}),r&&(delete t.open,this.set_state(t,n)),!1}return t.scroll?(t.scroll&&typeof t.scroll.left!="undefined"&&this.get_container().scrollLeft(t.scroll.left),t.scroll&&typeof t.scroll.top!="undefined"&&this.get_container().scrollTop(t.scroll.top),delete t.scroll,delete t.open,this.set_state(t,n),!1):e.isEmptyObject(t)?(n&&n.call(this),this.__callback(),!1):!0}return!1},refresh:function(){this.data.core.state=this.get_state(),this.load_node(-1,function(t,n){n&&this.set_state(e.extend(!0,{},this.data.core.state),function(){this.__trigger("refresh")}),this.data.core.state=null})},get_text:function(e,t){return e=this.get_node(e),!e||e===-1||!e.length?!1:(e=e.children("a:eq(0)").clone(),e.children(".jstree-icon").remove(),e[t?"text":"html"]())},set_text:function(e,t){e=this.get_node(e);if(!e||e===-1||!e.length)return!1;e=e.children("a:eq(0)");var n=e.children("INS").clone();return e.html(t).prepend(n),this.__callback({obj:e,text:t}),!0},parse_json:function(t){var n,r,i,s;if(e.isArray(t))return i=e("<ul />"),s=this,e.each(t,function(e,t){i.append(s.parse_json(t))}),i;typeof t=="undefined"&&(t={}),typeof t=="string"&&(t={title:t}),t.li_attr||(t.li_attr={}),t.a_attr||(t.a_attr={}),t.a_attr.href||(t.a_attr.href="#"),t.title||(t.title=this._get_string("New node")),n=e("<li />").attr(t.li_attr),r=e("<a />").attr(t.a_attr).html(t.title),i=e("<ul />"),t.data&&!e.isEmptyObject(t.data)&&n.data(t.data);if(t.children===!0||e.isArray(t.children)||n.data("jstree")&&e.isArray(n.data("jstree").children))n.data("jstree")||n.data("jstree",{}),n.data("jstree").closed=!0;return n.append(r),e.isArray(t.children)&&(e.each(t.children,e.proxy(function(e,t){i.append(this.parse_json(t))},this)),n.append(i)),n},get_json:function(t,n){t=typeof t!="undefined"?this.get_node(t):!1,!n&&(!t||t===-1)&&(t=this.get_container_ul().children("li"));var r,i,s={},o={},u={};return!t||!t.length?!1:t.length>1||!n?(r=[],i=this,t.each(function(){r.push(i.get_json(e(this),!0))}),r):(u=e.vakata.attributes(t,!0),e.each(u,function(t,n){if(t==="id")return s[t]=n,!0;n=e.trim(n.replace(/\bjstree[^ ]*/ig,"").replace(/\s+$/ig," ")),n.length&&(s[t]=n)}),u=e.vakata.attributes(t.children("a"),!0),e.each(u,function(t,n){if(t==="id")return o[t]=n,!0;n=e.trim(n.replace(/\bjstree[^ ]*/ig,"").replace(/\s+$/ig," ")),n.length&&(o[t]=n)}),r={title:this.get_text(t),data:e.extend(!0,{},t.data()||{}),children:!1,li_attr:s,a_attr:o},r.data.jstree||(r.data.jstree={}),this.is_open(t)&&(r.data.jstree.opened=!0),this.is_closed(t)&&(r.data.jstree.closed=!0),t=t.find("> ul > li"),t.length&&(r.children=[],i=this,t.each(function(){r.children.push(i.get_json(e(this),!0))})),r)},create_node:function(e,t,n,r,i){e=this.get_node(e),n=typeof n=="undefined"?"last":n;if(e!==-1&&!e.length)return!1;if(!n.match(/^(before|after)$/)&&!i&&!this.is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,n,r,!0)});var s=this.parse_json(t),o=e===-1?this.get_container():e;e===-1&&(n==="before"&&(n="first"),n==="after"&&(n="last"));switch(n){case"before":n=e.index(),e=this.get_parent(e);break;case"after":n=e.index()+1,e=this.get_parent(e);break;case"inside":case"first":n=0;break;case"last":n=o.children("ul").children("li").length;break;default:n||(n=0)}return this.check("create_node",s,e,n)?(o=e===-1?this.get_container():e,o.children("ul").length||o.append("<ul />"),o.children("ul").children("li").eq(n).length?o.children("ul").children("li").eq(n).before(s):o.children("ul").append(s),this.correct_node(e,!0),r&&r.call(this,s),this.__callback({obj:s,parent:e,position:s.index()}),s):!1},rename_node:function(e,t){e=this.get_node(e);var n=this.get_text(e);if(!this.check("rename_node",e,this.get_parent(e),t))return!1;e&&e.length&&(this.set_text(e,t),this.__callback({obj:e,title:t,old:n}))},delete_node:function(e){e=this.get_node(e);if(!e||e===-1||!e.length)return!1;var t=this.get_parent(e),n=this.get_prev(e);return this.check("delete_node",e,t,e.index())?(e=e.detach(),this.correct_node(t),this.correct_node(n),this.__callback({obj:e,prev:n,parent:t}),e):!1},check:function(t,n,r,i){var s=t.match(/^move_node|copy_node|create_node$/i)?r:n;s=s===-1?this.get_container().data("jstree"):s.data("jstree");if(s&&s.functions&&s.functions[t]){s=s.functions[t],e.isFunction(s)&&(s=s.call(this,t,n,r,i));if(s===!1)return!1}switch(t){case"create_node":break;case"rename_node":break;case"move_node":s=r===-1?this.get_container():r,s=s.children("ul").children("li");if(s.length&&s.index(n)!==-1&&(i===n.index()||i===n.index()+1))return!1;if(r!==-1&&r.parentsUntil(".jstree","li").andSelf().index(n)!==-1)return!1;break;case"copy_node":break;case"delete_node":}return!0},move_node:function(t,n,r,i,s){t=this.get_node(t),n=this.get_node(n),r=typeof r=="undefined"?0:r;if(!t||t===-1||!t.length)return!1;if(n!==-1&&!n.length)return!1;if(!r.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return this.load_node(n,function(){this.move_node(t,n,r,i,!0)});var o=this.get_parent(t),u=!r.toString().match(/^(before|after)$/)||n===-1?n:this.get_parent(n),a=e.jstree._reference(t),f=n===-1?this:e.jstree._reference(n),l=a.get_index()!==f.get_index();u===-1&&(n=f.get_container(),r==="before"&&(r="first"),r==="after"&&(r="last"));switch(r){case"before":r=n.index();break;case"after":r=n.index()+1;break;case"inside":case"first":r=0;break;case"last":r=n.children("ul").children("li").length;break;default:r||(r=0)}return this.check("move_node",t,u,r)?(n.children("ul").length||n.append("<ul />"),n.children("ul").children("li").eq(r).length?n.children("ul").children("li").eq(r).before(t):n.children("ul").append(t),l&&(t.find(".jstree-icon, .jstree-ocl").remove(),this.clean_node(t)),a.correct_node(o,!0),f.correct_node(u,!0),i&&i.call(this,t,u,t.index()),this.__callback({obj:t,parent:u,position:t.index(),old_parent:o,is_multi:l,old_instance:a,new_instance:f}),!0):!1},copy_node:function(t,n,r,i,s){t=this.get_node(t),n=this.get_node(n),r=typeof r=="undefined"?"last":r;if(!t||t===-1||!t.length)return!1;if(n!==-1&&!n.length)return!1;if(!r.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return this.load_node(n,function(){this.copy_node(t,n,r,i,!0)});var o=t,u=this.get_parent(t),a=!r.toString().match(/^(before|after)$/)||n===-1?n:this.get_parent(n),f=e.jstree._reference(t),l=n===-1?this:e.jstree._reference(n),c=f.get_index()!==l.get_index();t=t.clone(!0),t.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)}),a===-1&&(n=l.get_container(),r==="before"&&(r="first"),r==="after"&&(r="last"));switch(r){case"before":r=n.index();break;case"after":r=n.index()+1;break;case"inside":case"first":r=0;break;case"last":r=n.children("ul").children("li").length;break;default:r||(r=0)}return this.check("copy_node",o,a,r)?(n.children("ul").length||n.append("<ul />"),n.children("ul").children("li").eq(r).length?n.children("ul").children("li").eq(r).before(t):n.children("ul").append(t),c&&t.find(".jstree-icon, .jstree-ocl").remove(),l.clean_node(t),l.correct_node(a,!0),i&&i.call(this,t,a,t.index(),o),this.__callback({obj:t,parent:a,old_parent:u,position:t.index(),original:o,is_multi:c,old_instance:f,new_instance:l}),!0):!1},cut:function(e){e=this.get_node(e);if(!e||e===-1||!e.length)return!1;t=e,n="move_node",this.__callback({obj:e})},copy:function(e){e=this.get_node(e);if(!e||e===-1||!e.length)return!1;t=e,n="copy_node",this.__callback({obj:e})},can_paste:function(){return n!==!1&&t!==!1},paste:function(e){e=this.get_node(e);if(!e||!n||!n.match(/^(copy_node|move_node)$/)||!t)return!1;this[n](t,e),this.__callback({obj:e,nodes:t,mode:n}),t=!1,n=!1},edit:function(t,n){t=this.get_node(t);if(!t||t===-1||!t.length)return!1;t.parentsUntil(".jstree",".jstree-closed").each(e.proxy(function(e,t){this.open_node(t,!1,0)},this));var r=this.data.core.rtl,i=this.get_container().width(),s=t.children("a:eq(0)"),o=t.children("ins"),u=s.children("ins"),a=o.width()*o.length,f=u.width()*u.length,l=typeof n=="string"?n:this.get_text(t),c=e("<div />",{css:{position:"absolute",top:"-200px",left:r?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),h=t.css("position","relative").append(e("<input />",{value:l,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:r?"auto":a+f+4+"px",right:r?a+f+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:e.proxy(function(){var e=t.children(".jstree-rename-input"),n=e.val();n===""&&(n=l),c.remove(),e.remove(),this.rename_node(t,n),t.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;if(t===27){this.value=l,this.blur();return}if(t===13){this.blur();return}h.width(Math.min(c.text("pW"+this.value).width(),i))},keypress:function(e){var t=e.keyCode||e.which;if(t===13)return!1}})).children(".jstree-rename-input"),p={fontFamily:s.css("fontFamily")||"",fontSize:s.css("fontSize")||"",fontWeight:s.css("fontWeight")||"",fontStyle:s.css("fontStyle")||"",fontStretch:s.css("fontStretch")||"",fontVariant:s.css("fontVariant")||"",letterSpacing:s.css("letterSpacing")||"",wordSpacing:s.css("wordSpacing")||""};this.set_text(t,""),c.css(p),h.css(p).width(Math.min(c.text("pW"+h[0].value).width(),i))[0].select()}}}),e(function(){var t=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree .jstree-icon { display:inline-block; text-decoration:none; margin:0; padding:0; vertical-align:top; } .jstree .jstree-ocl { width:18px; height:18px; text-align:center; line-height:18px; cursor:default; vertical-align:top; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(e.jstree.IS_IE6){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}t+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } "}e.jstree.IS_IE7&&(t+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),e.jstree.IS_FF2&&(t+=".jstree .jstree-icon { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } "),e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery)}(),define("libs/jquery/jstree/jstree",function(){}),function(e){e.jstree.plugin("sort",{__construct:function(){this.get_container().bind("load_node.jstree",e.proxy(function(e,t){var n=this.get_node(t.rslt.obj);n=n===-1?this.get_container_ul():n.children("ul"),this._sort(n,!0)},this)).bind("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this._sort(t.rslt.obj.parent(),!1)},this)).bind("move_node.jstree copy_node.jstree",e.proxy(function(e,t){var n=t.rslt.parent===-1?this.get_container_ul():t.rslt.parent.children("ul");this._sort(n,!1)},this))},defaults:function(e,t){return this.get_text(e,!0)>this.get_text(t,!0)?1:-1},_fn:{_sort:function(t,n){var r=this.get_settings(!0).sort,i=this;t.append(e.makeArray(t.children("li")).sort(e.proxy(r,i))),t.children("li").each(function(){i.correct_node(this,!1)}),n&&(t.find("> li > ul").each(function(){i._sort(e(this))}),i.correct_node(t.children("li"),!0))}}}),e.jstree.defaults.plugins.push("sort")}(jQuery),define("libs/jquery/jstree/jstree.sort",function(){}),function(e){e.jstree.plugin("ui",{__construct:function(){this.data.ui.selected=e(),this.data.ui.hovered=null,this.data.ui.last_selected=!1,this.get_container().delegate("a","click.jstree",e.proxy(function(e){e.preventDefault(),e.currentTarget.blur();var t=this.get_settings(!0).ui,n=this.get_node(e.currentTarget),r=this.is_selected(n),i=t.select_multiple_modifier==="on"||t.select_multiple_modifier!==!1&&e&&e[t.select_multiple_modifier+"Key"],s=t.select_multiple_modifier==="on"||t.select_range_modifier!==!1&&e&&e[t.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==n[0]&&this.data.ui.last_selected.parent()[0]===n.parent()[0];switch(!0){case s&&this.data.ui.last_selected!==!1:this.select_range(n);break;case s&&this.data.ui.last_selected===!1:this.select_one(n);break;case r&&i:this.deselect_node(n);break;default:this.select_one(n,i)}},this)).delegate("a","mouseenter.jstree",e.proxy(function(e){this.hover_node(e.target)},this)).delegate("a","mouseleave.jstree",e.proxy(function(e){this.dehover_node(e.target)},this)).bind("delete_node.jstree",e.proxy(function(t,n){var r=this.get_node(n.rslt.obj),i=r&&r.length?r.find("a.jstree-clicked"):e(),s=this;i.each(function(){s.deselect_node(this)})},this)).bind("move_node.jstree",e.proxy(function(e,t){t.rslt.cy&&t.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_multiple_modifier:"ctrl",select_range_modifier:"shift",disable_nested_selection:!0},_fn:{get_node:function(e,t){return typeof e=="undefined"||e===null?t?this.data.ui.selected:this.data.ui.last_selected:this.__call_old()},hover_node:function(e){e=this.get_node(e);if(!e||!e.length||this.is_loading(e))return!1;e.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent(),this.scroll_to_node(e),this.__callback({obj:e})},dehover_node:function(){var e=this.data.ui.hovered,t;if(!e||!e.length)return!1;t=e.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===t[0]&&(this.data.ui.hovered=null),this.__callback({obj:e})},select_node:function(e){var t=this;e=this.get_node(e);if(e===-1||!e||!e.length||this.is_loading(e))return!1;e.children("a").addClass("jstree-clicked"),this.data.ui.last_selected=e,this.data.ui.selected=this.data.ui.selected.add(e),e.parents(".jstree-closed").each(function(){t.open_node(this,!1,0)}),this.__callback({obj:e})},deselect_node:function(e){e=this.get_node(e);if(!e||!e.length)return!1;this.is_selected(e)&&(e.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(e),this.data.ui.last_selected.get(0)===e.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:e}))},deselect_all:function(t){var n=t?e(t).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();n.children("a.jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=e(),this.data.ui.last_selected=!1,this.__callback({obj:n})},is_selected:function(e){return this.data.ui.selected.index(this.get_node(e))>=0},get_selected:function(t){return t?e(t).find("a.jstree-clicked").parent():this.data.ui.selected},select_range:function(e,t,n){var r=this,i,s;return e=this.get_node(e),t||(s=!0,t=this.data.ui.last_selected),t=this.get_node(t),e===-1||!e||!e.length||this.is_loading(e)?!1:t===-1||!t||!t.length||this.is_loading(t)?!1:(n||this.deselect_all(),i=e.index()<t.index(),t.addClass("jstree-last-selected"),e=e[i?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf().add(".jstree-last-selected"),t.removeClass("jstree-last-selected"),i||(e=e.vakata_reverse()),e.length?(e.each(function(){r.select_node(this)}),s&&(this.data.ui.last_selected=t),this.__callback({obj:e}),!0):!1)},select_one:function(e,t){e=this.get_node(e);if(e===-1||!e||!e.length||this.is_loading(e))return!1;if(!t)this.deselect_all();else if(this.get_settings(!0).ui.disable_nested_selection&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked:eq(0)").length||e.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;return this.select_node(e),this.__callback({obj:e}),!0},clean_node:function(t){t=this.__call_old();var n=this;return t.each(function(){var t=e(this),r=t.data("jstree");t.find(".jstree-clicked").removeClass("jstree-clicked"),r&&r.selected&&(n.select_node(t),delete r.selected)})},get_state:function(){var e=this.__call_old();return e.selected=[],this.data.ui.selected.each(function(){e.selected.push(this.id)}),e},set_state:function(t,n){if(this.__call_old()){if(t.selected){var r=this;return this.deselect_all(),e.each(t.selected,function(e,t){r.select_node(document.getElementById(t))}),delete t.selected,this.set_state(t,n),!1}return!0}return!1},get_json:function(e,t){var n=this.__call_old();return t&&this.is_selected(e)&&(n.data.jstree.selected=!0),n}}}),e.jstree.defaults.plugins.push("ui")}(jQuery),define("libs/jquery/jstree/jstree.ui",function(){}),function(e){var t=[];e.jstree.THEMES_DIR=!1,e.jstree.plugin("themes",{__construct:function(){this.get_container().bind("__construct.jstree",e.proxy(function(){var e=this.get_settings(!0).themes;this.data.themes.dots=e.dots,this.data.themes.icons=e.icons,e.url===!1&&e.theme===!1&&(e.theme=this.data.core.rtl?"default-rtl":"default"),this.set_theme(e.theme,e.url),this[this.data.themes.dots?"show_dots":"hide_dots"](),this[this.data.themes.icons?"show_icons":"hide_icons"]()},this))},defaults:{theme:!1,url:!1,dots:!0,icons:!0},_fn:{set_theme:function(n,r){if(!n)return!1;r||(r=e.jstree.THEMES_DIR+n+"/style.css"),e.inArray(r,t)===-1&&(e.vakata.css.add_sheet({url:r}),t.push(r)),this.data.themes.theme!==n&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=n),this.get_container().addClass("jstree-"+n),this.__callback(n)},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(e,t){return e=this.get_node(e),!e||e===-1||!e.length?!1:(e=e.find("> a > .jstree-themeicon"),t===!1?this.hide_icon(e):t.indexOf("/")===-1?e.addClass(t).attr("rel",t):e.css("background","url('"+t+"') center center no-repeat").attr("rel",t),!0)},get_icon:function(e){return e=this.get_node(e),!e||e===-1||!e.length?null:(e=e.find("> a > .jstree-themeicon"),e.hasClass("jstree-themeicon-hidden")?!1:(e=e.attr("rel"),e&&e.length?e:null))},hide_icon:function(e){return e=this.get_node(e),!e||e===-1||!e.length?!1:(e.find("> a > .jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(e){return e=this.get_node(e),!e||e===-1||!e.length?!1:(e.find("> a > .jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)},clean_node:function(t){t=this.__call_old();var n=this;return t.each(function(){var t=e(this),r=t.data("jstree");t.find("> a > ins.jstree-themeicon").length||t.children("a").prepend("<ins class='jstree-icon jstree-themeicon'>&#160;</ins>"),r&&typeof r.icon!="undefined"&&(n.set_icon(t,r.icon),delete r.icon)})},get_state:function(){var e=this.__call_old();return e.themes={theme:this.get_theme(),icons:this.data.themes.icons,dots:this.data.themes.dots},e},set_state:function(e,t){return this.__call_old()?e.themes?(e.themes.theme&&this.set_theme(e.themes.theme),typeof e.themes.dots!="undefined"&&this[e.themes.dots?"show_dots":"hide_dots"](),typeof e.themes.icons!="undefined"&&this[e.themes.icons?"show_icons":"hide_icons"](),delete e.themes,this.set_state(e,t),!1):!0:!1},get_json:function(e,t){var n=this.__call_old(),r;return t&&(r=this.get_icon(e),typeof r!="undefined"&&r!==null&&(n.data.jstree.icon=r)),n}}}),e(function(){e.jstree.THEMES_DIR===!1&&e("script").each(function(){if(this.src.toString().match(/jstree[^\/]*?\.js(\?.*)?$/))return e.jstree.THEMES_DIR=this.src.toString().replace(/jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1}),e.jstree.THEMES_DIR===!1&&(e.jstree.THEMES_DIR="themes/");var t=".jstree a { text-decoration:none; } .jstree a > .jstree-themeicon { height:16px; width:16px; margin-right:3px; } .jstree-rtl a > .jstree-themeicon { margin-left:3px; margin-right:0; } .jstree .jstree-no-icons .jstree-themeicon, .jstree .jstree-themeicon-hidden { display:none; } ";e.jstree.IS_IE6&&(t+=".jstree li a .jstree-themeicon { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a .jstree-themeicon { margin-right:0px; margin-left:3px; } "),e.vakata.css.add_sheet({str:t,title:"jstree"})}),e.jstree.defaults.plugins.push("themes")}(jQuery),define("libs/jquery/jstree/jstree.themes",function(){}),define("app/config/demo-queries",["app/util/utils"],function(e){var t=[{name:"examples/summer games medals/Medals By Country",code:"data := //summer_games/london_medals\nbyCountry := solve 'Country\n  {country: 'Country,\n   total: sum(data.Total where data.Country = 'Country)}\nbyCountry"},{name:"examples/summer games medals/Attributes By Sport",code:"data := //summer_games/london_medals\n solve 'Sport \n  data' := data where data.Sport = 'Sport\n  {sport: 'Sport, \n  aveAge: mean(data'.Age),\n  aveWeight: mean(data'.Weight ),\n  aveHeight: mean(data'.HeightIncm)}"},{name:"examples/summer games medals/Age Distribution Of Medals",code:"london := //summer_games/london_medals\nsolve 'age\n  {age: 'age, medalWinnersByAge: count(london where london.Age = 'age)}"},{name:"examples/summer games medals/Correlation of Letters in Name and Medals",code:"data := //summer_games/london_medals \nbyCountry := solve 'Country\n  data' := data where data.Country = 'Country\n  {country: 'Country,\n  gold: sum(data'.G ),\n  silver: sum(data'.S ),\n  bronze: sum(data'.B ),\n  total: sum(data'.Total ),\naveLettersInName: mean(std::string::length(data'.Name))}\n\nstd::stats::corr(byCountry.aveLettersInName,byCountry.total)"},{name:"examples/summer games medals/Percentage of Female Athletes by Country",code:"data := //summer_games/london_medals\nbyCountry := solve 'Country\n data' := data where data.Country = 'Country\n  {country: 'Country,\n  percentWomen: sum(data'.Total where data'.Sex = \"F\")\n  /sum(data'.Total ),\n  total: sum(data'.Total)}\n\nfiltered := byCountry where byCountry.total >=5\n\nfiltered where std::stats::rank(neg filtered.percentWomen) <= 5"},{name:"examples/summer games athletes/Athletes By Country",code:"data := //summer_games/athletes \nsolve 'Countryname \n  {CountryName: 'Countryname, count: count(data where data.Countryname = 'Countryname)}"},{name:"examples/summer games athletes/Athletes By Sport",code:"data := //summer_games/athletes \nsolve 'Sportname \n  {Sportname: 'Sportname, count: count(data where data.Sportname = 'Sportname)}"},{name:"examples/summer games athletes/Top US Sports - Men",code:'data := //summer_games/athletes \nUSMaleAthletes := data where data.Countryname = "US" & data.Sex = "M" \nbySport := solve \'Sportname \n  {sport: \'Sportname, numberOfAthletes: count(USMaleAthletes where USMaleAthletes.Sportname = \'Sportname)} \nrank := std::stats::rank(bySport.numberOfAthletes) \nbySport where rank > max(rank) - 10'},{name:"examples/summer games athletes/Top US Sports - Women",code:'data := //summer_games/athletes \nUSFemaleAthletes := data where data.Countryname = "US" & data.Sex = "F" \nbySport := solve \'Sportname \n  {sport: \'Sportname, numberOfAthletes: count(USFemaleAthletes where USFemaleAthletes.Sportname = \'Sportname)} \nrank := std::stats::rank(bySport.numberOfAthletes) \nbySport where rank > max(rank) - 10'},{name:"examples/summer games athletes/Percentage of Female Athletes",code:"data := //summer_games/athletes \npercentageFemaleAthletesByCountry := solve 'Countryname \n  {country: 'Countryname,\n  percentFemale: 100*count(data where data.Sex = \"F\" & data.Countryname = 'Countryname)/count(data where data.Countryname = 'Countryname)}\n \nrank := std::stats::rank(neg percentageFemaleAthletesByCountry.percentFemale)\n \npercentageFemaleAthletesByCountry where rank <=5"},{name:"examples/tutorial/Top Five Products",code:"data := //tutorial/transactions\n\nsalesByProduct := solve 'product\n  {product: 'product,\n  sales: sum(data.total where data.ApocalypseProducts = 'product)}\nrank := std::stats::rank(neg salesByProduct.sales)\n\nsalesByProduct where rank <= 5"},{name:"examples/tutorial/Top Five Products Plus Other",code:"data := //tutorial/transactions\n\nsalesByProduct := solve 'ApocalypseProducts\n  {product: 'ApocalypseProducts,\n  sales: sum(data.total where data.ApocalypseProducts = 'ApocalypseProducts)}\nrank := std::stats::rank(neg salesByProduct.sales)\notherProducts := {product: \"other\",sales: sum(salesByProduct.sales where rank > 5)}\n\ntop5Products := salesByProduct where rank <= 5\nallProducts := (new otherProducts) union top5Products \nallProducts"},{name:"examples/tutorial/Quantity By Month",code:"data := //tutorial/transactions\ntoday := 233\ndataWithMonthAndYearAndDay := data with\n  {month: std::time::monthOfYear(data.timeStamp),\n  year: std::time::year(data.timeStamp),\n  day: std::time::dayOfYear(data.timeStamp)}\n\nquantityByMonth := solve 'month\n monthData := dataWithMonthAndYearAndDay where dataWithMonthAndYearAndDay.month = 'month\n  {month : 'month,\n  quantity: sum(monthData.quantity),\n  year : monthData.year,\n  day : monthData.day}\n\ndistinct({quantity: quantityByMonth.quantity, month: quantityByMonth.month} where\n  quantityByMonth.year=2012 & quantityByMonth.day < today)"},{name:"examples/tutorial/Sales By Source at a Particular Hour",code:"data := //tutorial/transactions\ndataWithHour := data with {hour: std::time::hourOfDay(data.timeStamp)}\n\naveSalesByHour :=solve 'source\n  {source : 'source,\n  averageSales: sum(dataWithHour.total where dataWithHour.source ='source),\n  hour : dataWithHour.hour}\n\n distinct(aveSalesByHour where aveSalesByHour.hour = 13)"},{name:"examples/clickstream/Clicks By Gender And Week",code:"import std::time::*\n\n clicks := //clicks\n clicks' := clicks with {week: weekOfYear(clicks.timeStamp)}\n\nclicksByGenderAndWeek := solve 'gender, 'week\n  {week: 'week,\n  gender: 'gender,\n  clicks: count(clicks' where clicks'.customer.gender = 'gender & clicks'.week = 'week)}\n clicksByGenderAndWeek"},{name:"examples/clickstream/Clicks By Referral",code:"clicks := //clicks\n\nclicksByReferral := solve 'referral\n  {referral: 'referral,\n  clicks: count(clicks where clicks.marketing.referral = 'referral)}\n\nclicksByReferral"}],n={};for(var r=0;r<t.length;r++){var i=t[r].name;n[e.normalizeQueryName(i)]={name:i,code:t[r].code}}return n}),define("app/support",["app/util/ui"],function(e){return function(t){var n,r=0,i,s=e.tabs(t.append('<div class="pg-support-tabs"><ul></ul></div>').find(".pg-support-tabs").css({padding:0,margin:0,border:0}),{tabTemplate:"<li><a href='#{href}'>#{label}</a></li>",add:function(e,t){$(t.panel).css({padding:0,overflow:"hidden"}),i(t.panel)}});return s.removeClass("ui-corner-all"),setTimeout(function(){s.find("ul").removeClass("ui-corner-all")},0),n={addPanel:function(e,t){var n="#pg-support-tab-"+ ++r;if("function"!=typeof t){var o;"string"==typeof t&&(t.substr(0,8)==="https://"||t.substr(0,7)==="http://")&&(o='<iframe src="'+t+'" style="margin:0;padding:0;width:100%;height:100%;border:0"><iframe/>'),t=function(e){$(e).append(o)}}i=t,s.tabs("add",n,e)},resize:function(){var e=t.innerHeight()-s.find("ul").outerHeight();s.find(".ui-tabs-panel").css({height:e+"px"})}}}}),define("rtext!templates/content.tip.main.html",[],function(){return'<p>Labcoat by Precog is a friendly tool that allows you to analyze data using a simple, yet powerful query language called Quirrel. This interactive environment makes it so easy to understand data! Experiment with sample data by running preloaded queries or by creating your own queries. You can also learn the Quirrel language with our built-in tutorial and reference guide. Any query you develop can also be executed from inside an application through our REST API.</p>\n<p>This is an early preview, so you can\'t quite upload your own data but <a href="http://goo.gl/Jtdho" target="_blank">subscribe to our newsletter</a> to learn when you\'ll be able to analyze your own data. Now, we\'ll let you get started!</p>'}),define("rtext!templates/content.tip.codepane.html",[],function(){return'This is the code editor. You can type your Quirrel queries here and execute them clicking on the "run" (or "run selected") or by using SHIFT+ENTER on your keyboard.'}),define("rtext!templates/content.tip.filesystem.html",[],function(){return"This is the file system. You can see how your data is organized, as well as upload and download data through drag & drop."}),define("rtext!templates/content.tip.querybrowser.html",[],function(){return"This is the query browser. Here you can create, rename, and delete queries. All these are stored on your local machine, so be sure to back them up elsewhere for safe-keeping!"}),define("rtext!templates/content.tip.resultspane.html",[],function(){return"This is the results pane. Anytime you execute a query, the results will appear here. You can view the results as JSON, CSV, or charts."}),define("rtext!templates/content.tip.supportpane.html",[],function(){return"<div>\n    <h3>tutorial</h3>\n    <div>This is a tutorial for the Quirrel query language. In about 30 minutes, you can learn everything you need to know to analyze data on Precog or any other system that supports Quirrel.</div>\n    <h3>reference</h3>\n    <div>This is a reference manual for functions in Quirrel's standard library. These functions help you save time and perform critical key operations when doing data analysis.</div>\n    <h3>IRC channel</h3>\n    <div>This is an IRC client that connects to the #quirrel channel on Freenode. On the Quirrel channel, you can often find other Quirrel users who can help answer your questions.</div>\n</div>"}),define("app/startup-tips",["app/util/notification","app/util/ui","app/util/storage","rtext!templates/content.tip.main.html","rtext!templates/content.tip.codepane.html","rtext!templates/content.tip.filesystem.html","rtext!templates/content.tip.querybrowser.html","rtext!templates/content.tip.resultspane.html","rtext!templates/content.tip.supportpane.html"],function(e,t,n,r,i,s,o,u,a){function h(e){return function(){l.set(e,!1)}}function p(t){for(var n=0;n<c.length;n++){var r=c[n];l.get(r.store)&&e.tip(r.title,{target:r.target(t),text:r.text,after_close:h(r.store)})}}var f="pg-quirrel-tips",l=n(f,{main:!0,editor:!0,system:!0,queries:!0,results:!0,support:!0}),c=[{title:"Quirrel Editor",target:function(e){return e.getInput()},text:i,store:"editor"},{title:"Virtual File System",target:function(e){return e.getSystem()},text:s,store:"system"},
{title:"Query Browser",target:function(e){return e.getQueries()},text:o,store:"queries"},{title:"Results",target:function(e){return e.getOutput()},text:u,store:"results"},{title:"Support",target:function(e){return e.getSupport()},text:a,store:"support"}];return function(n){setTimeout(function(){if(l.get("main")){var i=e.main("Welcome to Labcoat!",{text:'<div class="pg-content">'+r+'</div><div class="pg-actions"><label>display panel tips<input type="checkbox" name="pg-display-tips" checked></label></div>',after_close:function(){l.set("main",!1);if(i.find('input[type="checkbox"]').attr("checked"))p(n);else for(var e=0;e<c.length;e++)l.set(c[e].store,!1)}});t.button(i.find(".pg-actions"),{label:"close",text:!0,icon:"ui-icon-close",handler:function(){i.pnotify_remove()}})}else p(n)},1e3)}}),define("app/util/guid",[],function(){return function(){var e=function(){return Math.floor(Math.random()*65536).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}),define("app/util/ie",[],function(){var e,t,n=3,r=document.createElement("div"),i=r.getElementsByTagName("i");while(r.innerHTML="<!--[if gt IE "+ ++n+"]><i></i><![endif]-->",i[0]);return e=n>4?n:t,{isIE:function(){return!!e},version:function(){return e},greaterOrEqualTo:function(t){return e&&e>t}}});var JSON;JSON||(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)r=rep[n],typeof r=="string"&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){function a(e,t,n){var r=0,i=e.length||1;while((r=t.indexOf(e,r))>=0){r+=i,n--;if(n===0)return!0}return!1}var e=window.Precog=window.Precog||{},t={Base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=this._utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return t},decode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=this._keyStr.indexOf(e.charAt(f++)),o=this._keyStr.indexOf(e.charAt(f++)),u=this._keyStr.indexOf(e.charAt(f++)),a=this._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=this._utf8_decode(t),t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0;c=0,c1=0,c2=0;while(n<e.length)c=e.charCodeAt(n),c<128?(t+=String.fromCharCode(c),n++):c>191&&c<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((c&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}},makeBaseAuth:function(e,t){var n=e+":"+t,r=this.Base64.encode(n);return"Basic "+r},extend:function(e,t){for(var n in t)e[n]===undefined&&(e[n]=t[n])},findScripts:function(e){var t=document.getElementsByTagName("SCRIPT"),n=[];for(var r=0;r<t.length;r++){var i=t[r],s=i.getAttribute("src");s&&(typeof e=="string"&&s.indexOf(e)!=-1||s.match(e))&&n.push(i)}return n},findScript:function(e){var t=document.getElementsByTagName("SCRIPT");for(var n=0;n<t.length;n++){var r=t[n],i=r.getAttribute("src");if(i&&(typeof e=="string"&&i.indexOf(e)!=-1||i.match(e)))return r}return undefined},getPageConfiguration:function(){return t.parseQueryParameters(window.location.href)},getConfiguration:function(){var e={},n=t.findScripts(/precog[^\/.]*\.js/);for(var r=0;r<n.length;r++)t.extend(e,t.parseQueryParameters(n[r].getAttribute("src")));return e},parseQueryParameters:function(e){var t=e.indexOf("?");if(t<0)return{};var n=e.substr(t+1),r=n.split("&"),i={};for(var s=0;s<r.length;s++){var o=r[s],u=o.split("="),a=u[0],f="";u.length>=2&&(f=decodeURIComponent(u[1])),i[a]=f}return i},addQueryParameters:function(e,t){var n=e.lastIndexOf("#"),r="";n>=0&&(r="#"+e.substr(n+1),e=e.substr(0,n));var i=e.indexOf("?")==-1?"?":"&",s=[];for(var o in t){var u=(t[o]||"").toString();s.push(o+"="+encodeURIComponent(u))}return s.length===0?e+r:e+i+s.join("&")+r},getConsole:function(e){var t=e?window.console:undefined;return t||(t={},t.log=function(){},t.debug=function(){},t.info=function(){},t.warn=function(){},t.error=function(){}),t},getProtocol:function(){var e=t.findScript(/precog[^\/.]*\.js/).getAttribute("src");return e&&"https:"==e.substr(0,6)?"https:":"http:"},createCallbacks:function(e,t,n){var i=function(e,t){return r.Config.enableLog?function(n){n!==undefined?r.Log.info("Success: "+t+": "+JSON.stringify(n)):r.Log.info("Success: "+t),e&&e(n)}:e?e:function(){}},s=function(e,t){return r.Config.enableLog?function(n,i){r.Log.error("Failure: "+t+": code = "+n+", reason = "+i),e&&e(n,i)}:e?e:function(){}};return{success:i(e,n),failure:s(t,n)}},removeTrailingSlash:function(e){return e.length===0?e:e.substr(e.length-1)=="/"?e.substr(0,e.length-1):e},removeDuplicateSlashes:function(e){return e.replace(/[\/]+/g,"/")},trimPath:function(e){if(!e)throw Error("path cannot be undefined");return e=t.removeDuplicateSlashes("/"+e+"/"),e.substr(0,1)==="/"&&(e=e.substr(1)),e.substr(-1)==="/"&&(e=e.substr(0,e.length-1)),e},parseResponseHeaders:function(e){var t={};if(!e)return t;var n=e.split("\r\n");for(var r=0;r<n.length;r++){var i=n[r],s=i.indexOf(": ");if(s>0){var o=i.substring(0,s),u=i.substring(s+2);t[o]=u}}return t},actionUrl:function(e,t,n){"undefined"==typeof n&&"object"==typeof t&&(n=t,t=null),n=n||{};var i=n.analyticsService||r.Config.analyticsService,s=n.version||r.Config.version;return i+e+(s==="false"?"":"/v"+s)+"/"+(t?t+"/":"")},actionPath:function(e,t){e=e&&this.trimPath(e);var n=t&&t.basePath||r.Config.basePath||!1;return n==="/"&&(n=!1),n&&e?(n=this.trimPath(n),e=n+"/"+e):n?e=this.trimPath(n):e||(e=""),e}},n={doAjaxRequest:function(e){var n=e.method||"GET",i=e.query||{},s=t.addQueryParameters(e.path,i),o=e.content,u=e.headers||{},a=e.success,f=e.failure||function(){},l=e.progress||function(){};r.Log.warn("HTTP "+n+" "+s+": headers("+JSON.stringify(u)+"), content("+JSON.stringify(o)+")");var c=function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},h=c();h.open(n,s),h.upload&&(h.upload.onprogress=function(e){e.lengthComputable&&l({loaded:e.loaded,total:e.total})}),h.onreadystatechange=function(){var e=h.getAllResponseHeaders&&t.parseResponseHeaders(h.getAllResponseHeaders())||{};h.readyState===4&&(h.status===200||h.status===202||h.status===204||h.status==="OK"||h.code==="NoContent"?h.responseText!==null&&h.responseText.length>0?a(JSON.parse(this.responseText),e):a(undefined,e):f(h.status,h.responseText?JSON.parse(h.responseText):h.statusText,e))};for(var p in u){var d=u[p];h.setRequestHeader(p,d)}o!==undefined?u["Content-Type"]?h.send(o):(h.setRequestHeader("Content-Type","application/json"),h.send(JSON.stringify(o))):h.send(null)},doJsonpRequest:function(e){var n=e.method||"GET",i=e.query||{},s=t.addQueryParameters(e.path,i),o=e.content,u=e.headers||{},a=e.success,f=e.failure||function(){};r.Log.warn("HTTP "+n+" "+s+": headers("+JSON.stringify(u)+"), content("+JSON.stringify(o)+")");var l=Math.floor(Math.random()*214748363),c="PrecogJsonpCallback"+l.toString();window[c]=function(e,t){t.status.code===200||t.status.code==="OK"||t.status.code==="NoContent"||t.status.code==="Created"?a(e,t.headers):f(t.status.code,e?e:t.status.reason,t.headers),document.head.removeChild(document.getElementById(c));try{delete window[c]}catch(n){window[c]=undefined}};var h={};h.method=n;for(var p in u){h.headers=JSON.stringify(u);break}h.callback=c,o!==undefined&&(h.content=JSON.stringify(o));var d=t.addQueryParameters(s,h),v=document.createElement("SCRIPT");v.setAttribute("type","text/javascript"),v.setAttribute("src",d),v.setAttribute("id",c),document.head||(document.head=document.getElementsByTagName("head")[0]),document.head.appendChild(v)},createHttpInterface:function(e){return{get:function(t,n,r,i){e({method:"GET",path:t,headers:i,success:n.success,failure:n.failure,query:r})},put:function(t,n,r,i,s){e({method:"PUT",path:t,content:n,headers:s,success:r.success,failure:r.failure,query:i})},post:function(t,n,r,i,s,o){e({method:"POST",path:t,content:n,headers:s,success:r.success,failure:r.failure,query:i,progress:o})},remove:function(t,n,r,i){e({method:"DELETE",path:t,headers:i,success:n.success,failure:n.failure,query:r})}}}};e.$={};var r=e.$;r.Util=t,r.PageConfig=t.getPageConfiguration(),r.Config=t.getConfiguration(),r.Bool=function(e){return e===!0||e===1||(e=(""+e).toLowerCase())=="true"||e=="on"||e=="1"},r.Util.extend(r.Config,{analyticsService:t.getProtocol()+"//beta.precog.com/",useJsonp:"true",enableLog:"false",version:1}),r.Config.analyticsService=r.PageConfig.analyticsService||r.Config.analyticsService,r.Config.apiKey=r.PageConfig.apiKey||r.Config.apiKey,r.Config.version=r.PageConfig.version||r.Config.version,r.Config.useJsonp=(r.PageConfig.useJsonp||r.Config.useJsonp)==="true",r.Config.enableLog=r.PageConfig.enableLog||r.Config.enableLog,r.Http=function(){return r.Bool(e.$.Config.useJsonp)?e.$.Http.Jsonp:e.$.Http.Ajax},r.Http.Ajax=n.createHttpInterface(n.doAjaxRequest),r.Http.Jsonp=n.createHttpInterface(n.doJsonpRequest);var i=t.getConsole(r.Bool(r.Config.enableLog));r.Log={log:function(e){i.log(e)},debug:function(e){i.debug(e)},info:function(e){i.info(e)},warn:function(e){i.warn(e)},error:function(e){i.error(e)}};var s=r.Http();r.Http.setUseJsonp=function(e){r.Config.useJsonp=e,s=r.Http()},r.Log.setEnable=function(e){r.Config.enableLog=e,i=t.getConsole(r.Bool(r.Config.enableLog))},r.Store=function(){function e(){try{return s in r&&r[s]}catch(e){return!1}}function t(){try{return o in r&&r[o]&&r[o][r.location.hostname]}catch(e){return!1}}var n={},r=window,i=r.document,s="localStorage",o="globalStorage",u="__storejs__",a;n.disabled=!1,n.set=function(e,t){},n.get=function(e){},n.remove=function(e){},n.clear=function(){},n.transact=function(e,t,r){var i=n.get(e);r||(r=t,t=null),typeof i=="undefined"&&(i=t||{}),r(i),n.set(e,i)},n.getAll=function(){},n.getKeys=function(){},n.serialize=function(e){return JSON.stringify(e)},n.deserialize=function(e){return typeof e!="string"?undefined:JSON.parse(e)};if(e())a=r[s],n.set=function(e,t){if(t===undefined)return n.remove(e);a.setItem(e,n.serialize(t))},n.get=function(e){return n.deserialize(a.getItem(e))},n.remove=function(e){a.removeItem(e)},n.clear=function(){a.clear()},n.getAll=function(){var e={};for(var t=0;t<a.length;++t){var r=a.key(t);e[r]=n.get(r)}return e},n.getKeys=function(){var e=[];for(var t=0;t<a.length;++t)e.push(a.key(t));return e};else if(t())a=r[o][r.location.hostname],n.set=function(e,t){if(t===undefined)return n.remove(e);a[e]=n.serialize(t)},n.get=function(e){return n.deserialize(a[e]&&a[e].value)},n.remove=function(e){delete a[e]},n.clear=function(){for(var e in a)delete a[e]},n.getAll=function(){var e={};for(var t=0;t<a.length;++t){var r=a.key(t);e[r]=n.get(r)}return e},n.getKeys=function(){var e=[];for(var t=0;t<a.length;++t)e.push(a.key(t));return e};else if(i.documentElement.addBehavior){var f,l;try{l=new ActiveXObject("htmlfile"),l.open(),l.write('<script>document.w=window</script><iframe src="/favicon.ico"></frame>'),l.close(),f=l.w.frames[0].document,a=f.createElement("div")}catch(c){a=i.createElement("div"),f=i.body}function h(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(a),f.appendChild(a),a.addBehavior("#default#userData"),a.load(s);var r=e.apply(n,t);return f.removeChild(a),r}}function p(e){return"_"+e}n.set=h(function(e,t,r){t=p(t);if(r===undefined)return n.remove(t);e.setAttribute(t,n.serialize(r)),e.save(s)}),n.get=h(function(e,t){return t=p(t),n.deserialize(e.getAttribute(t))}),n.remove=h(function(e,t){t=p(t),e.removeAttribute(t),e.save(s)}),n.clear=h(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(s);for(var n=0,r;r=t[n];n++)e.removeAttribute(r.name);e.save(s)}),n.getAll=h(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(s);var r={};for(var i=0,o;o=t[i];++i)r[o]=n.get(o);return r}),n.getKeys=h(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(s);var n=[];for(var r=0,i;i=t[r];++r)n.push(i);return n})}try{n.set(u,u),n.get(u)!=u&&(n.disabled=!0),n.remove(u)}catch(c){n.disabled=!0}return typeof module!="undefined"&&typeof module!="function"?module.exports=n:typeof define=="function"&&define.amd&&define("libs/precog/precog",n),n}();var o=function(){};o.prototype={bitOR:function(e,t){var n=e&1|t&1,r=e>>>1|t>>>1;return r<<1|n},bitXOR:function(e,t){var n=e&1^t&1,r=e>>>1^t>>>1;return r<<1|n},bitAND:function(e,t){var n=e&1&(t&1),r=e>>>1&t>>>1;return r<<1|n},addme:function(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535},rhex:function(e){var t="",n="0123456789abcdef",r=0;while(r<4){var i=r++;t+=n.charAt(e>>i*8+4&15)+n.charAt(e>>i*8&15)}return t},str2blks:function(e){var t=(e.length+8>>6)+1,n=[],r=0,i=t*16;while(r<i)n[++r]=0;var s=0;while(s<e.length)n[s>>2]|=e.charCodeAt(s)<<(e.length*8+s)%4*8,s++;n[s>>2]|=128<<(e.length*8+s)%4*8;var o=e.length*8,u=t*16-2;return n[u]=o&255,n[u]|=(o>>>8&255)<<8,n[u]|=(o>>>16&255)<<16,n[u]|=(o>>>24&255)<<24,n},rol:function(e,t){return e<<t|e>>>32-t},cmn:function(e,t,n,r,i,s){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(r,s)),i),n)},ff:function(e,t,n,r,i,s,o){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(~t,r)),e,t,i,s,o)},gg:function(e,t,n,r,i,s,o){return this.cmn(this.bitOR(this.bitAND(t,r),this.bitAND(n,~r)),e,t,i,s,o)},hh:function(e,t,n,r,i,s,o){return this.cmn(this.bitXOR(this.bitXOR(t,n),r),e,t,i,s,o)},ii:function(e,t,n,r,i,s,o){return this.cmn(this.bitXOR(n,this.bitOR(t,~r)),e,t,i,s,o)},doEncode:function(e){var t=this.str2blks(e),n=1732584193,r=-271733879,i=-1732584194,s=271733878,o,u=0;while(u<t.length){var a=n,f=r,l=i,c=s;o=0,n=this.ff(n,r,i,s,t[u],7,-680876936),s=this.ff(s,n,r,i,t[u+1],12,-389564586),i=this.ff(i,s,n,r,t[u+2],17,606105819),r=this.ff(r,i,s,n,t[u+3],22,-1044525330),n=this.ff(n,r,i,s,t[u+4],7,-176418897),s=this.ff(s,n,r,i,t[u+5],12,1200080426),i=this.ff(i,s,n,r,t[u+6],17,-1473231341),r=this.ff(r,i,s,n,t[u+7],22,-45705983),n=this.ff(n,r,i,s,t[u+8],7,1770035416),s=this.ff(s,n,r,i,t[u+9],12,-1958414417),i=this.ff(i,s,n,r,t[u+10],17,-42063),r=this.ff(r,i,s,n,t[u+11],22,-1990404162),n=this.ff(n,r,i,s,t[u+12],7,1804603682),s=this.ff(s,n,r,i,t[u+13],12,-40341101),i=this.ff(i,s,n,r,t[u+14],17,-1502002290),r=this.ff(r,i,s,n,t[u+15],22,1236535329),n=this.gg(n,r,i,s,t[u+1],5,-165796510),s=this.gg(s,n,r,i,t[u+6],9,-1069501632),i=this.gg(i,s,n,r,t[u+11],14,643717713),r=this.gg(r,i,s,n,t[u],20,-373897302),n=this.gg(n,r,i,s,t[u+5],5,-701558691),s=this.gg(s,n,r,i,t[u+10],9,38016083),i=this.gg(i,s,n,r,t[u+15],14,-660478335),r=this.gg(r,i,s,n,t[u+4],20,-405537848),n=this.gg(n,r,i,s,t[u+9],5,568446438),s=this.gg(s,n,r,i,t[u+14],9,-1019803690),i=this.gg(i,s,n,r,t[u+3],14,-187363961),r=this.gg(r,i,s,n,t[u+8],20,1163531501),n=this.gg(n,r,i,s,t[u+13],5,-1444681467),s=this.gg(s,n,r,i,t[u+2],9,-51403784),i=this.gg(i,s,n,r,t[u+7],14,1735328473),r=this.gg(r,i,s,n,t[u+12],20,-1926607734),n=this.hh(n,r,i,s,t[u+5],4,-378558),s=this.hh(s,n,r,i,t[u+8],11,-2022574463),i=this.hh(i,s,n,r,t[u+11],16,1839030562),r=this.hh(r,i,s,n,t[u+14],23,-35309556),n=this.hh(n,r,i,s,t[u+1],4,-1530992060),s=this.hh(s,n,r,i,t[u+4],11,1272893353),i=this.hh(i,s,n,r,t[u+7],16,-155497632),r=this.hh(r,i,s,n,t[u+10],23,-1094730640),n=this.hh(n,r,i,s,t[u+13],4,681279174),s=this.hh(s,n,r,i,t[u],11,-358537222),i=this.hh(i,s,n,r,t[u+3],16,-722521979),r=this.hh(r,i,s,n,t[u+6],23,76029189),n=this.hh(n,r,i,s,t[u+9],4,-640364487),s=this.hh(s,n,r,i,t[u+12],11,-421815835),i=this.hh(i,s,n,r,t[u+15],16,530742520),r=this.hh(r,i,s,n,t[u+2],23,-995338651),n=this.ii(n,r,i,s,t[u],6,-198630844),s=this.ii(s,n,r,i,t[u+7],10,1126891415),i=this.ii(i,s,n,r,t[u+14],15,-1416354905),r=this.ii(r,i,s,n,t[u+5],21,-57434055),n=this.ii(n,r,i,s,t[u+12],6,1700485571),s=this.ii(s,n,r,i,t[u+3],10,-1894986606),i=this.ii(i,s,n,r,t[u+10],15,-1051523),r=this.ii(r,i,s,n,t[u+1],21,-2054922799),n=this.ii(n,r,i,s,t[u+8],6,1873313359),s=this.ii(s,n,r,i,t[u+15],10,-30611744),i=this.ii(i,s,n,r,t[u+6],15,-1560198380),r=this.ii(r,i,s,n,t[u+13],21,1309151649),n=this.ii(n,r,i,s,t[u+4],6,-145523070),s=this.ii(s,n,r,i,t[u+11],10,-1120210379),i=this.ii(i,s,n,r,t[u+2],15,718787259),r=this.ii(r,i,s,n,t[u+9],21,-343485551),n=this.addme(n,a),r=this.addme(r,f),i=this.addme(i,l),s=this.addme(s,c),u+=16}return this.rhex(n)+this.rhex(r)+this.rhex(i)+this.rhex(s)}},r.Md5=function(e){return(new o).doEncode(e)};var u=function(e,n,i,o){o=o||{};var u="Precog query "+e,a={apiKey:o.apiKey||r.Config.apiKey,q:e};o.limit&&(a.limit=o.limit||r.Config.limit),o.basePath&&(a.basePath=o.basePath),o.skip&&(a.skip=o.skip),o.order&&(a.order=o.order),o.sortOn&&(a.sortOn=JSON.stringify(o.sortOn)),o.sortOrder&&(a.sortOrder=o.sortOrder),s.get(t.actionUrl("analytics","fs",o)+t.actionPath(null,o),t.createCallbacks(n,i,u),a)};e.createAccount=function(e,n,r,i,o){var u="Create account for "+e;s.post(t.actionUrl("accounts","accounts",o),{email:e,password:n},t.createCallbacks(r,i,u),null)},e.describeAccount=function(e,n,r,i,o,u){var a="Describe account "+r;s.get(t.actionUrl("accounts","accounts",u)+r,t.createCallbacks(i,o,a),null,{Authorization:t.makeBaseAuth(e,n)})},e.addGrantToAccount=function(e,n,r,i,o,u,a){var f="Add grant "+i+" to account "+r;s.post(t.actionUrl("accounts","accounts",a)+r+"/grants/",{grantId:i},t.createCallbacks(o,u,f),null,{Authorization:t.makeBaseAuth(e,n)})},e.describePlan=function(e,n,r,o,u,a){var f="Describe plan "+r;i.log(r),s.get(t.actionUrl("accounts","accounts",a)+r+"/plan",t.createCallbacks(o,u,f),null,{Authorization:t.makeBaseAuth(e,n)}),i.log(t.actionUrl("accounts","accounts",r,a)+"plan")},e.changePlan=function(e,n,r,i,o,u,a){var f="Change plan to "+i+" for account "+r;s.put(t.actionUrl("accounts","accounts",a)+r+"/plan",{type:i},t.createCallbacks(o,u,f),null,{Authorization:t.makeBaseAuth(e,n)})},e.deletePlan=function(e,n,r,i,o,u){var a="Delete account "+r;s.remove(t.actionUrl("accounts","accounts",u)+r+"/plan",t.createCallbacks(i,o,a),null,{Authorization:t.makeBaseAuth(e,n)})},e.listKeys=function(e,n,i){var o="Precog Security List Keys",u={apiKey:i&&i.apiKey||r.Config.apiKey};if(!u.apiKey)throw Error("apiKey not specified");s.get(t.actionUrl("security","apikeys",i),t.createCallbacks(e,n,o),u)},e.createKey=function(e,n,i,o){var u="Create security Key ("+JSON.stringify(e)+")",a={apiKey:o&&o.apiKey||r.Config.apiKey};if(!a.apiKey)throw Error("apiKey not specified");s.post(t.actionUrl("security","apikeys",o),e,t.createCallbacks(n,i,u),a)},e.describeKey=function(e,n,i,o){var u="Describe security Key for "+e,a={apiKey:o&&o.apiKey||r.Config.apiKey};if(!a.apiKey)throw Error("apiKey not specified");s.get(t.actionUrl("security","apikeys",o)+e,t.createCallbacks(n,i,u),a)},e.deleteKey=function(e,n,i,o){var u="Delete security Key for "+e,a={apiKey:o&&o.apiKey||r.Config.apiKey};if(!a.apiKey)throw Error("apiKey not specified");s.remove(t.actionUrl("security","apikeys",o)+e,t.createCallbacks(n,i,u),a)},e.retrieveGrants=function(e,n,i,o){var u="Retrieve security grants for "+e,a={apiKey:o&&o.apiKey||r.Config.apiKey};if(!a.apiKey)throw Error("apiKey not specified");s.get(t.actionUrl("security","apikeys",o)+e+"/grants/",t.createCallbacks(n,i,u),a)},e.addGrantToKey=function(e,n,i,o,u){var a="Add grant "+JSON.stringify(n)+" to "+e,f={apiKey:u&&u.apiKey||r.Config.apiKey};if(!f.apiKey)throw Error("apiKey not specified");s.post(t.actionUrl("security","apikeys",u)+e+"/grants/",n,t.createCallbacks(i,o,a),f)},e.removeGrant=function(e,n,i,o,u){var a="Remove grant "+n+" from key "+e,f={apiKey:u&&u.apiKey||r.Config.apiKey};if(!f.apiKey)throw Error("apiKey not specified");s.remove(t.actionUrl("security","apikeys",u)+e+"/grants/"+n,t.createCallbacks(i,o,a),f)},e.createGrant=function(e,n,i,o){var u="Create new grant "+JSON.stringify(e),a={apiKey:o&&o.apiKey||r.Config.apiKey};if(!a.apiKey)throw Error("apiKey not specified");s.post(t.actionUrl("security","grants",o),e,t.createCallbacks(n,i,u),a)},e.describeGrant=function(e,n,i,o){var u="Describe grant "+e,a={apiKey:o&&o.apiKey||r.Config.apiKey};if(!a.apiKey)throw Error("apiKey not specified");s.get(t.actionUrl("security","grants",o)+e,t.createCallbacks(n,i,u),a)},e.deleteGrant=function(e,n,i,o){var u="Delete grant "+e,a={apiKey:o&&o.apiKey||r.Config.apiKey};if(!a.apiKey)throw Error("apiKey not specified");s.remove(t.actionUrl("security","grants",o)+e,t.createCallbacks(n,i,u),a)},e.listGrantChildren=function(e,n,i,o){var u="List children grant "+e,a={apiKey:o&&o.apiKey||r.Config.apiKey};if(!a.apiKey)throw Error("apiKey not specified");s.get(t.actionUrl("security","grants",o)+e+"/children/",t.createCallbacks(n,i,u),a)},e.createGrantChild=function(e,n,i,o,u){var a="Create child grant "+JSON.stringify(n)+" for "+e,f={apiKey:u&&u.apiKey||r.Config.apiKey};if(!f.apiKey)throw Error("apiKey not specified");s.post(t.actionUrl("security","grants",u)+e+"/children/",n,t.createCallbacks(i,o,a),f)},e.children=function(e,n,i,o){e=t.trimPath(e);var u="List children path of "+e,a={apiKey:o&&o.apiKey||r.Config.apiKey};if(!a.apiKey)throw Error("apiKey not specified");s.get(t.actionUrl("meta","fs")+t.actionPath(e,o),t.createCallbacks(function(e){n(e.children)},i,u),a)},e.retrieveMetadata=function(e,n,i,o){e=t.trimPath(e),o=o||{type:""};var u="Precog retrieve metadata "+o.type,a={apiKey:o.apiKey||r.Config.apiKey};if(!a.apiKey)throw Error("apiKey not specified");s.get(t.actionUrl("meta","fs",o)+t.actionPath(e,o)+"#"+o.type,t.createCallbacks(n,i,u),a)},e.ingest=function(e,n,i,s,o,u){u=u||{},e=t.trimPath(e);if(!n)throw Error("argument 'content' must contain a non empty value formatted as described by type");var a="Ingest events in "+i+" format",f={apiKey:u.apiKey||r.Config.apiKey};if(!f.apiKey)throw Error("apiKey not specified");switch(i.toLowerCase()){case"application/x-gzip":case"gz":case"gzip":i="application/x-gzip";break;case"zip":i="application/zip";break;case"application/json":case"json":i="application/json";break;case"text/csv":case"csv":i="text/csv",u.delimiter&&(f.delimiter=u.delimiter),u.quote&&(f.quote=u.quote),u.escape&&(f.escape=u.escape);break;default:throw Error("argument 'type' must be 'json' or 'csv'")}u.ownerAccountId&&(f.ownerAccountId=u.ownerAccountId),r.Http.Ajax.post(t.actionUrl("ingest",(u.async?"async":"sync")+"/fs",u)+t.actionPath(e,u),n,t.createCallbacks(s,o,a),f,{"Content-Type":i},u.progress?u.progress:null)},e.store=function(e,n,i,o,u){e=t.trimPath(e);if(n===null||"undefined"==typeof n)throw Error("argument 'events' cannot be null or undefined");var a="Store event ("+JSON.stringify(n)+")",f={apiKey:u&&u.apiKey||r.Config.apiKey};u&&u.ownerAccountId&&(f.ownerAccountId=u.ownerAccountId);if(!f.apiKey)throw Error("apiKey not specified");s.post(t.actionUrl("ingest",(u&&u.async?"async":"sync")+"/fs",u)+t.actionPath(e,u),n,t.createCallbacks(i,o,a),f)},e.deletePath=function(e,n,i,o){e=t.trimPath(e);var u="Delete path: "+e,a={apiKey:o&&o.apiKey||r.Config.apiKey};if(!a.apiKey)throw Error("apiKey not specified");s.remove(t.actionUrl("ingest","async/fs",o)+t.actionPath(e,o),t.createCallbacks(n,i,u),a)},e.cache=function(){function o(e){return n+e}function a(e){return t+e}function f(){var e=r.Store.getKeys(),n=t.length,i=[],s=e.length;for(var o=0;o<s;o++){var u=e[o];if(u.substr(0,n)!=t)continue;i.push(u.substr(n))}return i}function l(e){setTimeout(function(){c(e)},s)}function c(e){r.Store.remove(o(e)),r.Store.remove(a(e))}function h(e){d(e);var t=r.Store.get(a(e));return t?(l(e),t):null}function p(e,t){r.Store.set(o(e),(new Date).getTime()),r.Store.set(a(e),t)}function d(e){var t=o(e),n;try{n=r.Store.get(t)}catch(i){c(e)}if(!n)return;n<(new Date).getTime()-s*1e3&&c(e)}function v(){var e=f();for(var t=0;t<e.length;t++)d(e[t])}function m(){var e=f();for(var t=0;t<e.length;t++)c(e[t])}function g(e,t){for(var n in t)e=e.split("${"+n+"}").join(t[n]);return e}function y(e,t){return e=(e+JSON.stringify(t)).replace(/\s+/gi," "),r.Md5(e)}function w(e,t,n,r){var i=y(e,r),s=h(i);s?t(s):b[i]?b[i].push(t):(b[i]=[],u(e,function(e){p(i,e),l(i),t(e);for(var n=0;n<b[i].length;n++)b[i][n](e);delete b[i]},n,r))}var t="PRECOG_Q_",n="PRECOG_D_",i,s=3e5,b={};return v(),{isEnabled:function(){return i},enable:function(){r.Store.disabled?this.disable():(i=!0,e.query=w)},disable:function(){i=!1,e.query=u},setTimeout:function(e){s=+e},cachedResults:function(){return f().length},cachedIds:function(){return f()},clear:function(){m()}}}(),e.cache.enable();if(window.ReportGrid&&window.ReportGrid.query){var f=window.ReportGrid;f.query.precog=function(t,n){return f.query.load(function(r){e.query(t,r,null,n)})};var l=function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=new RegExp("\\$\\{"+n+"\\}","g");e=e.replace(r,t[n])}return e},h=function(t){return this.data({}).stackCross().asyncEach(function(n,r){e.query(l(t,n),r)})},p=f.$.pk;p.rg_query_BaseQuery.prototype.precog=p.rg_query_Query.prototype.precog=h,p.rg_query_ReportGridBaseQuery&&(p.rg_query_ReportGridBaseQuery.prototype.precog=p.rg_query_ReportGridQuery.prototype.precog=h)}}(),define("app/util/querystring",[],function(){function t(e){if(!e)e=window.location.search.substr(1);else if(e.substr(0,"http://".length)==="http://"||e.substr(0,"https://".length)==="https://"){var t=e.split("?");t.shift(),e=t.join("?")}else e.substr(0,1)==="?"&&(e=e.substr(1));return e=e.split("#"),e[0]}function n(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="(?:^|&)"+e+"=([^&#]*)",r=new RegExp(n),i=r.exec(t);return i==null?"":decodeURIComponent(i[1].replace(/\+/g," "))}function r(e){var t={},n,r=/\+/g,i=/([^&=]+)=?([^&]*)/g,s=function(e){return decodeURIComponent(e.replace(r," "))},o=e;while(n=i.exec(o))t[s(n[1])]=s(n[2]);return t}var e={};return{get:function(e,r){return r=t(r),n(e,r)},all:function(n){return n=t(n),e[n]||(e[n]=r(n)),e[n]}}}),define("app/util/precog",["app/util/querystring","app/util/md5","app/util/guid","app/util/ie","app/util/config","libs/precog/precog"],function(e,t,n,r,i){function c(t){for(var n=o.length-1;n>=0;n--){var r=o[n],i=e.get(r,t);i!==""&&(s[r]=i,o.splice(n,1))}}var s=window.Precog.$.Config,o=["apiKey","analyticsService","basePath","limit","theme"],u=[null],a=/(require|precog|quirrel)[^.]*.js[?]/i;r.isIE()||window.Precog.$.Http.setUseJsonp(window.Precog.$.PageConfig.useJsonp==="true");var f=".precog.com",l=window.location.host;l.substr(l.length-f.length)===f&&(s.analyticsService=window.location.protocol+"//"+l+"/"),$("script").each(function(){if(!this.src||!a.test(this.src))return;u.push(this.src)});while(u.length>0&&o.length>0)c(u.shift());s.limit||(s.limit=i.get("queryLimit")),$(i).on("queryLimit",function(e,t){s.limit=t});var h={ingest:function(e,t,n,r,i,s){window.Precog.ingest(e,t,n,i,s,{progress:r})},deletePath:function(e,t){window.Precog.deletePath(e,function(e){t&&t(!0)},function(e,n){if(!t)throw"Unable To Delete Path";t(!1)})},query:function(e,t){var r={},i=n(),o=s.limit;t=t||{},r.limit=t.limit&&t.limit<s.limit?t.limit:s.limit,t.skip&&(r.offset=t.skip),t.sort&&(r.sortOn=t.sort.map(function(e){return e.field}),r.sortOrder=t.sort[0].asc?"asc":"desc"),$(h).trigger("execute",[e,this.lastExecution,i]);var u=this,a=(new Date).getTime();window.Precog.query(e,function(e,n){u.lastExecution=(new Date).getTime()-a;var r=null;"undefined"!=typeof t.skip&&(r={skip:t.skip,limit:t.limit,count:n["X-Quirrel-Count"]||1e3}),$(h).trigger("completed",[i,e,r])},function(e,t){"string"==typeof t&&(t={message:t}),$(h).trigger("failed",[i,t])},r)},paths:function(e,t){window.Precog.children(e,function(e){t(e.map(function(e){return e.substr(-1)==="/"&&e.substr(0,e.length-1)||e}).sort())},function(e,t){throw"Unable To Query Path API"})},config:s,lastExecution:2e3,hash:t(s.apiKey),cache:window.Precog.cache};return h}),define("app/editors",["app/util/precog","app/util/md5","app/util/storagemonitor","app/util/utils"],function(e,t,n,r){function o(){return t(""+Math.random()).substr(0,8)}function f(){return"query #"+(1+a())}function l(e){return e=$.extend({name:null,hasname:!1,dirty:!1},e),e.name||(e.name=f()),e.id||(e.id=o()),e}function c(e){return"editors."+e}function h(e){var t=s.get("editors");for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(r.name===e)return r}return null}var i="pg-quirrel-editors-"+e.hash,s=n(i,{list:[],editors:{}}),u=[],a=function(){function r(n){return(t=e.exec(n))?parseInt(t[1]):0}var e=/query #(\d+)$/,t,n=-1;return function(){if(n===-1){if(u.length==0)return n=0;var e=0;return $.each(u,function(t,n){var i=s.get(c(n)+".name");if(!i)return;var o=r(i);o>e&&(e=o)}),n=e}return++n}}(),p=null,d={save:function(e){return e.dirty=!1,s.set(c(e.id),e,!0),$(d).trigger("saved",e),e},open:function(e,t){var n=h(e);if(n){this.activate(this.getIndexById(n.id));return}this.add({name:e,code:t,hasname:!0}),this.activate(u.length-1)},add:function(e){var t=l(e);return u.push(t.id),s.set("list",u),s.set(c(t.id),t,!0),$(d).trigger("added",t),t},remove:function(e){if(u.length==1)return;var t=u[e],n=this.getName(e);if(!t)return;s.remove(c(t),!0),e===0&&e===p&&this.activate(1),e===p?this.activate(e-1):e<p&&p--,u.splice(e,1),s.set("list",u,!0),$(d).trigger("removed",n)},list:function(){return u.splice(0)},count:function(){return u.length},get:function(e){return s.get(this.getKey(e))},getIndexById:function(e){return u.indexOf(e)},getIndexByName:function(e){var t=h(e);return t?this.getIndexById(t.id):-1},getById:function(e){return this.get(u.indexOf(e))},getKey:function(e){return"undefined"==typeof e&&(e=this.current()),c(u[e])},load:function(){var e=s.get("list"),t=$.map(e,function(e){return s.get(c(e))});for(var n=0;n<e.length;n++)
this.add(t[n])},activate:function(e){this.deactivate(p),p=e,$(d).trigger("activated",e)},deactivate:function(e){if(null===p)return;p=null,$(d).trigger("deactivated",e)},current:function(){return p},setField:function(e,t,n){s.set(this.getKey(n)+"."+e,t,!0)},getField:function(e,t,n){return s.get(this.getKey(n)+"."+e,t)},getCode:function(e){return this.getField("code","",e)},setCode:function(e,t){this.setField("code",e,t)},setDirty:function(e){this.setField("dirty",!0,e)},getOutputResult:function(e){return this.getField("output.result",null,e)},setOutputResult:function(e,t){this.setField("output.result",e,t)},getOutputType:function(e){return this.getField("output.type",null,e)},setOutputType:function(e,t){this.setField("output.type",e,t)},getOutputOptions:function(e){return this.getField("output.options",{},e)},setOutputOptions:function(e,t){this.setField("output.options",e,t)},getName:function(e){return this.getField("name","",e)},monitor:s.monitor};return s.monitor.bind("list",function(e,t){var n=r.arrayDiff(u,t),i=r.arrayDiff(t,u);if(n.length+i.length==0)return;s.load();var o=$.map(n,function(e){return u.indexOf(e)});for(var a=0;a<o.length;a++)d.remove(o[a]);for(var a=0;a<i.length;a++)d.add(s.get(c(i[a])))}),d}),define("app/history",["app/util/precog","app/util/storage","app/util/md5"],function(e,t,n){function u(e){var t=this.map||(this.map={});return t[e]||(t[e]=n(e)),t[e]}var r,i=20,s="pg-quirrel-history-"+e.hash,o=t(s);return r={revisions:function(e){var t=u(e),n=o.get("history."+t,[]);return n.slice(0)},save:function(e,t,n){var r=u(e),i=o.get("history."+r,[]);t=t.trim();if(t===(i[0]&&i[0].code))return;var s=n&&"undefined"!=typeof n[0]?n[0]:null,a=n&&n.length||0,f=+(new Date);i.unshift({timestamp:f,code:t,sample:{first:s,length:a}}),o.set("result."+r+"."+f,n);var l=this.getHistoryLength();while(i.length>l){var c=i.pop();o.remove("result."+r+"."+c.timestamp)}o.set("history."+r,i,!0)},load:function(e,t){var n=this.revisions(e),r=n[t];if(!r)return null;var i=u(e);return{index:t,timestamp:r.timestamp,code:r.code,data:o.get("result."+i+"."+r.timestamp)}},setHistoryLength:function(e){o.set("max_values",+e)},getHistoryLength:function(){return o.get("max_values",i)},remove:function(e){var t=u(e)},rename:function(e,t){var n=u(e),r=u(t),i=o.get("history."+n),s=o.get("result."+n);o.remove("history."+n),o.remove("result."+n),o.set("history."+r,i),o.set("result."+r,s,!0)}}}),define("app/bar-main",["app/util/ui","rtext!templates/toolbar.main.html","app/util/fullscreen","app/theme","app/util/dialog-confirm","rtext!templates/dialog.global.settings.html","app/util/valuemodel","app/util/objectmodel","app/util/precog","app/util/config"],function(e,t,n,r,i,s,o,u,a,f){function p(e){e.attr("href",c),e.find(".pg-logo").addClass(h)}function d(){return a.config[this.name]}function v(e,t){return function(n){return n=m(n),""+parseInt(n)!=""+n?"must be an integer value":(n=parseInt(n),e&&n<e?"must be greater than "+e:t&&n>t?"must be less than "+t:null)}}function m(e){return(""+e).trim()}function g(e){e=m(e);var t=e.split(".").pop().toLowerCase();e.substr(-1)!=="/"&&t!=="htm"&&t!=="html"&&(e+="/");if(e.length===1)return e;while(e.substr(0,1)==="/")e=e.substr(1);return e}function y(e){return e=m(e),e.substr(0,1)!=="/"&&(e="/"+e),e.length===1?e:(e.substr(-1)!=="/"&&(e+="/"),e)}function b(e){return m(e).toUpperCase()}function w(e){return e.match(/^((\/?[a-z0-9_\-.]+)+)\/?$/i)?null:"invalid url"}function L(){var e=A();C.attr("href",e),C.text(e),E.find(".output").show()}function A(){var e="https://"+T.get("labcoatHost"),t=[],n;return t.push("apiKey="+encodeURIComponent(T.get("apiKey"))),n="https://"+T.get("analyticsService"),n!==e&&t.push("analyticsService="+encodeURIComponent(n)),n=T.get("basePath"),n!="/"&&t.push("basePath="+encodeURIComponent(n)),e+"?"+t.join("&")}function O(){E.find(".output").hide(),C.attr("href","#"),C.text("")}function M(e){return function(t,n){var r=o(n.extract()||n.defaultValue,n.validator,n.filter);e.addField(n.name,r);var i=E.find("#"+n.name);i.val(r.get()),i.on("change",function(){r.set(i.val())}),r.on("validation.error",function(e,t){i.parent().find(".input-error").html(e).show()}),r.on("value.change",function(e,t){i.val(e),i.parent().find(".input-error").hide(),n.callback&&n.callback(e)})}}var l="http://precog.com/products/labcoat",c="http://precog.com/products/labcoat",h="pg-precog";switch(document.location.host){case"labcoat.gridgain.com":c="http://www.gridgain.com/",h="pg-gridgain"}var E=$(s),S=[{name:"analyticsService",extract:function(){var e=d.call(this);return e=e.split("://").pop(),g(e)},filter:g,validator:w},{name:"apiKey",extract:d,filter:b,validator:function(e){return e.match(/^([A-F0-9]{8})(-[A-F0-9]{4}){3}-([A-F0-9]{12})$/)?null:"invalid token pattern"}},{name:"basePath",extract:d,defaultValue:"/",filter:y,validator:function(e){return e.match(/^(\/?([a-z0-9_\-]+)(\/[a-z0-9_\-]+)*\/?)$/i)?null:"invalid path pattern"}},{name:"labcoatHost",extract:function(){return window.location.hostname+window.location.pathname},filter:g,validator:w}],x=[{name:"limit",extract:d,validator:v(1,null),filter:m},{name:"theme",extract:function(){return r.current||d.call(this)},validator:function(e){return r.list().map(function(e){return e.token}).indexOf(e)>=0?null:"invalid theme"},callback:function(e){r.set(e)}}],T=u(),N=u(),C=E.find(".labcoatUrl"),k=E.find("#theme");return $.each(r.groups(),function(e){var t=$('<optgroup label="'+e+' themes"></optgroup>').appendTo(k);$.each(this,function(){t.append($('<option value="'+this.token+'">'+this.name+"</option>"))})}),$(S).each(M(T)),T.on("validation.error",O),T.on("validation.success",L),$(x).each(M(N)),T.isValid()?L():O(),function(s){s.append(t);var o=s.find(".pg-toolbar-context");p(s.find("a.pg-brand")),e.button(o,{icon:"ui-icon-info",description:"about Labcoat"}).click(function(){window.open(l)}),e.button(o,{icon:"ui-icon-gear",description:"application settings"}).click(function(){var e=r.current,t="Application Settings",n=function(){if(!N.getField("limit").isDefault()){var e=parseInt(N.get("limit"));f.set("queryLimit",e,!0),$(f).trigger("queryLimit",e)}T.isValid()&&T.hasChanged()&&(window.location=A())},s={width:500,height:440,cancel:function(){r.current!==e&&r.set(e)}};N.getField("theme").setDefault(r.current),N.getField("limit").setDefault(f.get("queryLimit")),i(t,E,n,s)}),e.button(o,{icon:n.isFullScreen()?"ui-icon-newwin":"ui-icon-arrow-4-diag",description:"toggle fullscreen",handler:function(){n.toggle(),n.isFullScreen()?$(this).find(".pg-icon").removeClass("ui-icon-newwin").addClass("ui-icon-arrow-4-diag"):$(this).find(".pg-icon").removeClass("ui-icon-arrow-4-diag").addClass("ui-icon-newwin")}})}}),define("app/config/output-languages",["app/util/converters","app/util/precog","app/util/ui","app/util/converters"],function(e,t,n,r){function o(e){return e.replace(/"/g,'\\"')}var i=t.config.apiKey,s=t.config.analyticsService;return[{token:"qrl",name:"Quirrel",handler:function(e,t){return t.compact?r.minifyQuirrel(e):"-- Quirrel query generated with Labcoat by Precog\n\n"+e.trim()},options:{compact:!1},buildOptions:function(e,t){var r=this;n.checks(e,[{name:"options",checked:this.options.compact,label:"compact",description:"remove newlines and comments from query",handler:function(){r.options.compact=$(this).prop("checked"),t()}}])}},{token:"js",name:"JavaScript",handler:function(t){return t=o(e.minifyQuirrel(t)),'// Quirrel query in JavaScript generated with Labcoat by Precog\n\nPrecog.query("'+t+'",\n  function(data) { /* do something with the data */ },\n  function(error) { console.log(error); }\n);'}},{token:"html",name:"HTML",handler:function(t){return t=o(e.minifyQuirrel(t)),'<!DOCTYPE html>\n<html>\n<head>\n<title>Quirrel Query</title>\n<script src="http://api.reportgrid.com/js/precog.js?apiKey='+i+"&analyticsService="+s+'"></script>\n'+"<script>\n"+"function init() {\n"+"  // Quirrel query in JavaScript generated with Labcoat by Precog\n"+'  Precog.query("'+t+'",\n    function(data) {\n      /* do something with the data */\n      console.log(data);\n    },\n    function(error) { console.log(error); }\n  );\n'+"}\n"+'</script>\n</head>\n<body onload="init()">\n</body>\n</html>'}},{token:"php",name:"PHP",handler:function(t){return t=o(e.minifyQuirrel(t)),'<?php\n\n// Quirrel query in PHP generated with Labcoat by Precog\n\nrequire_once("Precog.php");\n\n$precog = new PrecogAPI("'+i+'", "'+s+'");\n$result = $precog->query("'+t+'");\n'+"if(false === $precog) {\n"+"  die($precog->errorMessage());\n"+"} else {\n"+"  // do something with $result here\n"+"}\n?>"}}]}),define("app/bar-editor",["app/util/ui","app/editors","app/util/notification","app/util/querystring","app/util/converters","app/util/utils","app/util/dialog-export","app/util/dialog-lineinput","app/config/output-languages","rtext!templates/toolbar.editor.html","libs/moment/moment"],function(e,t,n,r,i,s,o,u,a,f){return function(i,l){function m(e){var t=d.find("li a").length;for(var n=0;n<t;n++)if(g(n)===e)return n;return-1}function g(e){return y(e).attr("data")}function y(e){return d.find("li:nth("+e+") a")}function b(e,t,n){var r=y(e);r.attr("data",t).attr("title",t).html(s.truncate(t.split("/").pop())),n&&c.invalidateTab(e)}function w(e){var t=y(e),n=t.html();n&&n.substr(0,1)!=="*"&&t.html("*"+n)}function E(e){var t=y(e),n=t.html();n.substr(0,1)==="*"&&t.html(n.substr(1))}function T(e){var t=3,n=40,r=moment(new Date(e.timestamp)).fromNow(),i=e.code.split("\n");if(i.length>t){var o=i.length-t;i.splice(t-1),i.push("... +"+o+" more line(s)")}var u=i.map(function(e){return s.truncate(e,n)}).join("\n");return'<div class="pg-history-item ui-content ui-state-highlight ui-corner-all"><div class="pg-header">query:</div><pre>'+u+"</pre>"+'<div class="pg-header">sample:</div>'+"<pre>"+s.truncate(JSON.stringify(e.sample.first),n)+"</pre>"+'<div class="pg-info">generated '+e.sample.length+" records<br>executed "+r+"</div>"+'<div class="pg-toolbar"></div>'+'<div class="pg-clear"></div>'+"</div>"}var c;i.append(f);var h=i.find(".pg-toolbar-context"),p=0,d=e.tabs(i.find(".pg-editor-tabs"),{tabTemplate:"<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close pg-tab-close'>Remove Tab</span></li>",add:function(e,n){var r=n.index;p&&(d.tabs("select",r),t.activate(r),p--)}}),v=0;d.on({click:function(){var e=$("li",d).index($(this).parent());t.remove(e)}},".ui-icon-close"),d.on({click:function(){var e=$("li",d).index($(this).parent());t.activate(e)}},"li a");var S=e.button(h,{icon:"ui-icon-clock",description:"display query history",handler:function(){$(c).trigger("requesthistorylist")}});e.button(h,{icon:"ui-icon-disk",description:"save query",handler:function(){var e=t.get();e.hasname?t.save(e):u("Save Query","Select a unique identification name for your query",null,"",function(e){return s.validateQueryName(e,l.nameAtPath(e),l)},function(n){e.name=l.nameAtPath(n),e.hasname=!0,t.save(e)})}}),e.button(h,{icon:"ui-icon-mail-closed",description:"send query by email",handler:function(e){var n="support@precog.com",r="Quirrel Help",i="I need help with the following query:\n\n"+t.getCode();document.location.href="mailto:"+n+"?subject="+encodeURIComponent(r)+"&body="+encodeURIComponent(i)}});var x;e.button(h,{icon:"ui-icon-link",description:"copy a link with the current query",handler:function(e){var i=document.location.protocol+"//"+document.location.hostname+document.location.pathname,s=r.all();s.q=t.getCode(),x&&x.remove(),x=n.copier("Create Query Link",{text:"Copy this link to pass the current query to someone else.<br>Don't forget that the URL contains your token!",copy:i+"?"+$.param(s),target:this})}}),e.button(h,{icon:"ui-icon-arrowthickstop-1-s",description:"download query code",handler:function(){o("Download Query",a,t.getCode())}}),e.button(h,{icon:"ui-icon-plus",description:"create new empty tab",handler:function(){p++,t.add()}});var N;return c={addTab:function(e,t){var n=d.tabs("add","#pg-editor-tab-"+ ++v,"");b(d.tabs("length")-1,e,t);var r=d.find(".pg-tab-close");r.length==1?r.hide():r.length==2&&r.show()},removeTab:function(e){d.tabs("remove",e);var t=d.find(".pg-tab-close");t.length===1&&t.hide()},removeTabByName:function(e){var t=m(e);t>=0&&this.removeTab(t)},activateTab:function(e){d.tabs("select",e)},changeTabName:function(e,t){var n=g(e);b(e,t),$(c).trigger("tabrenamed",{oldname:n,newname:t})},invalidateTab:function(e){w(e)},revalidateTab:function(e){E(e)},displayHistoryList:function(t){N&&N.remove();var r;t.length==0?r="No queries have been performed yet in this editor context.":r='<div class="pg-history"><ul><li>'+t.map(T).join("</li><li>")+"</li></ul></div>",N=n.context("History",{target:S,text:r}),N.find(".pg-toolbar").each(function(n){var r=t[n];$(this).append("open in "),n!==0&&e.button(this,{label:"current tab",handler:function(){N.remove(),$(c).trigger("requestopenrevision",{usenewtab:!1,index:n})}}),e.button(this,{label:"new tab",handler:function(){N.remove(),$(c).trigger("requestopenrevision",{usenewtab:!0,index:n})}})})},historyPanelIsOpen:function(){return N&&N.is(":visible")}}}}),define("app/folders",["app/util/precog","app/util/storagemonitor","app/util/uiconfig","app/util/ui","app/util/utils","app/util/notification","app/util/dialog-lineinput","app/util/dialog-confirm","app/util/humanize","rtext!templates/toolbar.folders.html","libs/jquery/jstree/vakata","libs/jquery/jstree/jstree","libs/jquery/jstree/jstree.sort","libs/jquery/jstree/jstree.ui","libs/jquery/jstree/jstree.themes"],function(t,n,r,i,s,o,u,a,f,l){function v(e,t){var n=g(e);n.indexOf(t)<0&&(n.push(t),d.set("virtuals."+e,n))}function m(){return d.get("virtuals",{})}function g(e){return d.get("virtuals."+e,[])}function y(e,t){var n=d.get("virtuals."+e,[]),r=n.indexOf(t);if(r<0)return;n.splice(r,1),n.length===0?d.remove("virtuals."+e,!0):d.set("virtuals."+e,n,!0)}function b(e){return e=e.replace(/\/+/g,"/"),e.substr(-1)==="/"&&(e=e.substr(0,e.length-1)),e}function w(e){e=b(e).substr(1);var t=e.split("/");while(t.length>0){var n=t.pop();y("/"+t.join("/"),n)}}var c="download.php",h="pg-quirrel-virtualpaths-"+t.hash,p=t.config.basePath||"/",d=n(h,{virtuals:{}});return function(n){function L(){var e=k&&$(k).attr("data");$.each(C,function(){$(this).button("disable")}),e&&($(C[0]).button("enable"),e!=="/"&&$.each(C,function(){$(this).button("enable")}))}function O(e){$(s).trigger("querypath",b(e))}function M(e,t){if(!t||!e)return;v(e,t);var n=e===p?-1:_(e);if(!n)return;var r=b(("/"===e?"/":e+"/")+t);if(h[r])return;h[r]=!0,I(t,r,null,n)}function _(e){var t=A.find("li"),n=t.length;for(var r=0;r<n;r++)if($(t.get(r)).attr("data")===e)return t.get(r);return null}function D(e){if(!e&&(e=e.trim())==="/")return;e=b(e),$(s).trigger("requestPathDeletion",e),w(e),delete h[e];for(var t in h)h.hasOwnProperty(t)&&t.substr(0,e.length+1)===e+"/"&&delete h[t];q(e)}function P(e){var t=H(e),n="Create Folder",r="Create a sub folder at: <i>"+t+"</i>";u(n,r,"folder name","",function(e){return null!=e&&e.match(/^[a-z0-9]+$/i)?null:"path name cannot be empty and it can only be composed of alpha-numeric characters"},function(t){M(e,t)})}function H(e){return e=b(e),e=(e+"/").substr(0,p.length)===p?(e+"/").substr(p.length):e,e||(e="/"),e}function B(e){var n=e.substr(0,p.length)===p?"/"+e.substr(p.length):e,r="Delete Folder",i="Are you sure you want to delete the folder at: <i>"+e+"</i> and all of its content?<br>This operation cannot be undone!";a(r,i,function(){t.deletePath(n,function(t){t?D(e):alert("an error occurred deleting the path "+e)})},{captcha:!0})}function j(e){var t=H(e),n="Upload Data",r="Upload data at: <i>"+t+"</i><br>You can use a JSON file (one array of values/objects), a text file containing one JSON object per line, a CSV file (headers are mandatory) or a zip file containing any combination of the previous formats.";u(n,r,"file to upload","",function(e){return e?null:"select a file"},function(t,n){if(n)for(var r=0;r<n.length;r++)U(n[r],e)},"file")}function F(e){return c+"?apiKey="+encodeURIComponent(t.config.apiKey)+"&analyticsService="+encodeURIComponent(t.config.analyticsService)+"&path="+encodeURIComponent(e)}function I(e,t,n,r){return r||(r=-1),A.jstree("create_node",r,{title:e,data:t,li_attr:{data:t}},"last",function(e){return $(e).find("a:first").dblclick(function(e){return A.jstree("toggle_node",k),e.preventDefault(),!1}),J(e,t),n&&n.apply(e,[t]),!1})}function q(e){var t=_(e);if(t===null)return;A.jstree("delete_node",t)}function R(e,n,r){"undefined"==typeof n&&(n=1),e=b(e),h[e]=!0,t.paths(H(e),function(t){function o(){if(t.length===0)return;var e=i+t.shift();I(e.split("/").pop(),e,function(){n>1&&R(e,n-1,this)},r||-1),setTimeout(o,0)}var i="/"===e?"":e,s=g(e);$.each(s,function(e,n){n.substr(0,1)!=="/"&&(n="/"+n),t.indexOf(n)<0&&t.push(n)}),t.sort(),setTimeout(o,0)})}function U(e,n){function a(e){u.progressStep(e.loaded/e.total),u.el.find(".pg-message").html("uploaded "+f.filesize(e.loaded)+" of "+f.filesize(e.total))}function l(e){if(e.failed>0){e.ingested===0?message="All of the "+f.numberFormat(e.total,0)+" events failed to be stored.":message=f.numberFormat(e.ingested,0)+" events have been stored correctly, "+f.numberFormat(e.failed,0)+" failed to be stored.",e.skipped&&(message+="<br>Skipped "+f.numberFormat(e.skipped,0)+" events (the ingest process stops after "+f.numberFormat(e.failed,0)+" errors).");if(e.errors.length){var t={};$(e.errors).each(function(){var e=this.line,n=this.reason,r=t[n]||(t[n]=[]);r.push(e)});var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(r+" at line(s): "+t[r].join(", "));message+='<p>Error details:</p><ul class="errors"><li>'+n.join("</li><li>")+"</li></ul>"}u.progressError(message)}else message="all of the "+f.numberFormat(e.total,0)+" events have been queued correctly and are now in the process to be ingested",u.progressComplete(message)}function c(e){u.progressError("An error occurred while uploading your file. No events have been stored in Precog: "+JSON.stringify(e))}if(!e)return;var r=e.fileName||e.name,i=r.split(".").pop().toLowerCase();if(["json","csv","zip"].indexOf(i)<0){o.error("invalid file type",{text:"You can only upload files of type json, csv or zip. Be sure that the file extension matches the type."});return}n=H(n);var s=e,u={text:"Starting upload of '"+r+"'"};o.progress("upload file",u),t.ingest(n,s,i,a,l,c)}function z(e,t){if(typeof e!="undefined")for(var n=0,r=e.length;n<r;n++)U(e[n],t);else alert("No support for the File API in this web browser")}function X(){if(!W)return;W.hide(),W.remove(),W=null}function J(e,t){$(e).on("dragleave",function(e){return $(this).removeClass("ui-state-active"),e.preventDefault(),!1}).on("dragenter",function(e){return $(this).addClass("ui-state-active"),e.preventDefault(),!1}).on("dragover",function(e){return e.preventDefault(),!1}).on("drop",function(e){return $(this).removeClass("ui-state-active"),z(e.originalEvent.dataTransfer.files,t),X(),e.preventDefault(),!1})}var s,h;n.find(".pg-toolbar").append(l);var y=n.find(".pg-toolbar-description"),E=n.find(".pg-toolbar-actions"),S=n.find(".pg-toolbar-context"),x=n.find(".pg-tree").append('<div class="pg-root"></div>').find(".pg-root"),T=n.find(".pg-tree").append('<div class="pg-structure"></div>').find(".pg-structure"),N=n.append('<div style="display: none"><input name="files" type="file" multiple></div>').find("input[type=file]"),C=[],k;r.disableUpload||C.push(i.button(S,{text:!1,icon:"ui-icon-arrowthickstop-1-n",description:"upload data to folder",handler:function(){j($(k).attr("data"))}})),r.disableDownload||(C.push(i.button(S,{text:!1,icon:"ui-icon-new-folder",description:"create new folder",handler:function(){P($(k).attr("data"))}})),C.push(i.button(S,{text:!1,icon:"ui-icon-trash",handler:function(){B($(k).attr("data"))}}))),r.disableUpload||C.push(i.button(S,{text:!1,icon:"ui-icon-arrowthickstop-1-n",description:"upload data to folder",handler:function(){j($(k).attr("data"))}})),C.push(i.button(S,{text:!1,icon:"ui-icon-query",description:"query data at path",handler:function(){O(H($(k).attr("data")))}})),L(),y.html("file system");var A=T.jstree({plugins:["themes","sort","ui"],ui:{select_limit:1,selected_parent_close:"deselect",select_multiple_modifier:!1,select_range_modifier:!1}});x.html('<div class="jstree jstree-default"><a href="#" data="'+p+'"><ins class="jstree-icon jstree-themeicon"> </ins>/</a></div>'),x.find("a").mouseenter(function(){$(this).addClass("jstree-hovered")}).mouseleave(function(){$(this).removeClass("jstree-hovered")}).click(function(){A.jstree("deselect_all"),$(this).addClass("jstree-clicked"),k=this,L()}),A.bind("click.jstree",function(){x.find("a").removeClass("jstree-clicked"),k=A.jstree("get_selected"),L()}),A.bind("open_node.jstree",function(e,t){var n=$(t.rslt.obj).find("li");n.each(function(e,t){var n=b($(t).attr("data"));if(h[n])return;R(n,1,t)})}),i.button(E,{icon:"ui-icon-refresh",description:"refresh folders",handler:function(){s.refresh()}}),s={refresh:function(){h={},A.jstree("delete_node","*"),R(p,2)},createNodeAt:function(e,t){M(e,t)},requestNodeCreationAt:function(e){P(e)}},N.on("change",function(){return e.preventDefault(),!1});var W,V=$(n).parents(".pg-labcoat").on("dragenter",function(e){if(W)return;return W=o.success("Drag your file on a folder to upload data",{hide:!1,history:!1}),e.preventDefault(),!1}).on("dragleave",function(e){var t=e.originalEvent.pageX,n=e.originalEvent.pageY,r=V.offset(),i=V.outerWidth(),s=V.outerHeight();(t<=r.left||t>=r.left+i||n<=r.top||n>=r.top+s)&&X()}).on("dragover",function(e){return e.preventDefault(),!1}).on("drop",function(e){return X(),e.preventDefault(),!1});return s.refresh(),d.monitor.bind("virtuals",function(e,t){var n=m(),r=[];for(var i in t)if(n.hasOwnProperty(i)&&!n[t]){var s=t[i];for(var o=0;o<s.length;o++)r.push({path:i,name:s[o]})}for(var o=0;o<r.length;o++){var u=r[o];M(u.path,u.name)}}),s}}),define("app/queries",["app/util/precog","app/util/storagemonitor","app/util/ui","app/util/utils","app/config/demo-queries","app/util/dialog-lineinput","app/util/dialog-confirm","rtext!templates/toolbar.folders.html","libs/jquery/jstree/vakata","libs/jquery/jstree/jstree","libs/jquery/jstree/jstree.sort","libs/jquery/jstree/jstree.ui","libs/jquery/jstree/jstree.themes"],function(e,t,n,r,i,s,o,u){var a=[],f="5CDA81E8-9817-438A-A340-F34E578E86F8",l="pg-quirrel-queries-"+e.hash,c=t(l,{queries:f===e.config.apiKey?i:{},folders:[]});return function(e){function y(e,n){var i=c.get("queries."+r.normalizeQueryName(e)).code;t.queryCreate(n,i),t.queryRemove(e)}function b(){var e=g&&$(g).attr("data-path");$.each(m,function(){$(this.el).button("disable")});if(e){var t=e==="/"?"root":e.substr(0,1)==="/"?"folder":"query";$.each(m,function(){this.groups.indexOf(t)>=0&&$(this.el).button("enable")})}}function w(e){var n="Remove Folder",i="Are you sure you want to remove the folder <i>"+(e||"/")+"</i> and all if its content? The operation cannot be undone!";o(n,i,function(){var n=c.get("queries",{}),i=[],s=e.substr(1)+"/",o=s.length;for(var u in n)n.hasOwnProperty(u)&&u.substr(0,o)===s&&i.push(u);var a=[e];s=e+"/",o=s.length;for(var f=0;f<j.length;f++)j[f].substr(0,o)===s&&a.push(j[f]);for(var f=0;f<i.length;f++)t.queryRemove(i[f]);for(var f=0;f<a.length;f++)r.arrayRemove(j,a[f]);c.set("folders",j,!0);var l=k(e);S.jstree("delete_node",l)})}function E(e){var t="Create Folder",n="Create a sub folder at: <i>"+(e||"/")+"</i>";s(t,n,"folder name","",function(e){return null!=e&&e.match(/^[a-z0-9]+$/i)?null:"path name cannot be empty and it can only be composed of alpha-numeric characters"},function(t){var n=e+"/"+t;j.push(n),c.set("folders",j,!0),_(n)})}function x(e){$(t).trigger("requestopenquery",c.get("queries."+r.normalizeQueryName(e)))}function T(){p.show(),h.find(".pg-message").hide()}function N(){p.hide(),h.find(".pg-message").show()}function C(e){e.substr(0,1)==="/"&&(e=e.substr(1));var t=e.split("/");return t.pop(),t.length===0?"/":"/"+t.join("/")}function k(e){if(!e||e==="/")return-1;var t=S.find("li[rel=folder]"),n=t.length;for(var r=0;r<n;r++)if($(t.get(r)).attr("data-path")===e)return t.get(r);return null}function L(e){if(!e||e==="/")return-1;var t=S.find("li[rel=query]"),n=t.length;for(var r=0;r<n;r++)if($(t.get(r)).attr("data-path")===e)return t.get(r);return null}function A(e,t){var n=function(r,i){var s=i.rslt,o=$(s.obj[0]);if(o.attr("data-path")!==e)return;S.unbind("create_node.jstree",n),t&&t(o)};return n}function O(e,t,n){return S.bind("create_node.jstree",A(t,function(e){S.jstree("set_icon",e,"pg-tree-leaf"),$(e).dblclick(function(){var e=$(this).attr("data-path");x(e)}),n&&n(e)})),S.jstree("create_node",e,{title:t.split("/").pop(),li_attr:{"data-path":t,rel:"query"}},"last")}function M(e,t,n){e||(e=-1);var r=(e===-1?"":$(e).attr("data-path"))+"/"+t;return S.bind("create_node.jstree",A(r,function(e){$(e).find("a:first").dblclick(function(e){return S.jstree("toggle_node",g),e.preventDefault(),!1}),n&&n(e)})),S.jstree("create_node",e,{title:t,li_attr:{"data-path":r,rel:"folder"}},"last")}function _(e,t){t=t||function(){};var n=e,r;while(null===(r=k(n))){var i=n.substr(1).split("/");i.pop(),n="/"+i.join("/")}if(n===e){t(r);return}var s=e.substr(n.length).split("/").filter(function(e){return!!e}).shift();M(r,s,function(n){_(e,t)})}function D(e,t){var n=C(e);_(n,function(e){O(e,t),T()})}function P(e){var t=L(e);if(!t)return;S.jstree("delete_node",t)}var t;e.find(".pg-toolbar").append(u);var i=e.find(".pg-toolbar-description"),f=e.find(".pg-toolbar-actions"),l=e.find(".pg-toolbar-context"),h=e.find(".pg-queries"),p=h.append('<div class="pg-tree"></div><div class="pg-message ui-content ui-state-highlight ui-corner-all"><p>You don\'t have saved queries. To save a query use the "disk" button on the editor toolbar.</p></div>').find(".pg-tree"),d=p.append('<div class="pg-root"></div>').find(".pg-root"),v=p.append('<div class="pg-structure"></div>').find(".pg-structure"),m=[{el:n.button(l,{text:!1,icon:"ui-icon-new-folder",description:"create folder",handler:function(){var e=$(g).attr("data-path");e==="/"&&(e=""),E(e)}}),groups:["root","folder"]},{el:n.button(l,{text:!1,icon:"ui-icon-new-query",description:"create query",handler:function(){var e=g,i=$(e).attr("data-path");O(i==="/"?-1:e,"   ",function(e){function s(){S.jstree("delete_node",e)}n.edit($(e).find("a"),{handler:function(e,n){i.substr(-1)!=="/"&&(i+="/");var o=r.validateQueryName(e,i+e,t);n(o);if(!o){s();var u=(i+e).substr(1);t.queryCreate(u,"")}},cancel:function(){S.jstree("delete_node",e)}})})}}),groups:["root","folder"]},{el:n.button(l,{text:!1,icon:"ui-icon-trash",description:"remove folder/query",handler:function(){var e=$(g).attr("data-path");e.substr(0,1)==="/"?w(e):t.queryRemove(e)}}),groups:["folder","query"]},{el:n.button(l,{text:!1,icon:"ui-icon-rename",description:"rename query",handler:function(){var e=$(g).attr("data-path");e=e.split("/");var i=e.pop();e=e.length===0?"":e.join("/")+"/",n.edit($(g).find("a"),{handler:function(n,s){var o=r.validateQueryName(n,e+n,t);s(o),o||y(e+i,e+n)}})}}),groups:["query"]}],g;i.html("query manager"),b();var S=v.jstree({plugins:["themes","sort","ui","dnd"],sort:function(e,t){return $(e).attr("rel")>$(t).attr("rel")?1:$(e).attr("data-path")>$(t).attr("data-path")?1:-1},types:{query:{valid_children:"none"},folder:{valid_children:["folder","query"]}},ui:{select_limit:1,selected_parent_close:"deselect",select_multiple_modifier:!1,select_range_modifier:!1}});d.html('<div class="jstree jstree-default"><a href="#" data-path="/"><ins class="jstree-icon jstree-themeicon"> </ins>/</a></div>'),d.find("a").mouseenter(function(){$(this).addClass("jstree-hovered")}).mouseleave(function(){$(this).removeClass("jstree-hovered")}).click(function(){S.jstree("deselect_all"),$(this).addClass("jstree-clicked"),g=this,b()}),S.bind("click.jstree",function(){d.find("a").removeClass("jstree-clicked"),g=S.jstree("get_selected"),b()});var H=c.get("queries");for(var B in H)H.hasOwnProperty(B)&&D(B,H[B].name);var j=c.get("folders",[]);for(var F=0;F<j.length;F++){var I=j[F];_(I)}return c.monitor.bind("queries",function(e,n){var i=[];for(var s in n)n.hasOwnProperty(s)&&i.push(s);var o=r.arrayDiff(a,i),u=r.arrayDiff(i,a);c.load();for(var f=0;f<o.length;f++)P(r.normalizeQueryName(o[f])),$(t).trigger("removed",o[f]);for(var f=0;f<u.length;f++)D(r.normalizeQueryName(u[f]),u[f]);a=i}),c.monitor.bind("folders",function(e,t){var n=r.arrayDiff(t,j);c.load();for(var i=0;i<n.length;i++)_(n[i]);j=t}),t={queryExist:function(e){var t=r.normalizeQueryName(e);return!!c.get("queries."+t)},querySave:function(e,t){return this.queryExist(e)?this.queryUpdate(e,t):this.queryCreate(e,t)},queryCreate:function(e,n){var i=r.normalizeQueryName(e),s=c.get("queries."+i);return s?!1:(c.set("queries."+i,s={name:e,code:n},!0),D(i,e),$(t).trigger("created",s),!0)},queryUpdate:function(e,n){var i=r.normalizeQueryName(e),s=c.get("queries."+i);return s?(s.code=n,c.set("queries."+i,s,!0),$(t).trigger("updated",s),!0):!1},queryRemove:function(e){var n=r.normalizeQueryName(e),i=c.get("queries."+n);return i?(c.remove("queries."+n),P(e),$(t).trigger("removed",i.name),!0):!1},nameAtPath:function(e){if(!g)return e;var t=$(g).attr("data-path");return!t||t==="/"?e:t.substr(0,1)==="/"?t.substr(1)+"/"+e:(t=t.split("/"),t.pop(),t.join("/")+"/"+e)}}}}),define("app/config/eggs",[],function(e){return[{question:"who did this?",answer:"Franco Ponticelli ... the amazing programmer"},{question:"how many zombies does it take to screw in a light-bulb?",answer:"1 precog zombie, and as many minions an necessary"}]}),define("app/eggmanager",["app/config/eggs","app/util/notification"],function(e,t){function n(e){return e.toLowerCase().replace(/\W+/," ").replace(/\s+/gm," ").trim()}function r(e){return e.split("\n").length>1?null:(e=e.trim(),e.substr(0,2)==="--"?e.substr(2):e.substr(0,2)==="(*"&&e.substr(e.length-2)==="*)"?e.substr(2,e.length-4):null)}for(var i=0;i<e.length;i++)e[i].normalized=n(e[i].question);return{findEgg:function(t){var r=n(t);for(var i=0;i<e.length;i++)if(r===e[i].normalized)return i;return-1},isEgg:function(e){return this.findEgg(e)>=0},displayEgg:function(n,r){if(n<0)return;t.main(r,{text:'<div class="pg-easter">'+e[n].answer+"</div>",min_height:"100px"})},easterEgg:function(e){var t=r(e);if(null===t)return!1;var n=this.findEgg(t);return n<0?!1:(this.displayEgg(n,t),!0)}}}),define("app/gatrack",[],function(){function r(){if(n.length===0)return;if("undefined"==typeof _gaq){clearInterval(this.timer),this.timer=setTimeout(function(){r()},1e3);return}var e=n.shift();_gaq.push(["_trackEvent",e.category,e.action,e.label,e.value]),r()}function i(e,t,i,s){n.push({category:e,action:t,label:i,value:s}),r()}var e="interaction",t,n=[];return t={trackEvent:function(e,t,n,r){i(e,t,n,r)},trackQueryExecution:function(t){this.trackEvent(e,"execute-query",t)}}}),requirejs.config({waitSeconds:20,baseUrl:"./js/",shim:{"libs/jquery/ui/jquery.ui.core":["jquery"],"libs/jquery/ui/jquery.ui.position":["libs/jquery/ui/jquery.ui.core"],"libs/jquery/ui/jquery.ui.widget":["libs/jquery/ui/jquery.ui.core"],"libs/jquery/ui/jquery.ui.mouse":["libs/jquery/ui/jquery.ui.widget"],"libs/jquery/ui/jquery.ui.resizable":["libs/jquery/ui/jquery.ui.mouse"],"libs/jquery/ui/jquery.ui.button":["libs/jquery/ui/jquery.ui.widget"],"libs/jquery/ui/jquery.ui.sortable":["libs/jquery/ui/jquery.ui.widget"],"libs/jquery/ui/jquery.ui.draggable":["libs/jquery/ui/jquery.ui.mouse"],"libs/jquery/ui/jquery.ui.droppable":["libs/jquery/ui/jquery.ui.draggable"],"libs/jquery/ui/jquery.ui.dialog":["libs/jquery/ui/jquery.ui.widget","libs/jquery/ui/jquery.ui.draggable","libs/jquery/ui/jquery.ui.button","libs/jquery/ui/jquery.ui.position","libs/jquery/ui/jquery.ui.resizable"],"libs/jquery/ui/jquery.ui.progressbar":["libs/jquery/ui/jquery.ui.widget"],"libs/jquery/ui/jquery.ui.tabs":["libs/jquery/ui/jquery.ui.widget"],"libs/jquery/ui/jquery.ui.menu":["libs/jquery/ui/jquery.ui.widget"],"libs/jquery/slickgrid/jquery.event.drag-2.0.min":["jquery","libs/jquery/ui/jquery.ui.sortable"],"libs/jquery/slickgrid/slick.core":["libs/jquery/slickgrid/jquery.event.drag-2.0.min","libs/jquery/ui/jquery.ui.sortable"],"libs/jquery/slickgrid/slick.grid":["libs/jquery/slickgrid/slick.core"],"libs/jquery/slickgrid/slick.dataview":["libs/jquery/slickgrid/slick.grid"],"libs/jquery/slickgrid/slick.pager":["libs/jquery/slickgrid/slick.dataview"],"libs/jquery/slickgrid/slick.columnpicker":["libs/jquery/slickgrid/slick.pager"],"app/util/output-table":["libs/jquery/slickgrid/slick.columnpicker","libs/jquery/ui/jquery.ui.sortable"],"app/util/ui":["libs/jquery/ui/jquery.ui.menu","libs/jquery/ui/jquery.ui.tabs","libs/jquery/ui/jquery.ui.progressbar","app/util/dom"],"libs/jquery/layout/jquery.layout":["libs/jquery/ui/jquery.ui.draggable"],"libs/jquery/jstree/jstree":["libs/jquery/jstree/vakata"],"libs/jquery/jstree/jstree.sort"
:["libs/jquery/jstree/jstree"],"libs/jquery/jstree/jstree.types":["libs/jquery/jstree/jstree"],"libs/jquery/jstree/jstree.themes":["libs/jquery/jstree/jstree"],"libs/jquery/jstree/jstree.ui":["libs/jquery/jstree/jstree"],"app/folders":["libs/jquery/jstree/jstree.themes"]}}),require(["app/util/config","app/layout","app/editors","app/history","app/bar-main","app/bar-editor","app/bar-status","app/theme","app/editor/editor.ace","app/editorsync","app/output","app/folders","app/queries","app/support","app/startup-tips","app/util/precog","app/util/querystring","app/eggmanager","app/gatrack"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){$(function(){function O(){if(A)return;n.setDirty(),L.invalidateTab(n.current())}function M(){var e=r.revisions(n.getName());L.displayHistoryList(e)}function P(e){for(var t=0;t<n.count();t++)if(n.getCode(t)===e)return!0;return!1}v.cache.disable();var b,w=t(e.get("ioPanesVertical"));w.getContainer().hide(),i(w.getBarMain()),$(u).on("changed",function(){w.refresh()}),$(u).on("change",function(t,n){e.set("theme",n)});var E=a(w.getCodeEditor(),e.get("ioPanesVertical"));E.setTabSize(e.get("tabSize")),E.setUseSoftTabs(e.get("softTabs")),$(w).on("resizeCodeEditor",function(){E.resize()}),$(w).on("ioOrientationChanged",function(t,n){e.set("ioPanesVertical",n),E.orientButton(n)}),$(u).on("change",function(e,t){E.setTheme(u.getEditorTheme(t,E.engine()))}),$(E).on("useSoftTabsChanged",function(t,n){e.set("softTabs",n)}),$(E).on("tabSizeChanged",function(t,n){e.set("tabSize",n)});var S=o(w.getStatusBar(),E,w),x=l(w.getOutput(),n),T=p(w.getSupport());T.addPanel("tutorial","https://quirrel.precog.com/tutorial.html"),T.addPanel("reference","https://quirrel.precog.com/reference.html"),T.addPanel("IRC channel","https://api.precog.com:9090/?channels=#quirrel"),$(w).on("resizeCodeEditor",function(){x.resize(),T.resize()}),$(x).on("syntaxError",function(e,t){E.highlightSyntax(t.line-1,t.column-1,t.text,"error")}),$(x).on("requestCursorChange",function(e,t){E.setCursorPosition(t.line-1,t.column-1)}),$(x).on("typeChanged",function(e,t){n.setOutputType(t)});var N={};$(v).on("execute",function(e,t,r,i){N[i]={query:t,name:n.getName()},S.startRequest()}),$(v).on("completed",function(e,t,i,s){var o=N[t];delete N[t],r.save(o.name,o.query,i),S.endRequest(!0);if(n.getName()===o.name)x.setOutput(i,null,n.getOutputOptions()),n.setOutputResult(i),L.historyPanelIsOpen()&&M();else{var u=n.getIndexByName(o.name);if(u>=0){var a=n.getOutputType(u);(a==="message"||a==="error")&&n.setOutputType("table",u),n.setOutputResult(i,u)}}y.trackQueryExecution("success")}),$(v).on("failed",function(e,t,r){r=r instanceof Array?r[0]:r;var i=N[t];delete N[t],S.endRequest(!1);if(n.getName()===i.name)x.setOutput(r,"error",n.getOutputOptions()),n.setOutputResult(r);else{var s=n.getIndexByName(i.name);s>=0&&n.setOutputResult(r,s)}y.trackQueryExecution("undefined"!=typeof r.lineNum?"syntax-error":"service-error")});var C;$(E).on("execute",function(e,t){if(g.easterEgg(t))return;clearInterval(C),C=setTimeout(function(){var e=x.paginationOptions();v.query(t)},0)}),$(n).on("activated",function(e,t){var r=n.getOutputResult(),i=n.getOutputType(),s=n.getOutputOptions();x.setOutput(r,i,s)}),$(n).on("saved",function(e,t){b.querySave(t.name,t.code)}),f(E,n,e);var k=c(w.getSystem());$(k).on("querypath",function(e,t){t.substr(0,1)!=="/"&&(t="/"+t);var r='load("'+t.replace(/"/g,'"')+'")';n.getCode().trim()==""?E.set(r):(n.add({code:r}),n.activate(n.count()-1)),E.triggerExecute()}),b=h(w.getQueries()),$(b).on("requestopenquery",function(e,t){n.open(t.name,t.code)}),$(b).on("removed",function(e,t){var r=n.getIndexByName(t);r>=0&&L.invalidateTab(r)});var L=s(w.getBarEditor(),b,E);$(n).on("saved",function(e,t){var r=n.getIndexById(t.id);if(r<0)return;L.changeTabName(r,t.name)}),$(n).on("added",function(e,t){L.addTab(t.name,!!t.dirty)}),$(n).on("removed",function(e,t){L.removeTabByName(t)});var A=!0;$(E).on("change",O),$(n).on("activated",function(e,t){L.activateTab(t),clearInterval(this.k),this.k=setTimeout(function(){A=!1},1e3),L.historyPanelIsOpen()&&M()}),$(n).on("deactivated",function(e,t){A=!0}),$(n).on("removed",function(e,t){b.queryExist(t)||r.remove(t)}),$(L).on("requesthistorylist",M),$(L).on("requestopenrevision",function(e,t){var i=n.getName(),s=r.load(i,t.index);t.usenewtab?(n.add({code:s.code,output:{result:s.data}}),n.activate(n.count()-1)):E.set(s.code),x.setOutput(s.data,null,n.getOutputOptions())}),$(L).on("tabrenamed",function(e,t){r.rename(t.oldname,t.newname),L.historyPanelIsOpen()&&M()});var _=d(w);n.load();var D=m.get("q");(!n.count()||D&&!P(D))&&n.add(D&&{code:D}),setTimeout(function(){n.activate(n.count()-1),$(x).on("optionsChanged",function(e,t){n.setOutputOptions(t)}),u.set(v.config.theme||e.get("theme","gray")),e.monitor.bind("theme",function(e,t){u.set(t)}),e.monitor.bind("softTabs",function(e,t){E.setUseSoftTabs(t)}),e.monitor.bind("tabSize",function(e,t){E.setTabSize(t)}),w.getContainer().show()},150)})}),define("main",function(){});