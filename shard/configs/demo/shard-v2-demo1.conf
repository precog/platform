server {
  port = 31150
  sslPort = 31151
  sslEnable = false

  log {
    level = "info"
    console = true
    filename = "/var/log/precog/shard-v2-demo1.server.log"
    roll = "daily"
    use_parents = false
  }
}

services {
  analytics {
    v2 {
      log {
        level = "debug"
        console = true
        filename = "/var/log/precog/shard-v2-demo1.log"
        roll = "daily"
        use_parents = false
      }

      requestLog {
        enabled = false 
        file = "/var/log/precog/shard-v2-demo1.request.log"
        roll = "daily"
        fields = "date time c-ip cs-method cs-uri-stem cs-uri-query sc-status cs-content"
        formatter = "w3cs"
        excludePaths = ["/analytics/v2/health"]
      }

      queryExecutor {
        systemId = demo1
        precog {
          evaluator {
            timeout {
              eval = 600
            }
          }
          storage {
            root = /srv/demo-v2/shard01/
          }          
          kafka {
            enabled = false 
            topic {
              events = demo1_central_event_store
            }
            consumer {
              zk {
                connect = localhost:2181 
                connectiontimeout {
                  ms = 1000000
                }
              }
              groupid = demo1_shard_consumer
            }
          }
        }
        ingest {
          enabled = false
        }
        kafka {
          batch {
            host = localhost 
            port = 9092
            topic = demo1_central_event_store
          }
        }
        zookeeper {
          hosts = localhost
        } 
      }

      security {
        service {
          hardcoded_rootKey = "5CDA81E8-9817-438A-A340-F34E578E86F8"
        }
        cached = true
        rootKey = "5CDA81E8-9817-438A-A340-F34E578E86F8"
      }

      accounts {
        service {
          hardcoded_account = "demo"
          hardcoded_rootKey = "5CDA81E8-9817-438A-A340-F34E578E86F8"
          hardcoded_rootPath = "/"
        }
      }

      jobs {
        service {
          in_memory = true
          timeout = 900
        }
      }

      usageLogging {
        token = "DB6DEF4F-678A-4F7D-9897-F920762887F1"
        environment = "demo1"
      }
    }
  }
}

